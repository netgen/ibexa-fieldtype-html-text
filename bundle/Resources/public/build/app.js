/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./bundle/Resources/public/tinymce/js/tinymce/plugins/link/plugin.js":
/*!***************************************************************************!*\
  !*** ./bundle/Resources/public/tinymce/js/tinymce/plugins/link/plugin.js ***!
  \***************************************************************************/
/***/ (() => {

function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
/**
 * TinyMCE version 6.7.0 (2023-08-30)
 */
!function () {
  "use strict";

  var e = tinymce.util.Tools.resolve("tinymce.PluginManager");
  var t = function t(e) {
      return function (t) {
        return function (e) {
          var t = _typeof(e);
          return null === e ? "null" : "object" === t && Array.isArray(e) ? "array" : "object" === t && (n = o = e, (r = String).prototype.isPrototypeOf(n) || (null === (l = o.constructor) || void 0 === l ? void 0 : l.name) === r.name) ? "string" : t;
          var n, o, r, l;
        }(t) === e;
      };
    },
    n = function n(e) {
      return function (t) {
        return _typeof(t) === e;
      };
    },
    o = t("string"),
    r = t("object"),
    l = t("array"),
    a = (null, function (e) {
      return null === e;
    });
  var i = n("boolean"),
    s = function s(e) {
      return !function (e) {
        return null == e;
      }(e);
    },
    c = n("function"),
    u = function u(e, t) {
      if (l(e)) {
        for (var _n = 0, _o = e.length; _n < _o; ++_n) if (!t(e[_n])) return !1;
        return !0;
      }
      return !1;
    },
    g = function g() {},
    d = function d(e, t) {
      return e === t;
    };
  var m = /*#__PURE__*/function () {
    function m(e, t) {
      _classCallCheck(this, m);
      this.tag = e, this.value = t;
    }
    _createClass(m, [{
      key: "fold",
      value: function fold(e, t) {
        return this.tag ? t(this.value) : e();
      }
    }, {
      key: "isSome",
      value: function isSome() {
        return this.tag;
      }
    }, {
      key: "isNone",
      value: function isNone() {
        return !this.tag;
      }
    }, {
      key: "map",
      value: function map(e) {
        return this.tag ? m.some(e(this.value)) : m.none();
      }
    }, {
      key: "bind",
      value: function bind(e) {
        return this.tag ? e(this.value) : m.none();
      }
    }, {
      key: "exists",
      value: function exists(e) {
        return this.tag && e(this.value);
      }
    }, {
      key: "forall",
      value: function forall(e) {
        return !this.tag || e(this.value);
      }
    }, {
      key: "filter",
      value: function filter(e) {
        return !this.tag || e(this.value) ? this : m.none();
      }
    }, {
      key: "getOr",
      value: function getOr(e) {
        return this.tag ? this.value : e;
      }
    }, {
      key: "or",
      value: function or(e) {
        return this.tag ? this : e;
      }
    }, {
      key: "getOrThunk",
      value: function getOrThunk(e) {
        return this.tag ? this.value : e();
      }
    }, {
      key: "orThunk",
      value: function orThunk(e) {
        return this.tag ? this : e();
      }
    }, {
      key: "getOrDie",
      value: function getOrDie(e) {
        if (this.tag) return this.value;
        throw new Error(null != e ? e : "Called getOrDie on None");
      }
    }, {
      key: "getOrNull",
      value: function getOrNull() {
        return this.tag ? this.value : null;
      }
    }, {
      key: "getOrUndefined",
      value: function getOrUndefined() {
        return this.value;
      }
    }, {
      key: "each",
      value: function each(e) {
        this.tag && e(this.value);
      }
    }, {
      key: "toArray",
      value: function toArray() {
        return this.tag ? [this.value] : [];
      }
    }, {
      key: "toString",
      value: function toString() {
        return this.tag ? "some(".concat(this.value, ")") : "none()";
      }
    }], [{
      key: "some",
      value: function some(e) {
        return new m(!0, e);
      }
    }, {
      key: "none",
      value: function none() {
        return m.singletonNone;
      }
    }, {
      key: "from",
      value: function from(e) {
        return s(e) ? m.some(e) : m.none();
      }
    }]);
    return m;
  }();
  m.singletonNone = new m(!1);
  var h = Array.prototype.indexOf,
    f = Array.prototype.push,
    p = function p(e) {
      var t = [];
      for (var _n2 = 0, _o2 = e.length; _n2 < _o2; ++_n2) {
        if (!l(e[_n2])) throw new Error("Arr.flatten item " + _n2 + " was not an array, input: " + e);
        f.apply(t, e[_n2]);
      }
      return t;
    },
    k = function k(e, t) {
      for (var _n3 = 0; _n3 < e.length; _n3++) {
        var _o3 = t(e[_n3], _n3);
        if (_o3.isSome()) return _o3;
      }
      return m.none();
    },
    v = function v(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : d;
      return e.exists(function (e) {
        return n(e, t);
      });
    },
    y = function y(e) {
      var t = [],
        n = function n(e) {
          t.push(e);
        };
      for (var _t = 0; _t < e.length; _t++) e[_t].each(n);
      return t;
    },
    x = function x(e, t) {
      return e ? m.some(t) : m.none();
    },
    b = function b(e) {
      return function (t) {
        return t.options.get(e);
      };
    },
    _ = b("link_assume_external_targets"),
    w = b("link_context_toolbar"),
    C = b("link_list"),
    O = b("link_default_target"),
    N = b("link_default_protocol"),
    A = b("link_target_list"),
    S = b("link_rel_list"),
    E = b("link_class_list"),
    T = b("link_title"),
    R = b("allow_unsafe_link_target"),
    P = b("link_quicklink");
  var L = tinymce.util.Tools.resolve("tinymce.util.Tools");
  var M = function M(e) {
      return o(e.value) ? e.value : "";
    },
    D = function D(e, t) {
      var n = [];
      return L.each(e, function (e) {
        var r = function (e) {
          return o(e.text) ? e.text : o(e.title) ? e.title : "";
        }(e);
        if (void 0 !== e.menu) {
          var _o4 = D(e.menu, t);
          n.push({
            text: r,
            items: _o4
          });
        } else {
          var _o5 = t(e);
          n.push({
            text: r,
            value: _o5
          });
        }
      }), n;
    },
    B = function B() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : M;
      return function (t) {
        return m.from(t).map(function (t) {
          return D(t, e);
        });
      };
    },
    I = function I(e) {
      return B(M)(e);
    },
    j = B,
    K = function K(e, t) {
      return function (n) {
        return {
          name: e,
          type: "listbox",
          label: t,
          items: n
        };
      };
    },
    U = M,
    q = Object.keys,
    F = Object.hasOwnProperty,
    V = function V(e, t) {
      return F.call(e, t);
    };
  var $ = tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),
    z = tinymce.util.Tools.resolve("tinymce.util.URI");
  var G = function G(e) {
      return s(e) && "a" === e.nodeName.toLowerCase();
    },
    H = function H(e) {
      return G(e) && !!Q(e);
    },
    J = function J(e, t) {
      if (e.collapsed) return [];
      {
        var _n4 = e.cloneContents(),
          _o6 = _n4.firstChild,
          _r = new $(_o6, _n4),
          _l = [];
        var _a = _o6;
        do {
          t(_a) && _l.push(_a);
        } while (_a = _r.next());
        return _l;
      }
    },
    W = function W(e) {
      return /^\w+:/i.test(e);
    },
    Q = function Q(e) {
      var t, n;
      return null !== (n = null !== (t = e.getAttribute("data-mce-href")) && void 0 !== t ? t : e.getAttribute("href")) && void 0 !== n ? n : "";
    },
    X = function X(e, t) {
      var n = ["noopener"],
        o = e ? e.split(/\s+/) : [],
        r = function r(e) {
          return e.filter(function (e) {
            return -1 === L.inArray(n, e);
          });
        },
        l = t ? function (e) {
          return (e = r(e)).length > 0 ? e.concat(n) : n;
        }(o) : r(o);
      return l.length > 0 ? function (e) {
        return L.trim(e.sort().join(" "));
      }(l) : "";
    },
    Y = function Y(e, t) {
      return t = t || te(e.selection.getRng())[0] || e.selection.getNode(), le(t) ? m.from(e.dom.select("a[href]", t)[0]) : m.from(e.dom.getParent(t, "a[href]"));
    },
    Z = function Z(e, t) {
      return Y(e, t).isSome();
    },
    ee = function ee(e, t) {
      return t.fold(function () {
        return e.getContent({
          format: "text"
        });
      }, function (e) {
        return e.innerText || e.textContent || "";
      }).replace(/\uFEFF/g, "");
    },
    te = function te(e) {
      return J(e, H);
    },
    ne = function ne(e) {
      return L.grep(e, H);
    },
    oe = function oe(e) {
      return ne(e).length > 0;
    },
    re = function re(e) {
      var t = e.schema.getTextInlineElements();
      if (Y(e).exists(function (e) {
        return e.hasAttribute("data-mce-block");
      })) return !1;
      var n = e.selection.getRng();
      return !!n.collapsed || 0 === J(n, function (e) {
        return 1 === e.nodeType && !G(e) && !V(t, e.nodeName.toLowerCase());
      }).length;
    },
    le = function le(e) {
      return s(e) && "FIGURE" === e.nodeName && /\bimage\b/i.test(e.className);
    },
    ae = function ae(e, t, n) {
      var o = e.selection.getNode(),
        r = Y(e, o),
        l = function (e, t) {
          var n = _objectSpread({}, t);
          if (0 === S(e).length && !R(e)) {
            var _e2 = X(n.rel, "_blank" === n.target);
            n.rel = _e2 || null;
          }
          return m.from(n.target).isNone() && !1 === A(e) && (n.target = O(e)), n.href = function (e, t) {
            return "http" !== t && "https" !== t || W(e) ? e : t + "://" + e;
          }(n.href, _(e)), n;
        }(e, function (e) {
          return t = ["title", "rel", "class", "target"], n = function n(t, _n5) {
            return e[_n5].each(function (e) {
              t[_n5] = e.length > 0 ? e : null;
            }), t;
          }, o = {
            href: e.href
          }, function (e, t) {
            for (var _n6 = 0, _o7 = e.length; _n6 < _o7; _n6++) t(e[_n6], _n6);
          }(t, function (e, t) {
            o = n(o, e);
          }), o;
          var t, n, o;
        }(n));
      e.undoManager.transact(function () {
        n.href === t.href && t.attach(), r.fold(function () {
          (function (e, t, n, o) {
            var r = e.dom;
            le(t) ? ge(r, t, o) : n.fold(function () {
              e.execCommand("mceInsertLink", !1, o);
            }, function (t) {
              e.insertContent(r.createHTML("a", o, r.encode(t)));
            });
          })(e, o, n.text, l);
        }, function (t) {
          e.focus(), function (e, t, n, o) {
            n.each(function (e) {
              V(t, "innerText") ? t.innerText = e : t.textContent = e;
            }), e.dom.setAttribs(t, o), e.selection.select(t);
          }(e, t, n.text, l);
        });
      });
    },
    ie = function ie(e) {
      var t = e["class"],
        n = e.href,
        o = e.rel,
        r = e.target,
        l = e.text,
        i = e.title;
      return function (e, t) {
        var n = {};
        var o;
        return function (e, t, n, o) {
          (function (e, t) {
            var n = q(e);
            for (var _o8 = 0, _r2 = n.length; _o8 < _r2; _o8++) {
              var _r3 = n[_o8];
              t(e[_r3], _r3);
            }
          })(e, function (e, r) {
            (t(e, r) ? n : o)(e, r);
          });
        }(e, function (e, t) {
          return !1 === a(e);
        }, (o = n, function (e, t) {
          o[t] = e;
        }), g), n;
      }({
        "class": t.getOrNull(),
        href: n,
        rel: o.getOrNull(),
        target: r.getOrNull(),
        text: l.getOrNull(),
        title: i.getOrNull()
      });
    },
    se = function se(e, t, n) {
      var o = function (e, t) {
        var n = e.options.get,
          o = {
            allow_html_data_urls: n("allow_html_data_urls"),
            allow_script_urls: n("allow_script_urls"),
            allow_svg_data_urls: n("allow_svg_data_urls")
          },
          r = t.href;
        return _objectSpread(_objectSpread({}, t), {}, {
          href: z.isDomSafe(r, "a", o) ? r : ""
        });
      }(e, n);
      e.hasPlugin("rtc", !0) ? e.execCommand("createlink", !1, ie(o)) : ae(e, t, o);
    },
    ce = function ce(e) {
      e.hasPlugin("rtc", !0) ? e.execCommand("unlink") : function (e) {
        e.undoManager.transact(function () {
          var t = e.selection.getNode();
          le(t) ? ue(e, t) : function (e) {
            var t = e.dom,
              n = e.selection,
              o = n.getBookmark(),
              r = n.getRng().cloneRange(),
              l = t.getParent(r.startContainer, "a[href]", e.getBody()),
              a = t.getParent(r.endContainer, "a[href]", e.getBody());
            l && r.setStartBefore(l), a && r.setEndAfter(a), n.setRng(r), e.execCommand("unlink"), n.moveToBookmark(o);
          }(e), e.focus();
        });
      }(e);
    },
    ue = function ue(e, t) {
      var n;
      var o = e.dom.select("img", t)[0];
      if (o) {
        var _r4 = e.dom.getParents(o, "a[href]", t)[0];
        _r4 && (null === (n = _r4.parentNode) || void 0 === n || n.insertBefore(o, _r4), e.dom.remove(_r4));
      }
    },
    ge = function ge(e, t, n) {
      var o;
      var r = e.select("img", t)[0];
      if (r) {
        var _t2 = e.create("a", n);
        null === (o = r.parentNode) || void 0 === o || o.insertBefore(_t2, r), _t2.appendChild(r);
      }
    },
    de = function de(e, t) {
      return k(t, function (t) {
        return function (e) {
          return V(t = e, n = "items") && void 0 !== t[n] && null !== t[n];
          var t, n;
        }(t) ? de(e, t.items) : x(t.value === e, t);
      });
    },
    me = function me(e, t) {
      var n = {
          text: e.text,
          title: e.title
        },
        o = function o(e, _o9) {
          var r = (l = t, a = _o9, "link" === a ? l.link : "anchor" === a ? l.anchor : m.none()).getOr([]);
          var l, a;
          return function (e, t, n, o) {
            var r = o[t],
              l = e.length > 0;
            return void 0 !== r ? de(r, n).map(function (t) {
              return {
                url: {
                  value: t.value,
                  meta: {
                    text: l ? e : t.text,
                    attach: g
                  }
                },
                text: l ? e : t.text
              };
            }) : m.none();
          }(n.text, _o9, r, e);
        };
      return {
        onChange: function onChange(e, t) {
          var r = t.name;
          return "url" === r ? function (e) {
            var t = (o = e.url, x(n.text.length <= 0, m.from(null === (r = o.meta) || void 0 === r ? void 0 : r.text).getOr(o.value)));
            var o, r;
            var l = function (e) {
              var t;
              return x(n.title.length <= 0, m.from(null === (t = e.meta) || void 0 === t ? void 0 : t.title).getOr(""));
            }(e.url);
            return t.isSome() || l.isSome() ? m.some(_objectSpread(_objectSpread({}, t.map(function (e) {
              return {
                text: e
              };
            }).getOr({})), l.map(function (e) {
              return {
                title: e
              };
            }).getOr({}))) : m.none();
          }(e()) : function (e, t) {
            return h.call(e, t);
          }(["anchor", "link"], r) > -1 ? o(e(), r) : "text" === r || "title" === r ? (n[r] = e()[r], m.none()) : m.none();
        }
      };
    };
  var he = tinymce.util.Tools.resolve("tinymce.util.Delay");
  var fe = function fe(e) {
      var t = e.href;
      return t.indexOf("@") > 0 && -1 === t.indexOf("/") && -1 === t.indexOf("mailto:") ? m.some({
        message: "The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",
        preprocess: function preprocess(e) {
          return _objectSpread(_objectSpread({}, e), {}, {
            href: "mailto:" + t
          });
        }
      }) : m.none();
    },
    pe = function pe(e, t) {
      return function (n) {
        var o = n.href;
        return 1 === e && !W(o) || 0 === e && /^\s*www(\.|\d\.)/i.test(o) ? m.some({
          message: "The URL you entered seems to be an external link. Do you want to add the required ".concat(t, ":// prefix?"),
          preprocess: function preprocess(e) {
            return _objectSpread(_objectSpread({}, e), {}, {
              href: t + "://" + o
            });
          }
        }) : m.none();
      };
    },
    ke = function ke(e) {
      var t = e.dom.select("a:not([href])"),
        n = p(function (e, t) {
          var n = e.length,
            o = new Array(n);
          for (var _r5 = 0; _r5 < n; _r5++) {
            var _n7 = e[_r5];
            o[_r5] = t(_n7, _r5);
          }
          return o;
        }(t, function (e) {
          var t = e.name || e.id;
          return t ? [{
            text: t,
            value: "#" + t
          }] : [];
        }));
      return n.length > 0 ? m.some([{
        text: "None",
        value: ""
      }].concat(n)) : m.none();
    },
    ve = function ve(e) {
      var t = E(e);
      return t.length > 0 ? I(t) : m.none();
    },
    ye = function ye(e) {
      try {
        return m.some(JSON.parse(e));
      } catch (e) {
        return m.none();
      }
    },
    xe = function xe(e, t) {
      var n = S(e);
      if (n.length > 0) {
        var _o10 = v(t, "_blank"),
          _r6 = function _r6(e) {
            return X(U(e), _o10);
          };
        return (!1 === R(e) ? j(_r6) : I)(n);
      }
      return m.none();
    },
    be = [{
      text: "Current window",
      value: ""
    }, {
      text: "New window",
      value: "_blank"
    }],
    _e = function _e(e) {
      var t = A(e);
      return l(t) ? I(t).orThunk(function () {
        return m.some(be);
      }) : !1 === t ? m.none() : m.some(be);
    },
    we = function we(e, t, n) {
      var o = e.getAttrib(t, n);
      return null !== o && o.length > 0 ? m.some(o) : m.none();
    },
    Ce = function Ce(e, t) {
      return function (e) {
        var t = function t(_t3) {
            return e.convertURL(_t3.value || _t3.url || "", "href");
          },
          n = C(e);
        return new Promise(function (e) {
          o(n) ? fetch(n).then(function (e) {
            return e.ok ? e.text().then(ye) : Promise.reject();
          }).then(e, function () {
            return e(m.none());
          }) : c(n) ? n(function (t) {
            return e(m.some(t));
          }) : e(m.from(n));
        }).then(function (e) {
          return e.bind(j(t)).map(function (e) {
            return e.length > 0 ? [{
              text: "None",
              value: ""
            }].concat(e) : e;
          });
        });
      }(e).then(function (n) {
        var o = function (e, t) {
          var n = e.dom,
            o = re(e) ? m.some(ee(e.selection, t)) : m.none(),
            r = t.bind(function (e) {
              return m.from(n.getAttrib(e, "href"));
            }),
            l = t.bind(function (e) {
              return m.from(n.getAttrib(e, "target"));
            }),
            a = t.bind(function (e) {
              return we(n, e, "rel");
            }),
            i = t.bind(function (e) {
              return we(n, e, "class");
            });
          return {
            url: r,
            text: o,
            title: t.bind(function (e) {
              return we(n, e, "title");
            }),
            target: l,
            rel: a,
            linkClass: i
          };
        }(e, t);
        return {
          anchor: o,
          catalogs: {
            targets: _e(e),
            rels: xe(e, o.target),
            classes: ve(e),
            anchor: ke(e),
            link: n
          },
          optNode: t,
          flags: {
            titleEnabled: T(e)
          }
        };
      });
    },
    Oe = function Oe(e) {
      var t = function (e) {
        var t = Y(e);
        return Ce(e, t);
      }(e);
      t.then(function (t) {
        var n = function (e, t) {
          return function (n) {
            var o = n.getData();
            if (!o.url.value) return ce(e), void n.close();
            var r = function r(e) {
                return m.from(o[e]).filter(function (n) {
                  return !v(t.anchor[e], n);
                });
              },
              l = {
                href: o.url.value,
                text: r("text"),
                target: r("target"),
                rel: r("rel"),
                "class": r("linkClass"),
                title: r("title")
              },
              a = {
                href: o.url.value,
                attach: void 0 !== o.url.meta && o.url.meta.attach ? o.url.meta.attach : g
              };
            (function (e, t) {
              return k([fe, pe(_(e), N(e))], function (e) {
                return e(t);
              }).fold(function () {
                return Promise.resolve(t);
              }, function (n) {
                return new Promise(function (o) {
                  (function (e, t, n) {
                    var o = e.selection.getRng();
                    he.setEditorTimeout(e, function () {
                      e.windowManager.confirm(t, function (t) {
                        e.selection.setRng(o), n(t);
                      });
                    });
                  })(e, n.message, function (e) {
                    o(e ? n.preprocess(t) : t);
                  });
                });
              });
            })(e, l).then(function (t) {
              se(e, a, t);
            }), n.close();
          };
        }(e, t);
        return function (e, t, n) {
          var o = e.anchor.text.map(function () {
              return {
                name: "text",
                type: "input",
                label: "Text to display"
              };
            }).toArray(),
            r = e.flags.titleEnabled ? [{
              name: "title",
              type: "input",
              label: "Title"
            }] : [],
            l = function (e, t) {
              var n = e.anchor,
                o = n.url.getOr("");
              return {
                url: {
                  value: o,
                  meta: {
                    original: {
                      value: o
                    }
                  }
                },
                text: n.text.getOr(""),
                title: n.title.getOr(""),
                anchor: o,
                link: o,
                rel: n.rel.getOr(""),
                target: n.target.or(t).getOr(""),
                linkClass: n.linkClass.getOr("")
              };
            }(e, m.from(O(n))),
            a = e.catalogs,
            i = me(l, a);
          return {
            title: "Insert/Edit Link",
            size: "normal",
            body: {
              type: "panel",
              items: p([[{
                name: "url",
                type: "urlinput",
                filetype: "file",
                label: "URL"
              }], o, r, y([a.anchor.map(K("anchor", "Anchors")), a.rels.map(K("rel", "Rel")), a.targets.map(K("target", "Open link in...")), a.link.map(K("link", "Link list")), a.classes.map(K("linkClass", "Class"))])])
            },
            buttons: [{
              type: "cancel",
              name: "cancel",
              text: "Cancel"
            }, {
              type: "submit",
              name: "save",
              text: "Save",
              primary: !0
            }],
            initialData: l,
            onChange: function onChange(e, _ref) {
              var t = _ref.name;
              i.onChange(e.getData, {
                name: t
              }).each(function (t) {
                e.setData(t);
              });
            },
            onSubmit: t
          };
        }(t, n, e);
      }).then(function (t) {
        e.windowManager.open(t);
      });
    };
  var Ne = tinymce.util.Tools.resolve("tinymce.util.VK");
  var Ae = function Ae(e, t) {
      return e.dom.getParent(t, "a[href]");
    },
    Se = function Se(e) {
      return Ae(e, e.selection.getStart());
    },
    Ee = function Ee(e, t) {
      if (t) {
        var _n8 = Q(t);
        if (/^#/.test(_n8)) {
          var _t4 = e.dom.select(_n8);
          _t4.length && e.selection.scrollIntoView(_t4[0], !0);
        } else (function (e) {
          var t = document.createElement("a");
          t.target = "_blank", t.href = e, t.rel = "noreferrer noopener";
          var n = document.createEvent("MouseEvents");
          n.initMouseEvent("click", !0, !0, window, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, null), function (e, t) {
            document.body.appendChild(e), e.dispatchEvent(t), document.body.removeChild(e);
          }(t, n);
        })(t.href);
      }
    },
    Te = function Te(e) {
      return function () {
        e.execCommand("mceLink", !1, {
          dialog: !0
        });
      };
    },
    Re = function Re(e) {
      return function () {
        Ee(e, Se(e));
      };
    },
    Pe = function Pe(e, t) {
      return e.on("NodeChange", t), function () {
        return e.off("NodeChange", t);
      };
    },
    Le = function Le(e) {
      return function (t) {
        var n = function n() {
          t.setActive(!e.mode.isReadOnly() && Z(e, e.selection.getNode())), t.setEnabled(e.selection.isEditable());
        };
        return n(), Pe(e, n);
      };
    },
    Me = function Me(e) {
      return function (t) {
        var n = function n() {
          t.setEnabled(e.selection.isEditable());
        };
        return n(), Pe(e, n);
      };
    },
    De = function De(e) {
      return function (t) {
        var n = function n() {
          return t.setEnabled(function (e) {
            return 1 === (e.selection.isCollapsed() ? ne(e.dom.getParents(e.selection.getStart())) : te(e.selection.getRng())).length;
          }(e));
        };
        return n(), Pe(e, n);
      };
    },
    Be = function Be(e) {
      return function (t) {
        var n = e.dom.getParents(e.selection.getStart()),
          o = function o(n) {
            t.setEnabled(function (t) {
              return oe(t) || (n = e.selection.getRng(), te(n).length > 0);
              var n;
            }(n) && e.selection.isEditable());
          };
        return o(n), Pe(e, function (e) {
          return o(e.parents);
        });
      };
    };
  e.add("link", function (e) {
    (function (e) {
      var t = e.options.register;
      t("link_assume_external_targets", {
        processor: function processor(e) {
          var t = o(e) || i(e);
          return t ? !0 === e ? {
            value: 1,
            valid: t
          } : "http" === e || "https" === e ? {
            value: e,
            valid: t
          } : {
            value: 0,
            valid: t
          } : {
            valid: !1,
            message: "Must be a string or a boolean."
          };
        },
        "default": !1
      }), t("link_context_toolbar", {
        processor: "boolean",
        "default": !1
      }), t("link_list", {
        processor: function processor(e) {
          return o(e) || c(e) || u(e, r);
        }
      }), t("link_default_target", {
        processor: "string"
      }), t("link_default_protocol", {
        processor: "string",
        "default": "https"
      }), t("link_target_list", {
        processor: function processor(e) {
          return i(e) || u(e, r);
        },
        "default": !0
      }), t("link_rel_list", {
        processor: "object[]",
        "default": []
      }), t("link_class_list", {
        processor: "object[]",
        "default": []
      }), t("link_title", {
        processor: "boolean",
        "default": !0
      }), t("allow_unsafe_link_target", {
        processor: "boolean",
        "default": !1
      }), t("link_quicklink", {
        processor: "boolean",
        "default": !1
      });
    })(e), function (e) {
      e.ui.registry.addToggleButton("link", {
        icon: "link",
        tooltip: "Insert/edit link",
        onAction: Te(e),
        onSetup: Le(e)
      }), e.ui.registry.addButton("openlink", {
        icon: "new-tab",
        tooltip: "Open link",
        onAction: Re(e),
        onSetup: De(e)
      }), e.ui.registry.addButton("unlink", {
        icon: "unlink",
        tooltip: "Remove link",
        onAction: function onAction() {
          return ce(e);
        },
        onSetup: Be(e)
      });
    }(e), function (e) {
      e.ui.registry.addMenuItem("openlink", {
        text: "Open link",
        icon: "new-tab",
        onAction: Re(e),
        onSetup: De(e)
      }), e.ui.registry.addMenuItem("link", {
        icon: "link",
        text: "Link...",
        shortcut: "Meta+K",
        onSetup: Me(e),
        onAction: Te(e)
      }), e.ui.registry.addMenuItem("unlink", {
        icon: "unlink",
        text: "Remove link",
        onAction: function onAction() {
          return ce(e);
        },
        onSetup: Be(e)
      });
    }(e), function (e) {
      e.ui.registry.addContextMenu("link", {
        update: function update(t) {
          return e.dom.isEditable(t) ? oe(e.dom.getParents(t, "a")) ? "link unlink openlink" : "link" : "";
        }
      });
    }(e), function (e) {
      var t = function t(_t5) {
        var n = e.selection.getNode();
        return _t5.setEnabled(Z(e, n)), g;
      };
      e.ui.registry.addContextForm("quicklink", {
        launch: {
          type: "contextformtogglebutton",
          icon: "link",
          tooltip: "Link",
          onSetup: Le(e)
        },
        label: "Link",
        predicate: function predicate(t) {
          return w(e) && Z(e, t);
        },
        initValue: function initValue() {
          return Y(e).fold(function () {
            return "";
          }, Q);
        },
        commands: [{
          type: "contextformtogglebutton",
          icon: "link",
          tooltip: "Link",
          primary: !0,
          onSetup: function onSetup(t) {
            var n = e.selection.getNode();
            return t.setActive(Z(e, n)), Le(e)(t);
          },
          onAction: function onAction(t) {
            var n = t.getValue(),
              o = function (t) {
                var n = Y(e),
                  o = re(e);
                if (n.isNone() && o) {
                  var _o11 = ee(e.selection, n);
                  return x(0 === _o11.length, t);
                }
                return m.none();
              }(n);
            se(e, {
              href: n,
              attach: g
            }, {
              href: n,
              text: o,
              title: m.none(),
              rel: m.none(),
              target: m.none(),
              "class": m.none()
            }), function (e) {
              e.selection.collapse(!1);
            }(e), t.hide();
          }
        }, {
          type: "contextformbutton",
          icon: "unlink",
          tooltip: "Remove link",
          onSetup: t,
          onAction: function onAction(t) {
            ce(e), t.hide();
          }
        }, {
          type: "contextformbutton",
          icon: "new-tab",
          tooltip: "Open link",
          onSetup: t,
          onAction: function onAction(t) {
            Re(e)(), t.hide();
          }
        }]
      });
    }(e), function (e) {
      e.on("click", function (t) {
        var n = Ae(e, t.target);
        n && Ne.metaKeyPressed(t) && (t.preventDefault(), Ee(e, n));
      }), e.on("keydown", function (t) {
        if (!t.isDefaultPrevented() && 13 === t.keyCode && function (e) {
          return !0 === e.altKey && !1 === e.shiftKey && !1 === e.ctrlKey && !1 === e.metaKey;
        }(t)) {
          var _n9 = Se(e);
          _n9 && (t.preventDefault(), Ee(e, _n9));
        }
      });
    }(e), function (e) {
      e.addCommand("mceLink", function (t, n) {
        !0 !== (null == n ? void 0 : n.dialog) && P(e) ? e.dispatch("contexttoolbar-show", {
          toolbarKey: "quicklink"
        }) : Oe(e);
      });
    }(e), function (e) {
      e.addShortcut("Meta+K", "", function () {
        e.execCommand("mceLink");
      });
    }(e);
  });
}();

/***/ }),

/***/ "./bundle/Resources/public/tinymce/js/tinymce/themes/silver/theme.min.js":
/*!*******************************************************************************!*\
  !*** ./bundle/Resources/public/tinymce/js/tinymce/themes/silver/theme.min.js ***!
  \*******************************************************************************/
/***/ (() => {

var _excluded = ["class", "style"],
  _excluded2 = ["events"],
  _excluded3 = ["attributes"],
  _excluded4 = ["primary"],
  _excluded5 = ["primary"];
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw new Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw new Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }
function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }
function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e36) { throw _e36; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e37) { didErr = true; err = _e37; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
/**
 * TinyMCE version 6.7.0 (2023-08-30)
 */
!function (_ii, _mO) {
  "use strict";

  var e = Object.getPrototypeOf,
    t = function t(e, _t2, o) {
      var n;
      return !!o(e, _t2.prototype) || (null === (n = e.constructor) || void 0 === n ? void 0 : n.name) === _t2.name;
    },
    o = function o(e) {
      return function (o) {
        return function (e) {
          var o = _typeof(e);
          return null === e ? "null" : "object" === o && Array.isArray(e) ? "array" : "object" === o && t(e, String, function (e, t) {
            return t.isPrototypeOf(e);
          }) ? "string" : o;
        }(o) === e;
      };
    },
    n = function n(e) {
      return function (t) {
        return _typeof(t) === e;
      };
    },
    s = function s(e) {
      return function (t) {
        return e === t;
      };
    },
    r = o("string"),
    a = o("object"),
    i = function i(o) {
      return function (o, n) {
        return a(o) && t(o, n, function (t, o) {
          return e(t) === o;
        });
      }(o, Object);
    },
    l = o("array"),
    c = s(null),
    d = n("boolean"),
    u = s(void 0),
    m = function m(e) {
      return null == e;
    },
    g = function g(e) {
      return !m(e);
    },
    p = n("function"),
    h = n("number"),
    f = function f(e, t) {
      if (l(e)) {
        for (var _o2 = 0, _n2 = e.length; _o2 < _n2; ++_o2) if (!t(e[_o2])) return !1;
        return !0;
      }
      return !1;
    },
    b = function b() {},
    v = function v(e) {
      return function () {
        return e();
      };
    },
    y = function y(e, t) {
      return function () {
        for (var _len = arguments.length, o = new Array(_len), _key = 0; _key < _len; _key++) {
          o[_key] = arguments[_key];
        }
        return e(t.apply(null, o));
      };
    },
    x = function x(e) {
      return function () {
        return e;
      };
    },
    w = function w(e) {
      return e;
    },
    S = function S(e, t) {
      return e === t;
    };
  function k(e) {
    for (var _len2 = arguments.length, t = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      t[_key2 - 1] = arguments[_key2];
    }
    return function () {
      for (var _len3 = arguments.length, o = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        o[_key3] = arguments[_key3];
      }
      var n = t.concat(o);
      return e.apply(null, n);
    };
  }
  var C = function C(e) {
      return function (t) {
        return !e(t);
      };
    },
    O = function O(e) {
      return function () {
        throw new Error(e);
      };
    },
    _ = function _(e) {
      return e();
    },
    T = x(!1),
    E = x(!0);
  var A = /*#__PURE__*/function () {
    function A(e, t) {
      _classCallCheck(this, A);
      this.tag = e, this.value = t;
    }
    _createClass(A, [{
      key: "fold",
      value: function fold(e, t) {
        return this.tag ? t(this.value) : e();
      }
    }, {
      key: "isSome",
      value: function isSome() {
        return this.tag;
      }
    }, {
      key: "isNone",
      value: function isNone() {
        return !this.tag;
      }
    }, {
      key: "map",
      value: function map(e) {
        return this.tag ? A.some(e(this.value)) : A.none();
      }
    }, {
      key: "bind",
      value: function bind(e) {
        return this.tag ? e(this.value) : A.none();
      }
    }, {
      key: "exists",
      value: function exists(e) {
        return this.tag && e(this.value);
      }
    }, {
      key: "forall",
      value: function forall(e) {
        return !this.tag || e(this.value);
      }
    }, {
      key: "filter",
      value: function filter(e) {
        return !this.tag || e(this.value) ? this : A.none();
      }
    }, {
      key: "getOr",
      value: function getOr(e) {
        return this.tag ? this.value : e;
      }
    }, {
      key: "or",
      value: function or(e) {
        return this.tag ? this : e;
      }
    }, {
      key: "getOrThunk",
      value: function getOrThunk(e) {
        return this.tag ? this.value : e();
      }
    }, {
      key: "orThunk",
      value: function orThunk(e) {
        return this.tag ? this : e();
      }
    }, {
      key: "getOrDie",
      value: function getOrDie(e) {
        if (this.tag) return this.value;
        throw new Error(null != e ? e : "Called getOrDie on None");
      }
    }, {
      key: "getOrNull",
      value: function getOrNull() {
        return this.tag ? this.value : null;
      }
    }, {
      key: "getOrUndefined",
      value: function getOrUndefined() {
        return this.value;
      }
    }, {
      key: "each",
      value: function each(e) {
        this.tag && e(this.value);
      }
    }, {
      key: "toArray",
      value: function toArray() {
        return this.tag ? [this.value] : [];
      }
    }, {
      key: "toString",
      value: function toString() {
        return this.tag ? "some(".concat(this.value, ")") : "none()";
      }
    }], [{
      key: "some",
      value: function some(e) {
        return new A(!0, e);
      }
    }, {
      key: "none",
      value: function none() {
        return A.singletonNone;
      }
    }, {
      key: "from",
      value: function from(e) {
        return g(e) ? A.some(e) : A.none();
      }
    }]);
    return A;
  }();
  A.singletonNone = new A(!1);
  var M = Array.prototype.slice,
    D = Array.prototype.indexOf,
    B = Array.prototype.push,
    F = function F(e, t) {
      return D.call(e, t);
    },
    I = function I(e, t) {
      var o = F(e, t);
      return -1 === o ? A.none() : A.some(o);
    },
    R = function R(e, t) {
      return F(e, t) > -1;
    },
    N = function N(e, t) {
      for (var _o3 = 0, _n3 = e.length; _o3 < _n3; _o3++) if (t(e[_o3], _o3)) return !0;
      return !1;
    },
    V = function V(e, t) {
      var o = [];
      for (var _n4 = 0; _n4 < e; _n4++) o.push(t(_n4));
      return o;
    },
    z = function z(e, t) {
      var o = [];
      for (var _n5 = 0; _n5 < e.length; _n5 += t) {
        var _s2 = M.call(e, _n5, _n5 + t);
        o.push(_s2);
      }
      return o;
    },
    H = function H(e, t) {
      var o = e.length,
        n = new Array(o);
      for (var _s3 = 0; _s3 < o; _s3++) {
        var _o4 = e[_s3];
        n[_s3] = t(_o4, _s3);
      }
      return n;
    },
    L = function L(e, t) {
      for (var _o5 = 0, _n6 = e.length; _o5 < _n6; _o5++) t(e[_o5], _o5);
    },
    P = function P(e, t) {
      var o = [],
        n = [];
      for (var _s4 = 0, _r2 = e.length; _s4 < _r2; _s4++) {
        var _r3 = e[_s4];
        (t(_r3, _s4) ? o : n).push(_r3);
      }
      return {
        pass: o,
        fail: n
      };
    },
    U = function U(e, t) {
      var o = [];
      for (var _n7 = 0, _s5 = e.length; _n7 < _s5; _n7++) {
        var _s6 = e[_n7];
        t(_s6, _n7) && o.push(_s6);
      }
      return o;
    },
    W = function W(e, t, o) {
      return function (e, t) {
        for (var _o6 = e.length - 1; _o6 >= 0; _o6--) t(e[_o6], _o6);
      }(e, function (e, n) {
        o = t(o, e, n);
      }), o;
    },
    j = function j(e, t, o) {
      return L(e, function (e, n) {
        o = t(o, e, n);
      }), o;
    },
    G = function G(e, t) {
      return function (e, t, o) {
        for (var _n8 = 0, _s7 = e.length; _n8 < _s7; _n8++) {
          var _s8 = e[_n8];
          if (t(_s8, _n8)) return A.some(_s8);
          if (o(_s8, _n8)) break;
        }
        return A.none();
      }(e, t, T);
    },
    $ = function $(e, t) {
      for (var _o7 = 0, _n9 = e.length; _o7 < _n9; _o7++) if (t(e[_o7], _o7)) return A.some(_o7);
      return A.none();
    },
    q = function q(e) {
      var t = [];
      for (var _o8 = 0, _n10 = e.length; _o8 < _n10; ++_o8) {
        if (!l(e[_o8])) throw new Error("Arr.flatten item " + _o8 + " was not an array, input: " + e);
        B.apply(t, e[_o8]);
      }
      return t;
    },
    X = function X(e, t) {
      return q(H(e, t));
    },
    Y = function Y(e, t) {
      for (var _o9 = 0, _n11 = e.length; _o9 < _n11; ++_o9) if (!0 !== t(e[_o9], _o9)) return !1;
      return !0;
    },
    K = function K(e) {
      var t = M.call(e, 0);
      return t.reverse(), t;
    },
    J = function J(e, t) {
      return U(e, function (e) {
        return !R(t, e);
      });
    },
    Z = function Z(e, t) {
      var o = {};
      for (var _n12 = 0, _s9 = e.length; _n12 < _s9; _n12++) {
        var _s10 = e[_n12];
        o[String(_s10)] = t(_s10, _n12);
      }
      return o;
    },
    Q = function Q(e) {
      return [e];
    },
    ee = function ee(e, t) {
      var o = M.call(e, 0);
      return o.sort(t), o;
    },
    te = function te(e, t) {
      return t >= 0 && t < e.length ? A.some(e[t]) : A.none();
    },
    oe = function oe(e) {
      return te(e, 0);
    },
    ne = function ne(e) {
      return te(e, e.length - 1);
    },
    se = p(Array.from) ? Array.from : function (e) {
      return M.call(e);
    },
    re = function re(e, t) {
      for (var _o10 = 0; _o10 < e.length; _o10++) {
        var _n13 = t(e[_o10], _o10);
        if (_n13.isSome()) return _n13;
      }
      return A.none();
    },
    ae = Object.keys,
    ie = Object.hasOwnProperty,
    le = function le(e, t) {
      var o = ae(e);
      for (var _n14 = 0, _s11 = o.length; _n14 < _s11; _n14++) {
        var _s12 = o[_n14];
        t(e[_s12], _s12);
      }
    },
    ce = function ce(e, t) {
      return de(e, function (e, o) {
        return {
          k: o,
          v: t(e, o)
        };
      });
    },
    de = function de(e, t) {
      var o = {};
      return le(e, function (e, n) {
        var s = t(e, n);
        o[s.k] = s.v;
      }), o;
    },
    ue = function ue(e) {
      return function (t, o) {
        e[o] = t;
      };
    },
    me = function me(e, t, o, n) {
      le(e, function (e, s) {
        (t(e, s) ? o : n)(e, s);
      });
    },
    ge = function ge(e, t) {
      var o = {};
      return me(e, t, ue(o), b), o;
    },
    pe = function pe(e, t) {
      var o = [];
      return le(e, function (e, n) {
        o.push(t(e, n));
      }), o;
    },
    he = function he(e, t) {
      var o = ae(e);
      for (var _n15 = 0, _s13 = o.length; _n15 < _s13; _n15++) {
        var _s14 = o[_n15],
          _r4 = e[_s14];
        if (t(_r4, _s14, e)) return A.some(_r4);
      }
      return A.none();
    },
    fe = function fe(e) {
      return pe(e, w);
    },
    be = function be(e, t) {
      return ve(e, t) ? A.from(e[t]) : A.none();
    },
    ve = function ve(e, t) {
      return ie.call(e, t);
    },
    ye = function ye(e, t) {
      return ve(e, t) && void 0 !== e[t] && null !== e[t];
    },
    xe = function xe(e, t) {
      var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : S;
      return e.exists(function (e) {
        return o(e, t);
      });
    },
    we = function we(e) {
      var t = [],
        o = function o(e) {
          t.push(e);
        };
      for (var _t3 = 0; _t3 < e.length; _t3++) e[_t3].each(o);
      return t;
    },
    Se = function Se(e, t, o) {
      return e.isSome() && t.isSome() ? A.some(o(e.getOrDie(), t.getOrDie())) : A.none();
    },
    ke = function ke(e, t) {
      return null != e ? A.some(t(e)) : A.none();
    },
    Ce = function Ce(e, t) {
      return e ? A.some(t) : A.none();
    },
    Oe = function Oe(e, t, o) {
      return "" === t || e.length >= t.length && e.substr(o, o + t.length) === t;
    },
    _e = function _e(e, t) {
      return Ee(e, t) ? function (e, t) {
        return e.substring(t);
      }(e, t.length) : e;
    },
    Te = function Te(e, t) {
      var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var n = arguments.length > 3 ? arguments[3] : undefined;
      var s = e.indexOf(t, o);
      return -1 !== s && (!!u(n) || s + t.length <= n);
    },
    Ee = function Ee(e, t) {
      return Oe(e, t, 0);
    },
    Ae = function Ae(e, t) {
      return Oe(e, t, e.length - t.length);
    },
    Me = (Ao = /^\s+|\s+$/g, function (e) {
      return e.replace(Ao, "");
    }),
    De = function De(e) {
      return e.length > 0;
    },
    Be = function Be(e) {
      return void 0 !== e.style && p(e.style.getPropertyValue);
    },
    Fe = function Fe(e) {
      if (null == e) throw new Error("Node cannot be null or undefined");
      return {
        dom: e
      };
    },
    Ie = function Ie(e, t) {
      var o = (t || document).createElement("div");
      if (o.innerHTML = e, !o.hasChildNodes() || o.childNodes.length > 1) {
        var _t4 = "HTML does not have a single root node";
        throw console.error(_t4, e), new Error(_t4);
      }
      return Fe(o.childNodes[0]);
    },
    Re = function Re(e, t) {
      var o = (t || document).createElement(e);
      return Fe(o);
    },
    Ne = function Ne(e, t) {
      var o = (t || document).createTextNode(e);
      return Fe(o);
    },
    Ve = Fe,
    ze = "undefined" != typeof window ? window : Function("return this;")(),
    He = function He(e, t) {
      return function (e, t) {
        var o = null != t ? t : ze;
        for (var _t5 = 0; _t5 < e.length && null != o; ++_t5) o = o[e[_t5]];
        return o;
      }(e.split("."), t);
    },
    Le = Object.getPrototypeOf,
    Pe = function Pe(e) {
      var t = He("ownerDocument.defaultView", e);
      return a(e) && (function (e) {
        return function (e, t) {
          var o = function (e, t) {
            return He(e, t);
          }(e, t);
          if (null == o) throw new Error(e + " not available on this browser");
          return o;
        }("HTMLElement", e);
      }(t).prototype.isPrototypeOf(e) || /^HTML\w*Element$/.test(Le(e).constructor.name));
    },
    Ue = function Ue(e) {
      return e.dom.nodeName.toLowerCase();
    },
    We = function We(e) {
      return function (t) {
        return function (e) {
          return e.dom.nodeType;
        }(t) === e;
      };
    },
    je = function je(e) {
      return Ge(e) && Pe(e.dom);
    },
    Ge = We(1),
    $e = We(3),
    qe = We(9),
    Xe = We(11),
    Ye = function Ye(e) {
      return function (t) {
        return Ge(t) && Ue(t) === e;
      };
    },
    Ke = function Ke(e, t) {
      var o = e.dom;
      if (1 !== o.nodeType) return !1;
      {
        var _e2 = o;
        if (void 0 !== _e2.matches) return _e2.matches(t);
        if (void 0 !== _e2.msMatchesSelector) return _e2.msMatchesSelector(t);
        if (void 0 !== _e2.webkitMatchesSelector) return _e2.webkitMatchesSelector(t);
        if (void 0 !== _e2.mozMatchesSelector) return _e2.mozMatchesSelector(t);
        throw new Error("Browser lacks native selectors");
      }
    },
    Je = function Je(e) {
      return 1 !== e.nodeType && 9 !== e.nodeType && 11 !== e.nodeType || 0 === e.childElementCount;
    },
    Ze = function Ze(e, t) {
      return e.dom === t.dom;
    },
    Qe = function Qe(e, t) {
      var o = e.dom,
        n = t.dom;
      return o !== n && o.contains(n);
    },
    et = function et(e) {
      return Ve(e.dom.ownerDocument);
    },
    tt = function tt(e) {
      return qe(e) ? e : et(e);
    },
    ot = function ot(e) {
      return Ve(tt(e).dom.documentElement);
    },
    nt = function nt(e) {
      return Ve(tt(e).dom.defaultView);
    },
    st = function st(e) {
      return A.from(e.dom.parentNode).map(Ve);
    },
    rt = function rt(e) {
      return A.from(e.dom.parentElement).map(Ve);
    },
    at = function at(e) {
      return A.from(e.dom.offsetParent).map(Ve);
    },
    it = function it(e) {
      return H(e.dom.childNodes, Ve);
    },
    lt = function lt(e, t) {
      var o = e.dom.childNodes;
      return A.from(o[t]).map(Ve);
    },
    ct = function ct(e) {
      return lt(e, 0);
    },
    dt = function dt(e, t) {
      return {
        element: e,
        offset: t
      };
    },
    ut = function ut(e, t) {
      var o = it(e);
      return o.length > 0 && t < o.length ? dt(o[t], 0) : dt(e, t);
    },
    mt = function mt(e) {
      return Xe(e) && g(e.dom.host);
    },
    gt = p(Element.prototype.attachShadow) && p(Node.prototype.getRootNode),
    pt = x(gt),
    ht = gt ? function (e) {
      return Ve(e.dom.getRootNode());
    } : tt,
    ft = function ft(e) {
      return mt(e) ? e : Ve(tt(e).dom.body);
    },
    bt = function bt(e) {
      var t = ht(e);
      return mt(t) ? A.some(t) : A.none();
    },
    vt = function vt(e) {
      return Ve(e.dom.host);
    },
    yt = function yt(e) {
      var t = $e(e) ? e.dom.parentNode : e.dom;
      if (null == t || null === t.ownerDocument) return !1;
      var o = t.ownerDocument;
      return bt(Ve(t)).fold(function () {
        return o.body.contains(t);
      }, (n = yt, s = vt, function (e) {
        return n(s(e));
      }));
      var n, s;
    },
    xt = function xt() {
      return wt(Ve(document));
    },
    wt = function wt(e) {
      var t = e.dom.body;
      if (null == t) throw new Error("Body is not available yet");
      return Ve(t);
    },
    St = function St(e, t, o) {
      if (!(r(o) || d(o) || h(o))) throw console.error("Invalid call to Attribute.set. Key ", t, ":: Value ", o, ":: Element ", e), new Error("Attribute value was not simple");
      e.setAttribute(t, o + "");
    },
    kt = function kt(e, t, o) {
      St(e.dom, t, o);
    },
    Ct = function Ct(e, t) {
      var o = e.dom;
      le(t, function (e, t) {
        St(o, t, e);
      });
    },
    Ot = function Ot(e, t) {
      var o = e.dom.getAttribute(t);
      return null === o ? void 0 : o;
    },
    _t = function _t(e, t) {
      return A.from(Ot(e, t));
    },
    Tt = function Tt(e, t) {
      var o = e.dom;
      return !(!o || !o.hasAttribute) && o.hasAttribute(t);
    },
    Et = function Et(e, t) {
      e.dom.removeAttribute(t);
    },
    At = function At(e, t, o) {
      if (!r(o)) throw console.error("Invalid call to CSS.set. Property ", t, ":: Value ", o, ":: Element ", e), new Error("CSS value must be a string: " + o);
      Be(e) && e.style.setProperty(t, o);
    },
    Mt = function Mt(e, t) {
      Be(e) && e.style.removeProperty(t);
    },
    Dt = function Dt(e, t, o) {
      var n = e.dom;
      At(n, t, o);
    },
    Bt = function Bt(e, t) {
      var o = e.dom;
      le(t, function (e, t) {
        At(o, t, e);
      });
    },
    Ft = function Ft(e, t) {
      var o = e.dom;
      le(t, function (e, t) {
        e.fold(function () {
          Mt(o, t);
        }, function (e) {
          At(o, t, e);
        });
      });
    },
    It = function It(e, t) {
      var o = e.dom,
        n = window.getComputedStyle(o).getPropertyValue(t);
      return "" !== n || yt(e) ? n : Rt(o, t);
    },
    Rt = function Rt(e, t) {
      return Be(e) ? e.style.getPropertyValue(t) : "";
    },
    Nt = function Nt(e, t) {
      var o = e.dom,
        n = Rt(o, t);
      return A.from(n).filter(function (e) {
        return e.length > 0;
      });
    },
    Vt = function Vt(e) {
      var t = {},
        o = e.dom;
      if (Be(o)) for (var _e3 = 0; _e3 < o.style.length; _e3++) {
        var _n16 = o.style.item(_e3);
        t[_n16] = o.style[_n16];
      }
      return t;
    },
    zt = function zt(e, t, o) {
      var n = Re(e);
      return Dt(n, t, o), Nt(n, t).isSome();
    },
    Ht = function Ht(e, t) {
      var o = e.dom;
      Mt(o, t), xe(_t(e, "style").map(Me), "") && Et(e, "style");
    },
    Lt = function Lt(e) {
      return e.dom.offsetWidth;
    },
    Pt = function Pt(e, t) {
      var o = function o(_o11) {
          var n = t(_o11);
          if (n <= 0 || null === n) {
            var _t6 = It(_o11, e);
            return parseFloat(_t6) || 0;
          }
          return n;
        },
        n = function n(e, t) {
          return j(t, function (t, o) {
            var n = It(e, o),
              s = void 0 === n ? 0 : parseInt(n, 10);
            return isNaN(s) ? t : t + s;
          }, 0);
        };
      return {
        set: function set(t, o) {
          if (!h(o) && !o.match(/^[0-9]+$/)) throw new Error(e + ".set accepts only positive integer values. Value was " + o);
          var n = t.dom;
          Be(n) && (n.style[e] = o + "px");
        },
        get: o,
        getOuter: o,
        aggregate: n,
        max: function max(e, t, o) {
          var s = n(e, o);
          return t > s ? t - s : 0;
        }
      };
    },
    Ut = Pt("height", function (e) {
      var t = e.dom;
      return yt(e) ? t.getBoundingClientRect().height : t.offsetHeight;
    }),
    Wt = function Wt(e) {
      return Ut.get(e);
    },
    jt = function jt(e) {
      return Ut.getOuter(e);
    },
    Gt = function Gt(e, t) {
      return {
        left: e,
        top: t,
        translate: function translate(o, n) {
          return Gt(e + o, t + n);
        }
      };
    },
    $t = Gt,
    qt = function qt(e, t) {
      return void 0 !== e ? e : void 0 !== t ? t : 0;
    },
    Xt = function Xt(e) {
      var t = e.dom.ownerDocument,
        o = t.body,
        n = t.defaultView,
        s = t.documentElement;
      if (o === e.dom) return $t(o.offsetLeft, o.offsetTop);
      var r = qt(null == n ? void 0 : n.pageYOffset, s.scrollTop),
        a = qt(null == n ? void 0 : n.pageXOffset, s.scrollLeft),
        i = qt(s.clientTop, o.clientTop),
        l = qt(s.clientLeft, o.clientLeft);
      return Yt(e).translate(a - l, r - i);
    },
    Yt = function Yt(e) {
      var t = e.dom,
        o = t.ownerDocument.body;
      return o === t ? $t(o.offsetLeft, o.offsetTop) : yt(e) ? function (e) {
        var t = e.getBoundingClientRect();
        return $t(t.left, t.top);
      }(t) : $t(0, 0);
    },
    Kt = Pt("width", function (e) {
      return e.dom.offsetWidth;
    }),
    Jt = function Jt(e) {
      return Kt.get(e);
    },
    Zt = function Zt(e) {
      return Kt.getOuter(e);
    },
    Qt = function Qt(e) {
      var t,
        o = !1;
      return function () {
        for (var _len4 = arguments.length, n = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
          n[_key4] = arguments[_key4];
        }
        return o || (o = !0, t = e.apply(null, n)), t;
      };
    },
    eo = function eo() {
      return to(0, 0);
    },
    to = function to(e, t) {
      return {
        major: e,
        minor: t
      };
    },
    oo = {
      nu: to,
      detect: function detect(e, t) {
        var o = String(t).toLowerCase();
        return 0 === e.length ? eo() : function (e, t) {
          var o = function (e, t) {
            for (var _o12 = 0; _o12 < e.length; _o12++) {
              var _n17 = e[_o12];
              if (_n17.test(t)) return _n17;
            }
          }(e, t);
          if (!o) return {
            major: 0,
            minor: 0
          };
          var n = function n(e) {
            return Number(t.replace(o, "$" + e));
          };
          return to(n(1), n(2));
        }(e, o);
      },
      unknown: eo
    },
    no = function no(e, t) {
      var o = String(t).toLowerCase();
      return G(e, function (e) {
        return e.search(o);
      });
    },
    so = /.*?version\/\ ?([0-9]+)\.([0-9]+).*/,
    ro = function ro(e) {
      return function (t) {
        return Te(t, e);
      };
    },
    ao = [{
      name: "Edge",
      versionRegexes: [/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],
      search: function search(e) {
        return Te(e, "edge/") && Te(e, "chrome") && Te(e, "safari") && Te(e, "applewebkit");
      }
    }, {
      name: "Chromium",
      brand: "Chromium",
      versionRegexes: [/.*?chrome\/([0-9]+)\.([0-9]+).*/, so],
      search: function search(e) {
        return Te(e, "chrome") && !Te(e, "chromeframe");
      }
    }, {
      name: "IE",
      versionRegexes: [/.*?msie\ ?([0-9]+)\.([0-9]+).*/, /.*?rv:([0-9]+)\.([0-9]+).*/],
      search: function search(e) {
        return Te(e, "msie") || Te(e, "trident");
      }
    }, {
      name: "Opera",
      versionRegexes: [so, /.*?opera\/([0-9]+)\.([0-9]+).*/],
      search: ro("opera")
    }, {
      name: "Firefox",
      versionRegexes: [/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],
      search: ro("firefox")
    }, {
      name: "Safari",
      versionRegexes: [so, /.*?cpu os ([0-9]+)_([0-9]+).*/],
      search: function search(e) {
        return (Te(e, "safari") || Te(e, "mobile/")) && Te(e, "applewebkit");
      }
    }],
    io = [{
      name: "Windows",
      search: ro("win"),
      versionRegexes: [/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]
    }, {
      name: "iOS",
      search: function search(e) {
        return Te(e, "iphone") || Te(e, "ipad");
      },
      versionRegexes: [/.*?version\/\ ?([0-9]+)\.([0-9]+).*/, /.*cpu os ([0-9]+)_([0-9]+).*/, /.*cpu iphone os ([0-9]+)_([0-9]+).*/]
    }, {
      name: "Android",
      search: ro("android"),
      versionRegexes: [/.*?android\ ?([0-9]+)\.([0-9]+).*/]
    }, {
      name: "macOS",
      search: ro("mac os x"),
      versionRegexes: [/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]
    }, {
      name: "Linux",
      search: ro("linux"),
      versionRegexes: []
    }, {
      name: "Solaris",
      search: ro("sunos"),
      versionRegexes: []
    }, {
      name: "FreeBSD",
      search: ro("freebsd"),
      versionRegexes: []
    }, {
      name: "ChromeOS",
      search: ro("cros"),
      versionRegexes: [/.*?chrome\/([0-9]+)\.([0-9]+).*/]
    }],
    lo = {
      browsers: x(ao),
      oses: x(io)
    },
    co = "Edge",
    uo = "Chromium",
    mo = "Opera",
    go = "Firefox",
    po = "Safari",
    ho = function ho(e) {
      var t = e.current,
        o = e.version,
        n = function n(e) {
          return function () {
            return t === e;
          };
        };
      return {
        current: t,
        version: o,
        isEdge: n(co),
        isChromium: n(uo),
        isIE: n("IE"),
        isOpera: n(mo),
        isFirefox: n(go),
        isSafari: n(po)
      };
    },
    fo = function fo() {
      return ho({
        current: void 0,
        version: oo.unknown()
      });
    },
    bo = ho,
    vo = (x(co), x(uo), x("IE"), x(mo), x(go), x(po), "Windows"),
    yo = "Android",
    xo = "Linux",
    wo = "macOS",
    So = "Solaris",
    ko = "FreeBSD",
    Co = "ChromeOS",
    Oo = function Oo(e) {
      var t = e.current,
        o = e.version,
        n = function n(e) {
          return function () {
            return t === e;
          };
        };
      return {
        current: t,
        version: o,
        isWindows: n(vo),
        isiOS: n("iOS"),
        isAndroid: n(yo),
        isMacOS: n(wo),
        isLinux: n(xo),
        isSolaris: n(So),
        isFreeBSD: n(ko),
        isChromeOS: n(Co)
      };
    },
    _o = function _o() {
      return Oo({
        current: void 0,
        version: oo.unknown()
      });
    },
    To = Oo,
    Eo = (x(vo), x("iOS"), x(yo), x(xo), x(wo), x(So), x(ko), x(Co), function (e) {
      return window.matchMedia(e).matches;
    });
  var Ao;
  var Mo = Qt(function () {
    return function (e, t, o) {
      var n = lo.browsers(),
        s = lo.oses(),
        r = t.bind(function (e) {
          return function (e, t) {
            return re(t.brands, function (t) {
              var o = t.brand.toLowerCase();
              return G(e, function (e) {
                var t;
                return o === (null === (t = e.brand) || void 0 === t ? void 0 : t.toLowerCase());
              }).map(function (e) {
                return {
                  current: e.name,
                  version: oo.nu(parseInt(t.version, 10), 0)
                };
              });
            });
          }(n, e);
        }).orThunk(function () {
          return function (e, t) {
            return no(e, t).map(function (e) {
              var o = oo.detect(e.versionRegexes, t);
              return {
                current: e.name,
                version: o
              };
            });
          }(n, e);
        }).fold(fo, bo),
        a = function (e, t) {
          return no(e, t).map(function (e) {
            var o = oo.detect(e.versionRegexes, t);
            return {
              current: e.name,
              version: o
            };
          });
        }(s, e).fold(_o, To),
        i = function (e, t, o, n) {
          var s = e.isiOS() && !0 === /ipad/i.test(o),
            r = e.isiOS() && !s,
            a = e.isiOS() || e.isAndroid(),
            i = a || n("(pointer:coarse)"),
            l = s || !r && a && n("(min-device-width:768px)"),
            c = r || a && !l,
            d = t.isSafari() && e.isiOS() && !1 === /safari/i.test(o),
            u = !c && !l && !d;
          return {
            isiPad: x(s),
            isiPhone: x(r),
            isTablet: x(l),
            isPhone: x(c),
            isTouch: x(i),
            isAndroid: e.isAndroid,
            isiOS: e.isiOS,
            isWebView: x(d),
            isDesktop: x(u)
          };
        }(a, r, e, o);
      return {
        browser: r,
        os: a,
        deviceType: i
      };
    }(navigator.userAgent, A.from(navigator.userAgentData), Eo);
  });
  var Do = function Do() {
      return Mo();
    },
    Bo = function Bo(e) {
      var t = Ve(function (e) {
          if (pt() && g(e.target)) {
            var _t7 = Ve(e.target);
            if (Ge(_t7) && function (e) {
              return g(e.dom.shadowRoot);
            }(_t7) && e.composed && e.composedPath) {
              var _t8 = e.composedPath();
              if (_t8) return oe(_t8);
            }
          }
          return A.from(e.target);
        }(e).getOr(e.target)),
        o = function o() {
          return e.stopPropagation();
        },
        n = function n() {
          return e.preventDefault();
        },
        s = y(n, o);
      return function (e, t, o, n, s, r, a) {
        return {
          target: e,
          x: t,
          y: o,
          stop: n,
          prevent: s,
          kill: r,
          raw: a
        };
      }(t, e.clientX, e.clientY, o, n, s, e);
    },
    Fo = function Fo(e, t, o, n, s) {
      var r = function (e, t) {
        return function (o) {
          e(o) && t(Bo(o));
        };
      }(o, n);
      return e.dom.addEventListener(t, r, s), {
        unbind: k(Io, e, t, r, s)
      };
    },
    Io = function Io(e, t, o, n) {
      e.dom.removeEventListener(t, o, n);
    },
    Ro = function Ro(e, t) {
      st(e).each(function (o) {
        o.dom.insertBefore(t.dom, e.dom);
      });
    },
    No = function No(e, t) {
      var o = function (e) {
        return A.from(e.dom.nextSibling).map(Ve);
      }(e);
      o.fold(function () {
        st(e).each(function (e) {
          zo(e, t);
        });
      }, function (e) {
        Ro(e, t);
      });
    },
    Vo = function Vo(e, t) {
      ct(e).fold(function () {
        zo(e, t);
      }, function (o) {
        e.dom.insertBefore(t.dom, o.dom);
      });
    },
    zo = function zo(e, t) {
      e.dom.appendChild(t.dom);
    },
    Ho = function Ho(e, t) {
      L(t, function (t) {
        zo(e, t);
      });
    },
    Lo = function Lo(e) {
      e.dom.textContent = "", L(it(e), function (e) {
        Po(e);
      });
    },
    Po = function Po(e) {
      var t = e.dom;
      null !== t.parentNode && t.parentNode.removeChild(t);
    },
    Uo = function Uo(e) {
      var t = void 0 !== e ? e.dom : document,
        o = t.body.scrollLeft || t.documentElement.scrollLeft,
        n = t.body.scrollTop || t.documentElement.scrollTop;
      return $t(o, n);
    },
    Wo = function Wo(e, t, o) {
      var n = (void 0 !== o ? o.dom : document).defaultView;
      n && n.scrollTo(e, t);
    },
    jo = function jo(e, t, o, n) {
      return {
        x: e,
        y: t,
        width: o,
        height: n,
        right: e + o,
        bottom: t + n
      };
    },
    Go = function Go(e) {
      var t = void 0 === e ? window : e,
        o = t.document,
        n = Uo(Ve(o));
      return function (e) {
        var t = void 0 === e ? window : e;
        return Do().browser.isFirefox() ? A.none() : A.from(t.visualViewport);
      }(t).fold(function () {
        var e = t.document.documentElement,
          o = e.clientWidth,
          s = e.clientHeight;
        return jo(n.left, n.top, o, s);
      }, function (e) {
        return jo(Math.max(e.pageLeft, n.left), Math.max(e.pageTop, n.top), e.width, e.height);
      });
    },
    $o = function $o() {
      return Ve(document);
    },
    qo = function qo(e, t) {
      return e.view(t).fold(x([]), function (t) {
        var o = e.owner(t),
          n = qo(e, o);
        return [t].concat(n);
      });
    };
  var Xo = Object.freeze({
    __proto__: null,
    view: function view(e) {
      var t;
      return (e.dom === document ? A.none() : A.from(null === (t = e.dom.defaultView) || void 0 === t ? void 0 : t.frameElement)).map(Ve);
    },
    owner: function owner(e) {
      return et(e);
    }
  });
  var Yo = function Yo(e) {
      var t = $o(),
        o = Uo(t),
        n = function (e, t) {
          var o = t.owner(e),
            n = qo(t, o);
          return A.some(n);
        }(e, Xo);
      return n.fold(k(Xt, e), function (t) {
        var n = Yt(e),
          s = W(t, function (e, t) {
            var o = Yt(t);
            return {
              left: e.left + o.left,
              top: e.top + o.top
            };
          }, {
            left: 0,
            top: 0
          });
        return $t(s.left + n.left + o.left, s.top + n.top + o.top);
      });
    },
    Ko = function Ko(e, t, o, n) {
      return {
        x: e,
        y: t,
        width: o,
        height: n,
        right: e + o,
        bottom: t + n
      };
    },
    Jo = function Jo(e) {
      var t = Xt(e),
        o = Zt(e),
        n = jt(e);
      return Ko(t.left, t.top, o, n);
    },
    Zo = function Zo(e) {
      var t = Yo(e),
        o = Zt(e),
        n = jt(e);
      return Ko(t.left, t.top, o, n);
    },
    Qo = function Qo(e, t) {
      var o = Math.max(e.x, t.x),
        n = Math.max(e.y, t.y),
        s = Math.min(e.right, t.right),
        r = Math.min(e.bottom, t.bottom);
      return Ko(o, n, s - o, r - n);
    },
    en = function en() {
      return Go(window);
    };
  var tn = tinymce.util.Tools.resolve("tinymce.ThemeManager");
  var on = function on(e) {
      var t = function t(_t9) {
          return _t9(e);
        },
        o = x(e),
        n = function n() {
          return s;
        },
        s = {
          tag: !0,
          inner: e,
          fold: function fold(t, o) {
            return o(e);
          },
          isValue: E,
          isError: T,
          map: function map(t) {
            return sn.value(t(e));
          },
          mapError: n,
          bind: t,
          exists: t,
          forall: t,
          getOr: o,
          or: n,
          getOrThunk: o,
          orThunk: n,
          getOrDie: o,
          each: function each(t) {
            t(e);
          },
          toOptional: function toOptional() {
            return A.some(e);
          }
        };
      return s;
    },
    nn = function nn(e) {
      var t = function t() {
          return o;
        },
        o = {
          tag: !1,
          inner: e,
          fold: function fold(t, o) {
            return t(e);
          },
          isValue: T,
          isError: E,
          map: t,
          mapError: function mapError(t) {
            return sn.error(t(e));
          },
          bind: t,
          exists: T,
          forall: E,
          getOr: w,
          or: w,
          getOrThunk: _,
          orThunk: _,
          getOrDie: O(String(e)),
          each: b,
          toOptional: A.none
        };
      return o;
    },
    sn = {
      value: on,
      error: nn,
      fromOption: function fromOption(e, t) {
        return e.fold(function () {
          return nn(t);
        }, on);
      }
    };
  var rn;
  !function (e) {
    e[e.Error = 0] = "Error", e[e.Value = 1] = "Value";
  }(rn || (rn = {}));
  var an = function an(e, t, o) {
      return e.stype === rn.Error ? t(e.serror) : o(e.svalue);
    },
    ln = function ln(e) {
      return {
        stype: rn.Value,
        svalue: e
      };
    },
    cn = function cn(e) {
      return {
        stype: rn.Error,
        serror: e
      };
    },
    dn = ln,
    un = cn,
    mn = an,
    gn = function gn(e, t, o, n) {
      return {
        tag: "field",
        key: e,
        newKey: t,
        presence: o,
        prop: n
      };
    },
    pn = function pn(e, t, o) {
      switch (e.tag) {
        case "field":
          return t(e.key, e.newKey, e.presence, e.prop);
        case "custom":
          return o(e.newKey, e.instantiator);
      }
    },
    hn = function hn(e) {
      return function () {
        if (0 === arguments.length) throw new Error("Can't merge zero objects");
        var o = {};
        for (var _n18 = 0; _n18 < arguments.length; _n18++) {
          var _s15 = _n18 < 0 || arguments.length <= _n18 ? undefined : arguments[_n18];
          for (var _t10 in _s15) ve(_s15, _t10) && (o[_t10] = e(o[_t10], _s15[_t10]));
        }
        return o;
      };
    },
    fn = hn(function (e, t) {
      return i(e) && i(t) ? fn(e, t) : t;
    }),
    bn = hn(function (e, t) {
      return t;
    }),
    vn = function vn(e) {
      return {
        tag: "defaultedThunk",
        process: e
      };
    },
    yn = function yn(e) {
      return vn(x(e));
    },
    xn = function xn(e) {
      return {
        tag: "mergeWithThunk",
        process: e
      };
    },
    wn = function wn(e) {
      var t = function (e) {
        var t = [],
          o = [];
        return L(e, function (e) {
          an(e, function (e) {
            return o.push(e);
          }, function (e) {
            return t.push(e);
          });
        }), {
          values: t,
          errors: o
        };
      }(e);
      return t.errors.length > 0 ? (o = t.errors, y(un, q)(o)) : dn(t.values);
      var o;
    },
    Sn = function Sn(e) {
      return a(e) && ae(e).length > 100 ? " removed due to size" : JSON.stringify(e, null, 2);
    },
    kn = function kn(e, t) {
      return un([{
        path: e,
        getErrorInfo: t
      }]);
    },
    Cn = function Cn(e) {
      return {
        extract: function extract(t, o) {
          return function (e, t) {
            return e.stype === rn.Error ? t(e.serror) : e;
          }(e(o), function (e) {
            return function (e, t) {
              return kn(e, x(t));
            }(t, e);
          });
        },
        toString: x("val")
      };
    },
    On = Cn(dn),
    _n = function _n(e, t, o, n) {
      return n(be(e, t).getOrThunk(function () {
        return o(e);
      }));
    },
    Tn = function Tn(e, t, o, n, s) {
      var r = function r(e) {
          return s.extract(t.concat([n]), e);
        },
        a = function a(e) {
          return e.fold(function () {
            return dn(A.none());
          }, function (e) {
            return function (e, t) {
              return e.stype === rn.Value ? {
                stype: rn.Value,
                svalue: t(e.svalue)
              } : e;
            }(s.extract(t.concat([n]), e), A.some);
          });
        };
      switch (e.tag) {
        case "required":
          return function (e, t, o, n) {
            return be(t, o).fold(function () {
              return function (e, t, o) {
                return kn(e, function () {
                  return 'Could not find valid *required* value for "' + t + '" in ' + Sn(o);
                });
              }(e, o, t);
            }, n);
          }(t, o, n, r);
        case "defaultedThunk":
          return _n(o, n, e.process, r);
        case "option":
          return function (e, t, o) {
            return o(be(e, t));
          }(o, n, a);
        case "defaultedOptionThunk":
          return function (e, t, o, n) {
            return n(be(e, t).map(function (t) {
              return !0 === t ? o(e) : t;
            }));
          }(o, n, e.process, a);
        case "mergeWithThunk":
          return _n(o, n, x({}), function (t) {
            var n = fn(e.process(o), t);
            return r(n);
          });
      }
    },
    En = function En(e) {
      return {
        extract: function extract(t, o) {
          return e().extract(t, o);
        },
        toString: function toString() {
          return e().toString();
        }
      };
    },
    An = function An(e) {
      return ae(ge(e, g));
    },
    Mn = function Mn(e) {
      var t = Dn(e),
        o = W(e, function (e, t) {
          return pn(t, function (t) {
            return fn(e, _defineProperty({}, t, !0));
          }, x(e));
        }, {});
      return {
        extract: function extract(e, n) {
          var s = d(n) ? [] : An(n),
            r = U(s, function (e) {
              return !ye(o, e);
            });
          return 0 === r.length ? t.extract(e, n) : function (e, t) {
            return kn(e, function () {
              return "There are unsupported fields: [" + t.join(", ") + "] specified";
            });
          }(e, r);
        },
        toString: t.toString
      };
    },
    Dn = function Dn(e) {
      return {
        extract: function extract(t, o) {
          return function (e, t, o) {
            var n = {},
              s = [];
            var _iterator = _createForOfIteratorHelper(o),
              _step;
            try {
              for (_iterator.s(); !(_step = _iterator.n()).done;) {
                var _r5 = _step.value;
                pn(_r5, function (o, r, a, i) {
                  var l = Tn(a, e, t, o, i);
                  mn(l, function (e) {
                    s.push.apply(s, _toConsumableArray(e));
                  }, function (e) {
                    n[r] = e;
                  });
                }, function (e, o) {
                  n[e] = o(t);
                });
              }
            } catch (err) {
              _iterator.e(err);
            } finally {
              _iterator.f();
            }
            return s.length > 0 ? un(s) : dn(n);
          }(t, o, e);
        },
        toString: function toString() {
          var t = H(e, function (e) {
            return pn(e, function (e, t, o, n) {
              return e + " -> " + n.toString();
            }, function (e, t) {
              return "state(" + e + ")";
            });
          });
          return "obj{\n" + t.join("\n") + "}";
        }
      };
    },
    Bn = function Bn(e) {
      return {
        extract: function extract(t, o) {
          var n = H(o, function (o, n) {
            return e.extract(t.concat(["[" + n + "]"]), o);
          });
          return wn(n);
        },
        toString: function toString() {
          return "array(" + e.toString() + ")";
        }
      };
    },
    Fn = function Fn(e, t) {
      var o = void 0 !== t ? t : w;
      return {
        extract: function extract(t, n) {
          var s = [];
          var _iterator2 = _createForOfIteratorHelper(e),
            _step2;
          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var _r6 = _step2.value;
              var _e4 = _r6.extract(t, n);
              if (_e4.stype === rn.Value) return {
                stype: rn.Value,
                svalue: o(_e4.svalue)
              };
              s.push(_e4);
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }
          return wn(s);
        },
        toString: function toString() {
          return "oneOf(" + H(e, function (e) {
            return e.toString();
          }).join(", ") + ")";
        }
      };
    },
    In = function In(e, t) {
      return {
        extract: function extract(o, n) {
          var s = ae(n),
            r = function (t, o) {
              return Bn(Cn(e)).extract(t, o);
            }(o, s);
          return function (e, t) {
            return e.stype === rn.Value ? t(e.svalue) : e;
          }(r, function (e) {
            var s = H(e, function (e) {
              return gn(e, e, {
                tag: "required",
                process: {}
              }, t);
            });
            return Dn(s).extract(o, n);
          });
        },
        toString: function toString() {
          return "setOf(" + t.toString() + ")";
        }
      };
    },
    Rn = y(Bn, Dn),
    Nn = x(On),
    Vn = function Vn(e, t) {
      return Cn(function (o) {
        var n = _typeof(o);
        return e(o) ? dn(o) : un("Expected type: ".concat(t, " but got: ").concat(n));
      });
    },
    zn = Vn(h, "number"),
    Hn = Vn(r, "string"),
    Ln = Vn(d, "boolean"),
    Pn = Vn(p, "function"),
    Un = function Un(e) {
      if (Object(e) !== e) return !0;
      switch ({}.toString.call(e).slice(8, -1)) {
        case "Boolean":
        case "Number":
        case "String":
        case "Date":
        case "RegExp":
        case "Blob":
        case "FileList":
        case "ImageData":
        case "ImageBitmap":
        case "ArrayBuffer":
          return !0;
        case "Array":
        case "Object":
          return Object.keys(e).every(function (t) {
            return Un(e[t]);
          });
        default:
          return !1;
      }
    },
    Wn = Cn(function (e) {
      return Un(e) ? dn(e) : un("Expected value to be acceptable for sending via postMessage");
    }),
    jn = function jn(e, t) {
      return {
        extract: function extract(o, n) {
          return be(n, e).fold(function () {
            return function (e, t) {
              return kn(e, function () {
                return 'Choice schema did not contain choice key: "' + t + '"';
              });
            }(o, e);
          }, function (e) {
            return function (e, t, o, n) {
              return be(o, n).fold(function () {
                return function (e, t, o) {
                  return kn(e, function () {
                    return 'The chosen schema: "' + o + '" did not exist in branches: ' + Sn(t);
                  });
                }(e, o, n);
              }, function (o) {
                return o.extract(e.concat(["branch: " + n]), t);
              });
            }(o, n, t, e);
          });
        },
        toString: function toString() {
          return "chooseOn(" + e + "). Possible values: " + ae(t);
        }
      };
    },
    Gn = function Gn(e) {
      return Cn(function (t) {
        return e(t).fold(un, dn);
      });
    },
    $n = function $n(e, t) {
      return In(function (t) {
        return e(t).fold(cn, ln);
      }, t);
    },
    qn = function qn(e, t, o) {
      return n = function (e, t, o) {
        return function (e, t) {
          return e.stype === rn.Error ? {
            stype: rn.Error,
            serror: t(e.serror)
          } : e;
        }(t.extract([e], o), function (e) {
          return {
            input: o,
            errors: e
          };
        });
      }(e, t, o), an(n, sn.error, sn.value);
      var n;
    },
    Xn = function Xn(e) {
      return e.fold(function (e) {
        throw new Error(Kn(e));
      }, w);
    },
    Yn = function Yn(e, t, o) {
      return Xn(qn(e, t, o));
    },
    Kn = function Kn(e) {
      return "Errors: \n" + function (e) {
        var t = e.length > 10 ? e.slice(0, 10).concat([{
          path: [],
          getErrorInfo: x("... (only showing first ten failures)")
        }]) : e;
        return H(t, function (e) {
          return "Failed path: (" + e.path.join(" > ") + ")\n" + e.getErrorInfo();
        });
      }(e.errors).join("\n") + "\n\nInput object: " + Sn(e.input);
    },
    Jn = function Jn(e, t) {
      return jn(e, ce(t, Dn));
    },
    Zn = function Zn(e, t) {
      return function (e, t) {
        var o = Qt(t);
        return {
          extract: function extract(e, t) {
            return o().extract(e, t);
          },
          toString: function toString() {
            return o().toString();
          }
        };
      }(0, t);
    },
    Qn = gn,
    es = function es(e, t) {
      return {
        tag: "custom",
        newKey: e,
        instantiator: t
      };
    },
    ts = function ts(e) {
      return Gn(function (t) {
        return R(e, t) ? sn.value(t) : sn.error("Unsupported value: \"".concat(t, "\", choose one of \"").concat(e.join(", "), "\"."));
      });
    },
    os = function os(e) {
      return Qn(e, e, {
        tag: "required",
        process: {}
      }, Nn());
    },
    ns = function ns(e, t) {
      return Qn(e, e, {
        tag: "required",
        process: {}
      }, t);
    },
    ss = function ss(e) {
      return ns(e, zn);
    },
    rs = function rs(e) {
      return ns(e, Hn);
    },
    as = function as(e, t) {
      return Qn(e, e, {
        tag: "required",
        process: {}
      }, ts(t));
    },
    is = function is(e) {
      return ns(e, Pn);
    },
    ls = function ls(e, t) {
      return Qn(e, e, {
        tag: "required",
        process: {}
      }, Dn(t));
    },
    cs = function cs(e, t) {
      return Qn(e, e, {
        tag: "required",
        process: {}
      }, Rn(t));
    },
    ds = function ds(e, t) {
      return Qn(e, e, {
        tag: "required",
        process: {}
      }, Bn(t));
    },
    us = function us(e) {
      return Qn(e, e, {
        tag: "option",
        process: {}
      }, Nn());
    },
    ms = function ms(e, t) {
      return Qn(e, e, {
        tag: "option",
        process: {}
      }, t);
    },
    gs = function gs(e) {
      return ms(e, zn);
    },
    ps = function ps(e) {
      return ms(e, Hn);
    },
    hs = function hs(e, t) {
      return ms(e, ts(t));
    },
    fs = function fs(e) {
      return ms(e, Pn);
    },
    bs = function bs(e, t) {
      return ms(e, Bn(t));
    },
    vs = function vs(e, t) {
      return ms(e, Dn(t));
    },
    ys = function ys(e, t) {
      return Qn(e, e, yn(t), Nn());
    },
    xs = function xs(e, t, o) {
      return Qn(e, e, yn(t), o);
    },
    ws = function ws(e, t) {
      return xs(e, t, zn);
    },
    Ss = function Ss(e, t) {
      return xs(e, t, Hn);
    },
    ks = function ks(e, t, o) {
      return xs(e, t, ts(o));
    },
    Cs = function Cs(e, t) {
      return xs(e, t, Ln);
    },
    Os = function Os(e, t) {
      return xs(e, t, Pn);
    },
    _s = function _s(e, t, o) {
      return xs(e, t, Bn(o));
    },
    Ts = function Ts(e, t, o) {
      return xs(e, t, Dn(o));
    },
    Es = function Es(e) {
      var t = e;
      return {
        get: function get() {
          return t;
        },
        set: function set(e) {
          t = e;
        }
      };
    },
    As = function As(e) {
      if (!l(e)) throw new Error("cases must be an array");
      if (0 === e.length) throw new Error("there must be at least one case");
      var t = [],
        o = {};
      return L(e, function (n, s) {
        var r = ae(n);
        if (1 !== r.length) throw new Error("one and only one name per case");
        var a = r[0],
          i = n[a];
        if (void 0 !== o[a]) throw new Error("duplicate key detected:" + a);
        if ("cata" === a) throw new Error("cannot have a case named cata (sorry)");
        if (!l(i)) throw new Error("case arguments must be an array");
        t.push(a), o[a] = function () {
          for (var _len5 = arguments.length, o = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
            o[_key5] = arguments[_key5];
          }
          var n = o.length;
          if (n !== i.length) throw new Error("Wrong number of arguments to case " + a + ". Expected " + i.length + " (" + i + "), got " + n);
          return {
            fold: function fold() {
              for (var _len6 = arguments.length, t = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
                t[_key6] = arguments[_key6];
              }
              if (t.length !== e.length) throw new Error("Wrong number of arguments to fold. Expected " + e.length + ", got " + t.length);
              return t[s].apply(null, o);
            },
            match: function match(e) {
              var n = ae(e);
              if (t.length !== n.length) throw new Error("Wrong number of arguments to match. Expected: " + t.join(",") + "\nActual: " + n.join(","));
              if (!Y(t, function (e) {
                return R(n, e);
              })) throw new Error("Not all branches were specified when using match. Specified: " + n.join(", ") + "\nRequired: " + t.join(", "));
              return e[a].apply(null, o);
            },
            log: function log(e) {
              console.log(e, {
                constructors: t,
                constructor: a,
                params: o
              });
            }
          };
        };
      }), o;
    };
  As([{
    bothErrors: ["error1", "error2"]
  }, {
    firstError: ["error1", "value2"]
  }, {
    secondError: ["value1", "error2"]
  }, {
    bothValues: ["value1", "value2"]
  }]);
  var Ms = function Ms(e, t) {
      return function (e, t) {
        return _defineProperty({}, e, t);
      }(e, t);
    },
    Ds = function Ds(e) {
      return function (e) {
        var t = {};
        return L(e, function (e) {
          t[e.key] = e.value;
        }), t;
      }(e);
    },
    Bs = function Bs(e) {
      return p(e) ? e : T;
    },
    Fs = function Fs(e, t, o) {
      var n = e.dom;
      var s = Bs(o);
      for (; n.parentNode;) {
        n = n.parentNode;
        var _e5 = Ve(n),
          _o13 = t(_e5);
        if (_o13.isSome()) return _o13;
        if (s(_e5)) break;
      }
      return A.none();
    },
    Is = function Is(e, t, o) {
      var n = t(e),
        s = Bs(o);
      return n.orThunk(function () {
        return s(e) ? A.none() : Fs(e, t, s);
      });
    },
    Rs = function Rs(e, t) {
      return Ze(e.element, t.event.target);
    },
    Ns = {
      can: E,
      abort: T,
      run: b
    },
    Vs = function Vs(e) {
      if (!ye(e, "can") && !ye(e, "abort") && !ye(e, "run")) throw new Error("EventHandler defined by: " + JSON.stringify(e, null, 2) + " does not have can, abort, or run!");
      return _objectSpread(_objectSpread({}, Ns), e);
    },
    zs = x,
    Hs = zs("touchstart"),
    Ls = zs("touchmove"),
    Ps = zs("touchend"),
    Us = zs("touchcancel"),
    Ws = zs("mousedown"),
    js = zs("mousemove"),
    Gs = zs("mouseout"),
    $s = zs("mouseup"),
    qs = zs("mouseover"),
    Xs = zs("focusin"),
    Ys = zs("focusout"),
    Ks = zs("keydown"),
    Js = zs("keyup"),
    Zs = zs("input"),
    Qs = zs("change"),
    er = zs("click"),
    tr = zs("transitioncancel"),
    or = zs("transitionend"),
    nr = zs("transitionstart"),
    sr = zs("selectstart"),
    rr = function rr(e) {
      return x("alloy." + e);
    },
    ar = {
      tap: rr("tap")
    },
    ir = rr("focus"),
    lr = rr("blur.post"),
    cr = rr("paste.post"),
    dr = rr("receive"),
    ur = rr("execute"),
    mr = rr("focus.item"),
    gr = ar.tap,
    pr = rr("longpress"),
    hr = rr("sandbox.close"),
    fr = rr("typeahead.cancel"),
    br = rr("system.init"),
    vr = rr("system.touchmove"),
    yr = rr("system.touchend"),
    xr = rr("system.scroll"),
    wr = rr("system.resize"),
    Sr = rr("system.attached"),
    kr = rr("system.detached"),
    Cr = rr("system.dismissRequested"),
    Or = rr("system.repositionRequested"),
    _r = rr("focusmanager.shifted"),
    Tr = rr("slotcontainer.visibility"),
    Er = rr("system.external.element.scroll"),
    Ar = rr("change.tab"),
    Mr = rr("dismiss.tab"),
    Dr = rr("highlight"),
    Br = rr("dehighlight"),
    Fr = function Fr(e, t) {
      Vr(e, e.element, t, {});
    },
    Ir = function Ir(e, t, o) {
      Vr(e, e.element, t, o);
    },
    Rr = function Rr(e) {
      Fr(e, ur());
    },
    Nr = function Nr(e, t, o) {
      Vr(e, t, o, {});
    },
    Vr = function Vr(e, t, o, n) {
      var s = _objectSpread({
        target: t
      }, n);
      e.getSystem().triggerEvent(o, t, s);
    },
    zr = function zr(e, t, o, n) {
      e.getSystem().triggerEvent(o, t, n.event);
    },
    Hr = function Hr(e) {
      return Ds(e);
    },
    Lr = function Lr(e, t) {
      return {
        key: e,
        value: Vs({
          abort: t
        })
      };
    },
    Pr = function Pr(e) {
      return {
        key: e,
        value: Vs({
          run: function run(e, t) {
            t.event.prevent();
          }
        })
      };
    },
    Ur = function Ur(e, t) {
      return {
        key: e,
        value: Vs({
          run: t
        })
      };
    },
    Wr = function Wr(e, t, o) {
      return {
        key: e,
        value: Vs({
          run: function run(e, n) {
            t.apply(void 0, [e, n].concat(o));
          }
        })
      };
    },
    jr = function jr(e) {
      return function (t) {
        return {
          key: e,
          value: Vs({
            run: function run(e, o) {
              Rs(e, o) && t(e, o);
            }
          })
        };
      };
    },
    Gr = function Gr(e, t, o) {
      return function (e, t) {
        return Ur(e, function (o, n) {
          o.getSystem().getByUid(t).each(function (t) {
            zr(t, t.element, e, n);
          });
        });
      }(e, t.partUids[o]);
    },
    $r = function $r(e, t) {
      return Ur(e, function (e, o) {
        var n = o.event,
          s = e.getSystem().getByDom(n.target).getOrThunk(function () {
            return Is(n.target, function (t) {
              return e.getSystem().getByDom(t).toOptional();
            }, T).getOr(e);
          });
        t(e, s, o);
      });
    },
    qr = function qr(e) {
      return Ur(e, function (e, t) {
        t.cut();
      });
    },
    Xr = function Xr(e) {
      return Ur(e, function (e, t) {
        t.stop();
      });
    },
    Yr = function Yr(e, t) {
      return jr(e)(t);
    },
    Kr = jr(Sr()),
    Jr = jr(kr()),
    Zr = jr(br()),
    Qr = (ra = ur(), function (e) {
      return Ur(ra, e);
    }),
    ea = function ea(e) {
      return e.dom.innerHTML;
    },
    ta = function ta(e, t) {
      var o = et(e).dom,
        n = Ve(o.createDocumentFragment()),
        s = function (e, t) {
          var o = (t || document).createElement("div");
          return o.innerHTML = e, it(Ve(o));
        }(t, o);
      Ho(n, s), Lo(e), zo(e, n);
    },
    oa = function oa(e) {
      return mt(e) ? "#shadow-root" : function (e) {
        var t = Re("div"),
          o = Ve(e.dom.cloneNode(!0));
        return zo(t, o), ea(t);
      }(function (e) {
        return function (e, t) {
          return Ve(e.dom.cloneNode(!1));
        }(e);
      }(e));
    },
    na = function na(e) {
      return oa(e);
    },
    sa = Hr([function (e, t) {
      return {
        key: e,
        value: Vs({
          can: function can(e, t) {
            var o = t.event,
              n = o.originator,
              s = o.target;
            return !function (e, t, o) {
              return Ze(t, e.element) && !Ze(t, o);
            }(e, n, s) || (console.warn(ir() + " did not get interpreted by the desired target. \nOriginator: " + na(n) + "\nTarget: " + na(s) + "\nCheck the " + ir() + " event handlers"), !1);
          }
        })
      };
    }(ir())]);
  var ra,
    aa = Object.freeze({
      __proto__: null,
      events: sa
    });
  var ia = 0;
  var la = function la(e) {
      var t = new Date().getTime(),
        o = Math.floor(1e9 * Math.random());
      return ia++, e + "_" + o + ia + String(t);
    },
    ca = x("alloy-id-"),
    da = x("data-alloy-id"),
    ua = ca(),
    ma = da(),
    ga = function ga(e, t) {
      Object.defineProperty(e.dom, ma, {
        value: t,
        writable: !0
      });
    },
    pa = function pa(e) {
      var t = Ge(e) ? e.dom[ma] : null;
      return A.from(t);
    },
    ha = function ha(e) {
      return la(e);
    },
    fa = w,
    ba = function ba(e) {
      var t = function t(_t11) {
          return "The component must be in a context to execute: ".concat(_t11) + (e ? "\n" + na(e().element) + " is not in context." : "");
        },
        o = function o(e) {
          return function () {
            throw new Error(t(e));
          };
        },
        n = function n(e) {
          return function () {
            console.warn(t(e));
          };
        };
      return {
        debugInfo: x("fake"),
        triggerEvent: n("triggerEvent"),
        triggerFocus: n("triggerFocus"),
        triggerEscape: n("triggerEscape"),
        broadcast: n("broadcast"),
        broadcastOn: n("broadcastOn"),
        broadcastEvent: n("broadcastEvent"),
        build: o("build"),
        buildOrPatch: o("buildOrPatch"),
        addToWorld: o("addToWorld"),
        removeFromWorld: o("removeFromWorld"),
        addToGui: o("addToGui"),
        removeFromGui: o("removeFromGui"),
        getByUid: o("getByUid"),
        getByDom: o("getByDom"),
        isConnected: T
      };
    },
    va = ba(),
    ya = function ya(e) {
      return H(e, function (e) {
        return Ae(e, "/*") ? e.substring(0, e.length - 2) : e;
      });
    },
    xa = function xa(e, t) {
      var o = e.toString(),
        n = o.indexOf(")") + 1,
        s = o.indexOf("("),
        r = o.substring(s + 1, n - 1).split(/,\s*/);
      return e.toFunctionAnnotation = function () {
        return {
          name: t,
          parameters: ya(r)
        };
      }, e;
    },
    wa = la("alloy-premade"),
    Sa = function Sa(e) {
      return Object.defineProperty(e.element.dom, wa, {
        value: e.uid,
        writable: !0
      }), Ms(wa, e);
    },
    ka = function ka(e) {
      return be(e, wa);
    },
    Ca = function Ca(e) {
      return function (e, t) {
        var o = t.toString(),
          n = o.indexOf(")") + 1,
          s = o.indexOf("("),
          r = o.substring(s + 1, n - 1).split(/,\s*/);
        return e.toFunctionAnnotation = function () {
          return {
            name: "OVERRIDE",
            parameters: ya(r.slice(1))
          };
        }, e;
      }(function (t) {
        for (var _len7 = arguments.length, o = new Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {
          o[_key7 - 1] = arguments[_key7];
        }
        return e.apply(void 0, [t.getApis(), t].concat(o));
      }, e);
    },
    Oa = {
      init: function init() {
        return _a({
          readState: x("No State required")
        });
      }
    },
    _a = function _a(e) {
      return e;
    },
    Ta = function Ta(e, t) {
      var o = {};
      return le(e, function (e, n) {
        le(e, function (e, s) {
          var r = be(o, s).getOr([]);
          o[s] = r.concat([t(n, e)]);
        });
      }), o;
    },
    Ea = function Ea(e) {
      return {
        classes: u(e.classes) ? [] : e.classes,
        attributes: u(e.attributes) ? {} : e.attributes,
        styles: u(e.styles) ? {} : e.styles
      };
    },
    Aa = function Aa(e) {
      return e.cHandler;
    },
    Ma = function Ma(e, t) {
      return {
        name: e,
        handler: t
      };
    },
    Da = function Da(e, t) {
      var o = {};
      return L(e, function (e) {
        o[e.name()] = e.handlers(t);
      }), o;
    },
    Ba = function Ba(e, t, o) {
      var n = t[o];
      return n ? function (e, t, o, n) {
        try {
          var _s16 = ee(o, function (o, s) {
            var r = o[t],
              a = s[t],
              i = n.indexOf(r),
              l = n.indexOf(a);
            if (-1 === i) throw new Error("The ordering for " + e + " does not have an entry for " + r + ".\nOrder specified: " + JSON.stringify(n, null, 2));
            if (-1 === l) throw new Error("The ordering for " + e + " does not have an entry for " + a + ".\nOrder specified: " + JSON.stringify(n, null, 2));
            return i < l ? -1 : l < i ? 1 : 0;
          });
          return sn.value(_s16);
        } catch (e) {
          return sn.error([e]);
        }
      }("Event: " + o, "name", e, n).map(function (e) {
        return function (e) {
          var t = function (e, t) {
              return function () {
                for (var _len8 = arguments.length, t = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
                  t[_key8] = arguments[_key8];
                }
                return j(e, function (e, o) {
                  return e && function (e) {
                    return e.can;
                  }(o).apply(void 0, t);
                }, !0);
              };
            }(e),
            o = function (e, t) {
              return function () {
                for (var _len9 = arguments.length, t = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
                  t[_key9] = arguments[_key9];
                }
                return j(e, function (e, o) {
                  return e || function (e) {
                    return e.abort;
                  }(o).apply(void 0, t);
                }, !1);
              };
            }(e);
          return {
            can: t,
            abort: o,
            run: function run() {
              for (var _len10 = arguments.length, t = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {
                t[_key10] = arguments[_key10];
              }
              L(e, function (e) {
                e.run.apply(void 0, t);
              });
            }
          };
        }(H(e, function (e) {
          return e.handler;
        }));
      }) : function (e, t) {
        return sn.error(["The event (" + e + ') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: ' + JSON.stringify(H(t, function (e) {
          return e.name;
        }), null, 2)]);
      }(o, e);
    },
    Fa = function Fa(e, t) {
      return function (e, t) {
        var o = function (e) {
          var t = [],
            o = [];
          return L(e, function (e) {
            e.fold(function (e) {
              t.push(e);
            }, function (e) {
              o.push(e);
            });
          }), {
            errors: t,
            values: o
          };
        }(e);
        return o.errors.length > 0 ? (n = o.errors, sn.error(q(n))) : function (e, t) {
          return 0 === e.length ? sn.value(t) : sn.value(fn(t, bn.apply(void 0, e)));
        }(o.values, t);
        var n;
      }(pe(e, function (e, o) {
        return (1 === e.length ? sn.value(e[0].handler) : Ba(e, t, o)).map(function (n) {
          var s = function (e) {
              var t = function (e) {
                return p(e) ? {
                  can: E,
                  abort: T,
                  run: e
                } : e;
              }(e);
              return function (e, o) {
                for (var _len11 = arguments.length, n = new Array(_len11 > 2 ? _len11 - 2 : 0), _key11 = 2; _key11 < _len11; _key11++) {
                  n[_key11 - 2] = arguments[_key11];
                }
                var s = [e, o].concat(n);
                t.abort.apply(void 0, s) ? o.stop() : t.can.apply(void 0, s) && t.run.apply(void 0, s);
              };
            }(n),
            r = e.length > 1 ? U(t[o], function (t) {
              return N(e, function (e) {
                return e.name === t;
              });
            }).join(" > ") : e[0].name;
          return Ms(o, function (e, t) {
            return {
              handler: e,
              purpose: t
            };
          }(s, r));
        });
      }), {});
    },
    Ia = "alloy.base.behaviour",
    Ra = Dn([Qn("dom", "dom", {
      tag: "required",
      process: {}
    }, Dn([os("tag"), ys("styles", {}), ys("classes", []), ys("attributes", {}), us("value"), us("innerHtml")])), os("components"), os("uid"), ys("events", {}), ys("apis", {}), Qn("eventOrder", "eventOrder", (ii = (_ii = {}, _defineProperty(_ii, ur(), ["disabling", Ia, "toggling", "typeaheadevents"]), _defineProperty(_ii, ir(), [Ia, "focusing", "keying"]), _defineProperty(_ii, br(), [Ia, "disabling", "toggling", "representing"]), _defineProperty(_ii, Zs(), [Ia, "representing", "streaming", "invalidating"]), _defineProperty(_ii, kr(), [Ia, "representing", "item-events", "tooltipping"]), _defineProperty(_ii, Ws(), ["focusing", Ia, "item-type-events"]), _defineProperty(_ii, Hs(), ["focusing", Ia, "item-type-events"]), _defineProperty(_ii, qs(), ["item-type-events", "tooltipping"]), _defineProperty(_ii, dr(), ["receiving", "reflecting", "tooltipping"]), _ii), xn(x(ii))), Nn()), us("domModification")]),
    Na = function Na(e) {
      return e.events;
    },
    Va = function Va(e, t) {
      var o = Ot(e, t);
      return void 0 === o || "" === o ? [] : o.split(" ");
    },
    za = function za(e) {
      return void 0 !== e.dom.classList;
    },
    Ha = function Ha(e) {
      return Va(e, "class");
    },
    La = function La(e, t) {
      za(e) ? e.dom.classList.add(t) : function (e, t) {
        (function (e, t, o) {
          var n = Va(e, t).concat([o]);
          kt(e, t, n.join(" "));
        })(e, "class", t);
      }(e, t);
    },
    Pa = function Pa(e, t) {
      za(e) ? e.dom.classList.remove(t) : function (e, t) {
        (function (e, t, o) {
          var n = U(Va(e, t), function (e) {
            return e !== o;
          });
          n.length > 0 ? kt(e, t, n.join(" ")) : Et(e, t);
        })(e, "class", t);
      }(e, t), function (e) {
        0 === (za(e) ? e.dom.classList : Ha(e)).length && Et(e, "class");
      }(e);
    },
    Ua = function Ua(e, t) {
      return za(e) && e.dom.classList.contains(t);
    },
    Wa = function Wa(e, t) {
      L(t, function (t) {
        La(e, t);
      });
    },
    ja = function ja(e, t) {
      L(t, function (t) {
        Pa(e, t);
      });
    },
    Ga = function Ga(e, t) {
      return Y(t, function (t) {
        return Ua(e, t);
      });
    },
    $a = function $a(e) {
      return e.dom.value;
    },
    qa = function qa(e, t) {
      if (void 0 === t) throw new Error("Value.set was undefined");
      e.dom.value = t;
    },
    Xa = function Xa(e, t, o) {
      o.fold(function () {
        return zo(e, t);
      }, function (e) {
        Ze(e, t) || (Ro(e, t), Po(e));
      });
    },
    Ya = function Ya(e, t, o) {
      var n = H(t, o),
        s = it(e);
      return L(s.slice(n.length), Po), n;
    },
    Ka = function Ka(e, t, o, n) {
      var s = lt(e, t),
        r = n(o, s),
        a = function (e, t, o) {
          return lt(e, t).map(function (e) {
            if (o.exists(function (t) {
              return !Ze(t, e);
            })) {
              var _t12 = o.map(Ue).getOr("span"),
                _n19 = Re(_t12);
              return Ro(e, _n19), _n19;
            }
            return e;
          });
        }(e, t, s);
      return Xa(e, r.element, a), r;
    },
    Ja = function Ja(e, t) {
      var o = ae(e),
        n = ae(t),
        s = J(n, o),
        r = function (e, o) {
          var n = {},
            s = {};
          return me(e, function (e, o) {
            return !ve(t, o) || e !== t[o];
          }, ue(n), ue(s)), {
            t: n,
            f: s
          };
        }(e).t;
      return {
        toRemove: s,
        toSet: r
      };
    },
    Za = function Za(e, t) {
      var _ref2 = function (e) {
          return j(e.dom.attributes, function (e, t) {
            return e[t.name] = t.value, e;
          }, {});
        }(t),
        o = _ref2["class"],
        n = _ref2.style,
        s = _objectWithoutProperties(_ref2, _excluded),
        _Ja = Ja(e.attributes, s),
        r = _Ja.toSet,
        a = _Ja.toRemove,
        i = Vt(t),
        _Ja2 = Ja(e.styles, i),
        l = _Ja2.toSet,
        c = _Ja2.toRemove,
        d = function (e) {
          return za(e) ? function (e) {
            var t = e.dom.classList,
              o = new Array(t.length);
            for (var _e6 = 0; _e6 < t.length; _e6++) {
              var _n20 = t.item(_e6);
              null !== _n20 && (o[_e6] = _n20);
            }
            return o;
          }(e) : Ha(e);
        }(t),
        u = J(d, e.classes),
        m = J(e.classes, d);
      return L(a, function (e) {
        return Et(t, e);
      }), Ct(t, r), Wa(t, m), ja(t, u), L(c, function (e) {
        return Ht(t, e);
      }), Bt(t, l), e.innerHtml.fold(function () {
        var o = e.domChildren;
        (function (e, t) {
          Ya(e, t, function (t, o) {
            var n = lt(e, o);
            return Xa(e, t, n), t;
          });
        })(t, o);
      }, function (e) {
        ta(t, e);
      }), function () {
        var o = t,
          n = e.value.getOrUndefined();
        n !== $a(o) && qa(o, null != n ? n : "");
      }(), t;
    },
    Qa = function Qa(e) {
      var t = function (e) {
        var t = be(e, "behaviours").getOr({});
        return X(ae(t), function (e) {
          var o = t[e];
          return g(o) ? [o.me] : [];
        });
      }(e);
      return function (e, t) {
        return function (e, t) {
          var o = H(t, function (e) {
              return vs(e.name(), [os("config"), ys("state", Oa)]);
            }),
            n = qn("component.behaviours", Dn(o), e.behaviours).fold(function (t) {
              throw new Error(Kn(t) + "\nComplete spec:\n" + JSON.stringify(e, null, 2));
            }, w);
          return {
            list: t,
            data: ce(n, function (e) {
              var t = e.map(function (e) {
                return {
                  config: e.config,
                  state: e.state.init(e.config)
                };
              });
              return x(t);
            })
          };
        }(e, t);
      }(e, t);
    },
    ei = function ei(e, t) {
      var o = function o() {
          return m;
        },
        n = Es(va),
        s = Xn(function (e) {
          return qn("custom.definition", Ra, e);
        }(e)),
        r = Qa(e),
        a = function (e) {
          return e.list;
        }(r),
        i = function (e) {
          return e.data;
        }(r),
        l = function (e, t, o) {
          var n = _objectSpread(_objectSpread({}, (s = e).dom), {}, {
            uid: s.uid,
            domChildren: H(s.components, function (e) {
              return e.element;
            })
          });
          var s;
          var r = function (e) {
              return e.domModification.fold(function () {
                return Ea({});
              }, Ea);
            }(e),
            a = {
              "alloy.base.modification": r
            },
            i = t.length > 0 ? function (e, t, o, n) {
              var s = _objectSpread({}, t);
              L(o, function (t) {
                s[t.name()] = t.exhibit(e, n);
              });
              var r = Ta(s, function (e, t) {
                  return {
                    name: e,
                    modification: t
                  };
                }),
                a = function a(e) {
                  return W(e, function (e, t) {
                    return _objectSpread(_objectSpread({}, t.modification), e);
                  }, {});
                },
                i = W(r.classes, function (e, t) {
                  return t.modification.concat(e);
                }, []),
                l = a(r.attributes),
                c = a(r.styles);
              return Ea({
                classes: i,
                attributes: l,
                styles: c
              });
            }(o, a, t, n) : r;
          return l = n, c = i, _objectSpread(_objectSpread({}, l), {}, {
            attributes: _objectSpread(_objectSpread({}, l.attributes), c.attributes),
            styles: _objectSpread(_objectSpread({}, l.styles), c.styles),
            classes: l.classes.concat(c.classes)
          });
          var l, c;
        }(s, a, i),
        c = function (e, t) {
          var o = t.filter(function (t) {
            return Ue(t) === e.tag && !function (e) {
              return e.innerHtml.isSome() && e.domChildren.length > 0;
            }(e) && !function (e) {
              return ve(e.dom, wa);
            }(t);
          }).bind(function (t) {
            return function (e, t) {
              try {
                var _o14 = Za(e, t);
                return A.some(_o14);
              } catch (e) {
                return A.none();
              }
            }(e, t);
          }).getOrThunk(function () {
            return function (e) {
              var t = Re(e.tag);
              Ct(t, e.attributes), Wa(t, e.classes), Bt(t, e.styles), e.innerHtml.each(function (e) {
                return ta(t, e);
              });
              var o = e.domChildren;
              return Ho(t, o), e.value.each(function (e) {
                qa(t, e);
              }), t;
            }(e);
          });
          return ga(o, e.uid), o;
        }(l, t),
        d = function (e, t, o) {
          var n = {
            "alloy.base.behaviour": Na(e)
          };
          return function (e, t, o, n) {
            var s = function (e, t, o) {
              var n = _objectSpread(_objectSpread({}, o), Da(t, e));
              return Ta(n, Ma);
            }(e, o, n);
            return Fa(s, t);
          }(o, e.eventOrder, t, n).getOrDie();
        }(s, a, i),
        u = Es(s.components),
        m = {
          uid: e.uid,
          getSystem: n.get,
          config: function config(t) {
            var o = i;
            return (p(o[t.name()]) ? o[t.name()] : function () {
              throw new Error("Could not find " + t.name() + " in " + JSON.stringify(e, null, 2));
            })();
          },
          hasConfigured: function hasConfigured(e) {
            return p(i[e.name()]);
          },
          spec: e,
          readState: function readState(e) {
            return i[e]().map(function (e) {
              return e.state.readState();
            }).getOr("not enabled");
          },
          getApis: function getApis() {
            return s.apis;
          },
          connect: function connect(e) {
            n.set(e);
          },
          disconnect: function disconnect() {
            n.set(ba(o));
          },
          element: c,
          syncComponents: function syncComponents() {
            var e = it(c),
              t = X(e, function (e) {
                return n.get().getByDom(e).fold(function () {
                  return [];
                }, Q);
              });
            u.set(t);
          },
          components: u.get,
          events: d
        };
      return m;
    },
    ti = function ti(e) {
      var t = Ne(e);
      return oi({
        element: t
      });
    },
    oi = function oi(e) {
      var t = Yn("external.component", Mn([os("element"), us("uid")]), e),
        o = Es(ba()),
        n = t.uid.getOrThunk(function () {
          return ha("external");
        });
      ga(t.element, n);
      var s = {
        uid: n,
        getSystem: o.get,
        config: A.none,
        hasConfigured: T,
        connect: function connect(e) {
          o.set(e);
        },
        disconnect: function disconnect() {
          o.set(ba(function () {
            return s;
          }));
        },
        getApis: function getApis() {
          return {};
        },
        element: t.element,
        spec: e,
        readState: x("No state"),
        syncComponents: b,
        components: x([]),
        events: {}
      };
      return Sa(s);
    },
    ni = ha,
    si = function si(e, t) {
      return ka(e).getOrThunk(function () {
        return function (e, t) {
          var _fa = fa(e),
            o = _fa.events,
            n = _objectWithoutProperties(_fa, _excluded2),
            s = function (e, t) {
              var o = be(e, "components").getOr([]);
              return t.fold(function () {
                return H(o, ri);
              }, function (e) {
                return H(o, function (t, o) {
                  return si(t, lt(e, o));
                });
              });
            }(n, t),
            r = _objectSpread(_objectSpread({}, n), {}, {
              events: _objectSpread(_objectSpread({}, aa), o),
              components: s
            });
          return sn.value(ei(r, t));
        }(function (e) {
          return ve(e, "uid");
        }(e) ? e : _objectSpread({
          uid: ni("")
        }, e), t).getOrDie();
      });
    },
    ri = function ri(e) {
      return si(e, A.none());
    },
    ai = Sa;
  var ii,
    li = function li(e, t, o, n, s) {
      return e(o, n) ? A.some(o) : p(s) && s(o) ? A.none() : t(o, n, s);
    };
  var ci = function ci(e, t, o) {
      var n = e.dom;
      var s = p(o) ? o : T;
      for (; n.parentNode;) {
        n = n.parentNode;
        var _e7 = Ve(n);
        if (t(_e7)) return A.some(_e7);
        if (s(_e7)) break;
      }
      return A.none();
    },
    di = function di(e, t, o) {
      return li(function (e, t) {
        return t(e);
      }, ci, e, t, o);
    },
    ui = function ui(e, t, o) {
      return di(e, t, o).isSome();
    },
    mi = function mi(e, t, o) {
      return ci(e, function (e) {
        return Ke(e, t);
      }, o);
    },
    gi = function gi(e, t) {
      return function (e, o) {
        return G(e.dom.childNodes, function (e) {
          return o = Ve(e), Ke(o, t);
          var o;
        }).map(Ve);
      }(e);
    },
    pi = function pi(e, t) {
      return function (e, t) {
        var o = void 0 === t ? document : t.dom;
        return Je(o) ? A.none() : A.from(o.querySelector(e)).map(Ve);
      }(t, e);
    },
    hi = function hi(e, t, o) {
      return li(function (e, t) {
        return Ke(e, t);
      }, mi, e, t, o);
    },
    fi = "aria-controls",
    bi = function bi() {
      var e = la(fi);
      return {
        id: e,
        link: function link(t) {
          kt(t, fi, e);
        },
        unlink: function unlink(e) {
          Et(e, fi);
        }
      };
    },
    vi = function vi(e, t) {
      return ui(t, function (t) {
        return Ze(t, e.element);
      }, T) || function (e, t) {
        return function (e) {
          return di(e, function (e) {
            if (!Ge(e)) return !1;
            var t = Ot(e, "id");
            return void 0 !== t && t.indexOf(fi) > -1;
          }).bind(function (e) {
            var t = Ot(e, "id"),
              o = ht(e);
            return pi(o, "[".concat(fi, "=\"").concat(t, "\"]"));
          });
        }(t).exists(function (t) {
          return vi(e, t);
        });
      }(e, t);
    };
  var yi;
  !function (e) {
    e[e.STOP = 0] = "STOP", e[e.NORMAL = 1] = "NORMAL", e[e.LOGGING = 2] = "LOGGING";
  }(yi || (yi = {}));
  var xi = Es({}),
    wi = ["alloy/data/Fields", "alloy/debugging/Debugging"],
    Si = function Si(e, t, o) {
      return function (e, t, o) {
        switch (be(xi.get(), e).orThunk(function () {
          var t = ae(xi.get());
          return re(t, function (t) {
            return e.indexOf(t) > -1 ? A.some(xi.get()[t]) : A.none();
          });
        }).getOr(yi.NORMAL)) {
          case yi.NORMAL:
            return o(ki());
          case yi.LOGGING:
            {
              var _n21 = function (e, t) {
                  var o = [],
                    n = new Date().getTime();
                  return {
                    logEventCut: function logEventCut(e, t, n) {
                      o.push({
                        outcome: "cut",
                        target: t,
                        purpose: n
                      });
                    },
                    logEventStopped: function logEventStopped(e, t, n) {
                      o.push({
                        outcome: "stopped",
                        target: t,
                        purpose: n
                      });
                    },
                    logNoParent: function logNoParent(e, t, n) {
                      o.push({
                        outcome: "no-parent",
                        target: t,
                        purpose: n
                      });
                    },
                    logEventNoHandlers: function logEventNoHandlers(e, t) {
                      o.push({
                        outcome: "no-handlers-left",
                        target: t
                      });
                    },
                    logEventResponse: function logEventResponse(e, t, n) {
                      o.push({
                        outcome: "response",
                        purpose: n,
                        target: t
                      });
                    },
                    write: function write() {
                      var s = new Date().getTime();
                      R(["mousemove", "mouseover", "mouseout", br()], e) || console.log(e, {
                        event: e,
                        time: s - n,
                        target: t.dom,
                        sequence: H(o, function (e) {
                          return R(["cut", "stopped", "response"], e.outcome) ? "{" + e.purpose + "} " + e.outcome + " at (" + na(e.target) + ")" : e.outcome;
                        })
                      });
                    }
                  };
                }(e, t),
                _s17 = o(_n21);
              return _n21.write(), _s17;
            }
          case yi.STOP:
            return !0;
        }
      }(e, t, o);
    },
    ki = x({
      logEventCut: b,
      logEventStopped: b,
      logNoParent: b,
      logEventNoHandlers: b,
      logEventResponse: b,
      write: b
    }),
    Ci = x([os("menu"), os("selectedMenu")]),
    Oi = x([os("item"), os("selectedItem")]);
  x(Dn(Oi().concat(Ci())));
  var _i = x(Dn(Oi())),
    Ti = ls("initSize", [os("numColumns"), os("numRows")]),
    Ei = function Ei() {
      return ls("markers", [os("backgroundMenu")].concat(Ci()).concat(Oi()));
    },
    Ai = function Ai(e) {
      return ls("markers", H(e, os));
    },
    Mi = function Mi(e, t, o) {
      return function () {
        var e = new Error();
        if (void 0 !== e.stack) {
          var _t13 = e.stack.split("\n");
          G(_t13, function (e) {
            return e.indexOf("alloy") > 0 && !N(wi, function (t) {
              return e.indexOf(t) > -1;
            });
          }).getOr("unknown");
        }
      }(), Qn(t, t, o, Gn(function (e) {
        return sn.value(function () {
          for (var _len12 = arguments.length, t = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {
            t[_key12] = arguments[_key12];
          }
          return e.apply(void 0, t);
        });
      }));
    },
    Di = function Di(e) {
      return Mi(0, e, yn(b));
    },
    Bi = function Bi(e) {
      return Mi(0, e, yn(A.none));
    },
    Fi = function Fi(e) {
      return Mi(0, e, {
        tag: "required",
        process: {}
      });
    },
    Ii = function Ii(e) {
      return Mi(0, e, {
        tag: "required",
        process: {}
      });
    },
    Ri = function Ri(e, t) {
      return es(e, x(t));
    },
    Ni = function Ni(e) {
      return es(e, w);
    },
    Vi = x(Ti),
    zi = function zi(e, t, o, n, s, r, a) {
      var i = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : !1;
      return {
        x: e,
        y: t,
        bubble: o,
        direction: n,
        placement: s,
        restriction: r,
        label: "".concat(a, "-").concat(s),
        alwaysFit: i
      };
    },
    Hi = As([{
      southeast: []
    }, {
      southwest: []
    }, {
      northeast: []
    }, {
      northwest: []
    }, {
      south: []
    }, {
      north: []
    }, {
      east: []
    }, {
      west: []
    }]),
    Li = Hi.southeast,
    Pi = Hi.southwest,
    Ui = Hi.northeast,
    Wi = Hi.northwest,
    ji = Hi.south,
    Gi = Hi.north,
    $i = Hi.east,
    qi = Hi.west,
    Xi = function Xi(e, t, o, n) {
      var s = e + t;
      return s > n ? o : s < o ? n : s;
    },
    Yi = function Yi(e, t, o) {
      return Math.min(Math.max(e, t), o);
    },
    Ki = function Ki(e, t) {
      return Z(["left", "right", "top", "bottom"], function (o) {
        return be(t, o).map(function (t) {
          return function (e, t) {
            switch (t) {
              case 1:
                return e.x;
              case 0:
                return e.x + e.width;
              case 2:
                return e.y;
              case 3:
                return e.y + e.height;
            }
          }(e, t);
        });
      });
    },
    Ji = "layout",
    Zi = function Zi(e) {
      return e.x;
    },
    Qi = function Qi(e, t) {
      return e.x + e.width / 2 - t.width / 2;
    },
    el = function el(e, t) {
      return e.x + e.width - t.width;
    },
    tl = function tl(e, t) {
      return e.y - t.height;
    },
    ol = function ol(e) {
      return e.y + e.height;
    },
    nl = function nl(e, t) {
      return e.y + e.height / 2 - t.height / 2;
    },
    sl = function sl(e, t, o) {
      return zi(Zi(e), ol(e), o.southeast(), Li(), "southeast", Ki(e, {
        left: 1,
        top: 3
      }), Ji);
    },
    rl = function rl(e, t, o) {
      return zi(el(e, t), ol(e), o.southwest(), Pi(), "southwest", Ki(e, {
        right: 0,
        top: 3
      }), Ji);
    },
    al = function al(e, t, o) {
      return zi(Zi(e), tl(e, t), o.northeast(), Ui(), "northeast", Ki(e, {
        left: 1,
        bottom: 2
      }), Ji);
    },
    il = function il(e, t, o) {
      return zi(el(e, t), tl(e, t), o.northwest(), Wi(), "northwest", Ki(e, {
        right: 0,
        bottom: 2
      }), Ji);
    },
    ll = function ll(e, t, o) {
      return zi(Qi(e, t), tl(e, t), o.north(), Gi(), "north", Ki(e, {
        bottom: 2
      }), Ji);
    },
    cl = function cl(e, t, o) {
      return zi(Qi(e, t), ol(e), o.south(), ji(), "south", Ki(e, {
        top: 3
      }), Ji);
    },
    dl = function dl(e, t, o) {
      return zi(function (e) {
        return e.x + e.width;
      }(e), nl(e, t), o.east(), $i(), "east", Ki(e, {
        left: 0
      }), Ji);
    },
    ul = function ul(e, t, o) {
      return zi(function (e, t) {
        return e.x - t.width;
      }(e, t), nl(e, t), o.west(), qi(), "west", Ki(e, {
        right: 1
      }), Ji);
    },
    ml = function ml() {
      return [sl, rl, al, il, cl, ll, dl, ul];
    },
    gl = function gl() {
      return [rl, sl, il, al, cl, ll, dl, ul];
    },
    pl = function pl() {
      return [al, il, sl, rl, ll, cl];
    },
    hl = function hl() {
      return [il, al, rl, sl, ll, cl];
    },
    fl = function fl() {
      return [sl, rl, al, il, cl, ll];
    },
    bl = function bl() {
      return [rl, sl, il, al, cl, ll];
    };
  var vl = Object.freeze({
      __proto__: null,
      events: function events(e) {
        return Hr([Ur(dr(), function (t, o) {
          var n = e.channels,
            s = ae(n),
            r = o,
            a = function (e, t) {
              return t.universal ? e : U(e, function (e) {
                return R(t.channels, e);
              });
            }(s, r);
          L(a, function (e) {
            var o = n[e],
              s = o.schema,
              a = Yn("channel[" + e + "] data\nReceiver: " + na(t.element), s, r.data);
            o.onReceive(t, a);
          });
        })]);
      }
    }),
    yl = [ns("channels", $n(sn.value, Mn([Fi("onReceive"), ys("schema", Nn())])))];
  var xl = function xl(e, t, o) {
      return Zr(function (n, s) {
        o(n, e, t);
      });
    },
    wl = function wl(e) {
      return {
        key: e,
        value: void 0
      };
    },
    Sl = function Sl(e, t, o, n, s, r, a) {
      var i = function i(e) {
          return ye(e, o) ? e[o]() : A.none();
        },
        l = ce(s, function (e, t) {
          return function (e, t, o) {
            return function (e, t, o) {
              var n = o.toString(),
                s = n.indexOf(")") + 1,
                r = n.indexOf("("),
                a = n.substring(r + 1, s - 1).split(/,\s*/);
              return e.toFunctionAnnotation = function () {
                return {
                  name: t,
                  parameters: ya(a.slice(0, 1).concat(a.slice(3)))
                };
              }, e;
            }(function (n) {
              for (var _len13 = arguments.length, s = new Array(_len13 > 1 ? _len13 - 1 : 0), _key13 = 1; _key13 < _len13; _key13++) {
                s[_key13 - 1] = arguments[_key13];
              }
              var r = [n].concat(s);
              return n.config({
                name: x(e)
              }).fold(function () {
                throw new Error("We could not find any behaviour configuration for: " + e + ". Using API: " + o);
              }, function (e) {
                var o = Array.prototype.slice.call(r, 1);
                return t.apply(void 0, [n, e.config, e.state].concat(o));
              });
            }, o, t);
          }(o, e, t);
        }),
        c = _objectSpread(_objectSpread(_objectSpread({}, ce(r, function (e, t) {
          return xa(e, t);
        })), l), {}, {
          revoke: k(wl, o),
          config: function config(t) {
            var n = Yn(o + "-config", e, t);
            return {
              key: o,
              value: {
                config: n,
                me: c,
                configAsRaw: Qt(function () {
                  return Yn(o + "-config", e, t);
                }),
                initialConfig: t,
                state: a
              }
            };
          },
          schema: x(t),
          exhibit: function exhibit(e, t) {
            return Se(i(e), be(n, "exhibit"), function (e, o) {
              return o(t, e.config, e.state);
            }).getOrThunk(function () {
              return Ea({});
            });
          },
          name: x(o),
          handlers: function handlers(e) {
            return i(e).map(function (e) {
              return be(n, "events").getOr(function () {
                return {};
              })(e.config, e.state);
            }).getOr({});
          }
        });
      return c;
    },
    kl = function kl(e) {
      return Ds(e);
    },
    Cl = Mn([os("fields"), os("name"), ys("active", {}), ys("apis", {}), ys("state", Oa), ys("extra", {})]),
    Ol = function Ol(e) {
      var t = Yn("Creating behaviour: " + e.name, Cl, e);
      return function (e, t, o, n, s, r) {
        var a = Mn(e),
          i = vs(t, [("config", l = e, ms("config", Mn(l)))]);
        var l;
        return Sl(a, i, t, o, n, s, r);
      }(t.fields, t.name, t.active, t.apis, t.extra, t.state);
    },
    _l = Mn([os("branchKey"), os("branches"), os("name"), ys("active", {}), ys("apis", {}), ys("state", Oa), ys("extra", {})]),
    Tl = function Tl(e) {
      var t = Yn("Creating behaviour: " + e.name, _l, e);
      return function (e, t, o, n, s, r) {
        var a = e,
          i = vs(t, [ms("config", e)]);
        return Sl(a, i, t, o, n, s, r);
      }(Jn(t.branchKey, t.branches), t.name, t.active, t.apis, t.extra, t.state);
    },
    El = x(void 0),
    Al = Ol({
      fields: yl,
      name: "receiving",
      active: vl
    });
  var Ml = Object.freeze({
    __proto__: null,
    exhibit: function exhibit(e, t) {
      return Ea({
        classes: [],
        styles: t.useFixed() ? {} : {
          position: "relative"
        }
      });
    }
  });
  var Dl = function Dl(e) {
      return e.dom.focus();
    },
    Bl = function Bl(e) {
      return e.dom.blur();
    },
    Fl = function Fl(e) {
      var t = ht(e).dom;
      return e.dom === t.activeElement;
    },
    Il = function Il() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : $o();
      return A.from(e.dom.activeElement).map(Ve);
    },
    Rl = function Rl(e) {
      return Il(ht(e)).filter(function (t) {
        return e.dom.contains(t.dom);
      });
    },
    Nl = function Nl(e, t) {
      var o = ht(t),
        n = Il(o).bind(function (e) {
          var o = function o(t) {
            return Ze(e, t);
          };
          return o(t) ? A.some(t) : function (e, t) {
            var o = function o(e) {
              for (var _n22 = 0; _n22 < e.childNodes.length; _n22++) {
                var _s18 = Ve(e.childNodes[_n22]);
                if (t(_s18)) return A.some(_s18);
                var _r7 = o(e.childNodes[_n22]);
                if (_r7.isSome()) return _r7;
              }
              return A.none();
            };
            return o(e.dom);
          }(t, o);
        }),
        s = e(t);
      return n.each(function (e) {
        Il(o).filter(function (t) {
          return Ze(t, e);
        }).fold(function () {
          Dl(e);
        }, b);
      }), s;
    },
    Vl = function Vl(e, t, o, n, s) {
      var r = function r(e) {
        return e + "px";
      };
      return {
        position: e,
        left: t.map(r),
        top: o.map(r),
        right: n.map(r),
        bottom: s.map(r)
      };
    },
    zl = function zl(e, t) {
      Ft(e, function (e) {
        return _objectSpread(_objectSpread({}, e), {}, {
          position: A.some(e.position)
        });
      }(t));
    },
    Hl = As([{
      none: []
    }, {
      relative: ["x", "y", "width", "height"]
    }, {
      fixed: ["x", "y", "width", "height"]
    }]),
    Ll = function Ll(e, t, o, n, s, r) {
      var a = t.rect,
        i = a.x - o,
        l = a.y - n,
        c = s - (i + a.width),
        d = r - (l + a.height),
        u = A.some(i),
        m = A.some(l),
        g = A.some(c),
        p = A.some(d),
        h = A.none();
      return t.direction.fold(function () {
        return Vl(e, u, m, h, h);
      }, function () {
        return Vl(e, h, m, g, h);
      }, function () {
        return Vl(e, u, h, h, p);
      }, function () {
        return Vl(e, h, h, g, p);
      }, function () {
        return Vl(e, u, m, h, h);
      }, function () {
        return Vl(e, u, h, h, p);
      }, function () {
        return Vl(e, u, m, h, h);
      }, function () {
        return Vl(e, h, m, g, h);
      });
    },
    Pl = function Pl(e, t) {
      return e.fold(function () {
        var e = t.rect;
        return Vl("absolute", A.some(e.x), A.some(e.y), A.none(), A.none());
      }, function (e, o, n, s) {
        return Ll("absolute", t, e, o, n, s);
      }, function (e, o, n, s) {
        return Ll("fixed", t, e, o, n, s);
      });
    },
    Ul = function Ul(e, t) {
      var o = k(Yo, t),
        n = e.fold(o, o, function () {
          var e = Uo();
          return Yo(t).translate(-e.left, -e.top);
        }),
        s = Zt(t),
        r = jt(t);
      return Ko(n.left, n.top, s, r);
    },
    Wl = function Wl(e, t) {
      return t.fold(function () {
        return e.fold(en, en, Ko);
      }, function (t) {
        return e.fold(x(t), x(t), function () {
          var o = jl(e, t.x, t.y);
          return Ko(o.left, o.top, t.width, t.height);
        });
      });
    },
    jl = function jl(e, t, o) {
      var n = $t(t, o);
      return e.fold(x(n), x(n), function () {
        var e = Uo();
        return n.translate(-e.left, -e.top);
      });
    };
  Hl.none;
  var Gl = Hl.relative,
    $l = Hl.fixed,
    ql = "data-alloy-placement",
    Xl = function Xl(e) {
      return _t(e, ql);
    },
    Yl = As([{
      fit: ["reposition"]
    }, {
      nofit: ["reposition", "visibleW", "visibleH", "isVisible"]
    }]),
    Kl = function Kl(e, t, o, n) {
      var s = e.bubble,
        r = s.offset,
        a = function (e, t, o) {
          var n = function n(_n23, s) {
              return t[_n23].map(function (t) {
                var r = "top" === _n23 || "bottom" === _n23,
                  a = r ? o.top : o.left,
                  i = ("left" === _n23 || "top" === _n23 ? Math.max : Math.min)(t, s) + a;
                return r ? Yi(i, e.y, e.bottom) : Yi(i, e.x, e.right);
              }).getOr(s);
            },
            s = n("left", e.x),
            r = n("top", e.y),
            a = n("right", e.right),
            i = n("bottom", e.bottom);
          return Ko(s, r, a - s, i - r);
        }(n, e.restriction, r),
        i = e.x + r.left,
        l = e.y + r.top,
        c = Ko(i, l, t, o),
        _ref3 = function (e, t) {
          var o = t.x,
            n = t.y,
            s = t.right,
            r = t.bottom,
            a = e.x,
            i = e.y,
            l = e.right,
            c = e.bottom,
            d = e.width,
            u = e.height;
          return {
            originInBounds: a >= o && a <= s && i >= n && i <= r,
            sizeInBounds: l <= s && l >= o && c <= r && c >= n,
            visibleW: Math.min(d, a >= o ? s - a : l - o),
            visibleH: Math.min(u, i >= n ? r - i : c - n)
          };
        }(c, a),
        d = _ref3.originInBounds,
        u = _ref3.sizeInBounds,
        m = _ref3.visibleW,
        g = _ref3.visibleH,
        p = d && u,
        h = p ? c : function (e, t) {
          var o = t.x,
            n = t.y,
            s = t.right,
            r = t.bottom,
            a = e.x,
            i = e.y,
            l = e.width,
            c = e.height,
            d = Math.max(o, s - l),
            u = Math.max(n, r - c),
            m = Yi(a, o, d),
            g = Yi(i, n, u),
            p = Math.min(m + l, s) - m,
            h = Math.min(g + c, r) - g;
          return Ko(m, g, p, h);
        }(c, a),
        f = h.width > 0 && h.height > 0,
        _ref4 = function (e, t, o) {
          var n = x(t.bottom - o.y),
            s = x(o.bottom - t.y),
            r = function (e, t, o, n) {
              return e.fold(t, t, n, n, t, n, o, o);
            }(e, s, s, n),
            a = x(t.right - o.x),
            i = x(o.right - t.x),
            l = function (e, t, o, n) {
              return e.fold(t, n, t, n, o, o, t, n);
            }(e, i, i, a);
          return {
            maxWidth: l,
            maxHeight: r
          };
        }(e.direction, h, n),
        b = _ref4.maxWidth,
        v = _ref4.maxHeight,
        y = {
          rect: h,
          maxHeight: v,
          maxWidth: b,
          direction: e.direction,
          placement: e.placement,
          classes: {
            on: s.classesOn,
            off: s.classesOff
          },
          layout: e.label,
          testY: l
        };
      return p || e.alwaysFit ? Yl.fit(y) : Yl.nofit(y, m, g, f);
    },
    Jl = function Jl(e) {
      var t = Es(A.none()),
        o = function o() {
          return t.get().each(e);
        };
      return {
        clear: function clear() {
          o(), t.set(A.none());
        },
        isSet: function isSet() {
          return t.get().isSome();
        },
        get: function get() {
          return t.get();
        },
        set: function set(e) {
          o(), t.set(A.some(e));
        }
      };
    },
    Zl = function Zl() {
      return Jl(function (e) {
        return e.unbind();
      });
    },
    Ql = function Ql() {
      var e = Jl(b);
      return _objectSpread(_objectSpread({}, e), {}, {
        on: function on(t) {
          return e.get().each(t);
        }
      });
    },
    ec = E,
    tc = function tc(e, t, o) {
      return function (e, t, o, n) {
        return Fo(e, t, o, n, !1);
      }(e, t, ec, o);
    },
    oc = function oc(e, t, o) {
      return function (e, t, o, n) {
        return Fo(e, t, o, n, !0);
      }(e, t, ec, o);
    },
    nc = Bo,
    sc = ["top", "bottom", "right", "left"],
    rc = "data-alloy-transition-timer",
    ac = function ac(e, t, o, n, s, a) {
      var i = function (e, t, o) {
        return o.exists(function (o) {
          var n = e.mode;
          return "all" === n || o[n] !== t[n];
        });
      }(n, s, a);
      if (i || function (e, t) {
        return Ga(e, t.classes);
      }(e, n)) {
        Dt(e, "position", o.position);
        var _a2 = Ul(t, e),
          _l2 = Pl(t, _objectSpread(_objectSpread({}, s), {}, {
            rect: _a2
          })),
          _c2 = Z(sc, function (e) {
            return _l2[e];
          });
        (function (e, t) {
          var o = function o(e) {
            return parseFloat(e).toFixed(3);
          };
          return he(t, function (t, n) {
            return !function (e, t) {
              var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : S;
              return Se(e, t, o).getOr(e.isNone() && t.isNone());
            }(e[n].map(o), t.map(o));
          }).isSome();
        })(o, _c2) && (Ft(e, _c2), i && function (e, t) {
          Wa(e, t.classes), _t(e, rc).each(function (t) {
            clearTimeout(parseInt(t, 10)), Et(e, rc);
          }), function (e, t) {
            var o = Zl(),
              n = Zl();
            var s;
            var a = function a(t) {
                var o;
                var n = null !== (o = t.raw.pseudoElement) && void 0 !== o ? o : "";
                return Ze(t.target, e) && !De(n) && R(sc, t.raw.propertyName);
              },
              i = function i(r) {
                if (m(r) || a(r)) {
                  o.clear(), n.clear();
                  var _a3 = null == r ? void 0 : r.raw.type;
                  (m(_a3) || _a3 === or()) && (clearTimeout(s), Et(e, rc), ja(e, t.classes));
                }
              },
              l = tc(e, nr(), function (t) {
                a(t) && (l.unbind(), o.set(tc(e, or(), i)), n.set(tc(e, tr(), i)));
              }),
              c = function (e) {
                var t = function t(_t14) {
                    var o = It(e, _t14).split(/\s*,\s*/);
                    return U(o, De);
                  },
                  o = function o(e) {
                    if (r(e) && /^[\d.]+/.test(e)) {
                      var _t15 = parseFloat(e);
                      return Ae(e, "ms") ? _t15 : 1e3 * _t15;
                    }
                    return 0;
                  },
                  n = t("transition-delay"),
                  s = t("transition-duration");
                return j(s, function (e, t, s) {
                  var r = o(n[s]) + o(t);
                  return Math.max(e, r);
                }, 0);
              }(e);
            requestAnimationFrame(function () {
              s = setTimeout(i, c + 17), kt(e, rc, s);
            });
          }(e, t);
        }(e, n), Lt(e));
      } else ja(e, n.classes);
    },
    ic = function ic(e, t) {
      (function (e, t) {
        var o = Ut.max(e, t, ["margin-top", "border-top-width", "padding-top", "padding-bottom", "border-bottom-width", "margin-bottom"]);
        Dt(e, "max-height", o + "px");
      })(e, Math.floor(t));
    },
    lc = x(function (e, t) {
      ic(e, t), Bt(e, {
        "overflow-x": "hidden",
        "overflow-y": "auto"
      });
    }),
    cc = x(function (e, t) {
      ic(e, t);
    }),
    dc = function dc(e, t, o) {
      return void 0 === e[t] ? o : e[t];
    },
    uc = function uc(e, t, o, n) {
      var s = function (e, t, o, n) {
        Ht(t, "max-height"), Ht(t, "max-width");
        var s = {
          width: Zt(r = t),
          height: jt(r)
        };
        var r;
        return function (e, t, o, n, s, r) {
          var a = n.width,
            i = n.height,
            l = function l(t, _l3, c, d, u) {
              var m = t(o, n, s, e, r),
                g = Kl(m, a, i, r);
              return g.fold(x(g), function (e, t, o, n) {
                return (u === n ? o > d || t > c : !u && n) ? g : Yl.nofit(_l3, c, d, u);
              });
            };
          return j(t, function (e, t) {
            var o = k(l, t);
            return e.fold(x(e), o);
          }, Yl.nofit({
            rect: o,
            maxHeight: n.height,
            maxWidth: n.width,
            direction: Li(),
            placement: "southeast",
            classes: {
              on: [],
              off: []
            },
            layout: "none",
            testY: o.y
          }, -1, -1, !1)).fold(w, w);
        }(t, n.preference, e, s, o, n.bounds);
      }(e, t, o, n);
      return function (e, t, o) {
        var n = Pl(o.origin, t);
        o.transition.each(function (s) {
          ac(e, o.origin, n, s, t, o.lastPlacement);
        }), zl(e, n);
      }(t, s, n), function (e, t) {
        (function (e, t) {
          kt(e, ql, t);
        })(e, t.placement);
      }(t, s), function (e, t) {
        var o = t.classes;
        ja(e, o.off), Wa(e, o.on);
      }(t, s), function (e, t, o) {
        (0, o.maxHeightFunction)(e, t.maxHeight);
      }(t, s, n), function (e, t, o) {
        (0, o.maxWidthFunction)(e, t.maxWidth);
      }(t, s, n), {
        layout: s.layout,
        placement: s.placement
      };
    },
    mc = ["valignCentre", "alignLeft", "alignRight", "alignCentre", "top", "bottom", "left", "right", "inset"],
    gc = function gc(e, t, o) {
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;
      var s = e * n,
        r = t * n,
        a = function a(e) {
          return be(o, e).getOr([]);
        },
        i = function i(e, t, o) {
          var n = J(mc, o);
          return {
            offset: $t(e, t),
            classesOn: X(o, a),
            classesOff: X(n, a)
          };
        };
      return {
        southeast: function southeast() {
          return i(-e, t, ["top", "alignLeft"]);
        },
        southwest: function southwest() {
          return i(e, t, ["top", "alignRight"]);
        },
        south: function south() {
          return i(-e / 2, t, ["top", "alignCentre"]);
        },
        northeast: function northeast() {
          return i(-e, -t, ["bottom", "alignLeft"]);
        },
        northwest: function northwest() {
          return i(e, -t, ["bottom", "alignRight"]);
        },
        north: function north() {
          return i(-e / 2, -t, ["bottom", "alignCentre"]);
        },
        east: function east() {
          return i(e, -t / 2, ["valignCentre", "left"]);
        },
        west: function west() {
          return i(-e, -t / 2, ["valignCentre", "right"]);
        },
        insetNortheast: function insetNortheast() {
          return i(s, r, ["top", "alignLeft", "inset"]);
        },
        insetNorthwest: function insetNorthwest() {
          return i(-s, r, ["top", "alignRight", "inset"]);
        },
        insetNorth: function insetNorth() {
          return i(-s / 2, r, ["top", "alignCentre", "inset"]);
        },
        insetSoutheast: function insetSoutheast() {
          return i(s, -r, ["bottom", "alignLeft", "inset"]);
        },
        insetSouthwest: function insetSouthwest() {
          return i(-s, -r, ["bottom", "alignRight", "inset"]);
        },
        insetSouth: function insetSouth() {
          return i(-s / 2, -r, ["bottom", "alignCentre", "inset"]);
        },
        insetEast: function insetEast() {
          return i(-s, -r / 2, ["valignCentre", "right", "inset"]);
        },
        insetWest: function insetWest() {
          return i(s, -r / 2, ["valignCentre", "left", "inset"]);
        }
      };
    },
    pc = function pc() {
      return gc(0, 0, {});
    },
    hc = w,
    fc = function fc(e, t) {
      return function (o) {
        return "rtl" === bc(o) ? t : e;
      };
    },
    bc = function bc(e) {
      return "rtl" === It(e, "direction") ? "rtl" : "ltr";
    };
  var vc;
  !function (e) {
    e.TopToBottom = "toptobottom", e.BottomToTop = "bottomtotop";
  }(vc || (vc = {}));
  var yc = "data-alloy-vertical-dir",
    xc = function xc(e) {
      return ui(e, function (e) {
        return Ge(e) && Ot(e, "data-alloy-vertical-dir") === vc.BottomToTop;
      });
    },
    wc = function wc() {
      return vs("layouts", [os("onLtr"), os("onRtl"), us("onBottomLtr"), us("onBottomRtl")]);
    },
    Sc = function Sc(e, t, o, n, s, r, a) {
      var i = a.map(xc).getOr(!1),
        l = t.layouts.map(function (t) {
          return t.onLtr(e);
        }),
        c = t.layouts.map(function (t) {
          return t.onRtl(e);
        }),
        d = i ? t.layouts.bind(function (t) {
          return t.onBottomLtr.map(function (t) {
            return t(e);
          });
        }).or(l).getOr(s) : l.getOr(o),
        u = i ? t.layouts.bind(function (t) {
          return t.onBottomRtl.map(function (t) {
            return t(e);
          });
        }).or(c).getOr(r) : c.getOr(n);
      return fc(d, u)(e);
    };
  var kc = [os("hotspot"), us("bubble"), ys("overrides", {}), wc(), Ri("placement", function (e, t, o) {
      var n = t.hotspot,
        s = Ul(o, n.element),
        r = Sc(e.element, t, fl(), bl(), pl(), hl(), A.some(t.hotspot.element));
      return A.some(hc({
        anchorBox: s,
        bubble: t.bubble.getOr(pc()),
        overrides: t.overrides,
        layouts: r
      }));
    })],
    Cc = [os("x"), os("y"), ys("height", 0), ys("width", 0), ys("bubble", pc()), ys("overrides", {}), wc(), Ri("placement", function (e, t, o) {
      var n = jl(o, t.x, t.y),
        s = Ko(n.left, n.top, t.width, t.height),
        r = Sc(e.element, t, ml(), gl(), ml(), gl(), A.none());
      return A.some(hc({
        anchorBox: s,
        bubble: t.bubble,
        overrides: t.overrides,
        layouts: r
      }));
    })];
  var Oc = As([{
      screen: ["point"]
    }, {
      absolute: ["point", "scrollLeft", "scrollTop"]
    }]),
    _c = function _c(e) {
      return e.fold(w, function (e, t, o) {
        return e.translate(-t, -o);
      });
    },
    Tc = function Tc(e) {
      return e.fold(w, w);
    },
    Ec = function Ec(e) {
      return j(e, function (e, t) {
        return e.translate(t.left, t.top);
      }, $t(0, 0));
    },
    Ac = function Ac(e) {
      var t = H(e, Tc);
      return Ec(t);
    },
    Mc = Oc.screen,
    Dc = Oc.absolute,
    Bc = function Bc(e, t, o) {
      var n = et(e.element),
        s = Uo(n),
        r = function (e, t, o) {
          var n = nt(o.root).dom;
          return A.from(n.frameElement).map(Ve).filter(function (t) {
            var o = et(t),
              n = et(e.element);
            return Ze(o, n);
          }).map(Xt);
        }(e, 0, o).getOr(s);
      return Dc(r, s.left, s.top);
    },
    Fc = function Fc(e, t, o, n) {
      var s = Mc($t(e, t));
      return A.some(function (e, t, o) {
        return {
          point: e,
          width: t,
          height: o
        };
      }(s, o, n));
    },
    Ic = function Ic(e, t, o, n, s) {
      return e.map(function (e) {
        var r = [t, e.point],
          a = (i = function i() {
            return Ac(r);
          }, l = function l() {
            return Ac(r);
          }, c = function c() {
            return function (e) {
              var t = H(e, _c);
              return Ec(t);
            }(r);
          }, n.fold(i, l, c));
        var i, l, c;
        var d = (p = a.left, h = a.top, f = e.width, b = e.height, {
            x: p,
            y: h,
            width: f,
            height: b
          }),
          u = o.showAbove ? pl() : fl(),
          m = o.showAbove ? hl() : bl(),
          g = Sc(s, o, u, m, u, m, A.none());
        var p, h, f, b;
        return hc({
          anchorBox: d,
          bubble: o.bubble.getOr(pc()),
          overrides: o.overrides,
          layouts: g
        });
      });
    };
  var Rc = [os("node"), os("root"), us("bubble"), wc(), ys("overrides", {}), ys("showAbove", !1), Ri("placement", function (e, t, o) {
    var n = Bc(e, 0, t);
    return t.node.filter(yt).bind(function (s) {
      var r = s.dom.getBoundingClientRect(),
        a = Fc(r.left, r.top, r.width, r.height),
        i = t.node.getOr(e.element);
      return Ic(a, n, t, o, i);
    });
  })];
  var Nc = function Nc(e, t, o, n) {
      return {
        start: e,
        soffset: t,
        finish: o,
        foffset: n
      };
    },
    Vc = As([{
      before: ["element"]
    }, {
      on: ["element", "offset"]
    }, {
      after: ["element"]
    }]),
    zc = (Vc.before, Vc.on, Vc.after, function (e) {
      return e.fold(w, w, w);
    }),
    Hc = As([{
      domRange: ["rng"]
    }, {
      relative: ["startSitu", "finishSitu"]
    }, {
      exact: ["start", "soffset", "finish", "foffset"]
    }]),
    Lc = {
      domRange: Hc.domRange,
      relative: Hc.relative,
      exact: Hc.exact,
      exactFromRange: function exactFromRange(e) {
        return Hc.exact(e.start, e.soffset, e.finish, e.foffset);
      },
      getWin: function getWin(e) {
        var t = function (e) {
          return e.match({
            domRange: function domRange(e) {
              return Ve(e.startContainer);
            },
            relative: function relative(e, t) {
              return zc(e);
            },
            exact: function exact(e, t, o, n) {
              return e;
            }
          });
        }(e);
        return nt(t);
      },
      range: Nc
    },
    Pc = function Pc(e, t, o) {
      var n = e.document.createRange();
      var s;
      return s = n, t.fold(function (e) {
        s.setStartBefore(e.dom);
      }, function (e, t) {
        s.setStart(e.dom, t);
      }, function (e) {
        s.setStartAfter(e.dom);
      }), function (e, t) {
        t.fold(function (t) {
          e.setEndBefore(t.dom);
        }, function (t, o) {
          e.setEnd(t.dom, o);
        }, function (t) {
          e.setEndAfter(t.dom);
        });
      }(n, o), n;
    },
    Uc = function Uc(e, t, o, n, s) {
      var r = e.document.createRange();
      return r.setStart(t.dom, o), r.setEnd(n.dom, s), r;
    },
    Wc = function Wc(e) {
      return {
        left: e.left,
        top: e.top,
        right: e.right,
        bottom: e.bottom,
        width: e.width,
        height: e.height
      };
    },
    jc = As([{
      ltr: ["start", "soffset", "finish", "foffset"]
    }, {
      rtl: ["start", "soffset", "finish", "foffset"]
    }]),
    Gc = function Gc(e, t, o) {
      return t(Ve(o.startContainer), o.startOffset, Ve(o.endContainer), o.endOffset);
    },
    $c = function $c(e, t) {
      return function (e, t) {
        var o = function (e, t) {
          return t.match({
            domRange: function domRange(e) {
              return {
                ltr: x(e),
                rtl: A.none
              };
            },
            relative: function relative(t, o) {
              return {
                ltr: Qt(function () {
                  return Pc(e, t, o);
                }),
                rtl: Qt(function () {
                  return A.some(Pc(e, o, t));
                })
              };
            },
            exact: function exact(t, o, n, s) {
              return {
                ltr: Qt(function () {
                  return Uc(e, t, o, n, s);
                }),
                rtl: Qt(function () {
                  return A.some(Uc(e, n, s, t, o));
                })
              };
            }
          });
        }(e, t);
        return function (e, t) {
          var o = t.ltr();
          return o.collapsed ? t.rtl().filter(function (e) {
            return !1 === e.collapsed;
          }).map(function (e) {
            return jc.rtl(Ve(e.endContainer), e.endOffset, Ve(e.startContainer), e.startOffset);
          }).getOrThunk(function () {
            return Gc(0, jc.ltr, o);
          }) : Gc(0, jc.ltr, o);
        }(0, o);
      }(e, t).match({
        ltr: function ltr(t, o, n, s) {
          var r = e.document.createRange();
          return r.setStart(t.dom, o), r.setEnd(n.dom, s), r;
        },
        rtl: function rtl(t, o, n, s) {
          var r = e.document.createRange();
          return r.setStart(n.dom, s), r.setEnd(t.dom, o), r;
        }
      });
    };
  jc.ltr, jc.rtl;
  var qc = function qc(e, t, o) {
      return U(function (e, t) {
        var o = p(t) ? t : T;
        var n = e.dom;
        var s = [];
        for (; null !== n.parentNode && void 0 !== n.parentNode;) {
          var _e8 = n.parentNode,
            _t16 = Ve(_e8);
          if (s.push(_t16), !0 === o(_t16)) break;
          n = _e8;
        }
        return s;
      }(e, o), t);
    },
    Xc = function Xc(e, t) {
      return function (e, t) {
        var o = void 0 === t ? document : t.dom;
        return Je(o) ? [] : H(o.querySelectorAll(e), Ve);
      }(t, e);
    },
    Yc = function Yc(e) {
      if (e.rangeCount > 0) {
        var _t17 = e.getRangeAt(0),
          _o15 = e.getRangeAt(e.rangeCount - 1);
        return A.some(Nc(Ve(_t17.startContainer), _t17.startOffset, Ve(_o15.endContainer), _o15.endOffset));
      }
      return A.none();
    },
    Kc = function Kc(e) {
      if (null === e.anchorNode || null === e.focusNode) return Yc(e);
      {
        var _t18 = Ve(e.anchorNode),
          _o16 = Ve(e.focusNode);
        return function (e, t, o, n) {
          var s = function (e, t, o, n) {
              var s = et(e).dom.createRange();
              return s.setStart(e.dom, t), s.setEnd(o.dom, n), s;
            }(e, t, o, n),
            r = Ze(e, o) && t === n;
          return s.collapsed && !r;
        }(_t18, e.anchorOffset, _o16, e.focusOffset) ? A.some(Nc(_t18, e.anchorOffset, _o16, e.focusOffset)) : Yc(e);
      }
    },
    Jc = function Jc(e, t) {
      return function (e) {
        var t = e.getClientRects(),
          o = t.length > 0 ? t[0] : e.getBoundingClientRect();
        return o.width > 0 || o.height > 0 ? A.some(o).map(Wc) : A.none();
      }($c(e, t));
    },
    Zc = function (e, t) {
      var o = function o(t) {
        return e(t) ? A.from(t.dom.nodeValue) : A.none();
      };
      return {
        get: function get(t) {
          if (!e(t)) throw new Error("Can only get text value of a text node");
          return o(t).getOr("");
        },
        getOption: o,
        set: function set(t, o) {
          if (!e(t)) throw new Error("Can only set raw text value of a text node");
          t.dom.nodeValue = o;
        }
      };
    }($e),
    Qc = function Qc(e, t) {
      return {
        element: e,
        offset: t
      };
    },
    ed = function ed(e, t) {
      return $e(e) ? Qc(e, t) : function (e, t) {
        var o = it(e);
        if (0 === o.length) return Qc(e, t);
        if (t < o.length) return Qc(o[t], 0);
        {
          var _e9 = o[o.length - 1],
            _t19 = $e(_e9) ? function (e) {
              return Zc.get(e);
            }(_e9).length : it(_e9).length;
          return Qc(_e9, _t19);
        }
      }(e, t);
    },
    td = function td(e) {
      return void 0 !== e.foffset;
    },
    od = function od(e, t) {
      return t.getSelection.getOrThunk(function () {
        return function () {
          return function (e) {
            return function (e) {
              return A.from(e.getSelection());
            }(e).filter(function (e) {
              return e.rangeCount > 0;
            }).bind(Kc);
          }(e);
        };
      })().map(function (e) {
        if (td(e)) {
          var _t20 = ed(e.start, e.soffset),
            _o17 = ed(e.finish, e.foffset);
          return Lc.range(_t20.element, _t20.offset, _o17.element, _o17.offset);
        }
        return e;
      });
    };
  var nd = [us("getSelection"), os("root"), us("bubble"), wc(), ys("overrides", {}), ys("showAbove", !1), Ri("placement", function (e, t, o) {
    var n = nt(t.root).dom,
      s = Bc(e, 0, t),
      r = od(n, t).bind(function (e) {
        if (td(e)) {
          var _t21 = function (e, t) {
            return function (e) {
              var t = e.getBoundingClientRect();
              return t.width > 0 || t.height > 0 ? A.some(t).map(Wc) : A.none();
            }($c(e, t));
          }(n, Lc.exactFromRange(e)).orThunk(function () {
            var t = Ne("\uFEFF");
            Ro(e.start, t);
            var o = Jc(n, Lc.exact(t, 0, t, 1));
            return Po(t), o;
          });
          return _t21.bind(function (e) {
            return Fc(e.left, e.top, e.width, e.height);
          });
        }
        {
          var _t22 = ce(e, function (e) {
              return e.dom.getBoundingClientRect();
            }),
            _o18 = {
              left: Math.min(_t22.firstCell.left, _t22.lastCell.left),
              right: Math.max(_t22.firstCell.right, _t22.lastCell.right),
              top: Math.min(_t22.firstCell.top, _t22.lastCell.top),
              bottom: Math.max(_t22.firstCell.bottom, _t22.lastCell.bottom)
            };
          return Fc(_o18.left, _o18.top, _o18.right - _o18.left, _o18.bottom - _o18.top);
        }
      }),
      a = od(n, t).bind(function (e) {
        return td(e) ? Ge(e.start) ? A.some(e.start) : rt(e.start) : A.some(e.firstCell);
      }).getOr(e.element);
    return Ic(r, s, t, o, a);
  })];
  var sd = "link-layout",
    rd = function rd(e) {
      return e.x + e.width;
    },
    ad = function ad(e, t) {
      return e.x - t.width;
    },
    id = function id(e, t) {
      return e.y - t.height + e.height;
    },
    ld = function ld(e) {
      return e.y;
    },
    cd = function cd(e, t, o) {
      return zi(rd(e), ld(e), o.southeast(), Li(), "southeast", Ki(e, {
        left: 0,
        top: 2
      }), sd);
    },
    dd = function dd(e, t, o) {
      return zi(ad(e, t), ld(e), o.southwest(), Pi(), "southwest", Ki(e, {
        right: 1,
        top: 2
      }), sd);
    },
    ud = function ud(e, t, o) {
      return zi(rd(e), id(e, t), o.northeast(), Ui(), "northeast", Ki(e, {
        left: 0,
        bottom: 3
      }), sd);
    },
    md = function md(e, t, o) {
      return zi(ad(e, t), id(e, t), o.northwest(), Wi(), "northwest", Ki(e, {
        right: 1,
        bottom: 3
      }), sd);
    },
    gd = function gd() {
      return [cd, dd, ud, md];
    },
    pd = function pd() {
      return [dd, cd, md, ud];
    };
  var hd = [os("item"), wc(), ys("overrides", {}), Ri("placement", function (e, t, o) {
      var n = Ul(o, t.item.element),
        s = Sc(e.element, t, gd(), pd(), gd(), pd(), A.none());
      return A.some(hc({
        anchorBox: n,
        bubble: pc(),
        overrides: t.overrides,
        layouts: s
      }));
    })],
    fd = Jn("type", {
      selection: nd,
      node: Rc,
      hotspot: kc,
      submenu: hd,
      makeshift: Cc
    });
  var bd = [ds("classes", Hn), ks("mode", "all", ["all", "layout", "placement"])],
    vd = [ys("useFixed", T), us("getBounds")],
    yd = [ns("anchor", fd), vs("transition", bd)],
    xd = function xd(e, t, o, n, s, r) {
      var a = Yn("placement.info", Dn(yd), s),
        i = a.anchor,
        l = n.element,
        c = o.get(n.uid);
      Nl(function () {
        Dt(l, "position", "fixed");
        var s = Nt(l, "visibility");
        Dt(l, "visibility", "hidden");
        var d = t.useFixed() ? function () {
          var e = document.documentElement;
          return $l(0, 0, e.clientWidth, e.clientHeight);
        }() : function (e) {
          var t = Xt(e.element),
            o = e.element.dom.getBoundingClientRect();
          return Gl(t.left, t.top, o.width, o.height);
        }(e);
        i.placement(e, i, d).each(function (e) {
          var s = r.orThunk(function () {
              return t.getBounds.map(_);
            }),
            i = function (e, t, o, n, s, r) {
              return function (e, t, o, n, s, r, a, i) {
                var l = dc(a, "maxHeightFunction", lc()),
                  c = dc(a, "maxWidthFunction", b),
                  d = e.anchorBox,
                  u = e.origin,
                  m = {
                    bounds: Wl(u, r),
                    origin: u,
                    preference: n,
                    maxHeightFunction: l,
                    maxWidthFunction: c,
                    lastPlacement: s,
                    transition: i
                  };
                return uc(d, t, o, m);
              }(function (e, t) {
                return function (e, t) {
                  return {
                    anchorBox: e,
                    origin: t
                  };
                }(e, t);
              }(t.anchorBox, e), n.element, t.bubble, t.layouts, s, o, t.overrides, r);
            }(d, e, s, n, c, a.transition);
          o.set(n.uid, i);
        }), s.fold(function () {
          Ht(l, "visibility");
        }, function (e) {
          Dt(l, "visibility", e);
        }), Nt(l, "left").isNone() && Nt(l, "top").isNone() && Nt(l, "right").isNone() && Nt(l, "bottom").isNone() && xe(Nt(l, "position"), "fixed") && Ht(l, "position");
      }, l);
    };
  var wd = Object.freeze({
    __proto__: null,
    position: function position(e, t, o, n, s) {
      var r = A.none();
      xd(e, t, o, n, s, r);
    },
    positionWithinBounds: xd,
    getMode: function getMode(e, t, o) {
      return t.useFixed() ? "fixed" : "absolute";
    },
    reset: function reset(e, t, o, n) {
      var s = n.element;
      L(["position", "left", "right", "top", "bottom"], function (e) {
        return Ht(s, e);
      }), function (e) {
        Et(e, ql);
      }(s), o.clear(n.uid);
    }
  });
  var Sd = Ol({
      fields: vd,
      name: "positioning",
      active: Ml,
      apis: wd,
      state: Object.freeze({
        __proto__: null,
        init: function init() {
          var e = {};
          return _a({
            readState: function readState() {
              return e;
            },
            clear: function clear(t) {
              g(t) ? delete e[t] : e = {};
            },
            set: function set(t, o) {
              e[t] = o;
            },
            get: function get(t) {
              return be(e, t);
            }
          });
        }
      })
    }),
    kd = function kd(e) {
      return e.getSystem().isConnected();
    },
    Cd = function Cd(e) {
      Fr(e, kr());
      var t = e.components();
      L(t, Cd);
    },
    Od = function Od(e) {
      var t = e.components();
      L(t, Od), Fr(e, Sr());
    },
    _d = function _d(e, t) {
      e.getSystem().addToWorld(t), yt(e.element) && Od(t);
    },
    Td = function Td(e) {
      Cd(e), e.getSystem().removeFromWorld(e);
    },
    Ed = function Ed(e, t) {
      zo(e.element, t.element);
    },
    Ad = function Ad(e, t) {
      Md(e, t, zo);
    },
    Md = function Md(e, t, o) {
      e.getSystem().addToWorld(t), o(e.element, t.element), yt(e.element) && Od(t), e.syncComponents();
    },
    Dd = function Dd(e) {
      Cd(e), Po(e.element), e.getSystem().removeFromWorld(e);
    },
    Bd = function Bd(e) {
      var t = st(e.element).bind(function (t) {
        return e.getSystem().getByDom(t).toOptional();
      });
      Dd(e), t.each(function (e) {
        e.syncComponents();
      });
    },
    Fd = function Fd(e) {
      var t = e.components();
      L(t, Dd), Lo(e.element), e.syncComponents();
    },
    Id = function Id(e, t) {
      Nd(e, t, zo);
    },
    Rd = function Rd(e, t) {
      Nd(e, t, No);
    },
    Nd = function Nd(e, t, o) {
      o(e, t.element);
      var n = it(t.element);
      L(n, function (e) {
        t.getByDom(e).each(Od);
      });
    },
    Vd = function Vd(e) {
      var t = it(e.element);
      L(t, function (t) {
        e.getByDom(t).each(Cd);
      }), Po(e.element);
    },
    zd = function zd(e, t, o, n) {
      o.get().each(function (t) {
        Fd(e);
      });
      var s = t.getAttachPoint(e);
      Ad(s, e);
      var r = e.getSystem().build(n);
      return Ad(e, r), o.set(r), r;
    },
    Hd = function Hd(e, t, o, n) {
      var s = zd(e, t, o, n);
      return t.onOpen(e, s), s;
    },
    Ld = function Ld(e, t, o) {
      o.get().each(function (n) {
        Fd(e), Bd(e), t.onClose(e, n), o.clear();
      });
    },
    Pd = function Pd(e, t, o) {
      return o.isOpen();
    },
    Ud = function Ud(e, t, o) {
      var n = t.getAttachPoint(e);
      Dt(e.element, "position", Sd.getMode(n)), function (e, t, o, n) {
        Nt(e.element, t).fold(function () {
          Et(e.element, o);
        }, function (t) {
          kt(e.element, o, t);
        }), Dt(e.element, t, "hidden");
      }(e, "visibility", t.cloakVisibilityAttr);
    },
    Wd = function Wd(e, t, o) {
      (function (e) {
        return N(["top", "left", "right", "bottom"], function (t) {
          return Nt(e, t).isSome();
        });
      })(e.element) || Ht(e.element, "position"), function (e, t, o) {
        _t(e.element, o).fold(function () {
          return Ht(e.element, t);
        }, function (o) {
          return Dt(e.element, t, o);
        });
      }(e, "visibility", t.cloakVisibilityAttr);
    };
  var jd = Object.freeze({
      __proto__: null,
      cloak: Ud,
      decloak: Wd,
      open: Hd,
      openWhileCloaked: function openWhileCloaked(e, t, o, n, s) {
        Ud(e, t), Hd(e, t, o, n), s(), Wd(e, t);
      },
      close: Ld,
      isOpen: Pd,
      isPartOf: function isPartOf(e, t, o, n) {
        return Pd(0, 0, o) && o.get().exists(function (o) {
          return t.isPartOf(e, o, n);
        });
      },
      getState: function getState(e, t, o) {
        return o.get();
      },
      setContent: function setContent(e, t, o, n) {
        return o.get().map(function () {
          return zd(e, t, o, n);
        });
      }
    }),
    Gd = Object.freeze({
      __proto__: null,
      events: function events(e, t) {
        return Hr([Ur(hr(), function (o, n) {
          Ld(o, e, t);
        })]);
      }
    }),
    $d = [Di("onOpen"), Di("onClose"), os("isPartOf"), os("getAttachPoint"), ys("cloakVisibilityAttr", "data-precloak-visibility")],
    qd = Object.freeze({
      __proto__: null,
      init: function init() {
        var e = Ql(),
          t = x("not-implemented");
        return _a({
          readState: t,
          isOpen: e.isSet,
          clear: e.clear,
          set: e.set,
          get: e.get
        });
      }
    });
  var Xd = Ol({
      fields: $d,
      name: "sandboxing",
      active: Gd,
      apis: jd,
      state: qd
    }),
    Yd = x("dismiss.popups"),
    Kd = x("reposition.popups"),
    Jd = x("mouse.released"),
    Zd = Mn([ys("isExtraPart", T), vs("fireEventInstead", [ys("event", Cr())])]),
    Qd = function Qd(e) {
      var t = Yn("Dismissal", Zd, e);
      return _defineProperty({}, Yd(), {
        schema: Mn([os("target")]),
        onReceive: function onReceive(e, o) {
          Xd.isOpen(e) && (Xd.isPartOf(e, o.target) || t.isExtraPart(e, o.target) || t.fireEventInstead.fold(function () {
            return Xd.close(e);
          }, function (t) {
            return Fr(e, t.event);
          }));
        }
      });
    },
    eu = Mn([vs("fireEventInstead", [ys("event", Or())]), is("doReposition")]),
    tu = function tu(e) {
      var t = Yn("Reposition", eu, e);
      return _defineProperty({}, Kd(), {
        onReceive: function onReceive(e) {
          Xd.isOpen(e) && t.fireEventInstead.fold(function () {
            return t.doReposition(e);
          }, function (t) {
            return Fr(e, t.event);
          });
        }
      });
    },
    ou = function ou(e, t, o) {
      t.store.manager.onLoad(e, t, o);
    },
    nu = function nu(e, t, o) {
      t.store.manager.onUnload(e, t, o);
    };
  var su = Object.freeze({
      __proto__: null,
      onLoad: ou,
      onUnload: nu,
      setValue: function setValue(e, t, o, n) {
        t.store.manager.setValue(e, t, o, n);
      },
      getValue: function getValue(e, t, o) {
        return t.store.manager.getValue(e, t, o);
      },
      getState: function getState(e, t, o) {
        return o;
      }
    }),
    ru = Object.freeze({
      __proto__: null,
      events: function events(e, t) {
        var o = e.resetOnDom ? [Kr(function (o, n) {
          ou(o, e, t);
        }), Jr(function (o, n) {
          nu(o, e, t);
        })] : [xl(e, t, ou)];
        return Hr(o);
      }
    });
  var au = function au() {
      var e = Es(null);
      return _a({
        set: e.set,
        get: e.get,
        isNotSet: function isNotSet() {
          return null === e.get();
        },
        clear: function clear() {
          e.set(null);
        },
        readState: function readState() {
          return {
            mode: "memory",
            value: e.get()
          };
        }
      });
    },
    iu = function iu() {
      var e = Es({}),
        t = Es({});
      return _a({
        readState: function readState() {
          return {
            mode: "dataset",
            dataByValue: e.get(),
            dataByText: t.get()
          };
        },
        lookup: function lookup(o) {
          return be(e.get(), o).orThunk(function () {
            return be(t.get(), o);
          });
        },
        update: function update(o) {
          var n = e.get(),
            s = t.get(),
            r = {},
            a = {};
          L(o, function (e) {
            r[e.value] = e, be(e, "meta").each(function (t) {
              be(t, "text").each(function (t) {
                a[t] = e;
              });
            });
          }), e.set(_objectSpread(_objectSpread({}, n), r)), t.set(_objectSpread(_objectSpread({}, s), a));
        },
        clear: function clear() {
          e.set({}), t.set({});
        }
      });
    };
  var lu = Object.freeze({
    __proto__: null,
    memory: au,
    dataset: iu,
    manual: function manual() {
      return _a({
        readState: b
      });
    },
    init: function init(e) {
      return e.store.manager.state(e);
    }
  });
  var cu = function cu(e, t, o, n) {
    var s = t.store;
    o.update([n]), s.setValue(e, n), t.onSetValue(e, n);
  };
  var du = [us("initialValue"), os("getFallbackEntry"), os("getDataKey"), os("setValue"), Ri("manager", {
      setValue: cu,
      getValue: function getValue(e, t, o) {
        var n = t.store,
          s = n.getDataKey(e);
        return o.lookup(s).getOrThunk(function () {
          return n.getFallbackEntry(s);
        });
      },
      onLoad: function onLoad(e, t, o) {
        t.store.initialValue.each(function (n) {
          cu(e, t, o, n);
        });
      },
      onUnload: function onUnload(e, t, o) {
        o.clear();
      },
      state: iu
    })],
    uu = [os("getValue"), ys("setValue", b), us("initialValue"), Ri("manager", {
      setValue: function setValue(e, t, o, n) {
        t.store.setValue(e, n), t.onSetValue(e, n);
      },
      getValue: function getValue(e, t, o) {
        return t.store.getValue(e);
      },
      onLoad: function onLoad(e, t, o) {
        t.store.initialValue.each(function (o) {
          t.store.setValue(e, o);
        });
      },
      onUnload: b,
      state: Oa.init
    })],
    mu = [us("initialValue"), Ri("manager", {
      setValue: function setValue(e, t, o, n) {
        o.set(n), t.onSetValue(e, n);
      },
      getValue: function getValue(e, t, o) {
        return o.get();
      },
      onLoad: function onLoad(e, t, o) {
        t.store.initialValue.each(function (e) {
          o.isNotSet() && o.set(e);
        });
      },
      onUnload: function onUnload(e, t, o) {
        o.clear();
      },
      state: au
    })],
    gu = [xs("store", {
      mode: "memory"
    }, Jn("mode", {
      memory: mu,
      manual: uu,
      dataset: du
    })), Di("onSetValue"), ys("resetOnDom", !1)];
  var pu = Ol({
      fields: gu,
      name: "representing",
      active: ru,
      apis: su,
      extra: {
        setValueFrom: function setValueFrom(e, t) {
          var o = pu.getValue(t);
          pu.setValue(e, o);
        }
      },
      state: lu
    }),
    hu = function hu(e, t) {
      return Ts(e, {}, H(t, function (t) {
        return o = t.name(), n = "Cannot configure " + t.name() + " for " + e, Qn(o, o, {
          tag: "option",
          process: {}
        }, Cn(function (e) {
          return un("The field: " + o + " is forbidden. " + n);
        }));
        var o, n;
      }).concat([es("dump", w)]));
    },
    fu = function fu(e) {
      return e.dump;
    },
    bu = function bu(e, t) {
      return _objectSpread(_objectSpread({}, kl(t)), e.dump);
    },
    vu = hu,
    yu = bu,
    xu = "placeholder",
    wu = As([{
      single: ["required", "valueThunk"]
    }, {
      multiple: ["required", "valueThunks"]
    }]),
    Su = function Su(e) {
      return ve(e, "uiType");
    },
    ku = function ku(e, t, o, n) {
      return function (e, t, o, n) {
        return Su(o) && o.uiType === xu ? function (e, t, o, n) {
          return e.exists(function (e) {
            return e !== o.owner;
          }) ? wu.single(!0, x(o)) : be(n, o.name).fold(function () {
            throw new Error("Unknown placeholder component: " + o.name + "\nKnown: [" + ae(n) + "]\nNamespace: " + e.getOr("none") + "\nSpec: " + JSON.stringify(o, null, 2));
          }, function (e) {
            return e.replace();
          });
        }(e, 0, o, n) : wu.single(!1, x(o));
      }(e, 0, o, n).fold(function (s, r) {
        var a = Su(o) ? r(t, o.config, o.validated) : r(t),
          i = be(a, "components").getOr([]),
          l = X(i, function (o) {
            return ku(e, t, o, n);
          });
        return [_objectSpread(_objectSpread({}, a), {}, {
          components: l
        })];
      }, function (e, n) {
        if (Su(o)) {
          var _e10 = n(t, o.config, o.validated);
          return o.validated.preprocess.getOr(w)(_e10);
        }
        return n(t);
      });
    },
    Cu = wu.single,
    Ou = wu.multiple,
    _u = x(xu),
    Tu = As([{
      required: ["data"]
    }, {
      external: ["data"]
    }, {
      optional: ["data"]
    }, {
      group: ["data"]
    }]),
    Eu = ys("factory", {
      sketch: w
    }),
    Au = ys("schema", []),
    Mu = os("name"),
    Du = Qn("pname", "pname", vn(function (e) {
      return "<alloy." + la(e.name) + ">";
    }), Nn()),
    Bu = es("schema", function () {
      return [us("preprocess")];
    }),
    Fu = ys("defaults", x({})),
    Iu = ys("overrides", x({})),
    Ru = Dn([Eu, Au, Mu, Du, Fu, Iu]),
    Nu = Dn([Eu, Au, Mu, Fu, Iu]),
    Vu = Dn([Eu, Au, Mu, Du, Fu, Iu]),
    zu = Dn([Eu, Bu, Mu, os("unit"), Du, Fu, Iu]),
    Hu = function Hu(e) {
      return e.fold(A.some, A.none, A.some, A.some);
    },
    Lu = function Lu(e) {
      var t = function t(e) {
        return e.name;
      };
      return e.fold(t, t, t, t);
    },
    Pu = function Pu(e, t) {
      return function (o) {
        var n = Yn("Converting part type", t, o);
        return e(n);
      };
    },
    Uu = Pu(Tu.required, Ru),
    Wu = Pu(Tu.external, Nu),
    ju = Pu(Tu.optional, Vu),
    Gu = Pu(Tu.group, zu),
    $u = x("entirety");
  var qu = Object.freeze({
    __proto__: null,
    required: Uu,
    external: Wu,
    optional: ju,
    group: Gu,
    asNamedPart: Hu,
    name: Lu,
    asCommon: function asCommon(e) {
      return e.fold(w, w, w, w);
    },
    original: $u
  });
  var Xu = function Xu(e, t, o, n) {
      return fn(t.defaults(e, o, n), o, {
        uid: e.partUids[t.name]
      }, t.overrides(e, o, n));
    },
    Yu = function Yu(e, t) {
      var o = {};
      return L(t, function (t) {
        Hu(t).each(function (t) {
          var n = Ku(e, t.pname);
          o[t.name] = function (o) {
            var s = Yn("Part: " + t.name + " in " + e, Dn(t.schema), o);
            return _objectSpread(_objectSpread({}, n), {}, {
              config: o,
              validated: s
            });
          };
        });
      }), o;
    },
    Ku = function Ku(e, t) {
      return {
        uiType: _u(),
        owner: e,
        name: t
      };
    },
    Ju = function Ju(e, t, o) {
      return {
        uiType: _u(),
        owner: e,
        name: t,
        config: o,
        validated: {}
      };
    },
    Zu = function Zu(e) {
      return X(e, function (e) {
        return e.fold(A.none, A.some, A.none, A.none).map(function (e) {
          return ls(e.name, e.schema.concat([Ni($u())]));
        }).toArray();
      });
    },
    Qu = function Qu(e) {
      return H(e, Lu);
    },
    em = function em(e, t, o) {
      return function (e, t, o) {
        var n = {},
          s = {};
        return L(o, function (e) {
          e.fold(function (e) {
            n[e.pname] = Cu(!0, function (t, o, n) {
              return e.factory.sketch(Xu(t, e, o, n));
            });
          }, function (e) {
            var o = t.parts[e.name];
            s[e.name] = x(e.factory.sketch(Xu(t, e, o[$u()]), o));
          }, function (e) {
            n[e.pname] = Cu(!1, function (t, o, n) {
              return e.factory.sketch(Xu(t, e, o, n));
            });
          }, function (e) {
            n[e.pname] = Ou(!0, function (t, o, n) {
              var s = t[e.name];
              return H(s, function (o) {
                return e.factory.sketch(fn(e.defaults(t, o, n), o, e.overrides(t, o)));
              });
            });
          });
        }), {
          internals: x(n),
          externals: x(s)
        };
      }(0, t, o);
    },
    tm = function tm(e, t, o) {
      return function (e, t, o, n) {
        var s = ce(n, function (e, t) {
            return function (e, t) {
              var o = !1;
              return {
                name: x(e),
                required: function required() {
                  return t.fold(function (e, t) {
                    return e;
                  }, function (e, t) {
                    return e;
                  });
                },
                used: function used() {
                  return o;
                },
                replace: function replace() {
                  if (o) throw new Error("Trying to use the same placeholder more than once: " + e);
                  return o = !0, t;
                }
              };
            }(t, e);
          }),
          r = function (e, t, o, n) {
            return X(o, function (o) {
              return ku(e, t, o, n);
            });
          }(e, t, o, s);
        return le(s, function (o) {
          if (!1 === o.used() && o.required()) throw new Error("Placeholder: " + o.name() + " was not found in components list\nNamespace: " + e.getOr("none") + "\nComponents: " + JSON.stringify(t.components, null, 2));
        }), r;
      }(A.some(e), t, t.components, o);
    },
    om = function om(e, t, o) {
      var n = t.partUids[o];
      return e.getSystem().getByUid(n).toOptional();
    },
    nm = function nm(e, t, o) {
      return om(e, t, o).getOrDie("Could not find part: " + o);
    },
    sm = function sm(e, t, o) {
      var n = {},
        s = t.partUids,
        r = e.getSystem();
      return L(o, function (e) {
        n[e] = x(r.getByUid(s[e]));
      }), n;
    },
    rm = function rm(e, t) {
      var o = e.getSystem();
      return ce(t.partUids, function (e, t) {
        return x(o.getByUid(e));
      });
    },
    am = function am(e) {
      return ae(e.partUids);
    },
    im = function im(e, t, o) {
      var n = {},
        s = t.partUids,
        r = e.getSystem();
      return L(o, function (e) {
        n[e] = x(r.getByUid(s[e]).getOrDie());
      }), n;
    },
    lm = function lm(e, t) {
      var o = Qu(t);
      return Ds(H(o, function (t) {
        return {
          key: t,
          value: e + "-" + t
        };
      }));
    },
    cm = function cm(e) {
      return Qn("partUids", "partUids", xn(function (t) {
        return lm(t.uid, e);
      }), Nn());
    };
  var dm = Object.freeze({
    __proto__: null,
    generate: Yu,
    generateOne: Ju,
    schemas: Zu,
    names: Qu,
    substitutes: em,
    components: tm,
    defaultUids: lm,
    defaultUidsSchema: cm,
    getAllParts: rm,
    getAllPartNames: am,
    getPart: om,
    getPartOrDie: nm,
    getParts: sm,
    getPartsOrDie: im
  });
  var um = function um(e, t, o, n, s) {
      var r = function (e, t) {
        return (e.length > 0 ? [ls("parts", e)] : []).concat([os("uid"), ys("dom", {}), ys("components", []), Ni("originalSpec"), ys("debug.sketcher", {})]).concat(t);
      }(n, s);
      return Yn(e + " [SpecSchema]", Mn(r.concat(t)), o);
    },
    mm = function mm(e, t, o, n, s) {
      var r = gm(s),
        a = Zu(o),
        i = cm(o),
        l = um(e, t, r, a, [i]),
        c = em(0, l, o);
      return n(l, tm(e, l, c.internals()), r, c.externals());
    },
    gm = function gm(e) {
      return function (e) {
        return ve(e, "uid");
      }(e) ? e : _objectSpread(_objectSpread({}, e), {}, {
        uid: ha("uid")
      });
    },
    pm = Mn([os("name"), os("factory"), os("configFields"), ys("apis", {}), ys("extraApis", {})]),
    hm = Mn([os("name"), os("factory"), os("configFields"), os("partFields"), ys("apis", {}), ys("extraApis", {})]),
    fm = function fm(e) {
      var t = Yn("Sketcher for " + e.name, pm, e),
        o = ce(t.apis, Ca),
        n = ce(t.extraApis, function (e, t) {
          return xa(e, t);
        });
      return _objectSpread(_objectSpread({
        name: t.name,
        configFields: t.configFields,
        sketch: function sketch(e) {
          return function (e, t, o, n) {
            var s = gm(n);
            return o(um(e, t, s, [], []), s);
          }(t.name, t.configFields, t.factory, e);
        }
      }, o), n);
    },
    bm = function bm(e) {
      var t = Yn("Sketcher for " + e.name, hm, e),
        o = Yu(t.name, t.partFields),
        n = ce(t.apis, Ca),
        s = ce(t.extraApis, function (e, t) {
          return xa(e, t);
        });
      return _objectSpread(_objectSpread({
        name: t.name,
        partFields: t.partFields,
        configFields: t.configFields,
        sketch: function sketch(e) {
          return mm(t.name, t.configFields, t.partFields, t.factory, e);
        },
        parts: o
      }, n), s);
    },
    vm = function vm(e) {
      return Ye("input")(e) && "radio" !== Ot(e, "type") || Ye("textarea")(e);
    };
  var ym = Object.freeze({
    __proto__: null,
    getCurrent: function getCurrent(e, t, o) {
      return t.find(e);
    }
  });
  var xm = [os("find")],
    wm = Ol({
      fields: xm,
      name: "composing",
      apis: ym
    }),
    Sm = ["input", "button", "textarea", "select"],
    km = function km(e, t, o) {
      (t.disabled() ? Am : Mm)(e, t);
    },
    Cm = function Cm(e, t) {
      return !0 === t.useNative && R(Sm, Ue(e.element));
    },
    Om = function Om(e) {
      kt(e.element, "disabled", "disabled");
    },
    _m = function _m(e) {
      Et(e.element, "disabled");
    },
    Tm = function Tm(e) {
      kt(e.element, "aria-disabled", "true");
    },
    Em = function Em(e) {
      kt(e.element, "aria-disabled", "false");
    },
    Am = function Am(e, t, o) {
      t.disableClass.each(function (t) {
        La(e.element, t);
      }), (Cm(e, t) ? Om : Tm)(e), t.onDisabled(e);
    },
    Mm = function Mm(e, t, o) {
      t.disableClass.each(function (t) {
        Pa(e.element, t);
      }), (Cm(e, t) ? _m : Em)(e), t.onEnabled(e);
    },
    Dm = function Dm(e, t) {
      return Cm(e, t) ? function (e) {
        return Tt(e.element, "disabled");
      }(e) : function (e) {
        return "true" === Ot(e.element, "aria-disabled");
      }(e);
    };
  var Bm = Object.freeze({
      __proto__: null,
      enable: Mm,
      disable: Am,
      isDisabled: Dm,
      onLoad: km,
      set: function set(e, t, o, n) {
        (n ? Am : Mm)(e, t);
      }
    }),
    Fm = Object.freeze({
      __proto__: null,
      exhibit: function exhibit(e, t) {
        return Ea({
          classes: t.disabled() ? t.disableClass.toArray() : []
        });
      },
      events: function events(e, t) {
        return Hr([Lr(ur(), function (t, o) {
          return Dm(t, e);
        }), xl(e, t, km)]);
      }
    }),
    Im = [Os("disabled", T), ys("useNative", !0), us("disableClass"), Di("onDisabled"), Di("onEnabled")];
  var Rm = Ol({
      fields: Im,
      name: "disabling",
      active: Fm,
      apis: Bm
    }),
    Nm = function Nm(e, t, o, n) {
      var s = Xc(e.element, "." + t.highlightClass);
      L(s, function (o) {
        N(n, function (e) {
          return Ze(e.element, o);
        }) || (Pa(o, t.highlightClass), e.getSystem().getByDom(o).each(function (o) {
          t.onDehighlight(e, o), Fr(o, Br());
        }));
      });
    },
    Vm = function Vm(e, t, o, n) {
      Nm(e, t, 0, [n]), zm(e, t, o, n) || (La(n.element, t.highlightClass), t.onHighlight(e, n), Fr(n, Dr()));
    },
    zm = function zm(e, t, o, n) {
      return Ua(n.element, t.highlightClass);
    },
    Hm = function Hm(e, t, o) {
      return pi(e.element, "." + t.itemClass).bind(function (t) {
        return e.getSystem().getByDom(t).toOptional();
      });
    },
    Lm = function Lm(e, t, o) {
      var n = Xc(e.element, "." + t.itemClass);
      return (n.length > 0 ? A.some(n[n.length - 1]) : A.none()).bind(function (t) {
        return e.getSystem().getByDom(t).toOptional();
      });
    },
    Pm = function Pm(e, t, o, n) {
      var s = Xc(e.element, "." + t.itemClass);
      return $(s, function (e) {
        return Ua(e, t.highlightClass);
      }).bind(function (t) {
        var o = Xi(t, n, 0, s.length - 1);
        return e.getSystem().getByDom(s[o]).toOptional();
      });
    },
    Um = function Um(e, t, o) {
      var n = Xc(e.element, "." + t.itemClass);
      return we(H(n, function (t) {
        return e.getSystem().getByDom(t).toOptional();
      }));
    };
  var Wm = Object.freeze({
      __proto__: null,
      dehighlightAll: function dehighlightAll(e, t, o) {
        return Nm(e, t, 0, []);
      },
      dehighlight: function dehighlight(e, t, o, n) {
        zm(e, t, o, n) && (Pa(n.element, t.highlightClass), t.onDehighlight(e, n), Fr(n, Br()));
      },
      highlight: Vm,
      highlightFirst: function highlightFirst(e, t, o) {
        Hm(e, t).each(function (n) {
          Vm(e, t, o, n);
        });
      },
      highlightLast: function highlightLast(e, t, o) {
        Lm(e, t).each(function (n) {
          Vm(e, t, o, n);
        });
      },
      highlightAt: function highlightAt(e, t, o, n) {
        (function (e, t, o, n) {
          var s = Xc(e.element, "." + t.itemClass);
          return A.from(s[n]).fold(function () {
            return sn.error(new Error("No element found with index " + n));
          }, e.getSystem().getByDom);
        })(e, t, 0, n).fold(function (e) {
          throw e;
        }, function (n) {
          Vm(e, t, o, n);
        });
      },
      highlightBy: function highlightBy(e, t, o, n) {
        var s = Um(e, t);
        G(s, n).each(function (n) {
          Vm(e, t, o, n);
        });
      },
      isHighlighted: zm,
      getHighlighted: function getHighlighted(e, t, o) {
        return pi(e.element, "." + t.highlightClass).bind(function (t) {
          return e.getSystem().getByDom(t).toOptional();
        });
      },
      getFirst: Hm,
      getLast: Lm,
      getPrevious: function getPrevious(e, t, o) {
        return Pm(e, t, 0, -1);
      },
      getNext: function getNext(e, t, o) {
        return Pm(e, t, 0, 1);
      },
      getCandidates: Um
    }),
    jm = [os("highlightClass"), os("itemClass"), Di("onHighlight"), Di("onDehighlight")];
  var Gm = Ol({
      fields: jm,
      name: "highlighting",
      apis: Wm
    }),
    $m = [8],
    qm = [9],
    Xm = [13],
    Ym = [27],
    Km = [32],
    Jm = [37],
    Zm = [38],
    Qm = [39],
    eg = [40],
    tg = function tg(e, t, o) {
      var n = K(e.slice(0, t)),
        s = K(e.slice(t + 1));
      return G(n.concat(s), o);
    },
    og = function og(e, t, o) {
      var n = K(e.slice(0, t));
      return G(n, o);
    },
    ng = function ng(e, t, o) {
      var n = e.slice(0, t),
        s = e.slice(t + 1);
      return G(s.concat(n), o);
    },
    sg = function sg(e, t, o) {
      var n = e.slice(t + 1);
      return G(n, o);
    },
    rg = function rg(e) {
      return function (t) {
        var o = t.raw;
        return R(e, o.which);
      };
    },
    ag = function ag(e) {
      return function (t) {
        return Y(e, function (e) {
          return e(t);
        });
      };
    },
    ig = function ig(e) {
      return !0 === e.raw.shiftKey;
    },
    lg = function lg(e) {
      return !0 === e.raw.ctrlKey;
    },
    cg = C(ig),
    dg = function dg(e, t) {
      return {
        matches: e,
        classification: t
      };
    },
    ug = function ug(e, t, o) {
      t.exists(function (e) {
        return o.exists(function (t) {
          return Ze(t, e);
        });
      }) || Ir(e, _r(), {
        prevFocus: t,
        newFocus: o
      });
    },
    mg = function mg() {
      var e = function e(_e11) {
        return Rl(_e11.element);
      };
      return {
        get: e,
        set: function set(t, o) {
          var n = e(t);
          t.getSystem().triggerFocus(o, t.element);
          var s = e(t);
          ug(t, n, s);
        }
      };
    },
    gg = function gg() {
      var e = function e(_e12) {
        return Gm.getHighlighted(_e12).map(function (e) {
          return e.element;
        });
      };
      return {
        get: e,
        set: function set(t, o) {
          var n = e(t);
          t.getSystem().getByDom(o).fold(b, function (e) {
            Gm.highlight(t, e);
          });
          var s = e(t);
          ug(t, n, s);
        }
      };
    };
  var pg;
  !function (e) {
    e.OnFocusMode = "onFocus", e.OnEnterOrSpaceMode = "onEnterOrSpace", e.OnApiMode = "onApi";
  }(pg || (pg = {}));
  var hg = function hg(e, t, o, n, s) {
      var r = function r(e, t, o, n, s) {
          return (r = o(e, t, n, s), a = t.event, G(r, function (e) {
            return e.matches(a);
          }).map(function (e) {
            return e.classification;
          })).bind(function (o) {
            return o(e, t, n, s);
          });
          var r, a;
        },
        a = {
          schema: function schema() {
            return e.concat([ys("focusManager", mg()), xs("focusInside", "onFocus", Gn(function (e) {
              return R(["onFocus", "onEnterOrSpace", "onApi"], e) ? sn.value(e) : sn.error("Invalid value for focusInside");
            })), Ri("handler", a), Ri("state", t), Ri("sendFocusIn", s)]);
          },
          processKey: r,
          toEvents: function toEvents(e, t) {
            var a = e.focusInside !== pg.OnFocusMode ? A.none() : s(e).map(function (o) {
                return Ur(ir(), function (n, s) {
                  o(n, e, t), s.stop();
                });
              }),
              i = [Ur(Ks(), function (n, a) {
                r(n, a, o, e, t).fold(function () {
                  (function (o, n) {
                    var r = rg(Km.concat(Xm))(n.event);
                    e.focusInside === pg.OnEnterOrSpaceMode && r && Rs(o, n) && s(e).each(function (s) {
                      s(o, e, t), n.stop();
                    });
                  })(n, a);
                }, function (e) {
                  a.stop();
                });
              }), Ur(Js(), function (o, s) {
                r(o, s, n, e, t).each(function (e) {
                  s.stop();
                });
              })];
            return Hr(a.toArray().concat(i));
          }
        };
      return a;
    },
    fg = function fg(e) {
      var t = [us("onEscape"), us("onEnter"), ys("selector", '[data-alloy-tabstop="true"]:not(:disabled)'), ys("firstTabstop", 0), ys("useTabstopAt", E), us("visibilitySelector")].concat([e]),
        o = function o(e, t) {
          var o = e.visibilitySelector.bind(function (e) {
            return hi(t, e);
          }).getOr(t);
          return Wt(o) > 0;
        },
        n = function n(e, t) {
          return t.focusManager.get(e).bind(function (e) {
            return hi(e, t.selector);
          });
        },
        s = function s(e, t, n) {
          (function (e, t) {
            var n = Xc(e.element, t.selector),
              s = U(n, function (e) {
                return o(t, e);
              });
            return A.from(s[t.firstTabstop]);
          })(e, t).each(function (o) {
            t.focusManager.set(e, o);
          });
        },
        r = function r(e, t, s, _r8) {
          var a = Xc(e.element, s.selector);
          return n(e, s).bind(function (t) {
            return $(a, k(Ze, t)).bind(function (t) {
              return function (e, t, n, s, r) {
                return r(t, n, function (e) {
                  return function (e, t) {
                    return o(e, t) && e.useTabstopAt(t);
                  }(s, e);
                }).fold(function () {
                  return s.cyclic ? A.some(!0) : A.none();
                }, function (t) {
                  return s.focusManager.set(e, t), A.some(!0);
                });
              }(e, a, t, s, _r8);
            });
          });
        },
        a = function a(e, t, o) {
          var n = o.cyclic ? tg : og;
          return r(e, 0, o, n);
        },
        i = function i(e, t, o) {
          var n = o.cyclic ? ng : sg;
          return r(e, 0, o, n);
        },
        l = x([dg(ag([ig, rg(qm)]), a), dg(rg(qm), i), dg(ag([cg, rg(Xm)]), function (e, t, o) {
          return o.onEnter.bind(function (o) {
            return o(e, t);
          });
        })]),
        c = x([dg(rg(Ym), function (e, t, o) {
          return o.onEscape.bind(function (o) {
            return o(e, t);
          });
        }), dg(rg(qm), function (e, t, o) {
          return n(e, o).filter(function (e) {
            return !o.useTabstopAt(e);
          }).bind(function (n) {
            return (function (e) {
              return function (e) {
                return st(e);
              }(e).bind(ct).exists(function (t) {
                return Ze(t, e);
              });
            }(n) ? a : i)(e, t, o);
          });
        })]);
      return hg(t, Oa.init, l, c, function () {
        return A.some(s);
      });
    };
  var bg = fg(es("cyclic", T)),
    vg = fg(es("cyclic", E));
  var yg = function yg(e, t, o) {
      return vm(o) && rg(Km)(t.event) ? A.none() : function (e, t, o) {
        return Nr(e, o, ur()), A.some(!0);
      }(e, 0, o);
    },
    xg = function xg(e, t) {
      return A.some(!0);
    },
    wg = [ys("execute", yg), ys("useSpace", !1), ys("useEnter", !0), ys("useControlEnter", !1), ys("useDown", !1)],
    Sg = function Sg(e, t, o) {
      return o.execute(e, t, e.element);
    };
  var kg = hg(wg, Oa.init, function (e, t, o, n) {
    var s = o.useSpace && !vm(e.element) ? Km : [],
      r = o.useEnter ? Xm : [],
      a = o.useDown ? eg : [],
      i = s.concat(r).concat(a);
    return [dg(rg(i), Sg)].concat(o.useControlEnter ? [dg(ag([lg, rg(Xm)]), Sg)] : []);
  }, function (e, t, o, n) {
    return o.useSpace && !vm(e.element) ? [dg(rg(Km), xg)] : [];
  }, function () {
    return A.none();
  });
  var Cg = function Cg() {
    var e = Ql();
    return _a({
      readState: function readState() {
        return e.get().map(function (e) {
          return {
            numRows: String(e.numRows),
            numColumns: String(e.numColumns)
          };
        }).getOr({
          numRows: "?",
          numColumns: "?"
        });
      },
      setGridSize: function setGridSize(t, o) {
        e.set({
          numRows: t,
          numColumns: o
        });
      },
      getNumRows: function getNumRows() {
        return e.get().map(function (e) {
          return e.numRows;
        });
      },
      getNumColumns: function getNumColumns() {
        return e.get().map(function (e) {
          return e.numColumns;
        });
      }
    });
  };
  var Og = Object.freeze({
    __proto__: null,
    flatgrid: Cg,
    init: function init(e) {
      return e.state(e);
    }
  });
  var _g = function _g(e) {
      return function (t, o, n, s) {
        var r = e(t.element);
        return Mg(r, t, o, n, s);
      };
    },
    Tg = function Tg(e, t) {
      var o = fc(e, t);
      return _g(o);
    },
    Eg = function Eg(e, t) {
      var o = fc(t, e);
      return _g(o);
    },
    Ag = function Ag(e) {
      return function (t, o, n, s) {
        return Mg(e, t, o, n, s);
      };
    },
    Mg = function Mg(e, t, o, n, s) {
      return n.focusManager.get(t).bind(function (o) {
        return e(t.element, o, n, s);
      }).map(function (e) {
        return n.focusManager.set(t, e), !0;
      });
    },
    Dg = Ag,
    Bg = Ag,
    Fg = Ag,
    Ig = function Ig(e) {
      return !function (e) {
        return e.offsetWidth <= 0 && e.offsetHeight <= 0;
      }(e.dom);
    },
    Rg = function Rg(e, t, o) {
      var n = Xc(e, o);
      return function (e, o) {
        return $(e, function (e) {
          return Ze(e, t);
        }).map(function (t) {
          return {
            index: t,
            candidates: e
          };
        });
      }(U(n, Ig));
    },
    Ng = function Ng(e, t) {
      return $(e, function (e) {
        return Ze(t, e);
      });
    },
    Vg = function Vg(e, t, o, n) {
      return n(Math.floor(t / o), t % o).bind(function (t) {
        var n = t.row * o + t.column;
        return n >= 0 && n < e.length ? A.some(e[n]) : A.none();
      });
    },
    zg = function zg(e, t, o, n, s) {
      return Vg(e, t, n, function (t, r) {
        var a = t === o - 1 ? e.length - t * n : n,
          i = Xi(r, s, 0, a - 1);
        return A.some({
          row: t,
          column: i
        });
      });
    },
    Hg = function Hg(e, t, o, n, s) {
      return Vg(e, t, n, function (t, r) {
        var a = Xi(t, s, 0, o - 1),
          i = a === o - 1 ? e.length - a * n : n,
          l = Yi(r, 0, i - 1);
        return A.some({
          row: a,
          column: l
        });
      });
    },
    Lg = [os("selector"), ys("execute", yg), Bi("onEscape"), ys("captureTab", !1), Vi()],
    Pg = function Pg(e, t, o) {
      pi(e.element, t.selector).each(function (o) {
        t.focusManager.set(e, o);
      });
    },
    Ug = function Ug(e) {
      return function (t, o, n, s) {
        return Rg(t, o, n.selector).bind(function (t) {
          return e(t.candidates, t.index, s.getNumRows().getOr(n.initSize.numRows), s.getNumColumns().getOr(n.initSize.numColumns));
        });
      };
    },
    Wg = function Wg(e, t, o) {
      return o.captureTab ? A.some(!0) : A.none();
    },
    jg = Ug(function (e, t, o, n) {
      return zg(e, t, o, n, -1);
    }),
    Gg = Ug(function (e, t, o, n) {
      return zg(e, t, o, n, 1);
    }),
    $g = Ug(function (e, t, o, n) {
      return Hg(e, t, o, n, -1);
    }),
    qg = Ug(function (e, t, o, n) {
      return Hg(e, t, o, n, 1);
    }),
    Xg = x([dg(rg(Jm), Tg(jg, Gg)), dg(rg(Qm), Eg(jg, Gg)), dg(rg(Zm), Dg($g)), dg(rg(eg), Bg(qg)), dg(ag([ig, rg(qm)]), Wg), dg(ag([cg, rg(qm)]), Wg), dg(rg(Km.concat(Xm)), function (e, t, o, n) {
      return function (e, t) {
        return t.focusManager.get(e).bind(function (e) {
          return hi(e, t.selector);
        });
      }(e, o).bind(function (n) {
        return o.execute(e, t, n);
      });
    })]),
    Yg = x([dg(rg(Ym), function (e, t, o) {
      return o.onEscape(e, t);
    }), dg(rg(Km), xg)]);
  var Kg = hg(Lg, Cg, Xg, Yg, function () {
    return A.some(Pg);
  });
  var Jg = function Jg(e, t, o, n, s) {
      var r = function r(e, t, o) {
        return s(e, t, n, 0, o.length - 1, o[t], function (t) {
          return n = o[t], "button" === Ue(n) && "disabled" === Ot(n, "disabled") ? r(e, t, o) : A.from(o[t]);
          var n;
        });
      };
      return Rg(e, o, t).bind(function (e) {
        var t = e.index,
          o = e.candidates;
        return r(t, t, o);
      });
    },
    Zg = function Zg(e, t, o, n) {
      return Jg(e, t, o, n, function (e, t, o, n, s, r, a) {
        var i = Yi(t + o, n, s);
        return i === e ? A.from(r) : a(i);
      });
    },
    Qg = function Qg(e, t, o, n) {
      return Jg(e, t, o, n, function (e, t, o, n, s, r, a) {
        var i = Xi(t, o, n, s);
        return i === e ? A.none() : a(i);
      });
    },
    ep = [os("selector"), ys("getInitial", A.none), ys("execute", yg), Bi("onEscape"), ys("executeOnMove", !1), ys("allowVertical", !0), ys("allowHorizontal", !0), ys("cycles", !0)],
    tp = function tp(e, t, o) {
      return function (e, t) {
        return t.focusManager.get(e).bind(function (e) {
          return hi(e, t.selector);
        });
      }(e, o).bind(function (n) {
        return o.execute(e, t, n);
      });
    },
    op = function op(e, t, o) {
      t.getInitial(e).orThunk(function () {
        return pi(e.element, t.selector);
      }).each(function (o) {
        t.focusManager.set(e, o);
      });
    },
    np = function np(e, t, o) {
      return (o.cycles ? Qg : Zg)(e, o.selector, t, -1);
    },
    sp = function sp(e, t, o) {
      return (o.cycles ? Qg : Zg)(e, o.selector, t, 1);
    },
    rp = function rp(e) {
      return function (t, o, n, s) {
        return e(t, o, n, s).bind(function () {
          return n.executeOnMove ? tp(t, o, n) : A.some(!0);
        });
      };
    },
    ap = x([dg(rg(Km), xg), dg(rg(Ym), function (e, t, o) {
      return o.onEscape(e, t);
    })]);
  var ip = hg(ep, Oa.init, function (e, t, o, n) {
    var s = _toConsumableArray(o.allowHorizontal ? Jm : []).concat(o.allowVertical ? Zm : []),
      r = _toConsumableArray(o.allowHorizontal ? Qm : []).concat(o.allowVertical ? eg : []);
    return [dg(rg(s), rp(Tg(np, sp))), dg(rg(r), rp(Eg(np, sp))), dg(rg(Xm), tp), dg(rg(Km), tp)];
  }, ap, function () {
    return A.some(op);
  });
  var lp = function lp(e, t, o) {
      return A.from(e[t]).bind(function (e) {
        return A.from(e[o]).map(function (e) {
          return {
            rowIndex: t,
            columnIndex: o,
            cell: e
          };
        });
      });
    },
    cp = function cp(e, t, o, n) {
      var s = e[t].length,
        r = Xi(o, n, 0, s - 1);
      return lp(e, t, r);
    },
    dp = function dp(e, t, o, n) {
      var s = Xi(o, n, 0, e.length - 1),
        r = e[s].length,
        a = Yi(t, 0, r - 1);
      return lp(e, s, a);
    },
    up = function up(e, t, o, n) {
      var s = e[t].length,
        r = Yi(o + n, 0, s - 1);
      return lp(e, t, r);
    },
    mp = function mp(e, t, o, n) {
      var s = Yi(o + n, 0, e.length - 1),
        r = e[s].length,
        a = Yi(t, 0, r - 1);
      return lp(e, s, a);
    },
    gp = [ls("selectors", [os("row"), os("cell")]), ys("cycles", !0), ys("previousSelector", A.none), ys("execute", yg)],
    pp = function pp(e, t, o) {
      t.previousSelector(e).orThunk(function () {
        var o = t.selectors;
        return pi(e.element, o.cell);
      }).each(function (o) {
        t.focusManager.set(e, o);
      });
    },
    hp = function hp(e, t) {
      return function (o, n, s) {
        var r = s.cycles ? e : t;
        return hi(n, s.selectors.row).bind(function (e) {
          var t = Xc(e, s.selectors.cell);
          return Ng(t, n).bind(function (t) {
            var n = Xc(o, s.selectors.row);
            return Ng(n, e).bind(function (e) {
              var o = function (e, t) {
                return H(e, function (e) {
                  return Xc(e, t.selectors.cell);
                });
              }(n, s);
              return r(o, e, t).map(function (e) {
                return e.cell;
              });
            });
          });
        });
      };
    },
    fp = hp(function (e, t, o) {
      return cp(e, t, o, -1);
    }, function (e, t, o) {
      return up(e, t, o, -1);
    }),
    bp = hp(function (e, t, o) {
      return cp(e, t, o, 1);
    }, function (e, t, o) {
      return up(e, t, o, 1);
    }),
    vp = hp(function (e, t, o) {
      return dp(e, o, t, -1);
    }, function (e, t, o) {
      return mp(e, o, t, -1);
    }),
    yp = hp(function (e, t, o) {
      return dp(e, o, t, 1);
    }, function (e, t, o) {
      return mp(e, o, t, 1);
    }),
    xp = x([dg(rg(Jm), Tg(fp, bp)), dg(rg(Qm), Eg(fp, bp)), dg(rg(Zm), Dg(vp)), dg(rg(eg), Bg(yp)), dg(rg(Km.concat(Xm)), function (e, t, o) {
      return Rl(e.element).bind(function (n) {
        return o.execute(e, t, n);
      });
    })]),
    wp = x([dg(rg(Km), xg)]);
  var Sp = hg(gp, Oa.init, xp, wp, function () {
    return A.some(pp);
  });
  var kp = [os("selector"), ys("execute", yg), ys("moveOnTab", !1)],
    Cp = function Cp(e, t, o) {
      return o.focusManager.get(e).bind(function (n) {
        return o.execute(e, t, n);
      });
    },
    Op = function Op(e, t, o) {
      pi(e.element, t.selector).each(function (o) {
        t.focusManager.set(e, o);
      });
    },
    _p = function _p(e, t, o) {
      return Qg(e, o.selector, t, -1);
    },
    Tp = function Tp(e, t, o) {
      return Qg(e, o.selector, t, 1);
    },
    Ep = x([dg(rg(Zm), Fg(_p)), dg(rg(eg), Fg(Tp)), dg(ag([ig, rg(qm)]), function (e, t, o, n) {
      return o.moveOnTab ? Fg(_p)(e, t, o, n) : A.none();
    }), dg(ag([cg, rg(qm)]), function (e, t, o, n) {
      return o.moveOnTab ? Fg(Tp)(e, t, o, n) : A.none();
    }), dg(rg(Xm), Cp), dg(rg(Km), Cp)]),
    Ap = x([dg(rg(Km), xg)]);
  var Mp = hg(kp, Oa.init, Ep, Ap, function () {
    return A.some(Op);
  });
  var Dp = [Bi("onSpace"), Bi("onEnter"), Bi("onShiftEnter"), Bi("onLeft"), Bi("onRight"), Bi("onTab"), Bi("onShiftTab"), Bi("onUp"), Bi("onDown"), Bi("onEscape"), ys("stopSpaceKeyup", !1), us("focusIn")];
  var Bp = hg(Dp, Oa.init, function (e, t, o) {
    return [dg(rg(Km), o.onSpace), dg(ag([cg, rg(Xm)]), o.onEnter), dg(ag([ig, rg(Xm)]), o.onShiftEnter), dg(ag([ig, rg(qm)]), o.onShiftTab), dg(ag([cg, rg(qm)]), o.onTab), dg(rg(Zm), o.onUp), dg(rg(eg), o.onDown), dg(rg(Jm), o.onLeft), dg(rg(Qm), o.onRight), dg(rg(Km), o.onSpace)];
  }, function (e, t, o) {
    return [].concat(_toConsumableArray(o.stopSpaceKeyup ? [dg(rg(Km), xg)] : []), [dg(rg(Ym), o.onEscape)]);
  }, function (e) {
    return e.focusIn;
  });
  var Fp = bg.schema(),
    Ip = vg.schema(),
    Rp = ip.schema(),
    Np = Kg.schema(),
    Vp = Sp.schema(),
    zp = kg.schema(),
    Hp = Mp.schema(),
    Lp = Bp.schema(),
    Pp = Tl({
      branchKey: "mode",
      branches: Object.freeze({
        __proto__: null,
        acyclic: Fp,
        cyclic: Ip,
        flow: Rp,
        flatgrid: Np,
        matrix: Vp,
        execution: zp,
        menu: Hp,
        special: Lp
      }),
      name: "keying",
      active: {
        events: function events(e, t) {
          return e.handler.toEvents(e, t);
        }
      },
      apis: {
        focusIn: function focusIn(e, t, o) {
          t.sendFocusIn(t).fold(function () {
            e.getSystem().triggerFocus(e.element, e.element);
          }, function (n) {
            n(e, t, o);
          });
        },
        setGridSize: function setGridSize(e, t, o, n, s) {
          (function (e) {
            return ye(e, "setGridSize");
          })(o) ? o.setGridSize(n, s) : console.error("Layout does not support setGridSize");
        }
      },
      state: Og
    }),
    Up = function Up(e, t) {
      Nl(function () {
        (function (e, t, o) {
          var n = e.components();
          (function (e) {
            L(e.components(), function (e) {
              return Po(e.element);
            }), Lo(e.element), e.syncComponents();
          })(e);
          var s = o(t),
            r = J(n, s);
          L(r, function (t) {
            Cd(t), e.getSystem().removeFromWorld(t);
          }), L(s, function (t) {
            kd(t) ? Ed(e, t) : (e.getSystem().addToWorld(t), Ed(e, t), yt(e.element) && Od(t));
          }), e.syncComponents();
        })(e, t, function () {
          return H(t, e.getSystem().build);
        });
      }, e.element);
    },
    Wp = function Wp(e, t) {
      Nl(function () {
        (function (o, n, s) {
          var r = o.components(),
            a = X(n, function (e) {
              return ka(e).toArray();
            });
          L(r, function (e) {
            R(a, e) || Td(e);
          });
          var i = function (e, t, o) {
              return Ya(e, t, function (t, n) {
                return Ka(e, n, t, o);
              });
            }(e.element, t, e.getSystem().buildOrPatch),
            l = J(r, i);
          L(l, function (e) {
            kd(e) && Td(e);
          }), L(i, function (e) {
            kd(e) || _d(o, e);
          }), o.syncComponents();
        })(e, t);
      }, e.element);
    },
    jp = function jp(e, t, o, n) {
      Td(t);
      var s = Ka(e.element, o, n, e.getSystem().buildOrPatch);
      _d(e, s), e.syncComponents();
    },
    Gp = function Gp(e, t, o) {
      var n = e.getSystem().build(o);
      Md(e, n, t);
    },
    $p = function $p(e, t, o, n) {
      Bd(t), Gp(e, function (e, t) {
        return function (e, t, o) {
          lt(e, o).fold(function () {
            zo(e, t);
          }, function (e) {
            Ro(e, t);
          });
        }(e, t, o);
      }, n);
    },
    qp = function qp(e, t) {
      return e.components();
    },
    Xp = function Xp(e, t, o, n, s) {
      var r = qp(e);
      return A.from(r[n]).map(function (o) {
        return s.fold(function () {
          return Bd(o);
        }, function (s) {
          (t.reuseDom ? jp : $p)(e, o, n, s);
        }), o;
      });
    };
  var Yp = Object.freeze({
    __proto__: null,
    append: function append(e, t, o, n) {
      Gp(e, zo, n);
    },
    prepend: function prepend(e, t, o, n) {
      Gp(e, Vo, n);
    },
    remove: function remove(e, t, o, n) {
      var s = qp(e),
        r = G(s, function (e) {
          return Ze(n.element, e.element);
        });
      r.each(Bd);
    },
    replaceAt: Xp,
    replaceBy: function replaceBy(e, t, o, n, s) {
      var r = qp(e);
      return $(r, n).bind(function (o) {
        return Xp(e, t, 0, o, s);
      });
    },
    set: function set(e, t, o, n) {
      return (t.reuseDom ? Wp : Up)(e, n);
    },
    contents: qp
  });
  var Kp = Ol({
      fields: [Cs("reuseDom", !0)],
      name: "replacing",
      apis: Yp
    }),
    Jp = function Jp(e, t) {
      var o = function (e, t) {
        var o = Hr(t);
        return Ol({
          fields: [os("enabled")],
          name: e,
          active: {
            events: x(o)
          }
        });
      }(e, t);
      return {
        key: e,
        value: {
          config: {},
          me: o,
          configAsRaw: x({}),
          initialConfig: {},
          state: Oa
        }
      };
    },
    Zp = function Zp(e, t) {
      t.ignore || (Dl(e.element), t.onFocus(e));
    };
  var Qp = Object.freeze({
      __proto__: null,
      focus: Zp,
      blur: function blur(e, t) {
        t.ignore || Bl(e.element);
      },
      isFocused: function isFocused(e) {
        return Fl(e.element);
      }
    }),
    eh = Object.freeze({
      __proto__: null,
      exhibit: function exhibit(e, t) {
        var o = t.ignore ? {} : {
          attributes: {
            tabindex: "-1"
          }
        };
        return Ea(o);
      },
      events: function events(e) {
        return Hr([Ur(ir(), function (t, o) {
          Zp(t, e), o.stop();
        })].concat(e.stopMousedown ? [Ur(Ws(), function (e, t) {
          t.event.prevent();
        })] : []));
      }
    }),
    th = [Di("onFocus"), ys("stopMousedown", !1), ys("ignore", !1)];
  var oh = Ol({
      fields: th,
      name: "focusing",
      active: eh,
      apis: Qp
    }),
    nh = function nh(e, t, o, n) {
      var s = o.get();
      o.set(n), function (e, t, o) {
        t.toggleClass.each(function (t) {
          o.get() ? La(e.element, t) : Pa(e.element, t);
        });
      }(e, t, o), function (e, t, o) {
        var n = t.aria;
        n.update(e, n, o.get());
      }(e, t, o), s !== n && t.onToggled(e, n);
    },
    sh = function sh(e, t, o) {
      nh(e, t, o, !o.get());
    },
    rh = function rh(e, t, o) {
      nh(e, t, o, t.selected);
    };
  var ah = Object.freeze({
      __proto__: null,
      onLoad: rh,
      toggle: sh,
      isOn: function isOn(e, t, o) {
        return o.get();
      },
      on: function on(e, t, o) {
        nh(e, t, o, !0);
      },
      off: function off(e, t, o) {
        nh(e, t, o, !1);
      },
      set: nh
    }),
    ih = Object.freeze({
      __proto__: null,
      exhibit: function exhibit() {
        return Ea({});
      },
      events: function events(e, t) {
        var o = (n = e, s = t, r = sh, Qr(function (e) {
          r(e, n, s);
        }));
        var n, s, r;
        var a = xl(e, t, rh);
        return Hr(q([e.toggleOnExecute ? [o] : [], [a]]));
      }
    });
  var lh = function lh(e, t, o) {
    kt(e.element, "aria-expanded", o);
  };
  var ch = [ys("selected", !1), us("toggleClass"), ys("toggleOnExecute", !0), Di("onToggled"), xs("aria", {
    mode: "none"
  }, Jn("mode", {
    pressed: [ys("syncWithExpanded", !1), Ri("update", function (e, t, o) {
      kt(e.element, "aria-pressed", o), t.syncWithExpanded && lh(e, 0, o);
    })],
    checked: [Ri("update", function (e, t, o) {
      kt(e.element, "aria-checked", o);
    })],
    expanded: [Ri("update", lh)],
    selected: [Ri("update", function (e, t, o) {
      kt(e.element, "aria-selected", o);
    })],
    none: [Ri("update", b)]
  }))];
  var dh = Ol({
    fields: ch,
    name: "toggling",
    active: ih,
    apis: ah,
    state: (!1, {
      init: function init() {
        var e = Es(false);
        return {
          get: function get() {
            return e.get();
          },
          set: function set(t) {
            return e.set(t);
          },
          clear: function clear() {
            return e.set(false);
          },
          readState: function readState() {
            return e.get();
          }
        };
      }
    })
  });
  var uh = function uh() {
      var e = function e(_e13, t) {
        t.stop(), Rr(_e13);
      };
      return [Ur(er(), e), Ur(gr(), e), qr(Hs()), qr(Ws())];
    },
    mh = function mh(e) {
      return Hr(q([e.map(function (e) {
        return Qr(function (t, o) {
          e(t), o.stop();
        });
      }).toArray(), uh()]));
    },
    gh = "alloy.item-hover",
    ph = "alloy.item-focus",
    hh = "alloy.item-toggled",
    fh = function fh(e) {
      (Rl(e.element).isNone() || oh.isFocused(e)) && (oh.isFocused(e) || oh.focus(e), Ir(e, gh, {
        item: e
      }));
    },
    bh = function bh(e) {
      Ir(e, ph, {
        item: e
      });
    },
    vh = x(gh),
    yh = x(ph),
    xh = x(hh),
    wh = function wh(e) {
      return e.toggling.map(function (e) {
        return e.exclusive ? "menuitemradio" : "menuitemcheckbox";
      }).getOr("menuitem");
    },
    Sh = [os("data"), os("components"), os("dom"), ys("hasSubmenu", !1), us("toggling"), vu("itemBehaviours", [dh, oh, Pp, pu]), ys("ignoreFocus", !1), ys("domModification", {}), Ri("builder", function (e) {
      return {
        dom: e.dom,
        domModification: _objectSpread(_objectSpread({}, e.domModification), {}, {
          attributes: _objectSpread(_objectSpread({
            role: wh(e)
          }, e.domModification.attributes), {}, {
            "aria-haspopup": e.hasSubmenu
          }, e.hasSubmenu ? {
            "aria-expanded": !1
          } : {})
        }),
        behaviours: yu(e.itemBehaviours, [e.toggling.fold(dh.revoke, function (e) {
          return dh.config(function (e) {
            return _objectSpread(_objectSpread({
              aria: {
                mode: "checked"
              }
            }, ge(e, function (e, t) {
              return "exclusive" !== t;
            })), {}, {
              onToggled: function onToggled(t, o) {
                p(e.onToggled) && e.onToggled(t, o), function (e, t) {
                  Ir(e, hh, {
                    item: e,
                    state: t
                  });
                }(t, o);
              }
            });
          }(e));
        }), oh.config({
          ignore: e.ignoreFocus,
          stopMousedown: e.ignoreFocus,
          onFocus: function onFocus(e) {
            bh(e);
          }
        }), Pp.config({
          mode: "execution"
        }), pu.config({
          store: {
            mode: "memory",
            initialValue: e.data
          }
        }), Jp("item-type-events", [].concat(_toConsumableArray(uh()), [Ur(qs(), fh), Ur(mr(), oh.focus)]))]),
        components: e.components,
        eventOrder: e.eventOrder
      };
    }), ys("eventOrder", {})],
    kh = [os("dom"), os("components"), Ri("builder", function (e) {
      return {
        dom: e.dom,
        components: e.components,
        events: Hr([Xr(mr())])
      };
    })],
    Ch = x("item-widget"),
    Oh = x([Uu({
      name: "widget",
      overrides: function overrides(e) {
        return {
          behaviours: kl([pu.config({
            store: {
              mode: "manual",
              getValue: function getValue(t) {
                return e.data;
              },
              setValue: b
            }
          })])
        };
      }
    })]),
    _h = [os("uid"), os("data"), os("components"), os("dom"), ys("autofocus", !1), ys("ignoreFocus", !1), vu("widgetBehaviours", [pu, oh, Pp]), ys("domModification", {}), cm(Oh()), Ri("builder", function (e) {
      var t = em(Ch(), e, Oh()),
        o = tm(Ch(), e, t.internals()),
        n = function n(t) {
          return om(t, e, "widget").map(function (e) {
            return Pp.focusIn(e), e;
          });
        },
        s = function s(t, o) {
          return vm(o.event.target) ? A.none() : e.autofocus ? (o.setSource(t.element), A.none()) : A.none();
        };
      return {
        dom: e.dom,
        components: o,
        domModification: e.domModification,
        events: Hr([Qr(function (e, t) {
          n(e).each(function (e) {
            t.stop();
          });
        }), Ur(qs(), fh), Ur(mr(), function (t, o) {
          e.autofocus ? n(t) : oh.focus(t);
        })]),
        behaviours: yu(e.widgetBehaviours, [pu.config({
          store: {
            mode: "memory",
            initialValue: e.data
          }
        }), oh.config({
          ignore: e.ignoreFocus,
          onFocus: function onFocus(e) {
            bh(e);
          }
        }), Pp.config({
          mode: "special",
          focusIn: e.autofocus ? function (e) {
            n(e);
          } : El(),
          onLeft: s,
          onRight: s,
          onEscape: function onEscape(t, o) {
            return oh.isFocused(t) || e.autofocus ? e.autofocus ? (o.setSource(t.element), A.none()) : A.none() : (oh.focus(t), A.some(!0));
          }
        })])
      };
    })],
    Th = Jn("type", {
      widget: _h,
      item: Sh,
      separator: kh
    }),
    Eh = x([Gu({
      factory: {
        sketch: function sketch(e) {
          var t = Yn("menu.spec item", Th, e);
          return t.builder(t);
        }
      },
      name: "items",
      unit: "item",
      defaults: function defaults(e, t) {
        return ve(t, "uid") ? t : _objectSpread(_objectSpread({}, t), {}, {
          uid: ha("item")
        });
      },
      overrides: function overrides(e, t) {
        return {
          type: t.type,
          ignoreFocus: e.fakeFocus,
          domModification: {
            classes: [e.markers.item]
          }
        };
      }
    })]),
    Ah = x([os("value"), os("items"), os("dom"), os("components"), ys("eventOrder", {}), hu("menuBehaviours", [Gm, pu, wm, Pp]), xs("movement", {
      mode: "menu",
      moveOnTab: !0
    }, Jn("mode", {
      grid: [Vi(), Ri("config", function (e, t) {
        return {
          mode: "flatgrid",
          selector: "." + e.markers.item,
          initSize: {
            numColumns: t.initSize.numColumns,
            numRows: t.initSize.numRows
          },
          focusManager: e.focusManager
        };
      })],
      matrix: [Ri("config", function (e, t) {
        return {
          mode: "matrix",
          selectors: {
            row: t.rowSelector,
            cell: "." + e.markers.item
          },
          previousSelector: t.previousSelector,
          focusManager: e.focusManager
        };
      }), os("rowSelector"), ys("previousSelector", A.none)],
      menu: [ys("moveOnTab", !0), Ri("config", function (e, t) {
        return {
          mode: "menu",
          selector: "." + e.markers.item,
          moveOnTab: t.moveOnTab,
          focusManager: e.focusManager
        };
      })]
    })), ns("markers", _i()), ys("fakeFocus", !1), ys("focusManager", mg()), Di("onHighlight"), Di("onDehighlight")]),
    Mh = x("alloy.menu-focus"),
    Dh = bm({
      name: "Menu",
      configFields: Ah(),
      partFields: Eh(),
      factory: function factory(e, t, o, n) {
        return {
          uid: e.uid,
          dom: e.dom,
          markers: e.markers,
          behaviours: bu(e.menuBehaviours, [Gm.config({
            highlightClass: e.markers.selectedItem,
            itemClass: e.markers.item,
            onHighlight: e.onHighlight,
            onDehighlight: e.onDehighlight
          }), pu.config({
            store: {
              mode: "memory",
              initialValue: e.value
            }
          }), wm.config({
            find: A.some
          }), Pp.config(e.movement.config(e, e.movement))]),
          events: Hr([Ur(yh(), function (e, t) {
            var o = t.event;
            e.getSystem().getByDom(o.target).each(function (o) {
              Gm.highlight(e, o), t.stop(), Ir(e, Mh(), {
                menu: e,
                item: o
              });
            });
          }), Ur(vh(), function (e, t) {
            var o = t.event.item;
            Gm.highlight(e, o);
          }), Ur(xh(), function (e, t) {
            var _t$event = t.event,
              o = _t$event.item,
              n = _t$event.state;
            n && "menuitemradio" === Ot(o.element, "role") && function (e, t) {
              var o = Xc(e.element, '[role="menuitemradio"][aria-checked="true"]');
              L(o, function (o) {
                Ze(o, t.element) || e.getSystem().getByDom(o).each(function (e) {
                  dh.off(e);
                });
              });
            }(e, o);
          })]),
          components: t,
          eventOrder: e.eventOrder,
          domModification: {
            attributes: {
              role: "menu"
            }
          }
        };
      }
    }),
    Bh = function Bh(e, t, o, n) {
      return be(o, n).bind(function (n) {
        return be(e, n).bind(function (n) {
          var s = Bh(e, t, o, n);
          return A.some([n].concat(s));
        });
      }).getOr([]);
    },
    Fh = function Fh(e) {
      return "prepared" === e.type ? A.some(e.menu) : A.none();
    },
    Ih = function Ih() {
      var e = Es({}),
        t = Es({}),
        o = Es({}),
        n = Ql(),
        s = Es({}),
        r = function r(e) {
          return a(e).bind(Fh);
        },
        a = function a(e) {
          return be(t.get(), e);
        },
        i = function i(t) {
          return be(e.get(), t);
        };
      return {
        setMenuBuilt: function setMenuBuilt(e, o) {
          t.set(_objectSpread(_objectSpread({}, t.get()), {}, _defineProperty({}, e, {
            type: "prepared",
            menu: o
          })));
        },
        setContents: function setContents(r, a, i, l) {
          n.set(r), e.set(i), t.set(a), s.set(l);
          var c = function (e, t) {
            var o = {};
            le(e, function (e, t) {
              L(e, function (e) {
                o[e] = t;
              });
            });
            var n = t,
              s = de(t, function (e, t) {
                return {
                  k: e,
                  v: t
                };
              }),
              r = ce(s, function (e, t) {
                return [t].concat(Bh(o, n, s, t));
              });
            return ce(o, function (e) {
              return be(r, e).getOr([e]);
            });
          }(l, i);
          o.set(c);
        },
        expand: function expand(t) {
          return be(e.get(), t).map(function (e) {
            var n = be(o.get(), t).getOr([]);
            return [e].concat(n);
          });
        },
        refresh: function refresh(e) {
          return be(o.get(), e);
        },
        collapse: function collapse(e) {
          return be(o.get(), e).bind(function (e) {
            return e.length > 1 ? A.some(e.slice(1)) : A.none();
          });
        },
        lookupMenu: a,
        lookupItem: i,
        otherMenus: function otherMenus(e) {
          var t = s.get();
          return J(ae(t), e);
        },
        getPrimary: function getPrimary() {
          return n.get().bind(r);
        },
        getMenus: function getMenus() {
          return t.get();
        },
        clear: function clear() {
          e.set({}), t.set({}), o.set({}), n.clear();
        },
        isClear: function isClear() {
          return n.get().isNone();
        },
        getTriggeringPath: function getTriggeringPath(t, s) {
          var a = U(i(t).toArray(), function (e) {
            return r(e).isSome();
          });
          return be(o.get(), t).bind(function (t) {
            var o = K(a.concat(t));
            return function (e) {
              var t = [];
              for (var _o19 = 0; _o19 < e.length; _o19++) {
                var _n24 = e[_o19];
                if (!_n24.isSome()) return A.none();
                t.push(_n24.getOrDie());
              }
              return A.some(t);
            }(X(o, function (t, a) {
              return function (t, o, n) {
                return r(t).bind(function (s) {
                  return function (t) {
                    return he(e.get(), function (e, o) {
                      return e === t;
                    });
                  }(t).bind(function (e) {
                    return o(e).map(function (e) {
                      return {
                        triggeredMenu: s,
                        triggeringItem: e,
                        triggeringPath: n
                      };
                    });
                  });
                });
              }(t, s, o.slice(0, a + 1)).fold(function () {
                return xe(n.get(), t) ? [] : [A.none()];
              }, function (e) {
                return [A.some(e)];
              });
            }));
          });
        }
      };
    },
    Rh = Fh,
    Nh = la("tiered-menu-item-highlight"),
    Vh = la("tiered-menu-item-dehighlight");
  var zh;
  !function (e) {
    e[e.HighlightMenuAndItem = 0] = "HighlightMenuAndItem", e[e.HighlightJustMenu = 1] = "HighlightJustMenu", e[e.HighlightNone = 2] = "HighlightNone";
  }(zh || (zh = {}));
  var Hh = x("collapse-item"),
    Lh = fm({
      name: "TieredMenu",
      configFields: [Ii("onExecute"), Ii("onEscape"), Fi("onOpenMenu"), Fi("onOpenSubmenu"), Di("onRepositionMenu"), Di("onCollapseMenu"), ys("highlightOnOpen", zh.HighlightMenuAndItem), ls("data", [os("primary"), os("menus"), os("expansions")]), ys("fakeFocus", !1), Di("onHighlightItem"), Di("onDehighlightItem"), Di("onHover"), Ei(), os("dom"), ys("navigateOnHover", !0), ys("stayInDom", !1), hu("tmenuBehaviours", [Pp, Gm, wm, Kp]), ys("eventOrder", {})],
      apis: {
        collapseMenu: function collapseMenu(e, t) {
          e.collapseMenu(t);
        },
        highlightPrimary: function highlightPrimary(e, t) {
          e.highlightPrimary(t);
        },
        repositionMenus: function repositionMenus(e, t) {
          e.repositionMenus(t);
        }
      },
      factory: function factory(e, t) {
        var o = Ql(),
          n = Ih(),
          s = function s(e) {
            return pu.getValue(e).value;
          },
          r = function r(t) {
            return ce(e.data.menus, function (e, t) {
              return X(e.items, function (e) {
                return "separator" === e.type ? [] : [e.data.value];
              });
            });
          },
          a = Gm.highlight,
          i = function i(t, o) {
            a(t, o), Gm.getHighlighted(o).orThunk(function () {
              return Gm.getFirst(o);
            }).each(function (n) {
              e.fakeFocus ? Gm.highlight(o, n) : Nr(t, n.element, mr());
            });
          },
          l = function l(e, t) {
            return we(H(t, function (t) {
              return e.lookupMenu(t).bind(function (e) {
                return "prepared" === e.type ? A.some(e.menu) : A.none();
              });
            }));
          },
          c = function c(t, o, n) {
            var s = l(o, o.otherMenus(n));
            L(s, function (o) {
              ja(o.element, [e.markers.backgroundMenu]), e.stayInDom || Kp.remove(t, o);
            });
          },
          d = function d(t, n) {
            var r = function (t) {
              return o.get().getOrThunk(function () {
                var n = {},
                  r = Xc(t.element, ".".concat(e.markers.item)),
                  a = U(r, function (e) {
                    return "true" === Ot(e, "aria-haspopup");
                  });
                return L(a, function (e) {
                  t.getSystem().getByDom(e).each(function (e) {
                    var t = s(e);
                    n[t] = e;
                  });
                }), o.set(n), n;
              });
            }(t);
            le(r, function (e, t) {
              var o = R(n, t);
              kt(e.element, "aria-expanded", o);
            });
          },
          u = function u(t, o, n) {
            return A.from(n[0]).bind(function (s) {
              return o.lookupMenu(s).bind(function (s) {
                if ("notbuilt" === s.type) return A.none();
                {
                  var _r9 = s.menu,
                    _a4 = l(o, n.slice(1));
                  return L(_a4, function (t) {
                    La(t.element, e.markers.backgroundMenu);
                  }), yt(_r9.element) || Kp.append(t, ai(_r9)), ja(_r9.element, [e.markers.backgroundMenu]), i(t, _r9), c(t, o, n), A.some(_r9);
                }
              });
            });
          };
        var m;
        !function (e) {
          e[e.HighlightSubmenu = 0] = "HighlightSubmenu", e[e.HighlightParent = 1] = "HighlightParent";
        }(m || (m = {}));
        var g = function g(t, o) {
            var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : m.HighlightSubmenu;
            if (o.hasConfigured(Rm) && Rm.isDisabled(o)) return A.some(o);
            {
              var _a5 = s(o);
              return n.expand(_a5).bind(function (s) {
                return d(t, s), A.from(s[0]).bind(function (a) {
                  return n.lookupMenu(a).bind(function (i) {
                    var l = function (e, t, o) {
                      if ("notbuilt" === o.type) {
                        var _s19 = e.getSystem().build(o.nbMenu());
                        return n.setMenuBuilt(t, _s19), _s19;
                      }
                      return o.menu;
                    }(t, a, i);
                    return yt(l.element) || Kp.append(t, ai(l)), e.onOpenSubmenu(t, o, l, K(s)), r === m.HighlightSubmenu ? (Gm.highlightFirst(l), u(t, n, s)) : (Gm.dehighlightAll(l), A.some(o));
                  });
                });
              });
            }
          },
          p = function p(t, o) {
            var r = s(o);
            return n.collapse(r).bind(function (s) {
              return d(t, s), u(t, n, s).map(function (n) {
                return e.onCollapseMenu(t, o, n), n;
              });
            });
          },
          h = function h(t) {
            return function (o, n) {
              return hi(n.getSource(), ".".concat(e.markers.item)).bind(function (e) {
                return o.getSystem().getByDom(e).toOptional().bind(function (e) {
                  return t(o, e).map(E);
                });
              });
            };
          },
          f = Hr([Ur(Mh(), function (e, t) {
            var o = t.event.item;
            n.lookupItem(s(o)).each(function () {
              var o = t.event.menu;
              Gm.highlight(e, o);
              var r = s(t.event.item);
              n.refresh(r).each(function (t) {
                return c(e, n, t);
              });
            });
          }), Qr(function (t, o) {
            var n = o.event.target;
            t.getSystem().getByDom(n).each(function (o) {
              0 === s(o).indexOf("collapse-item") && p(t, o), g(t, o, m.HighlightSubmenu).fold(function () {
                e.onExecute(t, o);
              }, b);
            });
          }), Kr(function (t, o) {
            (function (t) {
              var o = function (t, o, n) {
                  return ce(n, function (n, s) {
                    var r = function r() {
                      return Dh.sketch(_objectSpread(_objectSpread({}, n), {}, {
                        value: s,
                        markers: e.markers,
                        fakeFocus: e.fakeFocus,
                        onHighlight: function onHighlight(e, t) {
                          Ir(e, Nh, {
                            menuComp: e,
                            itemComp: t
                          });
                        },
                        onDehighlight: function onDehighlight(e, t) {
                          Ir(e, Vh, {
                            menuComp: e,
                            itemComp: t
                          });
                        },
                        focusManager: e.fakeFocus ? gg() : mg()
                      }));
                    };
                    return s === o ? {
                      type: "prepared",
                      menu: t.getSystem().build(r())
                    } : {
                      type: "notbuilt",
                      nbMenu: r
                    };
                  });
                }(t, e.data.primary, e.data.menus),
                s = r();
              return n.setContents(e.data.primary, o, e.data.expansions, s), n.getPrimary();
            })(t).each(function (o) {
              Kp.append(t, ai(o)), e.onOpenMenu(t, o), e.highlightOnOpen === zh.HighlightMenuAndItem ? i(t, o) : e.highlightOnOpen === zh.HighlightJustMenu && a(t, o);
            });
          }), Ur(Nh, function (t, o) {
            e.onHighlightItem(t, o.event.menuComp, o.event.itemComp);
          }), Ur(Vh, function (t, o) {
            e.onDehighlightItem(t, o.event.menuComp, o.event.itemComp);
          })].concat(_toConsumableArray(e.navigateOnHover ? [Ur(vh(), function (t, o) {
            var r = o.event.item;
            (function (e, t) {
              var o = s(t);
              n.refresh(o).bind(function (t) {
                return d(e, t), u(e, n, t);
              });
            })(t, r), g(t, r, m.HighlightParent), e.onHover(t, r);
          })] : []))),
          v = function v(e) {
            return Gm.getHighlighted(e).bind(Gm.getHighlighted);
          },
          y = {
            collapseMenu: function collapseMenu(e) {
              v(e).each(function (t) {
                p(e, t);
              });
            },
            highlightPrimary: function highlightPrimary(e) {
              n.getPrimary().each(function (t) {
                i(e, t);
              });
            },
            repositionMenus: function repositionMenus(t) {
              var o = n.getPrimary().bind(function (e) {
                return v(t).bind(function (e) {
                  var t = s(e),
                    o = fe(n.getMenus()),
                    r = we(H(o, Rh));
                  return n.getTriggeringPath(t, function (e) {
                    return function (e, t, o) {
                      return re(t, function (e) {
                        if (!e.getSystem().isConnected()) return A.none();
                        var t = Gm.getCandidates(e);
                        return G(t, function (e) {
                          return s(e) === o;
                        });
                      });
                    }(0, r, e);
                  });
                }).map(function (t) {
                  return {
                    primary: e,
                    triggeringPath: t
                  };
                });
              });
              o.fold(function () {
                (function (e) {
                  return A.from(e.components()[0]).filter(function (e) {
                    return "menu" === Ot(e.element, "role");
                  });
                })(t).each(function (o) {
                  e.onRepositionMenu(t, o, []);
                });
              }, function (_ref7) {
                var o = _ref7.primary,
                  n = _ref7.triggeringPath;
                e.onRepositionMenu(t, o, n);
              });
            }
          };
        return {
          uid: e.uid,
          dom: e.dom,
          markers: e.markers,
          behaviours: bu(e.tmenuBehaviours, [Pp.config({
            mode: "special",
            onRight: h(function (e, t) {
              return vm(t.element) ? A.none() : g(e, t, m.HighlightSubmenu);
            }),
            onLeft: h(function (e, t) {
              return vm(t.element) ? A.none() : p(e, t);
            }),
            onEscape: h(function (t, o) {
              return p(t, o).orThunk(function () {
                return e.onEscape(t, o).map(function () {
                  return t;
                });
              });
            }),
            focusIn: function focusIn(e, t) {
              n.getPrimary().each(function (t) {
                Nr(e, t.element, mr());
              });
            }
          }), Gm.config({
            highlightClass: e.markers.selectedMenu,
            itemClass: e.markers.menu
          }), wm.config({
            find: function find(e) {
              return Gm.getHighlighted(e);
            }
          }), Kp.config({})]),
          eventOrder: e.eventOrder,
          apis: y,
          events: f
        };
      },
      extraApis: {
        tieredData: function tieredData(e, t, o) {
          return {
            primary: e,
            menus: t,
            expansions: o
          };
        },
        singleData: function singleData(e, t) {
          return {
            primary: e,
            menus: Ms(e, t),
            expansions: {}
          };
        },
        collapseItem: function collapseItem(e) {
          return {
            value: la(Hh()),
            meta: {
              text: e
            }
          };
        }
      }
    }),
    Ph = fm({
      name: "InlineView",
      configFields: [os("lazySink"), Di("onShow"), Di("onHide"), fs("onEscape"), hu("inlineBehaviours", [Xd, pu, Al]), vs("fireDismissalEventInstead", [ys("event", Cr())]), vs("fireRepositionEventInstead", [ys("event", Or())]), ys("getRelated", A.none), ys("isExtraPart", T), ys("eventOrder", A.none)],
      factory: function factory(e, t) {
        var o = function o(t, _o20, n, s) {
            var r = e.lazySink(t).getOrDie();
            Xd.openWhileCloaked(t, _o20, function () {
              return Sd.positionWithinBounds(r, t, n, s());
            }), pu.setValue(t, A.some({
              mode: "position",
              config: n,
              getBounds: s
            }));
          },
          n = function n(t, o, _n25, s) {
            var r = function (e, t, o, n, s) {
              var r = function r() {
                  return e.lazySink(t);
                },
                a = "horizontal" === n.type ? {
                  layouts: {
                    onLtr: function onLtr() {
                      return fl();
                    },
                    onRtl: function onRtl() {
                      return bl();
                    }
                  }
                } : {},
                i = function i(e) {
                  return function (e) {
                    return 2 === e.length;
                  }(e) ? a : {};
                };
              return Lh.sketch({
                dom: {
                  tag: "div"
                },
                data: n.data,
                markers: n.menu.markers,
                highlightOnOpen: n.menu.highlightOnOpen,
                fakeFocus: n.menu.fakeFocus,
                onEscape: function onEscape() {
                  return Xd.close(t), e.onEscape.map(function (e) {
                    return e(t);
                  }), A.some(!0);
                },
                onExecute: function onExecute() {
                  return A.some(!0);
                },
                onOpenMenu: function onOpenMenu(e, t) {
                  Sd.positionWithinBounds(r().getOrDie(), t, o, s());
                },
                onOpenSubmenu: function onOpenSubmenu(e, t, o, n) {
                  var s = r().getOrDie();
                  Sd.position(s, o, {
                    anchor: _objectSpread({
                      type: "submenu",
                      item: t
                    }, i(n))
                  });
                },
                onRepositionMenu: function onRepositionMenu(e, t, n) {
                  var a = r().getOrDie();
                  Sd.positionWithinBounds(a, t, o, s()), L(n, function (e) {
                    var t = i(e.triggeringPath);
                    Sd.position(a, e.triggeredMenu, {
                      anchor: _objectSpread({
                        type: "submenu",
                        item: e.triggeringItem
                      }, t)
                    });
                  });
                }
              });
            }(e, t, o, _n25, s);
            Xd.open(t, r), pu.setValue(t, A.some({
              mode: "menu",
              menu: r
            }));
          },
          s = function s(t) {
            Xd.isOpen(t) && pu.getValue(t).each(function (o) {
              switch (o.mode) {
                case "menu":
                  Xd.getState(t).each(Lh.repositionMenus);
                  break;
                case "position":
                  var _n26 = e.lazySink(t).getOrDie();
                  Sd.positionWithinBounds(_n26, t, o.config, o.getBounds());
              }
            });
          },
          r = {
            setContent: function setContent(e, t) {
              Xd.setContent(e, t);
            },
            showAt: function showAt(e, t, n) {
              var s = A.none;
              o(e, t, n, s);
            },
            showWithinBounds: o,
            showMenuAt: function showMenuAt(e, t, o) {
              n(e, t, o, A.none);
            },
            showMenuWithinBounds: n,
            hide: function hide(e) {
              Xd.isOpen(e) && (pu.setValue(e, A.none()), Xd.close(e));
            },
            getContent: function getContent(e) {
              return Xd.getState(e);
            },
            reposition: s,
            isOpen: Xd.isOpen
          };
        return {
          uid: e.uid,
          dom: e.dom,
          behaviours: bu(e.inlineBehaviours, [Xd.config({
            isPartOf: function isPartOf(t, o, n) {
              return vi(o, n) || function (t, o) {
                return e.getRelated(t).exists(function (e) {
                  return vi(e, o);
                });
              }(t, n);
            },
            getAttachPoint: function getAttachPoint(t) {
              return e.lazySink(t).getOrDie();
            },
            onOpen: function onOpen(t) {
              e.onShow(t);
            },
            onClose: function onClose(t) {
              e.onHide(t);
            }
          }), pu.config({
            store: {
              mode: "memory",
              initialValue: A.none()
            }
          }), Al.config({
            channels: _objectSpread(_objectSpread({}, Qd(_objectSpread({
              isExtraPart: t.isExtraPart
            }, e.fireDismissalEventInstead.map(function (e) {
              return {
                fireEventInstead: {
                  event: e.event
                }
              };
            }).getOr({})))), tu(_objectSpread(_objectSpread({}, e.fireRepositionEventInstead.map(function (e) {
              return {
                fireEventInstead: {
                  event: e.event
                }
              };
            }).getOr({})), {}, {
              doReposition: s
            })))
          })]),
          eventOrder: e.eventOrder,
          apis: r
        };
      },
      apis: {
        showAt: function showAt(e, t, o, n) {
          e.showAt(t, o, n);
        },
        showWithinBounds: function showWithinBounds(e, t, o, n, s) {
          e.showWithinBounds(t, o, n, s);
        },
        showMenuAt: function showMenuAt(e, t, o, n) {
          e.showMenuAt(t, o, n);
        },
        showMenuWithinBounds: function showMenuWithinBounds(e, t, o, n, s) {
          e.showMenuWithinBounds(t, o, n, s);
        },
        hide: function hide(e, t) {
          e.hide(t);
        },
        isOpen: function isOpen(e, t) {
          return e.isOpen(t);
        },
        getContent: function getContent(e, t) {
          return e.getContent(t);
        },
        setContent: function setContent(e, t, o) {
          e.setContent(t, o);
        },
        reposition: function reposition(e, t) {
          e.reposition(t);
        }
      }
    });
  var Uh = tinymce.util.Tools.resolve("tinymce.util.Delay");
  var Wh = fm({
      name: "Button",
      factory: function factory(e) {
        var t = mh(e.action),
          o = e.dom.tag,
          n = function n(t) {
            return be(e.dom, "attributes").bind(function (e) {
              return be(e, t);
            });
          };
        return {
          uid: e.uid,
          dom: e.dom,
          components: e.components,
          events: t,
          behaviours: yu(e.buttonBehaviours, [oh.config({}), Pp.config({
            mode: "execution",
            useSpace: !0,
            useEnter: !0
          })]),
          domModification: {
            attributes: "button" === o ? _objectSpread({
              type: n("type").getOr("button")
            }, n("role").map(function (e) {
              return {
                role: e
              };
            }).getOr({})) : {
              role: e.role.getOr(n("role").getOr("button"))
            }
          },
          eventOrder: e.eventOrder
        };
      },
      configFields: [ys("uid", void 0), os("dom"), ys("components", []), vu("buttonBehaviours", [oh, Pp]), us("action"), us("role"), ys("eventOrder", {})]
    }),
    jh = function jh(e) {
      var t = function (e) {
        return void 0 !== e.uid;
      }(e) && ye(e, "uid") ? e.uid : ha("memento");
      return {
        get: function get(e) {
          return e.getSystem().getByUid(t).getOrDie();
        },
        getOpt: function getOpt(e) {
          return e.getSystem().getByUid(t).toOptional();
        },
        asSpec: function asSpec() {
          return _objectSpread(_objectSpread({}, e), {}, {
            uid: t
          });
        }
      };
    };
  var Gh = tinymce.util.Tools.resolve("tinymce.util.I18n");
  var $h = {
      indent: !0,
      outdent: !0,
      "table-insert-column-after": !0,
      "table-insert-column-before": !0,
      "paste-column-after": !0,
      "paste-column-before": !0,
      "unordered-list": !0,
      "list-bull-circle": !0,
      "list-bull-default": !0,
      "list-bull-square": !0
    },
    qh = "temporary-placeholder",
    Xh = function Xh(e) {
      return function () {
        return be(e, qh).getOr("!not found!");
      };
    },
    Yh = function Yh(e, t) {
      var o = e.toLowerCase();
      if (Gh.isRtl()) {
        var _e14 = function (e, t) {
          return Ae(e, t) ? e : function (e, t) {
            return e + t;
          }(e, t);
        }(o, "-rtl");
        return ve(t, _e14) ? _e14 : o;
      }
      return o;
    },
    Kh = function Kh(e, t) {
      return be(t, Yh(e, t));
    },
    Jh = function Jh(e, t) {
      var o = t();
      return Kh(e, o).getOrThunk(Xh(o));
    },
    Zh = function Zh() {
      return Jp("add-focusable", [Kr(function (e) {
        gi(e.element, "svg").each(function (e) {
          return kt(e, "focusable", "false");
        });
      })]);
    },
    Qh = function Qh(e, t, o, n) {
      var s, r;
      var a = function (e) {
          return !!Gh.isRtl() && ve($h, e);
        }(t) ? ["tox-icon--flip"] : [],
        i = be(o, Yh(t, o)).or(n).getOrThunk(Xh(o));
      return {
        dom: {
          tag: e.tag,
          attributes: null !== (s = e.attributes) && void 0 !== s ? s : {},
          classes: e.classes.concat(a),
          innerHtml: i
        },
        behaviours: kl([].concat(_toConsumableArray(null !== (r = e.behaviours) && void 0 !== r ? r : []), [Zh()]))
      };
    },
    ef = function ef(e, t, o) {
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : A.none();
      return Qh(t, e, o(), n);
    },
    tf = {
      success: "checkmark",
      error: "warning",
      err: "error",
      warning: "warning",
      warn: "warning",
      info: "info"
    },
    of = fm({
      name: "Notification",
      factory: function factory(e) {
        var t = jh({
            dom: {
              tag: "p",
              innerHtml: e.translationProvider(e.text)
            },
            behaviours: kl([Kp.config({})])
          }),
          o = function o(e) {
            return {
              dom: {
                tag: "div",
                classes: ["tox-bar"],
                styles: {
                  width: "".concat(e, "%")
                }
              }
            };
          },
          n = function n(e) {
            return {
              dom: {
                tag: "div",
                classes: ["tox-text"],
                innerHtml: "".concat(e, "%")
              }
            };
          },
          s = jh({
            dom: {
              tag: "div",
              classes: e.progress ? ["tox-progress-bar", "tox-progress-indicator"] : ["tox-progress-bar"]
            },
            components: [{
              dom: {
                tag: "div",
                classes: ["tox-bar-container"]
              },
              components: [o(0)]
            }, n(0)],
            behaviours: kl([Kp.config({})])
          }),
          r = {
            updateProgress: function updateProgress(e, t) {
              e.getSystem().isConnected() && s.getOpt(e).each(function (e) {
                Kp.set(e, [{
                  dom: {
                    tag: "div",
                    classes: ["tox-bar-container"]
                  },
                  components: [o(t)]
                }, n(t)]);
              });
            },
            updateText: function updateText(e, o) {
              if (e.getSystem().isConnected()) {
                var _n27 = t.get(e);
                Kp.set(_n27, [ti(o)]);
              }
            }
          },
          a = q([e.icon.toArray(), e.level.toArray(), e.level.bind(function (e) {
            return A.from(tf[e]);
          }).toArray()]),
          i = jh(Wh.sketch({
            dom: {
              tag: "button",
              classes: ["tox-notification__dismiss", "tox-button", "tox-button--naked", "tox-button--icon"]
            },
            components: [ef("close", {
              tag: "span",
              classes: ["tox-icon"],
              attributes: {
                "aria-label": e.translationProvider("Close")
              }
            }, e.iconProvider)],
            action: function action(t) {
              e.onAction(t);
            }
          })),
          l = function (e, t, o) {
            var n = o(),
              s = G(e, function (e) {
                return ve(n, Yh(e, n));
              });
            return Qh({
              tag: "div",
              classes: ["tox-notification__icon"]
            }, s.getOr(qh), n, A.none());
          }(a, 0, e.iconProvider),
          c = [l, {
            dom: {
              tag: "div",
              classes: ["tox-notification__body"]
            },
            components: [t.asSpec()],
            behaviours: kl([Kp.config({})])
          }];
        return {
          uid: e.uid,
          dom: {
            tag: "div",
            attributes: {
              role: "alert"
            },
            classes: e.level.map(function (e) {
              return ["tox-notification", "tox-notification--in", "tox-notification--".concat(e)];
            }).getOr(["tox-notification", "tox-notification--in"])
          },
          behaviours: kl([oh.config({}), Jp("notification-events", [Ur(Xs(), function (e) {
            i.getOpt(e).each(oh.focus);
          })])]),
          components: c.concat(e.progress ? [s.asSpec()] : []).concat(e.closeButton ? [i.asSpec()] : []),
          apis: r
        };
      },
      configFields: [us("level"), os("progress"), us("icon"), os("onAction"), os("text"), os("iconProvider"), os("translationProvider"), Cs("closeButton", !0)],
      apis: {
        updateProgress: function updateProgress(e, t, o) {
          e.updateProgress(t, o);
        },
        updateText: function updateText(e, t, o) {
          e.updateText(t, o);
        }
      }
    });
  var nf,
    sf,
    rf = tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),
    af = tinymce.util.Tools.resolve("tinymce.EditorManager"),
    lf = tinymce.util.Tools.resolve("tinymce.Env");
  !function (e) {
    e["default"] = "wrap", e.floating = "floating", e.sliding = "sliding", e.scrolling = "scrolling";
  }(nf || (nf = {})), function (e) {
    e.auto = "auto", e.top = "top", e.bottom = "bottom";
  }(sf || (sf = {}));
  var cf = function cf(e) {
      return function (t) {
        return t.options.get(e);
      };
    },
    df = function df(e) {
      return function (t) {
        return A.from(e(t));
      };
    },
    uf = function uf(e) {
      var t = lf.deviceType.isPhone(),
        o = lf.deviceType.isTablet() || t,
        n = e.options.register,
        s = function s(e) {
          return r(e) || !1 === e;
        },
        a = function a(e) {
          return r(e) || h(e);
        };
      n("skin", {
        processor: function processor(e) {
          return r(e) || !1 === e;
        },
        "default": "oxide"
      }), n("skin_url", {
        processor: "string"
      }), n("height", {
        processor: a,
        "default": Math.max(e.getElement().offsetHeight, 400)
      }), n("width", {
        processor: a,
        "default": rf.DOM.getStyle(e.getElement(), "width")
      }), n("min_height", {
        processor: "number",
        "default": 100
      }), n("min_width", {
        processor: "number"
      }), n("max_height", {
        processor: "number"
      }), n("max_width", {
        processor: "number"
      }), n("style_formats", {
        processor: "object[]"
      }), n("style_formats_merge", {
        processor: "boolean",
        "default": !1
      }), n("style_formats_autohide", {
        processor: "boolean",
        "default": !1
      }), n("line_height_formats", {
        processor: "string",
        "default": "1 1.1 1.2 1.3 1.4 1.5 2"
      }), n("font_family_formats", {
        processor: "string",
        "default": "Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"
      }), n("font_size_formats", {
        processor: "string",
        "default": "8pt 10pt 12pt 14pt 18pt 24pt 36pt"
      }), n("font_size_input_default_unit", {
        processor: "string",
        "default": "pt"
      }), n("block_formats", {
        processor: "string",
        "default": "Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"
      }), n("content_langs", {
        processor: "object[]"
      }), n("removed_menuitems", {
        processor: "string",
        "default": ""
      }), n("menubar", {
        processor: function processor(e) {
          return r(e) || d(e);
        },
        "default": !t
      }), n("menu", {
        processor: "object",
        "default": {}
      }), n("toolbar", {
        processor: function processor(e) {
          return d(e) || r(e) || l(e) ? {
            value: e,
            valid: !0
          } : {
            valid: !1,
            message: "Must be a boolean, string or array."
          };
        },
        "default": !0
      }), V(9, function (e) {
        n("toolbar" + (e + 1), {
          processor: "string"
        });
      }), n("toolbar_mode", {
        processor: "string",
        "default": o ? "scrolling" : "floating"
      }), n("toolbar_groups", {
        processor: "object",
        "default": {}
      }), n("toolbar_location", {
        processor: "string",
        "default": sf.auto
      }), n("toolbar_persist", {
        processor: "boolean",
        "default": !1
      }), n("toolbar_sticky", {
        processor: "boolean",
        "default": e.inline
      }), n("toolbar_sticky_offset", {
        processor: "number",
        "default": 0
      }), n("fixed_toolbar_container", {
        processor: "string",
        "default": ""
      }), n("fixed_toolbar_container_target", {
        processor: "object"
      }), n("ui_mode", {
        processor: "string",
        "default": "combined"
      }), n("file_picker_callback", {
        processor: "function"
      }), n("file_picker_validator_handler", {
        processor: "function"
      }), n("file_picker_types", {
        processor: "string"
      }), n("typeahead_urls", {
        processor: "boolean",
        "default": !0
      }), n("anchor_top", {
        processor: s,
        "default": "#top"
      }), n("anchor_bottom", {
        processor: s,
        "default": "#bottom"
      }), n("draggable_modal", {
        processor: "boolean",
        "default": !1
      }), n("statusbar", {
        processor: "boolean",
        "default": !0
      }), n("elementpath", {
        processor: "boolean",
        "default": !0
      }), n("branding", {
        processor: "boolean",
        "default": !0
      }), n("promotion", {
        processor: "boolean",
        "default": !0
      }), n("resize", {
        processor: function processor(e) {
          return "both" === e || d(e);
        },
        "default": !lf.deviceType.isTouch()
      }), n("sidebar_show", {
        processor: "string"
      }), n("help_accessibility", {
        processor: "boolean",
        "default": e.hasPlugin("help")
      });
    },
    mf = cf("readonly"),
    gf = cf("height"),
    pf = cf("width"),
    hf = df(cf("min_width")),
    ff = df(cf("min_height")),
    bf = df(cf("max_width")),
    vf = df(cf("max_height")),
    yf = df(cf("style_formats")),
    xf = cf("style_formats_merge"),
    wf = cf("style_formats_autohide"),
    Sf = cf("content_langs"),
    kf = cf("removed_menuitems"),
    Cf = cf("toolbar_mode"),
    Of = cf("toolbar_groups"),
    _f = cf("toolbar_location"),
    Tf = cf("fixed_toolbar_container"),
    Ef = cf("fixed_toolbar_container_target"),
    Af = cf("toolbar_persist"),
    Mf = cf("toolbar_sticky_offset"),
    Df = cf("menubar"),
    Bf = cf("toolbar"),
    Ff = cf("file_picker_callback"),
    If = cf("file_picker_validator_handler"),
    Rf = cf("font_size_input_default_unit"),
    Nf = cf("file_picker_types"),
    Vf = cf("typeahead_urls"),
    zf = cf("anchor_top"),
    Hf = cf("anchor_bottom"),
    Lf = cf("draggable_modal"),
    Pf = cf("statusbar"),
    Uf = cf("elementpath"),
    Wf = cf("branding"),
    jf = cf("resize"),
    Gf = cf("paste_as_text"),
    $f = cf("sidebar_show"),
    qf = cf("promotion"),
    Xf = cf("help_accessibility"),
    Yf = function Yf(e) {
      return !1 === e.options.get("skin");
    },
    Kf = function Kf(e) {
      return !1 !== e.options.get("menubar");
    },
    Jf = function Jf(e) {
      var t = e.options.get("skin_url");
      if (Yf(e)) return t;
      if (t) return e.documentBaseURI.toAbsolute(t);
      {
        var _t23 = e.options.get("skin");
        return af.baseURL + "/skins/ui/" + _t23;
      }
    },
    Zf = function Zf(e) {
      return e.options.get("line_height_formats").split(" ");
    },
    Qf = function Qf(e) {
      var t = Bf(e),
        o = r(t),
        n = l(t) && t.length > 0;
      return !tb(e) && (n || o || !0 === t);
    },
    eb = function eb(e) {
      var t = V(9, function (t) {
          return e.options.get("toolbar" + (t + 1));
        }),
        o = U(t, r);
      return Ce(o.length > 0, o);
    },
    tb = function tb(e) {
      return eb(e).fold(function () {
        var t = Bf(e);
        return f(t, r) && t.length > 0;
      }, E);
    },
    ob = function ob(e) {
      return _f(e) === sf.bottom;
    },
    nb = function nb(e) {
      var t;
      if (!e.inline) return A.none();
      var o = null !== (t = Tf(e)) && void 0 !== t ? t : "";
      if (o.length > 0) return pi(xt(), o);
      var n = Ef(e);
      return g(n) ? A.some(Ve(n)) : A.none();
    },
    sb = function sb(e) {
      return e.inline && nb(e).isSome();
    },
    rb = function rb(e) {
      return nb(e).getOrThunk(function () {
        return ft(ht(Ve(e.getElement())));
      });
    },
    ab = function ab(e) {
      return e.inline && !Kf(e) && !Qf(e) && !tb(e);
    },
    ib = function ib(e) {
      return (e.options.get("toolbar_sticky") || e.inline) && !sb(e) && !ab(e);
    },
    lb = function lb(e) {
      return !sb(e) && "split" === e.options.get("ui_mode");
    },
    cb = function cb(e) {
      var t = e.options.get("menu");
      return ce(t, function (e) {
        return _objectSpread(_objectSpread({}, e), {}, {
          items: e.items
        });
      });
    };
  var db = Object.freeze({
    __proto__: null,
    get ToolbarMode() {
      return nf;
    },
    get ToolbarLocation() {
      return sf;
    },
    register: uf,
    getSkinUrl: Jf,
    isReadOnly: mf,
    isSkinDisabled: Yf,
    getHeightOption: gf,
    getWidthOption: pf,
    getMinWidthOption: hf,
    getMinHeightOption: ff,
    getMaxWidthOption: bf,
    getMaxHeightOption: vf,
    getUserStyleFormats: yf,
    shouldMergeStyleFormats: xf,
    shouldAutoHideStyleFormats: wf,
    getLineHeightFormats: Zf,
    getContentLanguages: Sf,
    getRemovedMenuItems: kf,
    isMenubarEnabled: Kf,
    isMultipleToolbars: tb,
    isToolbarEnabled: Qf,
    isToolbarPersist: Af,
    getMultipleToolbarsOption: eb,
    getUiContainer: rb,
    useFixedContainer: sb,
    isSplitUiMode: lb,
    getToolbarMode: Cf,
    isDraggableModal: Lf,
    isDistractionFree: ab,
    isStickyToolbar: ib,
    getStickyToolbarOffset: Mf,
    getToolbarLocation: _f,
    isToolbarLocationBottom: ob,
    getToolbarGroups: Of,
    getMenus: cb,
    getMenubar: Df,
    getToolbar: Bf,
    getFilePickerCallback: Ff,
    getFilePickerTypes: Nf,
    useTypeaheadUrls: Vf,
    getAnchorTop: zf,
    getAnchorBottom: Hf,
    getFilePickerValidatorHandler: If,
    getFontSizeInputDefaultUnit: Rf,
    useStatusBar: Pf,
    useElementPath: Uf,
    promotionEnabled: qf,
    useBranding: Wf,
    getResize: jf,
    getPasteAsText: Gf,
    getSidebarShow: $f,
    useHelpAccessibility: Xf
  });
  var ub = "[data-mce-autocompleter]",
    mb = function mb(e) {
      return hi(e, ub);
    };
  var gb;
  !function (e) {
    e[e.CLOSE_ON_EXECUTE = 0] = "CLOSE_ON_EXECUTE", e[e.BUBBLE_TO_SANDBOX = 1] = "BUBBLE_TO_SANDBOX";
  }(gb || (gb = {}));
  var pb = gb;
  var hb = "tox-menu-nav__js",
    fb = "tox-collection__item",
    bb = "tox-swatch",
    vb = {
      normal: hb,
      color: bb
    },
    yb = "tox-collection__item--enabled",
    xb = "tox-collection__item-icon",
    wb = "tox-collection__item-label",
    Sb = "tox-collection__item-caret",
    kb = "tox-collection__item--active",
    Cb = "tox-collection__item-container",
    Ob = "tox-collection__item-container--row",
    _b = function _b(e) {
      return be(vb, e).getOr(hb);
    },
    Tb = function Tb(e) {
      return "color" === e ? "tox-swatches" : "tox-menu";
    },
    Eb = function Eb(e) {
      return {
        backgroundMenu: "tox-background-menu",
        selectedMenu: "tox-selected-menu",
        selectedItem: "tox-collection__item--active",
        hasIcons: "tox-menu--has-icons",
        menu: Tb(e),
        tieredMenu: "tox-tiered-menu"
      };
    },
    Ab = function Ab(e) {
      var t = Eb(e);
      return {
        backgroundMenu: t.backgroundMenu,
        selectedMenu: t.selectedMenu,
        menu: t.menu,
        selectedItem: t.selectedItem,
        item: _b(e)
      };
    },
    Mb = function Mb(e, t, o) {
      var n = Eb(o);
      return {
        tag: "div",
        classes: q([[n.menu, "tox-menu-".concat(t, "-column")], e ? [n.hasIcons] : []])
      };
    },
    Db = [Dh.parts.items({})],
    Bb = function Bb(e, t, o) {
      var n = Eb(o);
      return {
        dom: {
          tag: "div",
          classes: q([[n.tieredMenu]])
        },
        markers: Ab(o)
      };
    },
    Fb = x([us("data"), ys("inputAttributes", {}), ys("inputStyles", {}), ys("tag", "input"), ys("inputClasses", []), Di("onSetValue"), ys("styles", {}), ys("eventOrder", {}), hu("inputBehaviours", [pu, oh]), ys("selectOnFocus", !0)]),
    Ib = function Ib(e) {
      return kl([oh.config({
        onFocus: e.selectOnFocus ? function (e) {
          var t = e.element,
            o = $a(t);
          t.dom.setSelectionRange(0, o.length);
        } : b
      })]);
    },
    Rb = function Rb(e) {
      return _objectSpread(_objectSpread({}, Ib(e)), bu(e.inputBehaviours, [pu.config({
        store: _objectSpread(_objectSpread({
          mode: "manual"
        }, e.data.map(function (e) {
          return {
            initialValue: e
          };
        }).getOr({})), {}, {
          getValue: function getValue(e) {
            return $a(e.element);
          },
          setValue: function setValue(e, t) {
            $a(e.element) !== t && qa(e.element, t);
          }
        }),
        onSetValue: e.onSetValue
      })]));
    },
    Nb = function Nb(e) {
      return {
        tag: e.tag,
        attributes: _objectSpread({
          type: "text"
        }, e.inputAttributes),
        styles: e.inputStyles,
        classes: e.inputClasses
      };
    },
    Vb = fm({
      name: "Input",
      configFields: Fb(),
      factory: function factory(e, t) {
        return {
          uid: e.uid,
          dom: Nb(e),
          components: [],
          behaviours: Rb(e),
          eventOrder: e.eventOrder
        };
      }
    }),
    zb = la("refetch-trigger-event"),
    Hb = la("redirect-menu-item-interaction"),
    Lb = "tox-menu__searcher",
    Pb = function Pb(e) {
      return pi(e.element, ".".concat(Lb)).bind(function (t) {
        return e.getSystem().getByDom(t).toOptional();
      });
    },
    Ub = Pb,
    Wb = function Wb(e) {
      return {
        fetchPattern: pu.getValue(e),
        selectionStart: e.element.dom.selectionStart,
        selectionEnd: e.element.dom.selectionEnd
      };
    },
    jb = function jb(e) {
      var t = function t(e, _t24) {
          return _t24.cut(), A.none();
        },
        o = function o(e, t) {
          var o = {
            interactionEvent: t.event,
            eventType: t.event.raw.type
          };
          return Ir(e, Hb, o), A.some(!0);
        },
        n = "searcher-events";
      return {
        dom: {
          tag: "div",
          classes: [fb]
        },
        components: [Vb.sketch({
          inputClasses: [Lb, "tox-textfield"],
          inputAttributes: _objectSpread(_objectSpread({}, e.placeholder.map(function (t) {
            return {
              placeholder: e.i18n(t)
            };
          }).getOr({})), {}, {
            type: "search",
            "aria-autocomplete": "list"
          }),
          inputBehaviours: kl([Jp(n, [Ur(Zs(), function (e) {
            Fr(e, zb);
          }), Ur(Ks(), function (e, t) {
            "Escape" === t.event.raw.key && t.stop();
          })]), Pp.config({
            mode: "special",
            onLeft: t,
            onRight: t,
            onSpace: t,
            onEnter: o,
            onEscape: o,
            onUp: o,
            onDown: o
          })]),
          eventOrder: {
            keydown: [n, Pp.name()]
          }
        })]
      };
    },
    Gb = "tox-collection--results__js",
    $b = function $b(e) {
      var t;
      return e.dom ? _objectSpread(_objectSpread({}, e), {}, {
        dom: _objectSpread(_objectSpread({}, e.dom), {}, {
          attributes: _objectSpread(_objectSpread({}, null !== (t = e.dom.attributes) && void 0 !== t ? t : {}), {}, {
            id: la("aria-item-search-result-id"),
            "aria-selected": "false"
          })
        })
      }) : e;
    },
    qb = function qb(e, t) {
      return function (o) {
        var n = z(o, t);
        return H(n, function (t) {
          return {
            dom: e,
            components: t
          };
        });
      };
    },
    Xb = function Xb(e, t) {
      var o = [];
      var n = [];
      return L(e, function (e, s) {
        t(e, s) ? (n.length > 0 && o.push(n), n = [], (ve(e.dom, "innerHtml") || e.components && e.components.length > 0) && n.push(e)) : n.push(e);
      }), n.length > 0 && o.push(n), H(o, function (e) {
        return {
          dom: {
            tag: "div",
            classes: ["tox-collection__group"]
          },
          components: e
        };
      });
    },
    Yb = function Yb(e, t, o) {
      return Dh.parts.items({
        preprocess: function preprocess(n) {
          var s = H(n, o);
          return "auto" !== e && e > 1 ? qb({
            tag: "div",
            classes: ["tox-collection__group"]
          }, e)(s) : Xb(s, function (e, o) {
            return "separator" === t[o].type;
          });
        }
      });
    },
    Kb = function Kb(e, t) {
      var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
      return {
        dom: {
          tag: "div",
          classes: ["tox-menu", "tox-collection"].concat(1 === e ? ["tox-collection--list"] : ["tox-collection--grid"])
        },
        components: [Yb(e, t, w)]
      };
    },
    Jb = function Jb(e) {
      return N(e, function (e) {
        return "icon" in e && void 0 !== e.icon;
      });
    },
    Zb = function Zb(e) {
      return console.error(Kn(e)), console.log(e), A.none();
    },
    Qb = function Qb(e, t, o, n, s) {
      var r = (a = o, {
        dom: {
          tag: "div",
          classes: ["tox-collection", "tox-collection--horizontal"]
        },
        components: [Dh.parts.items({
          preprocess: function preprocess(e) {
            return Xb(e, function (e, t) {
              return "separator" === a[t].type;
            });
          }
        })]
      });
      var a;
      return {
        value: e,
        dom: r.dom,
        components: r.components,
        items: o
      };
    },
    ev = function ev(e, t, o, n, s) {
      if ("color" === s.menuType) {
        var _t25 = function (e) {
          return {
            dom: {
              tag: "div",
              classes: ["tox-menu", "tox-swatches-menu"]
            },
            components: [{
              dom: {
                tag: "div",
                classes: ["tox-swatches"]
              },
              components: [Dh.parts.items({
                preprocess: "auto" !== e ? qb({
                  tag: "div",
                  classes: ["tox-swatches__row"]
                }, e) : w
              })]
            }]
          };
        }(n);
        return {
          value: e,
          dom: _t25.dom,
          components: _t25.components,
          items: o
        };
      }
      if ("normal" === s.menuType && "auto" === n) {
        var _t26 = Kb(n, o);
        return {
          value: e,
          dom: _t26.dom,
          components: _t26.components,
          items: o
        };
      }
      if ("normal" === s.menuType || "searchable" === s.menuType) {
        var _t27 = "searchable" !== s.menuType ? Kb(n, o) : "search-with-field" === s.searchMode.searchMode ? function (e, t, o) {
          var n = la("aria-controls-search-results");
          return {
            dom: {
              tag: "div",
              classes: ["tox-menu", "tox-collection"].concat(1 === e ? ["tox-collection--list"] : ["tox-collection--grid"])
            },
            components: [jb({
              i18n: Gh.translate,
              placeholder: o.placeholder
            }), {
              dom: {
                tag: "div",
                classes: [].concat(_toConsumableArray(1 === e ? ["tox-collection--list"] : ["tox-collection--grid"]), [Gb]),
                attributes: {
                  id: n
                }
              },
              components: [Yb(e, t, $b)]
            }]
          };
        }(n, o, s.searchMode) : function (e, t) {
          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
          var n = la("aria-controls-search-results");
          return {
            dom: {
              tag: "div",
              classes: ["tox-menu", "tox-collection", Gb].concat(1 === e ? ["tox-collection--list"] : ["tox-collection--grid"]),
              attributes: {
                id: n
              }
            },
            components: [Yb(e, t, $b)]
          };
        }(n, o);
        return {
          value: e,
          dom: _t27.dom,
          components: _t27.components,
          items: o
        };
      }
      if ("listpreview" === s.menuType && "auto" !== n) {
        var _t28 = function (e) {
          return {
            dom: {
              tag: "div",
              classes: ["tox-menu", "tox-collection", "tox-collection--toolbar", "tox-collection--toolbar-lg"]
            },
            components: [Dh.parts.items({
              preprocess: qb({
                tag: "div",
                classes: ["tox-collection__group"]
              }, e)
            })]
          };
        }(n);
        return {
          value: e,
          dom: _t28.dom,
          components: _t28.components,
          items: o
        };
      }
      return {
        value: e,
        dom: Mb(t, n, s.menuType),
        components: Db,
        items: o
      };
    },
    tv = rs("type"),
    ov = rs("name"),
    nv = rs("label"),
    sv = rs("text"),
    rv = rs("title"),
    av = rs("icon"),
    iv = rs("value"),
    lv = is("fetch"),
    cv = is("getSubmenuItems"),
    dv = is("onAction"),
    uv = is("onItemAction"),
    mv = Os("onSetup", function () {
      return b;
    }),
    gv = ps("name"),
    pv = ps("text"),
    hv = ps("icon"),
    fv = ps("tooltip"),
    bv = ps("label"),
    vv = ps("shortcut"),
    yv = fs("select"),
    xv = Cs("active", !1),
    wv = Cs("borderless", !1),
    Sv = Cs("enabled", !0),
    kv = Cs("primary", !1),
    Cv = function Cv(e) {
      return ys("columns", e);
    },
    Ov = ys("meta", {}),
    _v = Os("onAction", b),
    Tv = function Tv(e) {
      return Ss("type", e);
    },
    Ev = function Ev(e) {
      return Qn("name", "name", vn(function () {
        return la("".concat(e, "-name"));
      }), Hn);
    },
    Av = Dn([tv, pv]),
    Mv = Dn([Tv("autocompleteitem"), xv, Sv, Ov, iv, pv, hv]),
    Dv = [Sv, fv, hv, pv, mv],
    Bv = Dn([tv, dv].concat(Dv)),
    Fv = function Fv(e) {
      return qn("toolbarbutton", Bv, e);
    },
    Iv = [xv].concat(Dv),
    Rv = Dn(Iv.concat([tv, dv])),
    Nv = function Nv(e) {
      return qn("ToggleButton", Rv, e);
    },
    Vv = [Os("predicate", T), ks("scope", "node", ["node", "editor"]), ks("position", "selection", ["node", "selection", "line"])],
    zv = Dv.concat([Tv("contextformbutton"), kv, dv, es("original", w)]),
    Hv = Iv.concat([Tv("contextformbutton"), kv, dv, es("original", w)]),
    Lv = Dv.concat([Tv("contextformbutton")]),
    Pv = Iv.concat([Tv("contextformtogglebutton")]),
    Uv = Jn("type", {
      contextformbutton: zv,
      contextformtogglebutton: Hv
    }),
    Wv = Dn([Tv("contextform"), Os("initValue", x("")), bv, ds("commands", Uv), ms("launch", Jn("type", {
      contextformbutton: Lv,
      contextformtogglebutton: Pv
    }))].concat(Vv)),
    jv = Dn([Tv("contexttoolbar"), rs("items")].concat(Vv)),
    Gv = [tv, rs("src"), ps("alt"), _s("classes", [], Hn)],
    $v = Dn(Gv),
    qv = [tv, sv, gv, _s("classes", ["tox-collection__item-label"], Hn)],
    Xv = Dn(qv),
    Yv = En(function () {
      return jn("type", {
        cardimage: $v,
        cardtext: Xv,
        cardcontainer: Kv
      });
    }),
    Kv = Dn([tv, Ss("direction", "horizontal"), Ss("align", "left"), Ss("valign", "middle"), ds("items", Yv)]),
    Jv = [Sv, pv, vv, ("menuitem", Qn("value", "value", vn(function () {
      return la("menuitem-value");
    }), Nn())), Ov];
  var Zv = Dn([tv, bv, ds("items", Yv), mv, _v].concat(Jv)),
    Qv = Dn([tv, xv, hv].concat(Jv)),
    ey = [tv, rs("fancytype"), _v],
    ty = [ys("initData", {})].concat(ey),
    oy = [fs("select"), Ts("initData", {}, [Cs("allowCustomColors", !0), Ss("storageKey", "default"), bs("colors", Nn())])].concat(ey),
    ny = Jn("fancytype", {
      inserttable: ty,
      colorswatch: oy
    }),
    sy = Dn([tv, mv, _v, hv].concat(Jv)),
    ry = Dn([tv, cv, mv, hv].concat(Jv)),
    ay = Dn([tv, hv, xv, mv, dv].concat(Jv)),
    iy = function iy(e, t, o) {
      var n = Xc(e.element, "." + o);
      if (n.length > 0) {
        var _e15 = $(n, function (e) {
          var o = e.dom.getBoundingClientRect().top,
            s = n[0].dom.getBoundingClientRect().top;
          return Math.abs(o - s) > t;
        }).getOr(n.length);
        return A.some({
          numColumns: _e15,
          numRows: Math.ceil(n.length / _e15)
        });
      }
      return A.none();
    },
    ly = function ly(e) {
      return function (e, t) {
        return kl([Jp(e, t)]);
      }(la("unnamed-events"), e);
    },
    cy = la("tooltip.exclusive"),
    dy = la("tooltip.show"),
    uy = la("tooltip.hide"),
    my = function my(e, t, o) {
      e.getSystem().broadcastOn([cy], {});
    };
  var gy = Object.freeze({
      __proto__: null,
      hideAllExclusive: my,
      setComponents: function setComponents(e, t, o, n) {
        o.getTooltip().each(function (e) {
          e.getSystem().isConnected() && Kp.set(e, n);
        });
      }
    }),
    py = Object.freeze({
      __proto__: null,
      events: function events(e, t) {
        var o = function o(_o21) {
          t.getTooltip().each(function (n) {
            Bd(n), e.onHide(_o21, n), t.clearTooltip();
          }), t.clearTimer();
        };
        return Hr(q([[Ur(dy, function (o) {
          t.resetTimer(function () {
            (function (o) {
              if (!t.isShowing()) {
                my(o);
                var _n28 = e.lazySink(o).getOrDie(),
                  _s20 = o.getSystem().build({
                    dom: e.tooltipDom,
                    components: e.tooltipComponents,
                    events: Hr("normal" === e.mode ? [Ur(qs(), function (e) {
                      Fr(o, dy);
                    }), Ur(Gs(), function (e) {
                      Fr(o, uy);
                    })] : []),
                    behaviours: kl([Kp.config({})])
                  });
                t.setTooltip(_s20), Ad(_n28, _s20), e.onShow(o, _s20), Sd.position(_n28, _s20, {
                  anchor: e.anchor(o)
                });
              }
            })(o);
          }, e.delay);
        }), Ur(uy, function (n) {
          t.resetTimer(function () {
            o(n);
          }, e.delay);
        }), Ur(dr(), function (e, t) {
          var n = t;
          n.universal || R(n.channels, cy) && o(e);
        }), Jr(function (e) {
          o(e);
        })], "normal" === e.mode ? [Ur(Xs(), function (e) {
          Fr(e, dy);
        }), Ur(lr(), function (e) {
          Fr(e, uy);
        }), Ur(qs(), function (e) {
          Fr(e, dy);
        }), Ur(Gs(), function (e) {
          Fr(e, uy);
        })] : [Ur(Dr(), function (e, t) {
          Fr(e, dy);
        }), Ur(Br(), function (e) {
          Fr(e, uy);
        })]]));
      }
    }),
    hy = [os("lazySink"), os("tooltipDom"), ys("exclusive", !0), ys("tooltipComponents", []), ys("delay", 300), ks("mode", "normal", ["normal", "follow-highlight"]), ys("anchor", function (e) {
      return {
        type: "hotspot",
        hotspot: e,
        layouts: {
          onLtr: x([cl, ll, sl, al, rl, il]),
          onRtl: x([cl, ll, sl, al, rl, il])
        }
      };
    }), Di("onHide"), Di("onShow")],
    fy = Object.freeze({
      __proto__: null,
      init: function init() {
        var e = Ql(),
          t = Ql(),
          o = function o() {
            e.on(clearTimeout);
          },
          n = x("not-implemented");
        return _a({
          getTooltip: t.get,
          isShowing: t.isSet,
          setTooltip: t.set,
          clearTooltip: t.clear,
          clearTimer: o,
          resetTimer: function resetTimer(t, n) {
            o(), e.set(setTimeout(t, n));
          },
          readState: n
        });
      }
    });
  var by = Ol({
      fields: hy,
      name: "tooltipping",
      active: py,
      state: fy,
      apis: gy
    }),
    vy = "silver.readonly",
    yy = Dn([("readonly", ns("readonly", Ln))]);
  var xy = function xy(e, t) {
      var o = e.mainUi.outerContainer.element,
        n = [e.mainUi.mothership].concat(_toConsumableArray(e.uiMotherships));
      t && L(n, function (e) {
        e.broadcastOn([Yd()], {
          target: o
        });
      }), L(n, function (e) {
        e.broadcastOn([vy], {
          readonly: t
        });
      });
    },
    wy = function wy(e, t) {
      e.on("init", function () {
        e.mode.isReadOnly() && xy(t, !0);
      }), e.on("SwitchMode", function () {
        return xy(t, e.mode.isReadOnly());
      }), mf(e) && e.mode.set("readonly");
    },
    Sy = function Sy() {
      return Al.config({
        channels: _defineProperty({}, vy, {
          schema: yy,
          onReceive: function onReceive(e, t) {
            Rm.set(e, t.readonly);
          }
        })
      });
    },
    ky = function ky(e) {
      return Rm.config({
        disabled: e
      });
    },
    Cy = function Cy(e) {
      return Rm.config({
        disabled: e,
        disableClass: "tox-tbtn--disabled"
      });
    },
    Oy = function Oy(e) {
      return Rm.config({
        disabled: e,
        disableClass: "tox-tbtn--disabled",
        useNative: !1
      });
    },
    _y = function _y(e, t) {
      var o = e.getApi(t);
      return function (e) {
        e(o);
      };
    },
    Ty = function Ty(e, t) {
      return Kr(function (o) {
        _y(e, o)(function (o) {
          var n = e.onSetup(o);
          p(n) && t.set(n);
        });
      });
    },
    Ey = function Ey(e, t) {
      return Jr(function (o) {
        return _y(e, o)(t.get());
      });
    },
    Ay = function Ay(e, t) {
      return Qr(function (o, n) {
        _y(e, o)(e.onAction), e.triggersSubmenu || t !== pb.CLOSE_ON_EXECUTE || (o.getSystem().isConnected() && Fr(o, hr()), n.stop());
      });
    },
    My = _defineProperty({}, ur(), ["disabling", "alloy.base.behaviour", "toggling", "item-events"]),
    Dy = we,
    By = function By(e, t, o, n) {
      var s = Es(b);
      return {
        type: "item",
        dom: t.dom,
        components: Dy(t.optComponents),
        data: e.data,
        eventOrder: My,
        hasSubmenu: e.triggersSubmenu,
        itemBehaviours: kl([Jp("item-events", [Ay(e, o), Ty(e, s), Ey(e, s)]), (r = function r() {
          return !e.enabled || n.isDisabled();
        }, Rm.config({
          disabled: r,
          disableClass: "tox-collection__item--state-disabled"
        })), Sy(), Kp.config({})].concat(e.itemBehaviours))
      };
      var r;
    },
    Fy = function Fy(e) {
      return {
        value: e.value,
        meta: _objectSpread({
          text: e.text.getOr("")
        }, e.meta)
      };
    },
    Iy = function Iy(e) {
      var t = lf.os.isMacOS() || lf.os.isiOS(),
        o = t ? {
          alt: "\u2325",
          ctrl: "\u2303",
          shift: "\u21E7",
          meta: "\u2318",
          access: "\u2303\u2325"
        } : {
          meta: "Ctrl",
          access: "Shift+Alt"
        },
        n = e.split("+"),
        s = H(n, function (e) {
          var t = e.toLowerCase().trim();
          return ve(o, t) ? o[t] : e;
        });
      return t ? s.join("") : s.join("+");
    },
    Ry = function Ry(e, t) {
      var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [xb];
      return ef(e, {
        tag: "div",
        classes: o
      }, t);
    },
    Ny = function Ny(e) {
      return {
        dom: {
          tag: "div",
          classes: [wb]
        },
        components: [ti(Gh.translate(e))]
      };
    },
    Vy = function Vy(e, t) {
      return {
        dom: {
          tag: "div",
          classes: t,
          innerHtml: e
        }
      };
    },
    zy = function zy(e, t) {
      return {
        dom: {
          tag: "div",
          classes: [wb]
        },
        components: [{
          dom: {
            tag: e.tag,
            styles: e.styles
          },
          components: [ti(Gh.translate(t))]
        }]
      };
    },
    Hy = function Hy(e) {
      return {
        dom: {
          tag: "div",
          classes: ["tox-collection__item-accessory"]
        },
        components: [ti(Iy(e))]
      };
    },
    Ly = function Ly(e) {
      return Ry("checkmark", e, ["tox-collection__item-checkmark"]);
    },
    Py = function Py(e) {
      var t = e.map(function (e) {
        return {
          attributes: {
            title: Gh.translate(e),
            id: la("menu-item")
          }
        };
      }).getOr({});
      return _objectSpread({
        tag: "div",
        classes: [hb, fb]
      }, t);
    },
    Uy = function Uy(e, t, o) {
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : A.none();
      return "color" === e.presets ? function (e, t, o) {
        var n = e.ariaLabel,
          s = e.value,
          r = e.iconContent.map(function (e) {
            return function (e, t, o) {
              var n = t();
              return Kh(e, n).or(o).getOrThunk(Xh(n));
            }(e, t.icons, o);
          });
        return {
          dom: function () {
            var e = bb,
              o = r.getOr(""),
              a = n.map(function (e) {
                return {
                  title: t.translate(e)
                };
              }).getOr({}),
              i = {
                tag: "div",
                attributes: a,
                classes: [e]
              };
            return "custom" === s ? _objectSpread(_objectSpread({}, i), {}, {
              tag: "button",
              classes: [].concat(_toConsumableArray(i.classes), ["tox-swatches__picker-btn"]),
              innerHtml: o
            }) : "remove" === s ? _objectSpread(_objectSpread({}, i), {}, {
              classes: [].concat(_toConsumableArray(i.classes), ["tox-swatch--remove"]),
              innerHtml: o
            }) : g(s) ? _objectSpread(_objectSpread({}, i), {}, {
              attributes: _objectSpread(_objectSpread({}, i.attributes), {}, {
                "data-mce-color": s
              }),
              styles: {
                "background-color": s
              },
              innerHtml: o
            }) : i;
          }(),
          optComponents: []
        };
      }(e, t, n) : function (e, t, o, n) {
        var s = {
            tag: "div",
            classes: [xb]
          },
          r = o ? e.iconContent.map(function (e) {
            return ef(e, s, t.icons, n);
          }).orThunk(function () {
            return A.some({
              dom: s
            });
          }) : A.none(),
          a = e.checkMark,
          i = A.from(e.meta).fold(function () {
            return Ny;
          }, function (e) {
            return ve(e, "style") ? k(zy, e.style) : Ny;
          }),
          l = e.htmlContent.fold(function () {
            return e.textContent.map(i);
          }, function (e) {
            return A.some(Vy(e, [wb]));
          });
        return {
          dom: Py(e.ariaLabel),
          optComponents: [r, l, e.shortcutContent.map(Hy), a, e.caret]
        };
      }(e, t, o, n);
    },
    Wy = function Wy(e, t) {
      return be(e, "tooltipWorker").map(function (e) {
        return [by.config({
          lazySink: t.getSink,
          tooltipDom: {
            tag: "div",
            classes: ["tox-tooltip-worker-container"]
          },
          tooltipComponents: [],
          anchor: function anchor(e) {
            return {
              type: "submenu",
              item: e,
              overrides: {
                maxHeightFunction: cc
              }
            };
          },
          mode: "follow-highlight",
          onShow: function onShow(t, o) {
            e(function (e) {
              by.setComponents(t, [oi({
                element: Ve(e)
              })]);
            });
          }
        })];
      }).getOr([]);
    },
    jy = function jy(e, t) {
      var o = function (e) {
        return rf.DOM.encode(e);
      }(Gh.translate(e));
      if (t.length > 0) {
        var _e16 = new RegExp(function (e) {
          return e.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
        }(t), "gi");
        return o.replace(_e16, function (e) {
          return "<span class=\"tox-autocompleter-highlight\">".concat(e, "</span>");
        });
      }
      return o;
    },
    Gy = function Gy(e, t) {
      return H(e, function (e) {
        switch (e.type) {
          case "cardcontainer":
            return function (e, t) {
              var o = "vertical" === e.direction ? "tox-collection__item-container--column" : Ob,
                n = "left" === e.align ? "tox-collection__item-container--align-left" : "tox-collection__item-container--align-right";
              return {
                dom: {
                  tag: "div",
                  classes: [Cb, o, n, function () {
                    switch (e.valign) {
                      case "top":
                        return "tox-collection__item-container--valign-top";
                      case "middle":
                        return "tox-collection__item-container--valign-middle";
                      case "bottom":
                        return "tox-collection__item-container--valign-bottom";
                    }
                  }()]
                },
                components: t
              };
            }(e, Gy(e.items, t));
          case "cardimage":
            return function (e, t, o) {
              return {
                dom: {
                  tag: "img",
                  classes: t,
                  attributes: {
                    src: e,
                    alt: o.getOr("")
                  }
                }
              };
            }(e.src, e.classes, e.alt);
          case "cardtext":
            var _o22 = e.name.exists(function (e) {
                return R(t.cardText.highlightOn, e);
              }),
              _n29 = _o22 ? A.from(t.cardText.matchText).getOr("") : "";
            return Vy(jy(e.text, _n29), e.classes);
        }
      });
    },
    $y = Yu(Ch(), Oh()),
    qy = function qy(e) {
      return {
        value: Jy(e)
      };
    },
    Xy = /^#?([a-f\d])([a-f\d])([a-f\d])$/i,
    Yy = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,
    Ky = function Ky(e) {
      return Xy.test(e) || Yy.test(e);
    },
    Jy = function Jy(e) {
      return _e(e, "#").toUpperCase();
    },
    Zy = function Zy(e) {
      var t = e.toString(16);
      return (1 === t.length ? "0" + t : t).toUpperCase();
    },
    Qy = function Qy(e) {
      var t = Zy(e.red) + Zy(e.green) + Zy(e.blue);
      return qy(t);
    },
    ex = Math.min,
    tx = Math.max,
    ox = Math.round,
    nx = /^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,
    sx = /^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,
    rx = function rx(e, t, o, n) {
      return {
        red: e,
        green: t,
        blue: o,
        alpha: n
      };
    },
    ax = function ax(e) {
      var t = parseInt(e, 10);
      return t.toString() === e && t >= 0 && t <= 255;
    },
    ix = function ix(e) {
      var t, o, n;
      var s = (e.hue || 0) % 360;
      var r = e.saturation / 100,
        a = e.value / 100;
      if (r = tx(0, ex(r, 1)), a = tx(0, ex(a, 1)), 0 === r) return t = o = n = ox(255 * a), rx(t, o, n, 1);
      var i = s / 60,
        l = a * r,
        c = l * (1 - Math.abs(i % 2 - 1)),
        d = a - l;
      switch (Math.floor(i)) {
        case 0:
          t = l, o = c, n = 0;
          break;
        case 1:
          t = c, o = l, n = 0;
          break;
        case 2:
          t = 0, o = l, n = c;
          break;
        case 3:
          t = 0, o = c, n = l;
          break;
        case 4:
          t = c, o = 0, n = l;
          break;
        case 5:
          t = l, o = 0, n = c;
          break;
        default:
          t = o = n = 0;
      }
      return t = ox(255 * (t + d)), o = ox(255 * (o + d)), n = ox(255 * (n + d)), rx(t, o, n, 1);
    },
    lx = function lx(e) {
      var t = function (e) {
          var t = function (e) {
              var t = e.value.replace(Xy, function (e, t, o, n) {
                return t + t + o + o + n + n;
              });
              return {
                value: t
              };
            }(e),
            o = Yy.exec(t.value);
          return null === o ? ["FFFFFF", "FF", "FF", "FF"] : o;
        }(e),
        o = parseInt(t[1], 16),
        n = parseInt(t[2], 16),
        s = parseInt(t[3], 16);
      return rx(o, n, s, 1);
    },
    cx = function cx(e, t, o, n) {
      var s = parseInt(e, 10),
        r = parseInt(t, 10),
        a = parseInt(o, 10),
        i = parseFloat(n);
      return rx(s, r, a, i);
    },
    dx = function dx(e) {
      if ("transparent" === e) return A.some(rx(0, 0, 0, 0));
      var t = nx.exec(e);
      if (null !== t) return A.some(cx(t[1], t[2], t[3], "1"));
      var o = sx.exec(e);
      return null !== o ? A.some(cx(o[1], o[2], o[3], o[4])) : A.none();
    },
    ux = function ux(e) {
      return "rgba(".concat(e.red, ",").concat(e.green, ",").concat(e.blue, ",").concat(e.alpha, ")");
    },
    mx = rx(255, 0, 0, 1),
    gx = function gx(e, t) {
      e.dispatch("ResizeContent", t);
    },
    px = function px(e, t) {
      e.dispatch("TextColorChange", t);
    },
    hx = function hx(e, t) {
      return e.dispatch("ResolveName", {
        name: t.nodeName.toLowerCase(),
        target: t
      });
    },
    fx = function fx(e, t) {
      return function () {
        e(), t();
      };
    },
    bx = function bx(e) {
      return yx(e, "NodeChange", function (t) {
        t.setEnabled(e.selection.isEditable());
      });
    },
    vx = function vx(e, t) {
      return function (o) {
        var n = bx(e)(o),
          s = function (e, t) {
            return function (o) {
              var n = Zl(),
                s = function s() {
                  o.setActive(e.formatter.match(t));
                  var s = e.formatter.formatChanged(t, o.setActive);
                  n.set(s);
                };
              return e.initialized ? s() : e.once("init", s), function () {
                e.off("init", s), n.clear();
              };
            };
          }(e, t)(o);
        return function () {
          n(), s();
        };
      };
    },
    yx = function yx(e, t, o) {
      return function (n) {
        var s = function s() {
            return o(n);
          },
          r = function r() {
            o(n), e.on(t, s);
          };
        return e.initialized ? r() : e.once("init", r), function () {
          e.off("init", r), e.off(t, s);
        };
      };
    },
    xx = function xx(e) {
      return function (t) {
        return function () {
          e.undoManager.transact(function () {
            e.focus(), e.execCommand("mceToggleFormat", !1, t.format);
          });
        };
      };
    },
    wx = function wx(e, t) {
      return function () {
        return e.execCommand(t);
      };
    };
  var Sx = tinymce.util.Tools.resolve("tinymce.util.LocalStorage");
  var kx = {},
    Cx = function Cx(e) {
      return be(kx, e).getOrThunk(function () {
        var t = "tinymce-custom-colors-".concat(e),
          o = Sx.getItem(t);
        if (m(o)) {
          var _e17 = Sx.getItem("tinymce-custom-colors");
          Sx.setItem(t, g(_e17) ? _e17 : "[]");
        }
        var n = function (e) {
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;
          var o = Sx.getItem(e),
            n = r(o) ? JSON.parse(o) : [],
            s = t - (a = n).length < 0 ? a.slice(0, t) : a;
          var a;
          var i = function i(e) {
            s.splice(e, 1);
          };
          return {
            add: function add(o) {
              I(s, o).each(i), s.unshift(o), s.length > t && s.pop(), Sx.setItem(e, JSON.stringify(s));
            },
            state: function state() {
              return s.slice(0);
            }
          };
        }(t, 10);
        return kx[e] = n, n;
      });
    },
    Ox = function Ox(e, t) {
      Cx(e).add(t);
    },
    _x = function _x(e, t, o) {
      return {
        hue: e,
        saturation: t,
        value: o
      };
    },
    Tx = function Tx(e) {
      var t = 0,
        o = 0,
        n = 0;
      var s = e.red / 255,
        r = e.green / 255,
        a = e.blue / 255,
        i = Math.min(s, Math.min(r, a)),
        l = Math.max(s, Math.max(r, a));
      return i === l ? (n = i, _x(0, 0, 100 * n)) : (t = s === i ? 3 : a === i ? 1 : 5, t = 60 * (t - (s === i ? r - a : a === i ? s - r : a - s) / (l - i)), o = (l - i) / l, n = l, _x(Math.round(t), Math.round(100 * o), Math.round(100 * n)));
    },
    Ex = function Ex(e) {
      return Qy(ix(e));
    },
    Ax = function Ax(e) {
      return (t = e, Ky(t) ? A.some({
        value: Jy(t)
      }) : A.none()).orThunk(function () {
        return dx(e).map(Qy);
      }).getOrThunk(function () {
        var t = document.createElement("canvas");
        t.height = 1, t.width = 1;
        var o = t.getContext("2d");
        o.clearRect(0, 0, t.width, t.height), o.fillStyle = "#FFFFFF", o.fillStyle = e, o.fillRect(0, 0, 1, 1);
        var n = o.getImageData(0, 0, 1, 1).data,
          s = n[0],
          r = n[1],
          a = n[2],
          i = n[3];
        return Qy(rx(s, r, a, i));
      });
      var t;
    },
    Mx = "forecolor",
    Dx = "hilitecolor",
    Bx = function Bx(e) {
      var t = [];
      for (var _o23 = 0; _o23 < e.length; _o23 += 2) t.push({
        text: e[_o23 + 1],
        value: "#" + Ax(e[_o23]).value,
        icon: "checkmark",
        type: "choiceitem"
      });
      return t;
    },
    Fx = function Fx(e) {
      return function (t) {
        return t.options.get(e);
      };
    },
    Ix = "#000000",
    Rx = function Rx(e, t) {
      return t === Mx && e.options.isSet("color_map_foreground") ? Fx("color_map_foreground")(e) : t === Dx && e.options.isSet("color_map_background") ? Fx("color_map_background")(e) : Fx("color_map")(e);
    },
    Nx = function Nx(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "default";
      return Math.max(5, Math.ceil(Math.sqrt(Rx(e, t).length)));
    },
    Vx = function Vx(e, t) {
      var o = Fx("color_cols")(e),
        n = Nx(e, t);
      return o === Nx(e) ? n : o;
    },
    zx = function zx(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "default";
      return Math.round(t === Mx ? Fx("color_cols_foreground")(e) : t === Dx ? Fx("color_cols_background")(e) : Fx("color_cols")(e));
    },
    Hx = Fx("custom_colors"),
    Lx = Fx("color_default_foreground"),
    Px = Fx("color_default_background"),
    Ux = function Ux(e, t) {
      var o = Ve(e.selection.getStart()),
        n = "hilitecolor" === t ? Is(o, function (e) {
          if (Ge(e)) {
            var _t29 = It(e, "background-color");
            return Ce(dx(_t29).exists(function (e) {
              return 0 !== e.alpha;
            }), _t29);
          }
          return A.none();
        }).getOr("rgba(0, 0, 0, 0)") : It(o, "color");
      return dx(n).map(function (e) {
        return "#" + Qy(e).value;
      });
    },
    Wx = function Wx(e) {
      var t = "choiceitem",
        o = {
          type: t,
          text: "Remove color",
          icon: "color-swatch-remove-color",
          value: "remove"
        };
      return e ? [o, {
        type: t,
        text: "Custom color",
        icon: "color-picker",
        value: "custom"
      }] : [o];
    },
    jx = function jx(e, t, o, n) {
      "custom" === o ? Jx(e)(function (o) {
        o.each(function (o) {
          Ox(t, o), e.execCommand("mceApplyTextcolor", t, o), n(o);
        });
      }, Ux(e, t).getOr(Ix)) : "remove" === o ? (n(""), e.execCommand("mceRemoveTextcolor", t)) : (n(o), e.execCommand("mceApplyTextcolor", t, o));
    },
    Gx = function Gx(e, t, o) {
      return e.concat(function (e) {
        return H(Cx(e).state(), function (e) {
          return {
            type: "choiceitem",
            text: e,
            icon: "checkmark",
            value: e
          };
        });
      }(t).concat(Wx(o)));
    },
    $x = function $x(e, t, o) {
      return function (n) {
        n(Gx(e, t, o));
      };
    },
    qx = function qx(e, t, o) {
      var n = "forecolor" === t ? "tox-icon-text-color__color" : "tox-icon-highlight-bg-color__color";
      e.setIconFill(n, o);
    },
    Xx = function Xx(e, t) {
      return function (o) {
        var n = Ux(e, t);
        return xe(n, o.toUpperCase());
      };
    },
    Yx = function Yx(e, t, o, n, s) {
      e.ui.registry.addSplitButton(t, {
        tooltip: n,
        presets: "color",
        icon: "forecolor" === t ? "text-color" : "highlight-bg-color",
        select: Xx(e, o),
        columns: zx(e, o),
        fetch: $x(Rx(e, o), o, Hx(e)),
        onAction: function onAction(t) {
          jx(e, o, s.get(), b);
        },
        onItemAction: function onItemAction(n, r) {
          jx(e, o, r, function (o) {
            s.set(o), px(e, {
              name: t,
              color: o
            });
          });
        },
        onSetup: function onSetup(o) {
          qx(o, t, s.get());
          var n = function n(e) {
            e.name === t && qx(o, e.name, e.color);
          };
          return e.on("TextColorChange", n), fx(bx(e)(o), function () {
            e.off("TextColorChange", n);
          });
        }
      });
    },
    Kx = function Kx(e, t, o, n, s) {
      e.ui.registry.addNestedMenuItem(t, {
        text: n,
        icon: "forecolor" === t ? "text-color" : "highlight-bg-color",
        onSetup: function onSetup(o) {
          return qx(o, t, s.get()), bx(e)(o);
        },
        getSubmenuItems: function getSubmenuItems() {
          return [{
            type: "fancymenuitem",
            fancytype: "colorswatch",
            select: Xx(e, o),
            initData: {
              storageKey: o
            },
            onAction: function onAction(n) {
              jx(e, o, n.value, function (o) {
                s.set(o), px(e, {
                  name: t,
                  color: o
                });
              });
            }
          }];
        }
      });
    },
    Jx = function Jx(e) {
      return function (t, o) {
        var n = !1;
        var s = {
          colorpicker: o
        };
        e.windowManager.open({
          title: "Color Picker",
          size: "normal",
          body: {
            type: "panel",
            items: [{
              type: "colorpicker",
              name: "colorpicker",
              label: "Color"
            }]
          },
          buttons: [{
            type: "cancel",
            name: "cancel",
            text: "Cancel"
          }, {
            type: "submit",
            name: "save",
            text: "Save",
            primary: !0
          }],
          initialData: s,
          onAction: function onAction(e, t) {
            "hex-valid" === t.name && (n = t.value);
          },
          onSubmit: function onSubmit(o) {
            var s = o.getData().colorpicker;
            n ? (t(A.from(s)), o.close()) : e.windowManager.alert(e.translate(["Invalid hex color code: {0}", s]));
          },
          onClose: b,
          onCancel: function onCancel() {
            t(A.none());
          }
        });
      };
    },
    Zx = function Zx(e, t, o, n, s, r, a, i) {
      var l = Jb(t),
        c = Qx(t, o, n, "color" !== s ? "normal" : "color", r, a, i);
      return ev(e, l, c, n, {
        menuType: s
      });
    },
    Qx = function Qx(e, t, o, n, s, r, a) {
      return we(H(e, function (i) {
        return "choiceitem" === i.type ? (l = i, qn("choicemenuitem", Qv, l)).fold(Zb, function (i) {
          return A.some(function (e, t, o, n, s, r, a) {
            var i = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : !0;
            var l = Uy({
              presets: o,
              textContent: t ? e.text : A.none(),
              htmlContent: A.none(),
              ariaLabel: e.text,
              iconContent: e.icon,
              shortcutContent: t ? e.shortcut : A.none(),
              checkMark: t ? A.some(Ly(a.icons)) : A.none(),
              caret: A.none(),
              value: e.value
            }, a, i);
            return fn(By({
              data: Fy(e),
              enabled: e.enabled,
              getApi: function getApi(e) {
                return {
                  setActive: function setActive(t) {
                    dh.set(e, t);
                  },
                  isActive: function isActive() {
                    return dh.isOn(e);
                  },
                  isEnabled: function isEnabled() {
                    return !Rm.isDisabled(e);
                  },
                  setEnabled: function setEnabled(t) {
                    return Rm.set(e, !t);
                  }
                };
              },
              onAction: function onAction(t) {
                return n(e.value);
              },
              onSetup: function onSetup(e) {
                return e.setActive(s), b;
              },
              triggersSubmenu: !1,
              itemBehaviours: []
            }, l, r, a), {
              toggling: {
                toggleClass: yb,
                toggleOnExecute: !1,
                selected: e.active,
                exclusive: !0
              }
            });
          }(i, 1 === o, n, t, r(i.value), s, a, Jb(e)));
        }) : A.none();
        var l;
      }));
    },
    ew = function ew(e, t) {
      var o = Ab(t);
      return 1 === e ? {
        mode: "menu",
        moveOnTab: !0
      } : "auto" === e ? {
        mode: "grid",
        selector: "." + o.item,
        initSize: {
          numColumns: 1,
          numRows: 1
        }
      } : {
        mode: "matrix",
        rowSelector: "." + ("color" === t ? "tox-swatches__row" : "tox-collection__group"),
        previousSelector: function previousSelector(e) {
          return "color" === t ? pi(e.element, "[aria-checked=true]") : A.none();
        }
      };
    },
    tw = la("cell-over"),
    ow = la("cell-execute"),
    nw = function nw(e, t, o) {
      var n = function n(o) {
          return Ir(o, ow, {
            row: e,
            col: t
          });
        },
        s = function s(e, t) {
          t.stop(), n(e);
        };
      return ri({
        dom: {
          tag: "div",
          attributes: {
            role: "button",
            "aria-label": o
          }
        },
        behaviours: kl([Jp("insert-table-picker-cell", [Ur(qs(), oh.focus), Ur(ur(), n), Ur(er(), s), Ur(gr(), s)]), dh.config({
          toggleClass: "tox-insert-table-picker__selected",
          toggleOnExecute: !1
        }), oh.config({
          onFocus: function onFocus(o) {
            return Ir(o, tw, {
              row: e,
              col: t
            });
          }
        })])
      });
    },
    sw = function sw(e) {
      return X(e, function (e) {
        return H(e, ai);
      });
    },
    rw = function rw(e, t) {
      return ti("".concat(t, "x").concat(e));
    },
    aw = {
      inserttable: function inserttable(e, t) {
        var o = function (e) {
            return function (t, o) {
              return e.shared.providers.translate("".concat(o, " columns, ").concat(t, " rows"));
            };
          }(t),
          n = function (e, t, o) {
            var n = [];
            for (var _t30 = 0; _t30 < 10; _t30++) {
              var _o24 = [];
              for (var _n30 = 0; _n30 < 10; _n30++) {
                var _s21 = e(_t30 + 1, _n30 + 1);
                _o24.push(nw(_t30, _n30, _s21));
              }
              n.push(_o24);
            }
            return n;
          }(o),
          s = rw(0, 0),
          r = jh({
            dom: {
              tag: "span",
              classes: ["tox-insert-table-picker__label"]
            },
            components: [s],
            behaviours: kl([Kp.config({})])
          });
        return {
          type: "widget",
          data: {
            value: la("widget-id")
          },
          dom: {
            tag: "div",
            classes: ["tox-fancymenuitem"]
          },
          autofocus: !0,
          components: [$y.widget({
            dom: {
              tag: "div",
              classes: ["tox-insert-table-picker"]
            },
            components: sw(n).concat(r.asSpec()),
            behaviours: kl([Jp("insert-table-picker", [Kr(function (e) {
              Kp.set(r.get(e), [s]);
            }), $r(tw, function (e, t, o) {
              var _o$event = o.event,
                s = _o$event.row,
                a = _o$event.col;
              (function (e, t, o, n, s) {
                for (var _n31 = 0; _n31 < 10; _n31++) for (var _s22 = 0; _s22 < 10; _s22++) dh.set(e[_n31][_s22], _n31 <= t && _s22 <= o);
              })(n, s, a), Kp.set(r.get(e), [rw(s + 1, a + 1)]);
            }), $r(ow, function (t, o, n) {
              var _n$event = n.event,
                s = _n$event.row,
                r = _n$event.col;
              e.onAction({
                numRows: s + 1,
                numColumns: r + 1
              }), Fr(t, hr());
            })]), Pp.config({
              initSize: {
                numRows: 10,
                numColumns: 10
              },
              mode: "flatgrid",
              selector: '[role="button"]'
            })])
          })]
        };
      },
      colorswatch: function colorswatch(e, t) {
        var o = function (e, t) {
            var o = e.initData.allowCustomColors && t.colorinput.hasCustomColors();
            return e.initData.colors.fold(function () {
              return Gx(t.colorinput.getColors(e.initData.storageKey), e.initData.storageKey, o);
            }, function (e) {
              return e.concat(Wx(o));
            });
          }(e, t),
          n = t.colorinput.getColorCols(e.initData.storageKey),
          s = "color",
          r = _objectSpread(_objectSpread({}, Zx(la("menu-value"), o, function (t) {
            e.onAction({
              value: t
            });
          }, n, s, pb.CLOSE_ON_EXECUTE, e.select.getOr(T), t.shared.providers)), {}, {
            markers: Ab(s),
            movement: ew(n, s)
          });
        return {
          type: "widget",
          data: {
            value: la("widget-id")
          },
          dom: {
            tag: "div",
            classes: ["tox-fancymenuitem"]
          },
          autofocus: !0,
          components: [$y.widget(Dh.sketch(r))]
        };
      }
    },
    iw = function iw(e) {
      return {
        type: "separator",
        dom: {
          tag: "div",
          classes: [fb, "tox-collection__group-heading"]
        },
        components: e.text.map(ti).toArray()
      };
    };
  var lw = Object.freeze({
      __proto__: null,
      getCoupled: function getCoupled(e, t, o, n) {
        return o.getOrCreate(e, t, n);
      },
      getExistingCoupled: function getExistingCoupled(e, t, o, n) {
        return o.getExisting(e, t, n);
      }
    }),
    cw = [ns("others", $n(sn.value, Nn()))],
    dw = Object.freeze({
      __proto__: null,
      init: function init() {
        var e = {},
          t = function t(_t31, o) {
            if (0 === ae(_t31.others).length) throw new Error("Cannot find any known coupled components");
            return be(e, o);
          },
          o = x({});
        return _a({
          readState: o,
          getExisting: function getExisting(e, o, n) {
            return t(o, n).orThunk(function () {
              return be(o.others, n).getOrDie("No information found for coupled component: " + n), A.none();
            });
          },
          getOrCreate: function getOrCreate(o, n, s) {
            return t(n, s).getOrThunk(function () {
              var t = be(n.others, s).getOrDie("No information found for coupled component: " + s)(o),
                r = o.getSystem().build(t);
              return e[s] = r, r;
            });
          }
        });
      }
    });
  var uw = Ol({
      fields: cw,
      name: "coupling",
      apis: lw,
      state: dw
    }),
    mw = function mw(e) {
      var t = A.none(),
        o = [];
      var n = function n(e) {
          s() ? r(e) : o.push(e);
        },
        s = function s() {
          return t.isSome();
        },
        r = function r(e) {
          t.each(function (t) {
            setTimeout(function () {
              e(t);
            }, 0);
          });
        };
      return e(function (e) {
        s() || (t = A.some(e), L(o, r), o = []);
      }), {
        get: n,
        map: function map(e) {
          return mw(function (t) {
            n(function (o) {
              t(e(o));
            });
          });
        },
        isReady: s
      };
    },
    gw = {
      nu: mw,
      pure: function pure(e) {
        return mw(function (t) {
          t(e);
        });
      }
    },
    pw = function pw(e) {
      setTimeout(function () {
        throw e;
      }, 0);
    },
    hw = function hw(e) {
      var t = function t(_t32) {
        e().then(_t32, pw);
      };
      return {
        map: function map(t) {
          return hw(function () {
            return e().then(t);
          });
        },
        bind: function bind(t) {
          return hw(function () {
            return e().then(function (e) {
              return t(e).toPromise();
            });
          });
        },
        anonBind: function anonBind(t) {
          return hw(function () {
            return e().then(function () {
              return t.toPromise();
            });
          });
        },
        toLazy: function toLazy() {
          return gw.nu(t);
        },
        toCached: function toCached() {
          var t = null;
          return hw(function () {
            return null === t && (t = e()), t;
          });
        },
        toPromise: e,
        get: t
      };
    },
    fw = function fw(e) {
      return hw(function () {
        return new Promise(e);
      });
    },
    bw = function bw(e) {
      return hw(function () {
        return Promise.resolve(e);
      });
    },
    vw = x("sink"),
    yw = x(ju({
      name: vw(),
      overrides: x({
        dom: {
          tag: "div"
        },
        behaviours: kl([Sd.config({
          useFixed: E
        })]),
        events: Hr([qr(Ks()), qr(Ws()), qr(er())])
      })
    })),
    xw = function xw(e, t) {
      var o = e.getHotspot(t).getOr(t),
        n = "hotspot",
        s = e.getAnchorOverrides();
      return e.layouts.fold(function () {
        return {
          type: n,
          hotspot: o,
          overrides: s
        };
      }, function (e) {
        return {
          type: n,
          hotspot: o,
          overrides: s,
          layouts: e
        };
      });
    },
    ww = function ww(e, t, o, n, s, r, a) {
      var i = function (e, t, o, n, s, r, a) {
        var i = function (e, t, o) {
            return (0, e.fetch)(o).map(t);
          }(e, t, n),
          l = Cw(n, e);
        return i.map(function (e) {
          return e.bind(function (e) {
            return A.from(Lh.sketch(_objectSpread(_objectSpread({}, r.menu()), {}, {
              uid: ha(""),
              data: e,
              highlightOnOpen: a,
              onOpenMenu: function onOpenMenu(e, t) {
                var n = l().getOrDie();
                Sd.position(n, t, {
                  anchor: o
                }), Xd.decloak(s);
              },
              onOpenSubmenu: function onOpenSubmenu(e, t, o) {
                var n = l().getOrDie();
                Sd.position(n, o, {
                  anchor: {
                    type: "submenu",
                    item: t
                  }
                }), Xd.decloak(s);
              },
              onRepositionMenu: function onRepositionMenu(e, t, n) {
                var s = l().getOrDie();
                Sd.position(s, t, {
                  anchor: o
                }), L(n, function (e) {
                  Sd.position(s, e.triggeredMenu, {
                    anchor: {
                      type: "submenu",
                      item: e.triggeringItem
                    }
                  });
                });
              },
              onEscape: function onEscape() {
                return oh.focus(n), Xd.close(s), A.some(!0);
              }
            })));
          });
        });
      }(e, t, xw(e, o), o, n, s, a);
      return i.map(function (e) {
        return e.fold(function () {
          Xd.isOpen(n) && Xd.close(n);
        }, function (e) {
          Xd.cloak(n), Xd.open(n, e), r(n);
        }), n;
      });
    },
    Sw = function Sw(e, t, o, n, s, r, a) {
      return Xd.close(n), bw(n);
    },
    kw = function kw(e, t, o, n, s, r) {
      var a = uw.getCoupled(o, "sandbox");
      return (Xd.isOpen(a) ? Sw : ww)(e, t, o, a, n, s, r);
    },
    Cw = function Cw(e, t) {
      return e.getSystem().getByUid(t.uid + "-" + vw()).map(function (e) {
        return function () {
          return sn.value(e);
        };
      }).getOrThunk(function () {
        return t.lazySink.fold(function () {
          return function () {
            return sn.error(new Error("No internal sink is specified, nor could an external sink be found"));
          };
        }, function (t) {
          return function () {
            return t(e);
          };
        });
      });
    },
    Ow = function Ow(e) {
      Xd.getState(e).each(function (e) {
        Lh.repositionMenus(e);
      });
    },
    _w = function _w(e, t, o) {
      var n = bi(),
        s = Cw(t, e);
      return {
        dom: {
          tag: "div",
          classes: e.sandboxClasses,
          attributes: {
            id: n.id,
            role: "listbox"
          }
        },
        behaviours: yu(e.sandboxBehaviours, [pu.config({
          store: {
            mode: "memory",
            initialValue: t
          }
        }), Xd.config({
          onOpen: function onOpen(s, r) {
            var a = xw(e, t);
            n.link(t.element), e.matchWidth && function (e, t, o) {
              var n = wm.getCurrent(t).getOr(t),
                s = Jt(e.element);
              o ? Dt(n.element, "min-width", s + "px") : function (e, t) {
                Kt.set(e, t);
              }(n.element, s);
            }(a.hotspot, r, e.useMinWidth), e.onOpen(a, s, r), void 0 !== o && void 0 !== o.onOpen && o.onOpen(s, r);
          },
          onClose: function onClose(e, s) {
            n.unlink(t.element), void 0 !== o && void 0 !== o.onClose && o.onClose(e, s);
          },
          isPartOf: function isPartOf(e, o, n) {
            return vi(o, n) || vi(t, n);
          },
          getAttachPoint: function getAttachPoint() {
            return s().getOrDie();
          }
        }), wm.config({
          find: function find(e) {
            return Xd.getState(e).bind(function (e) {
              return wm.getCurrent(e);
            });
          }
        }), Al.config({
          channels: _objectSpread(_objectSpread({}, Qd({
            isExtraPart: T
          })), tu({
            doReposition: Ow
          }))
        })])
      };
    },
    Tw = function Tw(e) {
      var t = uw.getCoupled(e, "sandbox");
      Ow(t);
    },
    Ew = function Ew() {
      return [ys("sandboxClasses", []), vu("sandboxBehaviours", [wm, Al, Xd, pu])];
    },
    Aw = x([os("dom"), os("fetch"), Di("onOpen"), Bi("onExecute"), ys("getHotspot", A.some), ys("getAnchorOverrides", x({})), wc(), hu("dropdownBehaviours", [dh, uw, Pp, oh]), os("toggleClass"), ys("eventOrder", {}), us("lazySink"), ys("matchWidth", !1), ys("useMinWidth", !1), us("role")].concat(Ew())),
    Mw = x([Wu({
      schema: [Ei(), ys("fakeFocus", !1)],
      name: "menu",
      defaults: function defaults(e) {
        return {
          onExecute: e.onExecute
        };
      }
    }), yw()]),
    Dw = bm({
      name: "Dropdown",
      configFields: Aw(),
      partFields: Mw(),
      factory: function factory(e, t, o, n) {
        var s = function s(e) {
            Xd.getState(e).each(function (e) {
              Lh.highlightPrimary(e);
            });
          },
          r = function r(t, o, s) {
            return kw(e, w, t, n, o, s);
          },
          a = {
            expand: function expand(e) {
              dh.isOn(e) || r(e, b, zh.HighlightNone).get(b);
            },
            open: function open(e) {
              dh.isOn(e) || r(e, b, zh.HighlightMenuAndItem).get(b);
            },
            refetch: function refetch(t) {
              return uw.getExistingCoupled(t, "sandbox").fold(function () {
                return r(t, b, zh.HighlightMenuAndItem).map(b);
              }, function (o) {
                return ww(e, w, t, o, n, b, zh.HighlightMenuAndItem).map(b);
              });
            },
            isOpen: dh.isOn,
            close: function close(e) {
              dh.isOn(e) && r(e, b, zh.HighlightMenuAndItem).get(b);
            },
            repositionMenus: function repositionMenus(e) {
              dh.isOn(e) && Tw(e);
            }
          },
          i = function i(e, t) {
            return Rr(e), A.some(!0);
          };
        return {
          uid: e.uid,
          dom: e.dom,
          components: t,
          behaviours: bu(e.dropdownBehaviours, [dh.config({
            toggleClass: e.toggleClass,
            aria: {
              mode: "expanded"
            }
          }), uw.config({
            others: {
              sandbox: function sandbox(t) {
                return _w(e, t, {
                  onOpen: function onOpen() {
                    return dh.on(t);
                  },
                  onClose: function onClose() {
                    return dh.off(t);
                  }
                });
              }
            }
          }), Pp.config({
            mode: "special",
            onSpace: i,
            onEnter: i,
            onDown: function onDown(e, t) {
              if (Dw.isOpen(e)) {
                var _t33 = uw.getCoupled(e, "sandbox");
                s(_t33);
              } else Dw.open(e);
              return A.some(!0);
            },
            onEscape: function onEscape(e, t) {
              return Dw.isOpen(e) ? (Dw.close(e), A.some(!0)) : A.none();
            }
          }), oh.config({})]),
          events: mh(A.some(function (e) {
            r(e, s, zh.HighlightMenuAndItem).get(b);
          })),
          eventOrder: _objectSpread(_objectSpread({}, e.eventOrder), {}, _defineProperty({}, ur(), ["disabling", "toggling", "alloy.base.behaviour"])),
          apis: a,
          domModification: {
            attributes: _objectSpread(_objectSpread({
              "aria-haspopup": "true"
            }, e.role.fold(function () {
              return {};
            }, function (e) {
              return {
                role: e
              };
            })), "button" === e.dom.tag ? {
              type: ("type", be(e.dom, "attributes").bind(function (e) {
                return be(e, "type");
              })).getOr("button")
            } : {})
          }
        };
      },
      apis: {
        open: function open(e, t) {
          return e.open(t);
        },
        refetch: function refetch(e, t) {
          return e.refetch(t);
        },
        expand: function expand(e, t) {
          return e.expand(t);
        },
        close: function close(e, t) {
          return e.close(t);
        },
        isOpen: function isOpen(e, t) {
          return e.isOpen(t);
        },
        repositionMenus: function repositionMenus(e, t) {
          return e.repositionMenus(t);
        }
      }
    }),
    Bw = function Bw(e, t, o) {
      Ub(e).each(function (e) {
        var n;
        (function (e, t) {
          _t(t.element, "id").each(function (t) {
            return kt(e.element, "aria-activedescendant", t);
          });
        })(e, o), (Ua((n = t).element, Gb) ? A.some(n.element) : pi(n.element, "." + Gb)).each(function (t) {
          _t(t, "id").each(function (t) {
            return kt(e.element, "aria-controls", t);
          });
        });
      }), kt(o.element, "aria-selected", "true");
    },
    Fw = function Fw(e, t, o) {
      kt(o.element, "aria-selected", "false");
    },
    Iw = function Iw(e) {
      return uw.getExistingCoupled(e, "sandbox").bind(Pb).map(Wb).map(function (e) {
        return e.fetchPattern;
      }).getOr("");
    };
  var Rw;
  !function (e) {
    e[e.ContentFocus = 0] = "ContentFocus", e[e.UiFocus = 1] = "UiFocus";
  }(Rw || (Rw = {}));
  var Nw = function Nw(e, t, o, n, s) {
      var r = o.shared.providers,
        a = function a(e) {
          return s ? _objectSpread(_objectSpread({}, e), {}, {
            shortcut: A.none(),
            icon: e.text.isSome() ? A.none() : e.icon
          }) : e;
        };
      switch (e.type) {
        case "menuitem":
          return (i = e, qn("menuitem", sy, i)).fold(Zb, function (e) {
            return A.some(function (e, t, o) {
              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
              var s = Uy({
                presets: "normal",
                iconContent: e.icon,
                textContent: e.text,
                htmlContent: A.none(),
                ariaLabel: e.text,
                caret: A.none(),
                checkMark: A.none(),
                shortcutContent: e.shortcut
              }, o, n);
              return By({
                data: Fy(e),
                getApi: function getApi(e) {
                  return {
                    isEnabled: function isEnabled() {
                      return !Rm.isDisabled(e);
                    },
                    setEnabled: function setEnabled(t) {
                      return Rm.set(e, !t);
                    }
                  };
                },
                enabled: e.enabled,
                onAction: e.onAction,
                onSetup: e.onSetup,
                triggersSubmenu: !1,
                itemBehaviours: []
              }, s, t, o);
            }(a(e), t, r, n));
          });
        case "nestedmenuitem":
          return function (e) {
            return qn("nestedmenuitem", ry, e);
          }(e).fold(Zb, function (e) {
            return A.some(function (e, t, o) {
              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
              var s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;
              var r = s ? (a = o.icons, Ry("chevron-down", a, [Sb])) : function (e) {
                return Ry("chevron-right", e, [Sb]);
              }(o.icons);
              var a;
              var i = Uy({
                presets: "normal",
                iconContent: e.icon,
                textContent: e.text,
                htmlContent: A.none(),
                ariaLabel: e.text,
                caret: A.some(r),
                checkMark: A.none(),
                shortcutContent: e.shortcut
              }, o, n);
              return By({
                data: Fy(e),
                getApi: function getApi(e) {
                  return {
                    isEnabled: function isEnabled() {
                      return !Rm.isDisabled(e);
                    },
                    setEnabled: function setEnabled(t) {
                      return Rm.set(e, !t);
                    },
                    setIconFill: function setIconFill(t, o) {
                      pi(e.element, "svg path[class=\"".concat(t, "\"], rect[class=\"").concat(t, "\"]")).each(function (e) {
                        kt(e, "fill", o);
                      });
                    }
                  };
                },
                enabled: e.enabled,
                onAction: b,
                onSetup: e.onSetup,
                triggersSubmenu: !0,
                itemBehaviours: []
              }, i, t, o);
            }(a(e), t, r, n, s));
          });
        case "togglemenuitem":
          return function (e) {
            return qn("togglemenuitem", ay, e);
          }(e).fold(Zb, function (e) {
            return A.some(function (e, t, o) {
              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
              var s = Uy({
                iconContent: e.icon,
                textContent: e.text,
                htmlContent: A.none(),
                ariaLabel: e.text,
                checkMark: A.some(Ly(o.icons)),
                caret: A.none(),
                shortcutContent: e.shortcut,
                presets: "normal",
                meta: e.meta
              }, o, n);
              return fn(By({
                data: Fy(e),
                enabled: e.enabled,
                getApi: function getApi(e) {
                  return {
                    setActive: function setActive(t) {
                      dh.set(e, t);
                    },
                    isActive: function isActive() {
                      return dh.isOn(e);
                    },
                    isEnabled: function isEnabled() {
                      return !Rm.isDisabled(e);
                    },
                    setEnabled: function setEnabled(t) {
                      return Rm.set(e, !t);
                    }
                  };
                },
                onAction: e.onAction,
                onSetup: e.onSetup,
                triggersSubmenu: !1,
                itemBehaviours: []
              }, s, t, o), {
                toggling: {
                  toggleClass: yb,
                  toggleOnExecute: !1,
                  selected: e.active
                }
              });
            }(a(e), t, r, n));
          });
        case "separator":
          return function (e) {
            return qn("separatormenuitem", Av, e);
          }(e).fold(Zb, function (e) {
            return A.some(iw(e));
          });
        case "fancymenuitem":
          return function (e) {
            return qn("fancymenuitem", ny, e);
          }(e).fold(Zb, function (e) {
            return function (e, t) {
              return be(aw, e.fancytype).map(function (o) {
                return o(e, t);
              });
            }(e, o);
          });
        default:
          return console.error("Unknown item in general menu", e), A.none();
      }
      var i;
    },
    Vw = function Vw(e, t, o, n, s, r, a) {
      var i = 1 === n,
        l = !i || Jb(e);
      return we(H(e, function (e) {
        switch (e.type) {
          case "separator":
            return (n = e, qn("Autocompleter.Separator", Av, n)).fold(Zb, function (e) {
              return A.some(iw(e));
            });
          case "cardmenuitem":
            return function (e) {
              return qn("cardmenuitem", Zv, e);
            }(e).fold(Zb, function (e) {
              return A.some(function (e, t, o, n) {
                var s = {
                  dom: Py(e.label),
                  optComponents: [A.some({
                    dom: {
                      tag: "div",
                      classes: [Cb, Ob]
                    },
                    components: Gy(e.items, n)
                  })]
                };
                return By({
                  data: Fy(_objectSpread({
                    text: A.none()
                  }, e)),
                  enabled: e.enabled,
                  getApi: function getApi(e) {
                    return {
                      isEnabled: function isEnabled() {
                        return !Rm.isDisabled(e);
                      },
                      setEnabled: function setEnabled(t) {
                        Rm.set(e, !t), L(Xc(e.element, "*"), function (o) {
                          e.getSystem().getByDom(o).each(function (e) {
                            e.hasConfigured(Rm) && Rm.set(e, !t);
                          });
                        });
                      }
                    };
                  },
                  onAction: e.onAction,
                  onSetup: e.onSetup,
                  triggersSubmenu: !1,
                  itemBehaviours: A.from(n.itemBehaviours).getOr([])
                }, s, t, o.providers);
              }(_objectSpread(_objectSpread({}, e), {}, {
                onAction: function onAction(t) {
                  e.onAction(t), o(e.value, e.meta);
                }
              }), s, r, {
                itemBehaviours: Wy(e.meta, r),
                cardText: {
                  matchText: t,
                  highlightOn: a
                }
              }));
            });
          default:
            return function (e) {
              return qn("Autocompleter.Item", Mv, e);
            }(e).fold(Zb, function (e) {
              return A.some(function (e, t, o, n, s, r, a) {
                var i = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : !0;
                var l = Uy({
                  presets: n,
                  textContent: A.none(),
                  htmlContent: o ? e.text.map(function (e) {
                    return jy(e, t);
                  }) : A.none(),
                  ariaLabel: e.text,
                  iconContent: e.icon,
                  shortcutContent: A.none(),
                  checkMark: A.none(),
                  caret: A.none(),
                  value: e.value
                }, a.providers, i, e.icon);
                return By({
                  data: Fy(e),
                  enabled: e.enabled,
                  getApi: x({}),
                  onAction: function onAction(t) {
                    return s(e.value, e.meta);
                  },
                  onSetup: x(b),
                  triggersSubmenu: !1,
                  itemBehaviours: Wy(e.meta, a)
                }, l, r, a.providers);
              }(e, t, i, "normal", o, s, r, l));
            });
        }
        var n;
      }));
    },
    zw = function zw(e, t, o, n, s, r) {
      var a = Jb(t),
        i = we(H(t, function (e) {
          var t = function t(e) {
            return Nw(e, o, n, function (e) {
              return s ? !ve(e, "text") : a;
            }(e), s);
          };
          return "nestedmenuitem" === e.type && e.getSubmenuItems().length <= 0 ? t(_objectSpread(_objectSpread({}, e), {}, {
            enabled: !1
          })) : t(e);
        })),
        l = function (e) {
          return "no-search" === e.searchMode ? {
            menuType: "normal"
          } : {
            menuType: "searchable",
            searchMode: e
          };
        }(r);
      return (s ? Qb : ev)(e, a, i, 1, l);
    },
    Hw = function Hw(e) {
      return Lh.singleData(e.value, e);
    },
    Lw = function Lw(e, t) {
      var o = Es(!1),
        n = Es(!1),
        s = ri(Ph.sketch({
          dom: {
            tag: "div",
            classes: ["tox-autocompleter"]
          },
          components: [],
          fireDismissalEventInstead: {},
          inlineBehaviours: kl([Jp("dismissAutocompleter", [Ur(Cr(), function () {
            return c();
          })])]),
          lazySink: t.getSink
        })),
        r = function r() {
          return Ph.isOpen(s);
        },
        a = n.get,
        i = function i() {
          r() && Ph.hide(s);
        },
        l = function l() {
          return Ph.getContent(s).bind(function (e) {
            return te(e.components(), 0);
          });
        },
        c = function c() {
          return e.execCommand("mceAutocompleterClose");
        },
        d = function d(n) {
          var r = function (n) {
            var s = re(n, function (e) {
              return A.from(e.columns);
            }).getOr(1);
            return X(n, function (n) {
              var r = n.items;
              return Vw(r, n.matchText, function (t, s) {
                var r = e.selection.getRng();
                (function (e, t) {
                  return mb(Ve(t.startContainer)).map(function (t) {
                    var o = e.createRng();
                    return o.selectNode(t.dom), o;
                  });
                })(e.dom, r).each(function (r) {
                  var a = {
                    hide: function hide() {
                      return c();
                    },
                    reload: function reload(t) {
                      i(), e.execCommand("mceAutocompleterReload", !1, {
                        fetchOptions: t
                      });
                    }
                  };
                  o.set(!0), n.onAction(a, r, t, s), o.set(!1);
                });
              }, s, pb.BUBBLE_TO_SANDBOX, t, n.highlightOn);
            });
          }(n);
          r.length > 0 ? function (t, o) {
            var n;
            (n = Ve(e.getBody()), pi(n, ub)).each(function (n) {
              var r = re(t, function (e) {
                return A.from(e.columns);
              }).getOr(1);
              Ph.showMenuAt(s, {
                anchor: {
                  type: "node",
                  root: Ve(e.getBody()),
                  node: A.from(n)
                }
              }, function (e, t, o, n) {
                var s = ew(t, n),
                  r = Ab(n);
                return {
                  data: Hw(_objectSpread(_objectSpread({}, e), {}, {
                    movement: s,
                    menuBehaviours: ly("auto" !== t ? [] : [Kr(function (e, t) {
                      iy(e, 4, r.item).each(function (_ref8) {
                        var t = _ref8.numColumns,
                          o = _ref8.numRows;
                        Pp.setGridSize(e, o, t);
                      });
                    })])
                  })),
                  menu: {
                    markers: Ab(n),
                    fakeFocus: o === Rw.ContentFocus
                  }
                };
              }(ev("autocompleter-value", !0, o, r, {
                menuType: "normal"
              }), r, Rw.ContentFocus, "normal"));
            }), l().each(Gm.highlightFirst);
          }(n, r) : i();
        };
      e.on("AutocompleterStart", function (_ref9) {
        var e = _ref9.lookupData;
        n.set(!0), o.set(!1), d(e);
      }), e.on("AutocompleterUpdate", function (_ref10) {
        var e = _ref10.lookupData;
        return d(e);
      }), e.on("AutocompleterEnd", function () {
        i(), n.set(!1), o.set(!1);
      });
      (function (e, t) {
        var o = function o(e, t) {
            Ir(e, Ks(), {
              raw: t
            });
          },
          n = function n() {
            return e.getMenu().bind(Gm.getHighlighted);
          };
        t.on("keydown", function (t) {
          var s = t.which;
          e.isActive() && (e.isMenuOpen() ? 13 === s ? (n().each(Rr), t.preventDefault()) : 40 === s ? (n().fold(function () {
            e.getMenu().each(Gm.highlightFirst);
          }, function (e) {
            o(e, t);
          }), t.preventDefault(), t.stopImmediatePropagation()) : 37 !== s && 38 !== s && 39 !== s || n().each(function (e) {
            o(e, t), t.preventDefault(), t.stopImmediatePropagation();
          }) : 13 !== s && 38 !== s && 40 !== s || e.cancelIfNecessary());
        }), t.on("NodeChange", function (t) {
          e.isActive() && !e.isProcessingAction() && mb(Ve(t.element)).isNone() && e.cancelIfNecessary();
        });
      })({
        cancelIfNecessary: c,
        isMenuOpen: r,
        isActive: a,
        isProcessingAction: o.get,
        getMenu: l
      }, e);
    },
    Pw = ["visible", "hidden", "clip"],
    Uw = function Uw(e) {
      return Me(e).length > 0 && !R(Pw, e);
    },
    Ww = function Ww(e) {
      if (je(e)) {
        var _t34 = It(e, "overflow-x"),
          _o25 = It(e, "overflow-y");
        return Uw(_t34) || Uw(_o25);
      }
      return !1;
    },
    jw = function jw(e, t) {
      return lb(e) ? function (e) {
        var t = qc(e, Ww),
          o = 0 === t.length ? bt(e).map(vt).map(function (e) {
            return qc(e, Ww);
          }).getOr([]) : t;
        return oe(o).map(function (e) {
          return {
            element: e,
            others: o.slice(1)
          };
        });
      }(t) : A.none();
    },
    Gw = function Gw(e) {
      var t = [].concat(_toConsumableArray(H(e.others, Jo)), [en()]);
      return function (e, t) {
        return j(t, function (e, t) {
          return Qo(e, t);
        }, e);
      }(Jo(e.element), t);
    },
    $w = function $w(e, t, o) {
      return hi(e, t, o).isSome();
    },
    qw = function qw(e, t) {
      var o = null;
      return {
        cancel: function cancel() {
          null !== o && (clearTimeout(o), o = null);
        },
        schedule: function schedule() {
          for (var _len14 = arguments.length, n = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {
            n[_key14] = arguments[_key14];
          }
          o = setTimeout(function () {
            e.apply(null, n), o = null;
          }, t);
        }
      };
    },
    Xw = function Xw(e) {
      var t = e.raw;
      return void 0 === t.touches || 1 !== t.touches.length ? A.none() : A.some(t.touches[0]);
    },
    Yw = function Yw(e, t) {
      var o = _objectSpread({
          stopBackspace: !0
        }, t),
        n = function (e) {
          var t = Ql(),
            o = Es(!1),
            n = qw(function (t) {
              e.triggerEvent(pr(), t), o.set(!0);
            }, 400),
            s = Ds([{
              key: Hs(),
              value: function value(e) {
                return Xw(e).each(function (s) {
                  n.cancel();
                  var r = {
                    x: s.clientX,
                    y: s.clientY,
                    target: e.target
                  };
                  n.schedule(e), o.set(!1), t.set(r);
                }), A.none();
              }
            }, {
              key: Ls(),
              value: function value(e) {
                return n.cancel(), Xw(e).each(function (e) {
                  t.on(function (o) {
                    (function (e, t) {
                      var o = Math.abs(e.clientX - t.x),
                        n = Math.abs(e.clientY - t.y);
                      return o > 5 || n > 5;
                    })(e, o) && t.clear();
                  });
                }), A.none();
              }
            }, {
              key: Ps(),
              value: function value(s) {
                return n.cancel(), t.get().filter(function (e) {
                  return Ze(e.target, s.target);
                }).map(function (t) {
                  return o.get() ? (s.prevent(), !1) : e.triggerEvent(gr(), s);
                });
              }
            }]);
          return {
            fireIfReady: function fireIfReady(e, t) {
              return be(s, t).bind(function (t) {
                return t(e);
              });
            }
          };
        }(o),
        s = H(["touchstart", "touchmove", "touchend", "touchcancel", "gesturestart", "mousedown", "mouseup", "mouseover", "mousemove", "mouseout", "click"].concat(["selectstart", "input", "contextmenu", "change", "transitionend", "transitioncancel", "drag", "dragstart", "dragend", "dragenter", "dragleave", "dragover", "drop", "keyup"]), function (t) {
          return tc(e, t, function (e) {
            n.fireIfReady(e, t).each(function (t) {
              t && e.kill();
            }), o.triggerEvent(t, e) && e.kill();
          });
        }),
        r = Ql(),
        a = tc(e, "paste", function (e) {
          n.fireIfReady(e, "paste").each(function (t) {
            t && e.kill();
          }), o.triggerEvent("paste", e) && e.kill(), r.set(setTimeout(function () {
            o.triggerEvent(cr(), e);
          }, 0));
        }),
        i = tc(e, "keydown", function (e) {
          o.triggerEvent("keydown", e) ? e.kill() : o.stopBackspace && function (e) {
            return e.raw.which === $m[0] && !R(["input", "textarea"], Ue(e.target)) && !$w(e.target, '[contenteditable="true"]');
          }(e) && e.prevent();
        }),
        l = tc(e, "focusin", function (e) {
          o.triggerEvent("focusin", e) && e.kill();
        }),
        c = Ql(),
        d = tc(e, "focusout", function (e) {
          o.triggerEvent("focusout", e) && e.kill(), c.set(setTimeout(function () {
            o.triggerEvent(lr(), e);
          }, 0));
        });
      return {
        unbind: function unbind() {
          L(s, function (e) {
            e.unbind();
          }), i.unbind(), l.unbind(), d.unbind(), a.unbind(), r.on(clearTimeout), c.on(clearTimeout);
        }
      };
    },
    Kw = function Kw(e, t) {
      var o = be(e, "target").getOr(t);
      return Es(o);
    },
    Jw = As([{
      stopped: []
    }, {
      resume: ["element"]
    }, {
      complete: []
    }]),
    Zw = function Zw(e, t, o, n, s, r) {
      var a = e(t, n),
        i = function (e, t) {
          var o = Es(!1),
            n = Es(!1);
          return {
            stop: function stop() {
              o.set(!0);
            },
            cut: function cut() {
              n.set(!0);
            },
            isStopped: o.get,
            isCut: n.get,
            event: e,
            setSource: t.set,
            getSource: t.get
          };
        }(o, s);
      return a.fold(function () {
        return r.logEventNoHandlers(t, n), Jw.complete();
      }, function (e) {
        var o = e.descHandler;
        return Aa(o)(i), i.isStopped() ? (r.logEventStopped(t, e.element, o.purpose), Jw.stopped()) : i.isCut() ? (r.logEventCut(t, e.element, o.purpose), Jw.complete()) : st(e.element).fold(function () {
          return r.logNoParent(t, e.element, o.purpose), Jw.complete();
        }, function (n) {
          return r.logEventResponse(t, e.element, o.purpose), Jw.resume(n);
        });
      });
    },
    Qw = function Qw(e, t, o, n, s, r) {
      return Zw(e, t, o, n, s, r).fold(E, function (n) {
        return Qw(e, t, o, n, s, r);
      }, T);
    },
    eS = function eS(e, t, o, n, s) {
      var r = Kw(o, n);
      return Qw(e, t, o, n, r, s);
    },
    tS = function tS() {
      var e = function () {
          var e = {};
          return {
            registerId: function registerId(t, o, n) {
              le(n, function (n, s) {
                var r = void 0 !== e[s] ? e[s] : {};
                r[o] = function (e, t) {
                  return {
                    cHandler: k.apply(void 0, [e.handler].concat(t)),
                    purpose: e.purpose
                  };
                }(n, t), e[s] = r;
              });
            },
            unregisterId: function unregisterId(t) {
              le(e, function (e, o) {
                ve(e, t) && delete e[t];
              });
            },
            filterByType: function filterByType(t) {
              return be(e, t).map(function (e) {
                return pe(e, function (e, t) {
                  return function (e, t) {
                    return {
                      id: e,
                      descHandler: t
                    };
                  }(t, e);
                });
              }).getOr([]);
            },
            find: function find(t, o, n) {
              return be(e, o).bind(function (e) {
                return Is(n, function (t) {
                  return function (e, t) {
                    return pa(t).bind(function (t) {
                      return be(e, t);
                    }).map(function (e) {
                      return function (e, t) {
                        return {
                          element: e,
                          descHandler: t
                        };
                      }(t, e);
                    });
                  }(e, t);
                }, t);
              });
            }
          };
        }(),
        t = {},
        o = function o(_o26) {
          pa(_o26.element).each(function (o) {
            delete t[o], e.unregisterId(o);
          });
        };
      return {
        find: function find(t, o, n) {
          return e.find(t, o, n);
        },
        filter: function filter(t) {
          return e.filterByType(t);
        },
        register: function register(n) {
          var s = function (e) {
            var t = e.element;
            return pa(t).getOrThunk(function () {
              return function (e, t) {
                var o = la(ua + "uid-");
                return ga(t, o), o;
              }(0, e.element);
            });
          }(n);
          ye(t, s) && function (e, n) {
            var s = t[n];
            if (s !== e) throw new Error('The tagId "' + n + '" is already used by: ' + na(s.element) + "\nCannot use it for: " + na(e.element) + "\nThe conflicting element is" + (yt(s.element) ? " " : " not ") + "already in the DOM");
            o(e);
          }(n, s);
          var r = [n];
          e.registerId(r, s, n.events), t[s] = n;
        },
        unregister: o,
        getById: function getById(e) {
          return be(t, e);
        }
      };
    },
    oS = fm({
      name: "Container",
      factory: function factory(e) {
        var _e$dom = e.dom,
          t = _e$dom.attributes,
          o = _objectWithoutProperties(_e$dom, _excluded3);
        return {
          uid: e.uid,
          dom: _objectSpread({
            tag: "div",
            attributes: _objectSpread({
              role: "presentation"
            }, t)
          }, o),
          components: e.components,
          behaviours: fu(e.containerBehaviours),
          events: e.events,
          domModification: e.domModification,
          eventOrder: e.eventOrder
        };
      },
      configFields: [ys("components", []), hu("containerBehaviours", []), ys("events", {}), ys("domModification", {}), ys("eventOrder", {})]
    }),
    nS = function nS(e) {
      var t = function t(_t35) {
          return st(e.element).fold(E, function (e) {
            return Ze(_t35, e);
          });
        },
        o = tS(),
        n = function n(e, _n32) {
          return o.find(t, e, _n32);
        },
        s = Yw(e.element, {
          triggerEvent: function triggerEvent(e, t) {
            return Si(e, t.target, function (o) {
              return function (e, t, o, n) {
                return eS(e, t, o, o.target, n);
              }(n, e, t, o);
            });
          }
        }),
        r = {
          debugInfo: x("real"),
          triggerEvent: function triggerEvent(e, t, o) {
            Si(e, t, function (s) {
              return eS(n, e, o, t, s);
            });
          },
          triggerFocus: function triggerFocus(e, t) {
            pa(e).fold(function () {
              Dl(e);
            }, function (o) {
              Si(ir(), e, function (o) {
                return function (e, t, o, n, s) {
                  var r = Kw(o, n);
                  Zw(e, t, o, n, r, s);
                }(n, ir(), {
                  originator: t,
                  kill: b,
                  prevent: b,
                  target: e
                }, e, o), !1;
              });
            });
          },
          triggerEscape: function triggerEscape(e, t) {
            r.triggerEvent("keydown", e.element, t.event);
          },
          getByUid: function getByUid(e) {
            return p(e);
          },
          getByDom: function getByDom(e) {
            return h(e);
          },
          build: ri,
          buildOrPatch: si,
          addToGui: function addToGui(e) {
            l(e);
          },
          removeFromGui: function removeFromGui(e) {
            c(e);
          },
          addToWorld: function addToWorld(e) {
            a(e);
          },
          removeFromWorld: function removeFromWorld(e) {
            i(e);
          },
          broadcast: function broadcast(e) {
            u(e);
          },
          broadcastOn: function broadcastOn(e, t) {
            m(e, t);
          },
          broadcastEvent: function broadcastEvent(e, t) {
            g(e, t);
          },
          isConnected: E
        },
        a = function a(e) {
          e.connect(r), $e(e.element) || (o.register(e), L(e.components(), a), r.triggerEvent(br(), e.element, {
            target: e.element
          }));
        },
        i = function i(e) {
          $e(e.element) || (L(e.components(), i), o.unregister(e)), e.disconnect();
        },
        l = function l(t) {
          Ad(e, t);
        },
        c = function c(e) {
          Bd(e);
        },
        d = function d(e) {
          var t = o.filter(dr());
          L(t, function (t) {
            var o = t.descHandler;
            Aa(o)(e);
          });
        },
        u = function u(e) {
          d({
            universal: !0,
            data: e
          });
        },
        m = function m(e, t) {
          d({
            universal: !1,
            channels: e,
            data: t
          });
        },
        g = function g(e, t) {
          return function (e, t, o) {
            var n = function (e) {
              var t = Es(!1);
              return {
                stop: function stop() {
                  t.set(!0);
                },
                cut: b,
                isStopped: t.get,
                isCut: T,
                event: e,
                setSource: O("Cannot set source of a broadcasted event"),
                getSource: O("Cannot get source of a broadcasted event")
              };
            }(t);
            return L(e, function (e) {
              var t = e.descHandler;
              Aa(t)(n);
            }), n.isStopped();
          }(o.filter(e), t);
        },
        p = function p(e) {
          return o.getById(e).fold(function () {
            return sn.error(new Error('Could not find component with uid: "' + e + '" in system.'));
          }, sn.value);
        },
        h = function h(e) {
          var t = pa(e).getOr("not found");
          return p(t);
        };
      return a(e), {
        root: e,
        element: e.element,
        destroy: function destroy() {
          s.unbind(), Po(e.element);
        },
        add: l,
        remove: c,
        getByUid: p,
        getByDom: h,
        addToWorld: a,
        removeFromWorld: i,
        broadcast: u,
        broadcastOn: m,
        broadcastEvent: g
      };
    },
    sS = x([ys("prefix", "form-field"), hu("fieldBehaviours", [wm, pu])]),
    rS = x([ju({
      schema: [os("dom")],
      name: "label"
    }), ju({
      factory: {
        sketch: function sketch(e) {
          return {
            uid: e.uid,
            dom: {
              tag: "span",
              styles: {
                display: "none"
              },
              attributes: {
                "aria-hidden": "true"
              },
              innerHtml: e.text
            }
          };
        }
      },
      schema: [os("text")],
      name: "aria-descriptor"
    }), Uu({
      factory: {
        sketch: function sketch(e) {
          var t = function (e, t) {
            var o = {};
            return le(e, function (e, n) {
              R(t, n) || (o[n] = e);
            }), o;
          }(e, ["factory"]);
          return e.factory.sketch(t);
        }
      },
      schema: [os("factory")],
      name: "field"
    })]),
    aS = bm({
      name: "FormField",
      configFields: sS(),
      partFields: rS(),
      factory: function factory(e, t, o, n) {
        var s = bu(e.fieldBehaviours, [wm.config({
            find: function find(t) {
              return om(t, e, "field");
            }
          }), pu.config({
            store: {
              mode: "manual",
              getValue: function getValue(e) {
                return wm.getCurrent(e).bind(pu.getValue);
              },
              setValue: function setValue(e, t) {
                wm.getCurrent(e).each(function (e) {
                  pu.setValue(e, t);
                });
              }
            }
          })]),
          r = Hr([Kr(function (t, o) {
            var n = sm(t, e, ["label", "field", "aria-descriptor"]);
            n.field().each(function (t) {
              var o = la(e.prefix);
              n.label().each(function (e) {
                kt(e.element, "for", o), kt(t.element, "id", o);
              }), n["aria-descriptor"]().each(function (o) {
                var n = la(e.prefix);
                kt(o.element, "id", n), kt(t.element, "aria-describedby", n);
              });
            });
          })]),
          a = {
            getField: function getField(t) {
              return om(t, e, "field");
            },
            getLabel: function getLabel(t) {
              return om(t, e, "label");
            }
          };
        return {
          uid: e.uid,
          dom: e.dom,
          components: t,
          behaviours: s,
          events: r,
          apis: a
        };
      },
      apis: {
        getField: function getField(e, t) {
          return e.getField(t);
        },
        getLabel: function getLabel(e, t) {
          return e.getLabel(t);
        }
      }
    });
  var iS = Object.freeze({
      __proto__: null,
      exhibit: function exhibit(e, t) {
        return Ea({
          attributes: Ds([{
            key: t.tabAttr,
            value: "true"
          }])
        });
      }
    }),
    lS = [ys("tabAttr", "data-alloy-tabstop")];
  var cS = Ol({
    fields: lS,
    name: "tabstopping",
    active: iS
  });
  var dS = tinymce.util.Tools.resolve("tinymce.html.Entities");
  var uS = function uS(e, t, o, n) {
      var s = mS(e, t, o, n);
      return aS.sketch(s);
    },
    mS = function mS(e, t, o, n) {
      return {
        dom: gS(o),
        components: e.toArray().concat([t]),
        fieldBehaviours: kl(n)
      };
    },
    gS = function gS(e) {
      return {
        tag: "div",
        classes: ["tox-form__group"].concat(e)
      };
    },
    pS = function pS(e, t) {
      return aS.parts.label({
        dom: {
          tag: "label",
          classes: ["tox-label"]
        },
        components: [ti(t.translate(e))]
      });
    },
    hS = la("form-component-change"),
    fS = la("form-close"),
    bS = la("form-cancel"),
    vS = la("form-action"),
    yS = la("form-submit"),
    xS = la("form-block"),
    wS = la("form-unblock"),
    SS = la("form-tabchange"),
    kS = la("form-resize"),
    CS = ["input", "textarea"],
    OS = function OS(e) {
      var t = Ue(e);
      return R(CS, t);
    },
    _S = function _S(e, t) {
      var o = t.getRoot(e).getOr(e.element);
      Pa(o, t.invalidClass), t.notify.each(function (t) {
        OS(e.element) && kt(e.element, "aria-invalid", !1), t.getContainer(e).each(function (e) {
          ta(e, t.validHtml);
        }), t.onValid(e);
      });
    },
    TS = function TS(e, t, o, n) {
      var s = t.getRoot(e).getOr(e.element);
      La(s, t.invalidClass), t.notify.each(function (t) {
        OS(e.element) && kt(e.element, "aria-invalid", !0), t.getContainer(e).each(function (e) {
          ta(e, n);
        }), t.onInvalid(e, n);
      });
    },
    ES = function ES(e, t, o) {
      return t.validator.fold(function () {
        return bw(sn.value(!0));
      }, function (t) {
        return t.validate(e);
      });
    },
    AS = function AS(e, t, o) {
      return t.notify.each(function (t) {
        t.onValidate(e);
      }), ES(e, t).map(function (o) {
        return e.getSystem().isConnected() ? o.fold(function (o) {
          return TS(e, t, 0, o), sn.error(o);
        }, function (o) {
          return _S(e, t), sn.value(o);
        }) : sn.error("No longer in system");
      });
    };
  var MS = Object.freeze({
      __proto__: null,
      markValid: _S,
      markInvalid: TS,
      query: ES,
      run: AS,
      isInvalid: function isInvalid(e, t) {
        var o = t.getRoot(e).getOr(e.element);
        return Ua(o, t.invalidClass);
      }
    }),
    DS = Object.freeze({
      __proto__: null,
      events: function events(e, t) {
        return e.validator.map(function (t) {
          return Hr([Ur(t.onEvent, function (t) {
            AS(t, e).get(w);
          })].concat(t.validateOnLoad ? [Kr(function (t) {
            AS(t, e).get(b);
          })] : []));
        }).getOr({});
      }
    }),
    BS = [os("invalidClass"), ys("getRoot", A.none), vs("notify", [ys("aria", "alert"), ys("getContainer", A.none), ys("validHtml", ""), Di("onValid"), Di("onInvalid"), Di("onValidate")]), vs("validator", [os("validate"), ys("onEvent", "input"), ys("validateOnLoad", !0)])];
  var FS = Ol({
      fields: BS,
      name: "invalidating",
      active: DS,
      apis: MS,
      extra: {
        validation: function validation(e) {
          return function (t) {
            var o = pu.getValue(t);
            return bw(e(o));
          };
        }
      }
    }),
    IS = Ol({
      fields: [],
      name: "unselecting",
      active: Object.freeze({
        __proto__: null,
        events: function events() {
          return Hr([Lr(sr(), E)]);
        },
        exhibit: function exhibit() {
          return Ea({
            styles: {
              "-webkit-user-select": "none",
              "user-select": "none",
              "-ms-user-select": "none",
              "-moz-user-select": "-moz-none"
            },
            attributes: {
              unselectable: "on"
            }
          });
        }
      })
    }),
    RS = la("color-input-change"),
    NS = la("color-swatch-change"),
    VS = la("color-picker-cancel"),
    zS = ju({
      schema: [os("dom")],
      name: "label"
    }),
    HS = function HS(e) {
      return ju({
        name: e + "-edge",
        overrides: function overrides(t) {
          return t.model.manager.edgeActions[e].fold(function () {
            return {};
          }, function (e) {
            return {
              events: Hr([Wr(Hs(), function (t, o, n) {
                return e(t, n);
              }, [t]), Wr(Ws(), function (t, o, n) {
                return e(t, n);
              }, [t]), Wr(js(), function (t, o, n) {
                n.mouseIsDown.get() && e(t, n);
              }, [t])])
            };
          });
        }
      });
    },
    LS = HS("top-left"),
    PS = HS("top"),
    US = HS("top-right"),
    WS = HS("right"),
    jS = HS("bottom-right"),
    GS = HS("bottom"),
    $S = HS("bottom-left");
  var qS = [zS, HS("left"), WS, PS, GS, LS, US, $S, jS, Uu({
    name: "thumb",
    defaults: x({
      dom: {
        styles: {
          position: "absolute"
        }
      }
    }),
    overrides: function overrides(e) {
      return {
        events: Hr([Gr(Hs(), e, "spectrum"), Gr(Ls(), e, "spectrum"), Gr(Ps(), e, "spectrum"), Gr(Ws(), e, "spectrum"), Gr(js(), e, "spectrum"), Gr($s(), e, "spectrum")])
      };
    }
  }), Uu({
    schema: [es("mouseIsDown", function () {
      return Es(!1);
    })],
    name: "spectrum",
    overrides: function overrides(e) {
      var t = e.model.manager,
        o = function o(_o27, n) {
          return t.getValueFromEvent(n).map(function (n) {
            return t.setValueFrom(_o27, e, n);
          });
        };
      return {
        behaviours: kl([Pp.config({
          mode: "special",
          onLeft: function onLeft(o) {
            return t.onLeft(o, e);
          },
          onRight: function onRight(o) {
            return t.onRight(o, e);
          },
          onUp: function onUp(o) {
            return t.onUp(o, e);
          },
          onDown: function onDown(o) {
            return t.onDown(o, e);
          }
        }), oh.config({})]),
        events: Hr([Ur(Hs(), o), Ur(Ls(), o), Ur(Ws(), o), Ur(js(), function (t, n) {
          e.mouseIsDown.get() && o(t, n);
        })])
      };
    }
  })];
  var XS = x("slider.change.value"),
    YS = function YS(e) {
      var t = e.event.raw;
      if (function (e) {
        return -1 !== e.type.indexOf("touch");
      }(t)) {
        var _e18 = t;
        return void 0 !== _e18.touches && 1 === _e18.touches.length ? A.some(_e18.touches[0]).map(function (e) {
          return $t(e.clientX, e.clientY);
        }) : A.none();
      }
      {
        var _e19 = t;
        return void 0 !== _e19.clientX ? A.some(_e19).map(function (e) {
          return $t(e.clientX, e.clientY);
        }) : A.none();
      }
    },
    KS = function KS(e) {
      return e.model.minX;
    },
    JS = function JS(e) {
      return e.model.minY;
    },
    ZS = function ZS(e) {
      return e.model.minX - 1;
    },
    QS = function QS(e) {
      return e.model.minY - 1;
    },
    ek = function ek(e) {
      return e.model.maxX;
    },
    tk = function tk(e) {
      return e.model.maxY;
    },
    ok = function ok(e) {
      return e.model.maxX + 1;
    },
    nk = function nk(e) {
      return e.model.maxY + 1;
    },
    sk = function sk(e, t, o) {
      return t(e) - o(e);
    },
    rk = function rk(e) {
      return sk(e, ek, KS);
    },
    ak = function ak(e) {
      return sk(e, tk, JS);
    },
    ik = function ik(e) {
      return rk(e) / 2;
    },
    lk = function lk(e) {
      return ak(e) / 2;
    },
    ck = function ck(e) {
      return e.stepSize;
    },
    dk = function dk(e) {
      return e.snapToGrid;
    },
    uk = function uk(e) {
      return e.snapStart;
    },
    mk = function mk(e) {
      return e.rounded;
    },
    gk = function gk(e, t) {
      return void 0 !== e[t + "-edge"];
    },
    pk = function pk(e) {
      return gk(e, "left");
    },
    hk = function hk(e) {
      return gk(e, "right");
    },
    fk = function fk(e) {
      return gk(e, "top");
    },
    bk = function bk(e) {
      return gk(e, "bottom");
    },
    vk = function vk(e) {
      return e.model.value.get();
    },
    yk = function yk(e, t) {
      return {
        x: e,
        y: t
      };
    },
    xk = function xk(e, t) {
      Ir(e, XS(), {
        value: t
      });
    },
    wk = function wk(e, t, o, n) {
      return e < t ? e : e > o ? o : e === t ? t - 1 : Math.max(t, e - n);
    },
    Sk = function Sk(e, t, o, n) {
      return e > o ? e : e < t ? t : e === o ? o + 1 : Math.min(o, e + n);
    },
    kk = function kk(e, t, o) {
      return Math.max(t, Math.min(o, e));
    },
    Ck = function Ck(e) {
      var t = e.min,
        o = e.max,
        n = e.range,
        s = e.value,
        r = e.step,
        a = e.snap,
        i = e.snapStart,
        l = e.rounded,
        c = e.hasMinEdge,
        d = e.hasMaxEdge,
        u = e.minBound,
        m = e.maxBound,
        g = e.screenRange,
        p = c ? t - 1 : t,
        h = d ? o + 1 : o;
      if (s < u) return p;
      if (s > m) return h;
      {
        var _e20 = function (e, t, o) {
            return Math.min(o, Math.max(e, t)) - t;
          }(s, u, m),
          _c3 = kk(_e20 / g * n + t, p, h);
        return a && _c3 >= t && _c3 <= o ? function (e, t, o, n, s) {
          return s.fold(function () {
            var s = e - t,
              r = Math.round(s / n) * n;
            return kk(t + r, t - 1, o + 1);
          }, function (t) {
            var s = (e - t) % n,
              r = Math.round(s / n),
              a = Math.floor((e - t) / n),
              i = Math.floor((o - t) / n),
              l = t + Math.min(i, a + r) * n;
            return Math.max(t, l);
          });
        }(_c3, t, o, r, i) : l ? Math.round(_c3) : _c3;
      }
    },
    Ok = function Ok(e) {
      var t = e.min,
        o = e.max,
        n = e.range,
        s = e.value,
        r = e.hasMinEdge,
        a = e.hasMaxEdge,
        i = e.maxBound,
        l = e.maxOffset,
        c = e.centerMinEdge,
        d = e.centerMaxEdge;
      return s < t ? r ? 0 : c : s > o ? a ? i : d : (s - t) / n * l;
    },
    _k = "top",
    Tk = "right",
    Ek = "bottom",
    Ak = "left",
    Mk = function Mk(e) {
      return e.element.dom.getBoundingClientRect();
    },
    Dk = function Dk(e, t) {
      return e[t];
    },
    Bk = function Bk(e) {
      var t = Mk(e);
      return Dk(t, Ak);
    },
    Fk = function Fk(e) {
      var t = Mk(e);
      return Dk(t, Tk);
    },
    Ik = function Ik(e) {
      var t = Mk(e);
      return Dk(t, _k);
    },
    Rk = function Rk(e) {
      var t = Mk(e);
      return Dk(t, Ek);
    },
    Nk = function Nk(e) {
      var t = Mk(e);
      return Dk(t, "width");
    },
    Vk = function Vk(e) {
      var t = Mk(e);
      return Dk(t, "height");
    },
    zk = function zk(e, t, o) {
      return (e + t) / 2 - o;
    },
    Hk = function Hk(e, t) {
      var o = Mk(e),
        n = Mk(t),
        s = Dk(o, Ak),
        r = Dk(o, Tk),
        a = Dk(n, Ak);
      return zk(s, r, a);
    },
    Lk = function Lk(e, t) {
      var o = Mk(e),
        n = Mk(t),
        s = Dk(o, _k),
        r = Dk(o, Ek),
        a = Dk(n, _k);
      return zk(s, r, a);
    },
    Pk = function Pk(e, t) {
      Ir(e, XS(), {
        value: t
      });
    },
    Uk = function Uk(e, t, o) {
      var n = {
        min: KS(t),
        max: ek(t),
        range: rk(t),
        value: o,
        step: ck(t),
        snap: dk(t),
        snapStart: uk(t),
        rounded: mk(t),
        hasMinEdge: pk(t),
        hasMaxEdge: hk(t),
        minBound: Bk(e),
        maxBound: Fk(e),
        screenRange: Nk(e)
      };
      return Ck(n);
    },
    Wk = function Wk(e) {
      return function (t, o) {
        return function (e, t, o) {
          var n = (e > 0 ? Sk : wk)(vk(o), KS(o), ek(o), ck(o));
          return Pk(t, n), A.some(n);
        }(e, t, o).map(E);
      };
    },
    jk = function jk(e, t, o, n, s, r) {
      var a = function (e, t, o, n, s) {
        var r = Nk(e),
          a = n.bind(function (t) {
            return A.some(Hk(t, e));
          }).getOr(0),
          i = s.bind(function (t) {
            return A.some(Hk(t, e));
          }).getOr(r),
          l = {
            min: KS(t),
            max: ek(t),
            range: rk(t),
            value: o,
            hasMinEdge: pk(t),
            hasMaxEdge: hk(t),
            minBound: Bk(e),
            minOffset: 0,
            maxBound: Fk(e),
            maxOffset: r,
            centerMinEdge: a,
            centerMaxEdge: i
          };
        return Ok(l);
      }(t, r, o, n, s);
      return Bk(t) - Bk(e) + a;
    },
    Gk = Wk(-1),
    $k = Wk(1),
    qk = A.none,
    Xk = A.none,
    Yk = {
      "top-left": A.none(),
      top: A.none(),
      "top-right": A.none(),
      right: A.some(function (e, t) {
        xk(e, ok(t));
      }),
      "bottom-right": A.none(),
      bottom: A.none(),
      "bottom-left": A.none(),
      left: A.some(function (e, t) {
        xk(e, ZS(t));
      })
    };
  var Kk = Object.freeze({
    __proto__: null,
    setValueFrom: function setValueFrom(e, t, o) {
      var n = Uk(e, t, o);
      return Pk(e, n), n;
    },
    setToMin: function setToMin(e, t) {
      var o = KS(t);
      Pk(e, o);
    },
    setToMax: function setToMax(e, t) {
      var o = ek(t);
      Pk(e, o);
    },
    findValueOfOffset: Uk,
    getValueFromEvent: function getValueFromEvent(e) {
      return YS(e).map(function (e) {
        return e.left;
      });
    },
    findPositionOfValue: jk,
    setPositionFromValue: function setPositionFromValue(e, t, o, n) {
      var s = vk(o),
        r = jk(e, n.getSpectrum(e), s, n.getLeftEdge(e), n.getRightEdge(e), o),
        a = Jt(t.element) / 2;
      Dt(t.element, "left", r - a + "px");
    },
    onLeft: Gk,
    onRight: $k,
    onUp: qk,
    onDown: Xk,
    edgeActions: Yk
  });
  var Jk = function Jk(e, t) {
      Ir(e, XS(), {
        value: t
      });
    },
    Zk = function Zk(e, t, o) {
      var n = {
        min: JS(t),
        max: tk(t),
        range: ak(t),
        value: o,
        step: ck(t),
        snap: dk(t),
        snapStart: uk(t),
        rounded: mk(t),
        hasMinEdge: fk(t),
        hasMaxEdge: bk(t),
        minBound: Ik(e),
        maxBound: Rk(e),
        screenRange: Vk(e)
      };
      return Ck(n);
    },
    Qk = function Qk(e) {
      return function (t, o) {
        return function (e, t, o) {
          var n = (e > 0 ? Sk : wk)(vk(o), JS(o), tk(o), ck(o));
          return Jk(t, n), A.some(n);
        }(e, t, o).map(E);
      };
    },
    eC = function eC(e, t, o, n, s, r) {
      var a = function (e, t, o, n, s) {
        var r = Vk(e),
          a = n.bind(function (t) {
            return A.some(Lk(t, e));
          }).getOr(0),
          i = s.bind(function (t) {
            return A.some(Lk(t, e));
          }).getOr(r),
          l = {
            min: JS(t),
            max: tk(t),
            range: ak(t),
            value: o,
            hasMinEdge: fk(t),
            hasMaxEdge: bk(t),
            minBound: Ik(e),
            minOffset: 0,
            maxBound: Rk(e),
            maxOffset: r,
            centerMinEdge: a,
            centerMaxEdge: i
          };
        return Ok(l);
      }(t, r, o, n, s);
      return Ik(t) - Ik(e) + a;
    },
    tC = A.none,
    oC = A.none,
    nC = Qk(-1),
    sC = Qk(1),
    rC = {
      "top-left": A.none(),
      top: A.some(function (e, t) {
        xk(e, QS(t));
      }),
      "top-right": A.none(),
      right: A.none(),
      "bottom-right": A.none(),
      bottom: A.some(function (e, t) {
        xk(e, nk(t));
      }),
      "bottom-left": A.none(),
      left: A.none()
    };
  var aC = Object.freeze({
    __proto__: null,
    setValueFrom: function setValueFrom(e, t, o) {
      var n = Zk(e, t, o);
      return Jk(e, n), n;
    },
    setToMin: function setToMin(e, t) {
      var o = JS(t);
      Jk(e, o);
    },
    setToMax: function setToMax(e, t) {
      var o = tk(t);
      Jk(e, o);
    },
    findValueOfOffset: Zk,
    getValueFromEvent: function getValueFromEvent(e) {
      return YS(e).map(function (e) {
        return e.top;
      });
    },
    findPositionOfValue: eC,
    setPositionFromValue: function setPositionFromValue(e, t, o, n) {
      var s = vk(o),
        r = eC(e, n.getSpectrum(e), s, n.getTopEdge(e), n.getBottomEdge(e), o),
        a = Wt(t.element) / 2;
      Dt(t.element, "top", r - a + "px");
    },
    onLeft: tC,
    onRight: oC,
    onUp: nC,
    onDown: sC,
    edgeActions: rC
  });
  var iC = function iC(e, t) {
      Ir(e, XS(), {
        value: t
      });
    },
    lC = function lC(e, t) {
      return {
        x: e,
        y: t
      };
    },
    cC = function cC(e, t) {
      return function (o, n) {
        return function (e, t, o, n) {
          var s = e > 0 ? Sk : wk,
            r = t ? vk(n).x : s(vk(n).x, KS(n), ek(n), ck(n)),
            a = t ? s(vk(n).y, JS(n), tk(n), ck(n)) : vk(n).y;
          return iC(o, lC(r, a)), A.some(r);
        }(e, t, o, n).map(E);
      };
    },
    dC = cC(-1, !1),
    uC = cC(1, !1),
    mC = cC(-1, !0),
    gC = cC(1, !0),
    pC = {
      "top-left": A.some(function (e, t) {
        xk(e, yk(ZS(t), QS(t)));
      }),
      top: A.some(function (e, t) {
        xk(e, yk(ik(t), QS(t)));
      }),
      "top-right": A.some(function (e, t) {
        xk(e, yk(ok(t), QS(t)));
      }),
      right: A.some(function (e, t) {
        xk(e, yk(ok(t), lk(t)));
      }),
      "bottom-right": A.some(function (e, t) {
        xk(e, yk(ok(t), nk(t)));
      }),
      bottom: A.some(function (e, t) {
        xk(e, yk(ik(t), nk(t)));
      }),
      "bottom-left": A.some(function (e, t) {
        xk(e, yk(ZS(t), nk(t)));
      }),
      left: A.some(function (e, t) {
        xk(e, yk(ZS(t), lk(t)));
      })
    };
  var hC = Object.freeze({
    __proto__: null,
    setValueFrom: function setValueFrom(e, t, o) {
      var n = Uk(e, t, o.left),
        s = Zk(e, t, o.top),
        r = lC(n, s);
      return iC(e, r), r;
    },
    setToMin: function setToMin(e, t) {
      var o = KS(t),
        n = JS(t);
      iC(e, lC(o, n));
    },
    setToMax: function setToMax(e, t) {
      var o = ek(t),
        n = tk(t);
      iC(e, lC(o, n));
    },
    getValueFromEvent: function getValueFromEvent(e) {
      return YS(e);
    },
    setPositionFromValue: function setPositionFromValue(e, t, o, n) {
      var s = vk(o),
        r = jk(e, n.getSpectrum(e), s.x, n.getLeftEdge(e), n.getRightEdge(e), o),
        a = eC(e, n.getSpectrum(e), s.y, n.getTopEdge(e), n.getBottomEdge(e), o),
        i = Jt(t.element) / 2,
        l = Wt(t.element) / 2;
      Dt(t.element, "left", r - i + "px"), Dt(t.element, "top", a - l + "px");
    },
    onLeft: dC,
    onRight: uC,
    onUp: mC,
    onDown: gC,
    edgeActions: pC
  });
  var fC = bm({
      name: "Slider",
      configFields: [ys("stepSize", 1), ys("onChange", b), ys("onChoose", b), ys("onInit", b), ys("onDragStart", b), ys("onDragEnd", b), ys("snapToGrid", !1), ys("rounded", !0), us("snapStart"), ns("model", Jn("mode", {
        x: [ys("minX", 0), ys("maxX", 100), es("value", function (e) {
          return Es(e.mode.minX);
        }), os("getInitialValue"), Ri("manager", Kk)],
        y: [ys("minY", 0), ys("maxY", 100), es("value", function (e) {
          return Es(e.mode.minY);
        }), os("getInitialValue"), Ri("manager", aC)],
        xy: [ys("minX", 0), ys("maxX", 100), ys("minY", 0), ys("maxY", 100), es("value", function (e) {
          return Es({
            x: e.mode.minX,
            y: e.mode.minY
          });
        }), os("getInitialValue"), Ri("manager", hC)]
      })), hu("sliderBehaviours", [Pp, pu]), es("mouseIsDown", function () {
        return Es(!1);
      })],
      partFields: qS,
      factory: function factory(e, t, o, n) {
        var s = function s(t) {
            return nm(t, e, "thumb");
          },
          r = function r(t) {
            return nm(t, e, "spectrum");
          },
          a = function a(t) {
            return om(t, e, "left-edge");
          },
          i = function i(t) {
            return om(t, e, "right-edge");
          },
          l = function l(t) {
            return om(t, e, "top-edge");
          },
          c = function c(t) {
            return om(t, e, "bottom-edge");
          },
          d = e.model,
          u = d.manager,
          m = function m(t, o) {
            u.setPositionFromValue(t, o, e, {
              getLeftEdge: a,
              getRightEdge: i,
              getTopEdge: l,
              getBottomEdge: c,
              getSpectrum: r
            });
          },
          g = function g(e, t) {
            d.value.set(t);
            var o = s(e);
            m(e, o);
          },
          p = function p(t) {
            var o = e.mouseIsDown.get();
            e.mouseIsDown.set(!1), o && om(t, e, "thumb").each(function (o) {
              var n = d.value.get();
              e.onChoose(t, o, n);
            });
          },
          h = function h(t, o) {
            o.stop(), e.mouseIsDown.set(!0), e.onDragStart(t, s(t));
          },
          f = function f(t, o) {
            o.stop(), e.onDragEnd(t, s(t)), p(t);
          };
        return {
          uid: e.uid,
          dom: e.dom,
          components: t,
          behaviours: bu(e.sliderBehaviours, [Pp.config({
            mode: "special",
            focusIn: function focusIn(t) {
              return om(t, e, "spectrum").map(Pp.focusIn).map(E);
            }
          }), pu.config({
            store: {
              mode: "manual",
              getValue: function getValue(e) {
                return d.value.get();
              },
              setValue: g
            }
          }), Al.config({
            channels: _defineProperty({}, Jd(), {
              onReceive: p
            })
          })]),
          events: Hr([Ur(XS(), function (t, o) {
            (function (t, o) {
              g(t, o);
              var n = s(t);
              e.onChange(t, n, o), A.some(!0);
            })(t, o.event.value);
          }), Kr(function (t, o) {
            var n = d.getInitialValue();
            d.value.set(n);
            var a = s(t);
            m(t, a);
            var i = r(t);
            e.onInit(t, a, i, d.value.get());
          }), Ur(Hs(), h), Ur(Ps(), f), Ur(Ws(), h), Ur($s(), f)]),
          apis: {
            resetToMin: function resetToMin(t) {
              u.setToMin(t, e);
            },
            resetToMax: function resetToMax(t) {
              u.setToMax(t, e);
            },
            setValue: g,
            refresh: m
          },
          domModification: {
            styles: {
              position: "relative"
            }
          }
        };
      },
      apis: {
        setValue: function setValue(e, t, o) {
          e.setValue(t, o);
        },
        resetToMin: function resetToMin(e, t) {
          e.resetToMin(t);
        },
        resetToMax: function resetToMax(e, t) {
          e.resetToMax(t);
        },
        refresh: function refresh(e, t) {
          e.refresh(t);
        }
      }
    }),
    bC = la("rgb-hex-update"),
    vC = la("slider-update"),
    yC = la("palette-update"),
    xC = "form",
    wC = [hu("formBehaviours", [pu])],
    SC = function SC(e) {
      return "<alloy.field." + e + ">";
    },
    kC = function kC(e, t) {
      return {
        uid: e.uid,
        dom: e.dom,
        components: t,
        behaviours: bu(e.formBehaviours, [pu.config({
          store: {
            mode: "manual",
            getValue: function getValue(t) {
              var o = rm(t, e);
              return ce(o, function (e, t) {
                return e().bind(function (e) {
                  return o = wm.getCurrent(e), n = new Error("Cannot find a current component to extract the value from for form part '".concat(t, "': ") + na(e.element)), o.fold(function () {
                    return sn.error(n);
                  }, sn.value);
                  var o, n;
                }).map(pu.getValue);
              });
            },
            setValue: function setValue(t, o) {
              le(o, function (o, n) {
                om(t, e, n).each(function (e) {
                  wm.getCurrent(e).each(function (e) {
                    pu.setValue(e, o);
                  });
                });
              });
            }
          }
        })]),
        apis: {
          getField: function getField(t, o) {
            return om(t, e, o).bind(wm.getCurrent);
          }
        }
      };
    },
    CC = {
      getField: Ca(function (e, t, o) {
        return e.getField(t, o);
      }),
      sketch: function sketch(e) {
        var t = function () {
            var e = [];
            return {
              field: function field(t, o) {
                return e.push(t), Ju(xC, SC(t), o);
              },
              record: x(e)
            };
          }(),
          o = e(t),
          n = t.record(),
          s = H(n, function (e) {
            return Uu({
              name: e,
              pname: SC(e)
            });
          });
        return mm(xC, wC, s, kC, o);
      }
    },
    OC = la("valid-input"),
    _C = la("invalid-input"),
    TC = la("validating-input"),
    EC = "colorcustom.rgb.",
    AC = function AC(e, t, o, n) {
      var s = function s(o, n) {
          return FS.config({
            invalidClass: t("invalid"),
            notify: {
              onValidate: function onValidate(e) {
                Ir(e, TC, {
                  type: o
                });
              },
              onValid: function onValid(e) {
                Ir(e, OC, {
                  type: o,
                  value: pu.getValue(e)
                });
              },
              onInvalid: function onInvalid(e) {
                Ir(e, _C, {
                  type: o,
                  value: pu.getValue(e)
                });
              }
            },
            validator: {
              validate: function validate(t) {
                var o = pu.getValue(t),
                  s = n(o) ? sn.value(!0) : sn.error(e("aria.input.invalid"));
                return bw(s);
              },
              validateOnLoad: !1
            }
          });
        },
        r = function r(o, n, _r10, a, i) {
          var l = e(EC + "range"),
            c = aS.parts.label({
              dom: {
                tag: "label",
                attributes: {
                  "aria-label": a
                }
              },
              components: [ti(_r10)]
            }),
            d = aS.parts.field({
              data: i,
              factory: Vb,
              inputAttributes: _objectSpread({
                type: "text"
              }, "hex" === n ? {
                "aria-live": "polite"
              } : {}),
              inputClasses: [t("textfield")],
              inputBehaviours: kl([s(n, o), cS.config({})]),
              onSetValue: function onSetValue(e) {
                FS.isInvalid(e) && FS.run(e).get(b);
              }
            }),
            u = [c, d],
            m = "hex" !== n ? [aS.parts["aria-descriptor"]({
              text: l
            })] : [];
          return {
            dom: {
              tag: "div",
              attributes: {
                role: "presentation"
              }
            },
            components: u.concat(m)
          };
        },
        a = function a(e, t) {
          var o = t.red,
            n = t.green,
            s = t.blue;
          pu.setValue(e, {
            red: o,
            green: n,
            blue: s
          });
        },
        i = jh({
          dom: {
            tag: "div",
            classes: [t("rgba-preview")],
            styles: {
              "background-color": "white"
            },
            attributes: {
              role: "presentation"
            }
          }
        }),
        l = function l(e, t) {
          i.getOpt(e).each(function (e) {
            Dt(e.element, "background-color", "#" + t.value);
          });
        },
        c = fm({
          factory: function factory() {
            var s = {
                red: Es(A.some(255)),
                green: Es(A.some(255)),
                blue: Es(A.some(255)),
                hex: Es(A.some("ffffff"))
              },
              c = function c(e) {
                return s[e].get();
              },
              d = function d(e, t) {
                s[e].set(t);
              },
              u = function u(e) {
                var t = e.red,
                  o = e.green,
                  n = e.blue;
                d("red", A.some(t)), d("green", A.some(o)), d("blue", A.some(n));
              },
              m = function m(e, t) {
                var o = t.event;
                "hex" !== o.type ? d(o.type, A.none()) : n(e);
              },
              g = function g(e, t) {
                var n = t.event;
                (function (e) {
                  return "hex" === e.type;
                })(n) ? function (e, t) {
                  o(e);
                  var n = qy(t);
                  d("hex", A.some(n.value));
                  var s = lx(n);
                  a(e, s), u(s), Ir(e, bC, {
                    hex: n
                  }), l(e, n);
                }(e, n.value) : function (e, t, o) {
                  var n = parseInt(o, 10);
                  d(t, A.some(n)), c("red").bind(function (e) {
                    return c("green").bind(function (t) {
                      return c("blue").map(function (o) {
                        return rx(e, t, o, 1);
                      });
                    });
                  }).each(function (t) {
                    var o = function (e, t) {
                      var o = Qy(t);
                      return CC.getField(e, "hex").each(function (t) {
                        oh.isFocused(t) || pu.setValue(e, {
                          hex: o.value
                        });
                      }), o;
                    }(e, t);
                    Ir(e, bC, {
                      hex: o
                    }), l(e, o);
                  });
                }(e, n.type, n.value);
              },
              p = function p(t) {
                return {
                  label: e(EC + t + ".label"),
                  description: e(EC + t + ".description")
                };
              },
              h = p("red"),
              f = p("green"),
              b = p("blue"),
              v = p("hex");
            return fn(CC.sketch(function (o) {
              return {
                dom: {
                  tag: "form",
                  classes: [t("rgb-form")],
                  attributes: {
                    "aria-label": e("aria.color.picker")
                  }
                },
                components: [o.field("red", aS.sketch(r(ax, "red", h.label, h.description, 255))), o.field("green", aS.sketch(r(ax, "green", f.label, f.description, 255))), o.field("blue", aS.sketch(r(ax, "blue", b.label, b.description, 255))), o.field("hex", aS.sketch(r(Ky, "hex", v.label, v.description, "ffffff"))), i.asSpec()],
                formBehaviours: kl([FS.config({
                  invalidClass: t("form-invalid")
                }), Jp("rgb-form-events", [Ur(OC, g), Ur(_C, m), Ur(TC, m)])])
              };
            }), {
              apis: {
                updateHex: function updateHex(e, t) {
                  pu.setValue(e, {
                    hex: t.value
                  }), function (e, t) {
                    var o = lx(t);
                    a(e, o), u(o);
                  }(e, t), l(e, t);
                }
              }
            });
          },
          name: "RgbForm",
          configFields: [],
          apis: {
            updateHex: function updateHex(e, t, o) {
              e.updateHex(t, o);
            }
          },
          extraApis: {}
        });
      return c;
    },
    MC = function MC(e, t) {
      var o = fm({
        name: "ColourPicker",
        configFields: [os("dom"), ys("onValidHex", b), ys("onInvalidHex", b)],
        factory: function factory(o) {
          var n = AC(e, t, o.onValidHex, o.onInvalidHex),
            s = function (e, t) {
              var o = fC.parts.spectrum({
                  dom: {
                    tag: "canvas",
                    attributes: {
                      role: "presentation"
                    },
                    classes: [t("sv-palette-spectrum")]
                  }
                }),
                n = fC.parts.thumb({
                  dom: {
                    tag: "div",
                    attributes: {
                      role: "presentation"
                    },
                    classes: [t("sv-palette-thumb")],
                    innerHtml: "<div class=".concat(t("sv-palette-inner-thumb"), " role=\"presentation\"></div>")
                  }
                }),
                s = function s(e, t) {
                  var o = e.width,
                    n = e.height,
                    s = e.getContext("2d");
                  if (null === s) return;
                  s.fillStyle = t, s.fillRect(0, 0, o, n);
                  var r = s.createLinearGradient(0, 0, o, 0);
                  r.addColorStop(0, "rgba(255,255,255,1)"), r.addColorStop(1, "rgba(255,255,255,0)"), s.fillStyle = r, s.fillRect(0, 0, o, n);
                  var a = s.createLinearGradient(0, 0, 0, n);
                  a.addColorStop(0, "rgba(0,0,0,0)"), a.addColorStop(1, "rgba(0,0,0,1)"), s.fillStyle = a, s.fillRect(0, 0, o, n);
                };
              return fm({
                factory: function factory(e) {
                  var r = x({
                      x: 0,
                      y: 0
                    }),
                    a = kl([wm.config({
                      find: A.some
                    }), oh.config({})]);
                  return fC.sketch({
                    dom: {
                      tag: "div",
                      attributes: {
                        role: "presentation"
                      },
                      classes: [t("sv-palette")]
                    },
                    model: {
                      mode: "xy",
                      getInitialValue: r
                    },
                    rounded: !1,
                    components: [o, n],
                    onChange: function onChange(e, t, o) {
                      Ir(e, yC, {
                        value: o
                      });
                    },
                    onInit: function onInit(e, t, o, n) {
                      s(o.element.dom, ux(mx));
                    },
                    sliderBehaviours: a
                  });
                },
                name: "SaturationBrightnessPalette",
                configFields: [],
                apis: {
                  setHue: function setHue(e, t, o) {
                    (function (e, t) {
                      var o = e.components()[0].element.dom,
                        n = _x(t, 100, 100),
                        r = ix(n);
                      s(o, ux(r));
                    })(t, o);
                  },
                  setThumb: function setThumb(e, t, o) {
                    (function (e, t) {
                      var o = Tx(lx(t));
                      fC.setValue(e, {
                        x: o.saturation,
                        y: 100 - o.value
                      });
                    })(t, o);
                  }
                },
                extraApis: {}
              });
            }(0, t),
            r = {
              paletteRgba: Es(mx),
              paletteHue: Es(0)
            },
            a = jh(function (e, t) {
              var o = fC.parts.spectrum({
                  dom: {
                    tag: "div",
                    classes: [t("hue-slider-spectrum")],
                    attributes: {
                      role: "presentation"
                    }
                  }
                }),
                n = fC.parts.thumb({
                  dom: {
                    tag: "div",
                    classes: [t("hue-slider-thumb")],
                    attributes: {
                      role: "presentation"
                    }
                  }
                });
              return fC.sketch({
                dom: {
                  tag: "div",
                  classes: [t("hue-slider")],
                  attributes: {
                    role: "presentation"
                  }
                },
                rounded: !1,
                model: {
                  mode: "y",
                  getInitialValue: x(0)
                },
                components: [o, n],
                sliderBehaviours: kl([oh.config({})]),
                onChange: function onChange(e, t, o) {
                  Ir(e, vC, {
                    value: o
                  });
                }
              });
            }(0, t)),
            i = jh(s.sketch({})),
            l = jh(n.sketch({})),
            c = function c(e, t, o) {
              i.getOpt(e).each(function (e) {
                s.setHue(e, o);
              });
            },
            d = function d(e, t) {
              l.getOpt(e).each(function (e) {
                n.updateHex(e, t);
              });
            },
            u = function u(e, t, o) {
              a.getOpt(e).each(function (e) {
                fC.setValue(e, function (e) {
                  return 100 - e / 360 * 100;
                }(o));
              });
            },
            m = function m(e, t) {
              i.getOpt(e).each(function (e) {
                s.setThumb(e, t);
              });
            },
            g = function g(e, t, o, n) {
              (function (e, t) {
                var o = lx(e);
                r.paletteRgba.set(o), r.paletteHue.set(t);
              })(t, o), L(n, function (n) {
                n(e, t, o);
              });
            };
          return {
            uid: o.uid,
            dom: o.dom,
            components: [i.asSpec(), a.asSpec(), l.asSpec()],
            behaviours: kl([Jp("colour-picker-events", [Ur(bC, function () {
              var e = [c, u, m];
              return function (t, o) {
                var n = o.event.hex,
                  s = function (e) {
                    return Tx(lx(e));
                  }(n);
                g(t, n, s.hue, e);
              };
            }()), Ur(yC, function () {
              var e = [d];
              return function (t, o) {
                var n = o.event.value,
                  s = r.paletteHue.get(),
                  a = _x(s, n.x, 100 - n.y),
                  i = Ex(a);
                g(t, i, s, e);
              };
            }()), Ur(vC, function () {
              var e = [c, d];
              return function (t, o) {
                var n = function (e) {
                    return (100 - e) / 100 * 360;
                  }(o.event.value),
                  s = r.paletteRgba.get(),
                  a = Tx(s),
                  i = _x(n, a.saturation, a.value),
                  l = Ex(i);
                g(t, l, n, e);
              };
            }())]), wm.config({
              find: function find(e) {
                return l.getOpt(e);
              }
            }), Pp.config({
              mode: "acyclic"
            })])
          };
        }
      });
      return o;
    },
    DC = function DC() {
      return wm.config({
        find: A.some
      });
    },
    BC = function BC(e) {
      return wm.config({
        find: function find(t) {
          return lt(t.element, e).bind(function (e) {
            return t.getSystem().getByDom(e).toOptional();
          });
        }
      });
    },
    FC = Dn([ys("preprocess", w), ys("postprocess", w)]),
    IC = function IC(e, t) {
      var o = Yn("RepresentingConfigs.memento processors", FC, t);
      return pu.config({
        store: {
          mode: "manual",
          getValue: function getValue(t) {
            var n = e.get(t),
              s = pu.getValue(n);
            return o.postprocess(s);
          },
          setValue: function setValue(t, n) {
            var s = o.preprocess(n),
              r = e.get(t);
            pu.setValue(r, s);
          }
        }
      });
    },
    RC = function RC(e, t, o) {
      return pu.config({
        store: _objectSpread(_objectSpread({
          mode: "manual"
        }, e.map(function (e) {
          return {
            initialValue: e
          };
        }).getOr({})), {}, {
          getValue: t,
          setValue: o
        })
      });
    },
    NC = function NC(e, t, o) {
      return RC(e, function (e) {
        return t(e.element);
      }, function (e, t) {
        return o(e.element, t);
      });
    },
    VC = function VC(e) {
      return pu.config({
        store: {
          mode: "memory",
          initialValue: e
        }
      });
    },
    zC = {
      "colorcustom.rgb.red.label": "R",
      "colorcustom.rgb.red.description": "Red component",
      "colorcustom.rgb.green.label": "G",
      "colorcustom.rgb.green.description": "Green component",
      "colorcustom.rgb.blue.label": "B",
      "colorcustom.rgb.blue.description": "Blue component",
      "colorcustom.rgb.hex.label": "#",
      "colorcustom.rgb.hex.description": "Hex color code",
      "colorcustom.rgb.range": "Range 0 to 255",
      "aria.color.picker": "Color Picker",
      "aria.input.invalid": "Invalid input"
    };
  var HC = tinymce.util.Tools.resolve("tinymce.Resource"),
    LC = tinymce.util.Tools.resolve("tinymce.util.Tools");
  var PC = function PC(e, t) {
      var o = null;
      var n = function n() {
        c(o) || (clearTimeout(o), o = null);
      };
      return {
        cancel: n,
        throttle: function throttle() {
          for (var _len15 = arguments.length, s = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {
            s[_key15] = arguments[_key15];
          }
          n(), o = setTimeout(function () {
            o = null, e.apply(null, s);
          }, t);
        }
      };
    },
    UC = la("alloy-fake-before-tabstop"),
    WC = la("alloy-fake-after-tabstop"),
    jC = function jC(e) {
      return {
        dom: {
          tag: "div",
          styles: {
            width: "1px",
            height: "1px",
            outline: "none"
          },
          attributes: {
            tabindex: "0"
          },
          classes: e
        },
        behaviours: kl([oh.config({
          ignore: !0
        }), cS.config({})])
      };
    },
    GC = function GC(e, t) {
      return {
        dom: {
          tag: "div",
          classes: ["tox-navobj"].concat(_toConsumableArray(e.getOr([])))
        },
        components: [jC([UC]), t, jC([WC])],
        behaviours: kl([BC(1)])
      };
    },
    $C = function $C(e, t) {
      Ir(e, Ks(), {
        raw: {
          which: 9,
          shiftKey: t
        }
      });
    },
    qC = function qC(e, t) {
      var o = t.element;
      Ua(o, UC) ? $C(e, !0) : Ua(o, WC) && $C(e, !1);
    },
    XC = function XC(e) {
      return $w(e, ["." + UC, "." + WC].join(","), T);
    },
    YC = la("update-dialog"),
    KC = la("update-title"),
    JC = la("update-body"),
    ZC = la("update-footer"),
    QC = la("body-send-message"),
    eO = la("dialog-focus-shifted"),
    tO = Do().browser,
    oO = tO.isSafari(),
    nO = tO.isFirefox(),
    sO = oO || nO,
    rO = tO.isChromium(),
    aO = function aO(_ref11) {
      var e = _ref11.scrollTop,
        t = _ref11.scrollHeight,
        o = _ref11.clientHeight;
      return Math.ceil(e) + o >= t;
    },
    iO = function iO(e, t) {
      return e.scrollTo(0, "bottom" === t ? 99999999 : t);
    },
    lO = function lO(e, t, o) {
      var n = e.dom;
      A.from(n.contentDocument).fold(o, function (e) {
        var o = 0;
        var s = function (e, t) {
            var o = e.body;
            return A.from(!/^<!DOCTYPE (html|HTML)/.test(t) && (!rO && !oO || g(o) && (0 !== o.scrollTop || Math.abs(o.scrollHeight - o.clientHeight) > 1)) ? o : e.documentElement);
          }(e, t).map(function (e) {
            return o = e.scrollTop, e;
          }).forall(aO),
          r = function r() {
            var e = n.contentWindow;
            g(e) && (s ? iO(e, "bottom") : !s && sO && 0 !== o && iO(e, o));
          };
        oO && n.addEventListener("load", r, {
          once: !0
        }), e.open(), e.write(t), e.close(), oO || r();
      });
    },
    cO = Ce(sO, oO ? 500 : 200).map(function (e) {
      return function (e, t) {
        var o = null,
          n = null;
        return {
          cancel: function cancel() {
            c(o) || (clearTimeout(o), o = null, n = null);
          },
          throttle: function throttle() {
            for (var _len16 = arguments.length, s = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {
              s[_key16] = arguments[_key16];
            }
            n = s, c(o) && (o = setTimeout(function () {
              var t = n;
              o = null, n = null, e.apply(null, t);
            }, t));
          }
        };
      }(lO, e);
    }),
    dO = la("toolbar.button.execute"),
    uO = la("common-button-display-events"),
    mO = (_mO = {}, _defineProperty(_mO, ur(), ["disabling", "alloy.base.behaviour", "toggling", "toolbar-button-events"]), _defineProperty(_mO, Sr(), ["toolbar-button-events", uO]), _defineProperty(_mO, Ws(), ["focusing", "alloy.base.behaviour", uO]), _mO),
    gO = function gO(e) {
      return Dt(e.element, "width", It(e.element, "width"));
    },
    pO = function pO(e, t, o) {
      return ef(e, {
        tag: "span",
        classes: ["tox-icon", "tox-tbtn__icon-wrap"],
        behaviours: o
      }, t);
    },
    hO = function hO(e, t) {
      return pO(e, t, []);
    },
    fO = function fO(e, t) {
      return pO(e, t, [Kp.config({})]);
    },
    bO = function bO(e, t, o) {
      return {
        dom: {
          tag: "span",
          classes: ["".concat(t, "__select-label")]
        },
        components: [ti(o.translate(e))],
        behaviours: kl([Kp.config({})])
      };
    },
    vO = la("update-menu-text"),
    yO = la("update-menu-icon"),
    xO = function xO(e, t, o) {
      var n = Es(b),
        s = e.text.map(function (e) {
          return jh(bO(e, t, o.providers));
        }),
        r = e.icon.map(function (e) {
          return jh(fO(e, o.providers.icons));
        }),
        a = function a(e, t) {
          var o = pu.getValue(e);
          return oh.focus(o), Ir(o, "keydown", {
            raw: t.event.raw
          }), Dw.close(o), A.some(!0);
        },
        i = e.role.fold(function () {
          return {};
        }, function (e) {
          return {
            role: e
          };
        }),
        l = e.tooltip.fold(function () {
          return {};
        }, function (e) {
          var t = o.providers.translate(e);
          return {
            title: t,
            "aria-label": t
          };
        }),
        c = ef("chevron-down", {
          tag: "div",
          classes: ["".concat(t, "__select-chevron")]
        }, o.providers.icons),
        d = la("common-button-display-events"),
        u = jh(Dw.sketch(_objectSpread(_objectSpread(_objectSpread({}, e.uid ? {
          uid: e.uid
        } : {}), i), {}, {
          dom: {
            tag: "button",
            classes: [t, "".concat(t, "--select")].concat(H(e.classes, function (e) {
              return "".concat(t, "--").concat(e);
            })),
            attributes: _objectSpread({}, l)
          },
          components: Dy([r.map(function (e) {
            return e.asSpec();
          }), s.map(function (e) {
            return e.asSpec();
          }), A.some(c)]),
          matchWidth: !0,
          useMinWidth: !0,
          onOpen: function onOpen(t, o, n) {
            e.searchable && function (e) {
              Ub(e).each(function (e) {
                return oh.focus(e);
              });
            }(n);
          },
          dropdownBehaviours: kl([].concat(_toConsumableArray(e.dropdownBehaviours), [ky(function () {
            return e.disabled || o.providers.isDisabled();
          }), Sy(), IS.config({}), Kp.config({}), Jp("dropdown-events", [Ty(e, n), Ey(e, n)]), Jp(d, [Kr(function (e, t) {
            return gO(e);
          })]), Jp("menubutton-update-display-text", [Ur(vO, function (e, t) {
            s.bind(function (t) {
              return t.getOpt(e);
            }).each(function (e) {
              Kp.set(e, [ti(o.providers.translate(t.event.text))]);
            });
          }), Ur(yO, function (e, t) {
            r.bind(function (t) {
              return t.getOpt(e);
            }).each(function (e) {
              Kp.set(e, [fO(t.event.icon, o.providers.icons)]);
            });
          })])])),
          eventOrder: fn(mO, _defineProperty({
            mousedown: ["focusing", "alloy.base.behaviour", "item-type-events", "normal-dropdown-events"]
          }, Sr(), ["toolbar-button-events", "dropdown-events", d])),
          sandboxBehaviours: kl([Pp.config({
            mode: "special",
            onLeft: a,
            onRight: a
          }), Jp("dropdown-sandbox-events", [Ur(zb, function (e, t) {
            (function (e) {
              var t = pu.getValue(e),
                o = Pb(e).map(Wb);
              Dw.refetch(t).get(function () {
                var e = uw.getCoupled(t, "sandbox");
                o.each(function (t) {
                  return Pb(e).each(function (e) {
                    return function (e, t) {
                      pu.setValue(e, t.fetchPattern), e.element.dom.selectionStart = t.selectionStart, e.element.dom.selectionEnd = t.selectionEnd;
                    }(e, t);
                  });
                });
              });
            })(e), t.stop();
          }), Ur(Hb, function (e, t) {
            (function (e, t) {
              (function (e) {
                return Xd.getState(e).bind(Gm.getHighlighted).bind(Gm.getHighlighted);
              })(e).each(function (o) {
                (function (e, t, o, n) {
                  var s = _objectSpread(_objectSpread({}, n), {}, {
                    target: t
                  });
                  e.getSystem().triggerEvent(o, t, s);
                })(e, o.element, t.event.eventType, t.event.interactionEvent);
              });
            })(e, t), t.stop();
          })])]),
          lazySink: o.getSink,
          toggleClass: "".concat(t, "--active"),
          parts: {
            menu: _objectSpread(_objectSpread({}, Bb(0, e.columns, e.presets)), {}, {
              fakeFocus: e.searchable,
              onHighlightItem: Bw,
              onCollapseMenu: function onCollapseMenu(e, t, o) {
                Gm.getHighlighted(o).each(function (t) {
                  Bw(e, o, t);
                });
              },
              onDehighlightItem: Fw
            })
          },
          getAnchorOverrides: function getAnchorOverrides() {
            return {
              maxHeightFunction: function maxHeightFunction(e, t) {
                lc()(e, t - 10);
              }
            };
          },
          fetch: function fetch(t) {
            return fw(k(e.fetch, t));
          }
        })));
      return u.asSpec();
    },
    wO = function wO(e) {
      return "separator" === e.type;
    },
    SO = {
      type: "separator"
    },
    kO = function kO(e, t) {
      var o = function (e, t) {
        var o = j(e, function (e, o) {
          return function (e) {
            return r(e);
          }(o) ? "" === o ? e : "|" === o ? e.length > 0 && !wO(e[e.length - 1]) ? e.concat([SO]) : e : ve(t, o.toLowerCase()) ? e.concat([t[o.toLowerCase()]]) : e : e.concat([o]);
        }, []);
        return o.length > 0 && wO(o[o.length - 1]) && o.pop(), o;
      }(r(e) ? e.split(" ") : e, t);
      return W(o, function (e, o) {
        if (function (e) {
          return ve(e, "getSubmenuItems");
        }(o)) {
          var _n33 = function (e) {
              var t = be(e, "value").getOrThunk(function () {
                return la("generated-menu-item");
              });
              return fn({
                value: t
              }, e);
            }(o),
            _s23 = function (e, t) {
              var o = e.getSubmenuItems(),
                n = kO(o, t);
              return {
                item: e,
                menus: fn(n.menus, _defineProperty({}, e.value, n.items)),
                expansions: fn(n.expansions, _defineProperty({}, e.value, e.value))
              };
            }(_n33, t);
          return {
            menus: fn(e.menus, _s23.menus),
            items: [_s23.item].concat(_toConsumableArray(e.items)),
            expansions: fn(e.expansions, _s23.expansions)
          };
        }
        return _objectSpread(_objectSpread({}, e), {}, {
          items: [o].concat(_toConsumableArray(e.items))
        });
      }, {
        menus: {},
        expansions: {},
        items: []
      });
    },
    CO = function CO(e, t, o, n) {
      var s = la("primary-menu"),
        r = kO(e, o.shared.providers.menuItems());
      if (0 === r.items.length) return A.none();
      var a = function (e) {
          return e.search.fold(function () {
            return {
              searchMode: "no-search"
            };
          }, function (e) {
            return {
              searchMode: "search-with-field",
              placeholder: e.placeholder
            };
          });
        }(n),
        i = zw(s, r.items, t, o, n.isHorizontalMenu, a),
        l = function (e) {
          return e.search.fold(function () {
            return {
              searchMode: "no-search"
            };
          }, function (e) {
            return {
              searchMode: "search-with-results"
            };
          });
        }(n),
        c = ce(r.menus, function (e, n) {
          return zw(n, e, t, o, !1, l);
        }),
        d = fn(c, Ms(s, i));
      return A.from(Lh.tieredData(s, d, r.expansions));
    },
    OO = function OO(e) {
      return !ve(e, "items");
    },
    _O = "data-value",
    TO = function TO(e, t, o, n) {
      return H(o, function (o) {
        return OO(o) ? {
          type: "togglemenuitem",
          text: o.text,
          value: o.value,
          active: o.value === n,
          onAction: function onAction() {
            pu.setValue(e, o.value), Ir(e, hS, {
              name: t
            }), oh.focus(e);
          }
        } : {
          type: "nestedmenuitem",
          text: o.text,
          getSubmenuItems: function getSubmenuItems() {
            return TO(e, t, o.items, n);
          }
        };
      });
    },
    EO = function EO(e, t) {
      return re(e, function (e) {
        return OO(e) ? Ce(e.value === t, e) : EO(e.items, t);
      });
    },
    AO = fm({
      name: "HtmlSelect",
      configFields: [os("options"), hu("selectBehaviours", [oh, pu]), ys("selectClasses", []), ys("selectAttributes", {}), us("data")],
      factory: function factory(e, t) {
        var o = H(e.options, function (e) {
            return {
              dom: {
                tag: "option",
                value: e.value,
                innerHtml: e.text
              }
            };
          }),
          n = e.data.map(function (e) {
            return Ms("initialValue", e);
          }).getOr({});
        return {
          uid: e.uid,
          dom: {
            tag: "select",
            classes: e.selectClasses,
            attributes: e.selectAttributes
          },
          components: o,
          behaviours: bu(e.selectBehaviours, [oh.config({}), pu.config({
            store: _objectSpread({
              mode: "manual",
              getValue: function getValue(e) {
                return $a(e.element);
              },
              setValue: function setValue(t, o) {
                var n = oe(e.options);
                G(e.options, function (e) {
                  return e.value === o;
                }).isSome() ? qa(t.element, o) : -1 === t.element.dom.selectedIndex && "" === o && n.each(function (e) {
                  return qa(t.element, e.value);
                });
              }
            }, n)
          })])
        };
      }
    }),
    MO = x([ys("field1Name", "field1"), ys("field2Name", "field2"), Fi("onLockedChange"), Ai(["lockClass"]), ys("locked", !1), vu("coupledFieldBehaviours", [wm, pu])]),
    DO = function DO(e, t) {
      return Uu({
        factory: aS,
        name: e,
        overrides: function overrides(e) {
          return {
            fieldBehaviours: kl([Jp("coupled-input-behaviour", [Ur(Zs(), function (o) {
              (function (e, t, o) {
                return om(e, t, o).bind(wm.getCurrent);
              })(o, e, t).each(function (t) {
                om(o, e, "lock").each(function (n) {
                  dh.isOn(n) && e.onLockedChange(o, t, n);
                });
              });
            })])])
          };
        }
      });
    },
    BO = x([DO("field1", "field2"), DO("field2", "field1"), Uu({
      factory: Wh,
      schema: [os("dom")],
      name: "lock",
      overrides: function overrides(e) {
        return {
          buttonBehaviours: kl([dh.config({
            selected: e.locked,
            toggleClass: e.markers.lockClass,
            aria: {
              mode: "pressed"
            }
          })])
        };
      }
    })]),
    FO = bm({
      name: "FormCoupledInputs",
      configFields: MO(),
      partFields: BO(),
      factory: function factory(e, t, o, n) {
        return {
          uid: e.uid,
          dom: e.dom,
          components: t,
          behaviours: yu(e.coupledFieldBehaviours, [wm.config({
            find: A.some
          }), pu.config({
            store: {
              mode: "manual",
              getValue: function getValue(t) {
                var _ref12;
                var o = im(t, e, ["field1", "field2"]);
                return _ref12 = {}, _defineProperty(_ref12, e.field1Name, pu.getValue(o.field1())), _defineProperty(_ref12, e.field2Name, pu.getValue(o.field2())), _ref12;
              },
              setValue: function setValue(t, o) {
                var n = im(t, e, ["field1", "field2"]);
                ye(o, e.field1Name) && pu.setValue(n.field1(), o[e.field1Name]), ye(o, e.field2Name) && pu.setValue(n.field2(), o[e.field2Name]);
              }
            }
          })]),
          apis: {
            getField1: function getField1(t) {
              return om(t, e, "field1");
            },
            getField2: function getField2(t) {
              return om(t, e, "field2");
            },
            getLock: function getLock(t) {
              return om(t, e, "lock");
            }
          }
        };
      },
      apis: {
        getField1: function getField1(e, t) {
          return e.getField1(t);
        },
        getField2: function getField2(e, t) {
          return e.getField2(t);
        },
        getLock: function getLock(e, t) {
          return e.getLock(t);
        }
      }
    }),
    IO = function IO(e) {
      var t = /^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);
      if (null !== t) {
        var _e21 = parseFloat(t[1]),
          _o28 = t[2];
        return sn.value({
          value: _e21,
          unit: _o28
        });
      }
      return sn.error(e);
    },
    RO = function RO(e, t) {
      var o = {
          "": 96,
          px: 96,
          pt: 72,
          cm: 2.54,
          pc: 12,
          mm: 25.4,
          "in": 1
        },
        n = function n(e) {
          return ve(o, e);
        };
      return e.unit === t ? A.some(e.value) : n(e.unit) && n(t) ? o[e.unit] === o[t] ? A.some(e.value) : A.some(e.value / o[e.unit] * o[t]) : A.none();
    },
    NO = function NO(e) {
      return A.none();
    },
    VO = function VO(e, t) {
      var o = e.label.map(function (e) {
          return pS(e, t);
        }),
        n = [Rm.config({
          disabled: function disabled() {
            return e.disabled || t.isDisabled();
          }
        }), Sy(), Pp.config({
          mode: "execution",
          useEnter: !0 !== e.multiline,
          useControlEnter: !0 === e.multiline,
          execute: function execute(e) {
            return Fr(e, yS), A.some(!0);
          }
        }), Jp("textfield-change", [Ur(Zs(), function (t, o) {
          Ir(t, hS, {
            name: e.name
          });
        }), Ur(cr(), function (t, o) {
          Ir(t, hS, {
            name: e.name
          });
        })]), cS.config({})],
        s = e.validation.map(function (e) {
          return FS.config({
            getRoot: function getRoot(e) {
              return rt(e.element);
            },
            invalidClass: "tox-invalid",
            validator: {
              validate: function validate(t) {
                var o = pu.getValue(t),
                  n = e.validator(o);
                return bw(!0 === n ? sn.value(o) : sn.error(n));
              },
              validateOnLoad: e.validateOnLoad
            }
          });
        }).toArray(),
        r = _objectSpread(_objectSpread({}, e.placeholder.fold(x({}), function (e) {
          return {
            placeholder: t.translate(e)
          };
        })), e.inputMode.fold(x({}), function (e) {
          return {
            inputmode: e
          };
        })),
        a = aS.parts.field(_objectSpread(_objectSpread({
          tag: !0 === e.multiline ? "textarea" : "input"
        }, e.data.map(function (e) {
          return {
            data: e
          };
        }).getOr({})), {}, {
          inputAttributes: r,
          inputClasses: [e.classname],
          inputBehaviours: kl(q([n, s])),
          selectOnFocus: !1,
          factory: Vb
        })),
        i = e.multiline ? {
          dom: {
            tag: "div",
            classes: ["tox-textarea-wrap"]
          },
          components: [a]
        } : a,
        l = (e.flex ? ["tox-form__group--stretched"] : []).concat(e.maximized ? ["tox-form-group--maximize"] : []),
        c = [Rm.config({
          disabled: function disabled() {
            return e.disabled || t.isDisabled();
          },
          onDisabled: function onDisabled(e) {
            aS.getField(e).each(Rm.disable);
          },
          onEnabled: function onEnabled(e) {
            aS.getField(e).each(Rm.enable);
          }
        }), Sy()];
      return uS(o, i, l, c);
    },
    zO = function zO(e, t) {
      return t.getAnimationRoot.fold(function () {
        return e.element;
      }, function (t) {
        return t(e);
      });
    },
    HO = function HO(e) {
      return e.dimension.property;
    },
    LO = function LO(e, t) {
      return e.dimension.getDimension(t);
    },
    PO = function PO(e, t) {
      var o = zO(e, t);
      ja(o, [t.shrinkingClass, t.growingClass]);
    },
    UO = function UO(e, t) {
      Pa(e.element, t.openClass), La(e.element, t.closedClass), Dt(e.element, HO(t), "0px"), Lt(e.element);
    },
    WO = function WO(e, t) {
      Pa(e.element, t.closedClass), La(e.element, t.openClass), Ht(e.element, HO(t));
    },
    jO = function jO(e, t, o, n) {
      o.setCollapsed(), Dt(e.element, HO(t), LO(t, e.element)), PO(e, t), UO(e, t), t.onStartShrink(e), t.onShrunk(e);
    },
    GO = function GO(e, t, o, n) {
      var s = n.getOrThunk(function () {
        return LO(t, e.element);
      });
      o.setCollapsed(), Dt(e.element, HO(t), s), Lt(e.element);
      var r = zO(e, t);
      Pa(r, t.growingClass), La(r, t.shrinkingClass), UO(e, t), t.onStartShrink(e);
    },
    $O = function $O(e, t, o) {
      var n = LO(t, e.element);
      ("0px" === n ? jO : GO)(e, t, o, A.some(n));
    },
    qO = function qO(e, t, o) {
      var n = zO(e, t),
        s = Ua(n, t.shrinkingClass),
        r = LO(t, e.element);
      WO(e, t);
      var a = LO(t, e.element);
      (s ? function () {
        Dt(e.element, HO(t), r), Lt(e.element);
      } : function () {
        UO(e, t);
      })(), Pa(n, t.shrinkingClass), La(n, t.growingClass), WO(e, t), Dt(e.element, HO(t), a), o.setExpanded(), t.onStartGrow(e);
    },
    XO = function XO(e, t, o) {
      var n = zO(e, t);
      return !0 === Ua(n, t.growingClass);
    },
    YO = function YO(e, t, o) {
      var n = zO(e, t);
      return !0 === Ua(n, t.shrinkingClass);
    };
  var KO = Object.freeze({
      __proto__: null,
      refresh: function refresh(e, t, o) {
        if (o.isExpanded()) {
          Ht(e.element, HO(t));
          var _o29 = LO(t, e.element);
          Dt(e.element, HO(t), _o29);
        }
      },
      grow: function grow(e, t, o) {
        o.isExpanded() || qO(e, t, o);
      },
      shrink: function shrink(e, t, o) {
        o.isExpanded() && $O(e, t, o);
      },
      immediateShrink: function immediateShrink(e, t, o) {
        o.isExpanded() && jO(e, t, o);
      },
      hasGrown: function hasGrown(e, t, o) {
        return o.isExpanded();
      },
      hasShrunk: function hasShrunk(e, t, o) {
        return o.isCollapsed();
      },
      isGrowing: XO,
      isShrinking: YO,
      isTransitioning: function isTransitioning(e, t, o) {
        return XO(e, t) || YO(e, t);
      },
      toggleGrow: function toggleGrow(e, t, o) {
        (o.isExpanded() ? $O : qO)(e, t, o);
      },
      disableTransitions: PO,
      immediateGrow: function immediateGrow(e, t, o) {
        o.isExpanded() || (WO(e, t), Dt(e.element, HO(t), LO(t, e.element)), PO(e, t), o.setExpanded(), t.onStartGrow(e), t.onGrown(e));
      }
    }),
    JO = Object.freeze({
      __proto__: null,
      exhibit: function exhibit(e, t, o) {
        var n = t.expanded;
        return Ea(n ? {
          classes: [t.openClass],
          styles: {}
        } : {
          classes: [t.closedClass],
          styles: Ms(t.dimension.property, "0px")
        });
      },
      events: function events(e, t) {
        return Hr([Yr(or(), function (o, n) {
          n.event.raw.propertyName === e.dimension.property && (PO(o, e), t.isExpanded() && Ht(o.element, e.dimension.property), (t.isExpanded() ? e.onGrown : e.onShrunk)(o));
        })]);
      }
    }),
    ZO = [os("closedClass"), os("openClass"), os("shrinkingClass"), os("growingClass"), us("getAnimationRoot"), Di("onShrunk"), Di("onStartShrink"), Di("onGrown"), Di("onStartGrow"), ys("expanded", !1), ns("dimension", Jn("property", {
      width: [Ri("property", "width"), Ri("getDimension", function (e) {
        return Jt(e) + "px";
      })],
      height: [Ri("property", "height"), Ri("getDimension", function (e) {
        return Wt(e) + "px";
      })]
    }))];
  var QO = Ol({
      fields: ZO,
      name: "sliding",
      active: JO,
      apis: KO,
      state: Object.freeze({
        __proto__: null,
        init: function init(e) {
          var t = Es(e.expanded);
          return _a({
            isExpanded: function isExpanded() {
              return !0 === t.get();
            },
            isCollapsed: function isCollapsed() {
              return !1 === t.get();
            },
            setCollapsed: k(t.set, !1),
            setExpanded: k(t.set, !0),
            readState: function readState() {
              return "expanded: " + t.get();
            }
          });
        }
      })
    }),
    e_ = function e_(e) {
      return {
        isEnabled: function isEnabled() {
          return !Rm.isDisabled(e);
        },
        setEnabled: function setEnabled(t) {
          return Rm.set(e, !t);
        },
        setActive: function setActive(t) {
          var o = e.element;
          t ? (La(o, "tox-tbtn--enabled"), kt(o, "aria-pressed", !0)) : (Pa(o, "tox-tbtn--enabled"), Et(o, "aria-pressed"));
        },
        isActive: function isActive() {
          return Ua(e.element, "tox-tbtn--enabled");
        },
        setText: function setText(t) {
          Ir(e, vO, {
            text: t
          });
        },
        setIcon: function setIcon(t) {
          return Ir(e, yO, {
            icon: t
          });
        }
      };
    },
    t_ = function t_(e, t, o, n) {
      var s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !0;
      return xO({
        text: e.text,
        icon: e.icon,
        tooltip: e.tooltip,
        searchable: e.search.isSome(),
        role: n,
        fetch: function fetch(t, n) {
          var s = {
            pattern: e.search.isSome() ? Iw(t) : ""
          };
          e.fetch(function (t) {
            n(CO(t, pb.CLOSE_ON_EXECUTE, o, {
              isHorizontalMenu: !1,
              search: e.search
            }));
          }, s, e_(t));
        },
        onSetup: e.onSetup,
        getApi: e_,
        columns: 1,
        presets: "normal",
        classes: [],
        dropdownBehaviours: _toConsumableArray(s ? [cS.config({})] : [])
      }, t, o.shared);
    },
    o_ = function o_(e, t, o) {
      var n = function n(e) {
          return function (n) {
            var s = !n.isActive();
            n.setActive(s), e.storage.set(s), o.shared.getSink().each(function (o) {
              t().getOpt(o).each(function (t) {
                Dl(t.element), Ir(t, vS, {
                  name: e.name,
                  value: e.storage.get()
                });
              });
            });
          };
        },
        s = function s(e) {
          return function (t) {
            t.setActive(e.storage.get());
          };
        };
      return function (t) {
        t(H(e, function (e) {
          var t = e.text.fold(function () {
            return {};
          }, function (e) {
            return {
              text: e
            };
          });
          return _objectSpread(_objectSpread({
            type: e.type,
            active: !1
          }, t), {}, {
            onAction: n(e),
            onSetup: s(e)
          });
        }));
      };
    },
    n_ = function n_(e) {
      return {
        dom: {
          tag: "span",
          classes: ["tox-tree__label"],
          attributes: {
            title: e,
            "aria-label": e
          }
        },
        components: [ti(e)]
      };
    },
    s_ = la("leaf-label-event-id"),
    r_ = function r_(_ref13) {
      var e = _ref13.leaf,
        t = _ref13.onLeafAction,
        o = _ref13.visible,
        n = _ref13.treeId,
        s = _ref13.selectedId,
        r = _ref13.backstage;
      var a = e.menu.map(function (e) {
          return t_(e, "tox-mbtn", r, A.none(), o);
        }),
        i = [n_(e.title)];
      return a.each(function (e) {
        return i.push(e);
      }), Wh.sketch({
        dom: {
          tag: "div",
          classes: ["tox-tree--leaf__label", "tox-trbtn"].concat(o ? ["tox-tree--leaf__label--visible"] : [])
        },
        components: i,
        role: "treeitem",
        action: function action(o) {
          t(e.id), o.getSystem().broadcastOn(["update-active-item-".concat(n)], {
            value: e.id
          });
        },
        eventOrder: _defineProperty({}, Ks(), [s_, "keying"]),
        buttonBehaviours: kl([].concat(_toConsumableArray(o ? [cS.config({})] : []), [dh.config({
          toggleClass: "tox-trbtn--enabled",
          toggleOnExecute: !1,
          aria: {
            mode: "selected"
          }
        }), Al.config({
          channels: _defineProperty({}, "update-active-item-".concat(n), {
            onReceive: function onReceive(t, o) {
              (o.value === e.id ? dh.on : dh.off)(t);
            }
          })
        }), Jp(s_, [Kr(function (t, o) {
          s.each(function (o) {
            (o === e.id ? dh.on : dh.off)(t);
          });
        }), Ur(Ks(), function (e, t) {
          var o = "ArrowLeft" === t.event.raw.code,
            n = "ArrowRight" === t.event.raw.code;
          o ? (mi(e.element, ".tox-tree--directory").each(function (t) {
            e.getSystem().getByDom(t).each(function (e) {
              gi(t, ".tox-tree--directory__label").each(function (t) {
                e.getSystem().getByDom(t).each(oh.focus);
              });
            });
          }), t.stop()) : n && t.stop();
        })])]))
      });
    },
    a_ = la("directory-label-event-id"),
    i_ = function i_(_ref14) {
      var e = _ref14.directory,
        t = _ref14.visible,
        o = _ref14.noChildren,
        n = _ref14.backstage;
      var s = e.menu.map(function (e) {
          return t_(e, "tox-mbtn", n, A.none());
        }),
        r = [{
          dom: {
            tag: "div",
            classes: ["tox-chevron"]
          },
          components: [(a = "chevron-right", i = n.shared.providers.icons, function (e, t, o) {
            return ef(e, {
              tag: "span",
              classes: ["tox-tree__icon-wrap", "tox-icon"],
              behaviours: []
            }, t);
          }(a, i))]
        }, n_(e.title)];
      var a, i;
      s.each(function (e) {
        r.push(e);
      });
      var l = function l(t) {
        mi(t.element, ".tox-tree--directory").each(function (o) {
          t.getSystem().getByDom(o).each(function (o) {
            var n = !dh.isOn(o);
            dh.toggle(o), Ir(t, "expand-tree-node", {
              expanded: n,
              node: e.id
            });
          });
        });
      };
      return Wh.sketch({
        dom: {
          tag: "div",
          classes: ["tox-tree--directory__label", "tox-trbtn"].concat(t ? ["tox-tree--directory__label--visible"] : [])
        },
        components: r,
        action: l,
        eventOrder: _defineProperty({}, Ks(), [a_, "keying"]),
        buttonBehaviours: kl([].concat(_toConsumableArray(t ? [cS.config({})] : []), [Jp(a_, [Ur(Ks(), function (e, t) {
          var n = "ArrowRight" === t.event.raw.code,
            s = "ArrowLeft" === t.event.raw.code;
          n && o && t.stop(), (n || s) && mi(e.element, ".tox-tree--directory").each(function (o) {
            e.getSystem().getByDom(o).each(function (o) {
              !dh.isOn(o) && n || dh.isOn(o) && s ? (l(e), t.stop()) : s && !dh.isOn(o) && (mi(o.element, ".tox-tree--directory").each(function (e) {
                gi(e, ".tox-tree--directory__label").each(function (e) {
                  o.getSystem().getByDom(e).each(oh.focus);
                });
              }), t.stop());
            });
          });
        })])]))
      });
    },
    l_ = function l_(_ref15) {
      var e = _ref15.children,
        t = _ref15.onLeafAction,
        o = _ref15.visible,
        n = _ref15.treeId,
        s = _ref15.expandedIds,
        r = _ref15.selectedId,
        a = _ref15.backstage;
      return {
        dom: {
          tag: "div",
          classes: ["tox-tree--directory__children"]
        },
        components: e.map(function (e) {
          return "leaf" === e.type ? r_({
            leaf: e,
            selectedId: r,
            onLeafAction: t,
            visible: o,
            treeId: n,
            backstage: a
          }) : d_({
            directory: e,
            expandedIds: s,
            selectedId: r,
            onLeafAction: t,
            labelTabstopping: o,
            treeId: n,
            backstage: a
          });
        }),
        behaviours: kl([QO.config({
          dimension: {
            property: "height"
          },
          closedClass: "tox-tree--directory__children--closed",
          openClass: "tox-tree--directory__children--open",
          growingClass: "tox-tree--directory__children--growing",
          shrinkingClass: "tox-tree--directory__children--shrinking",
          expanded: o
        }), Kp.config({})])
      };
    },
    c_ = la("directory-event-id"),
    d_ = function d_(_ref16) {
      var e = _ref16.directory,
        t = _ref16.onLeafAction,
        o = _ref16.labelTabstopping,
        n = _ref16.treeId,
        s = _ref16.backstage,
        r = _ref16.expandedIds,
        a = _ref16.selectedId;
      var i = e.children,
        l = Es(r),
        c = r.includes(e.id);
      return {
        dom: {
          tag: "div",
          classes: ["tox-tree--directory"],
          attributes: {
            role: "treeitem"
          }
        },
        components: [i_({
          directory: e,
          visible: o,
          noChildren: 0 === e.children.length,
          backstage: s
        }), l_({
          children: i,
          expandedIds: r,
          selectedId: a,
          onLeafAction: t,
          visible: c,
          treeId: n,
          backstage: s
        })],
        behaviours: kl([Jp(c_, [Kr(function (e, t) {
          dh.set(e, c);
        }), Ur("expand-tree-node", function (e, t) {
          var _t$event2 = t.event,
            o = _t$event2.expanded,
            n = _t$event2.node;
          l.set(o ? [].concat(_toConsumableArray(l.get()), [n]) : l.get().filter(function (e) {
            return e !== n;
          }));
        })]), dh.config(_objectSpread(_objectSpread({}, e.children.length > 0 ? {
          aria: {
            mode: "expanded"
          }
        } : {}), {}, {
          toggleClass: "tox-tree--directory--expanded",
          onToggled: function onToggled(e, o) {
            var r = e.components()[1],
              c = (d = o, i.map(function (e) {
                return "leaf" === e.type ? r_({
                  leaf: e,
                  selectedId: a,
                  onLeafAction: t,
                  visible: d,
                  treeId: n,
                  backstage: s
                }) : d_({
                  directory: e,
                  expandedIds: l.get(),
                  selectedId: a,
                  onLeafAction: t,
                  labelTabstopping: d,
                  treeId: n,
                  backstage: s
                });
              }));
            var d;
            o ? QO.grow(r) : QO.shrink(r), Kp.set(r, c);
          }
        }))])
      };
    },
    u_ = la("tree-event-id");
  var m_ = Object.freeze({
    __proto__: null,
    events: function events(e, t) {
      var o = e.stream.streams.setup(e, t);
      return Hr([Ur(e.event, o), Jr(function () {
        return t.cancel();
      })].concat(e.cancelEvent.map(function (e) {
        return [Ur(e, function () {
          return t.cancel();
        })];
      }).getOr([])));
    }
  });
  var g_ = function g_(e) {
    var t = Es(null);
    return _a({
      readState: function readState() {
        return {
          timer: null !== t.get() ? "set" : "unset"
        };
      },
      setTimer: function setTimer(e) {
        t.set(e);
      },
      cancel: function cancel() {
        var e = t.get();
        null !== e && e.cancel();
      }
    });
  };
  var p_ = Object.freeze({
      __proto__: null,
      throttle: g_,
      init: function init(e) {
        return e.stream.streams.state(e);
      }
    }),
    h_ = [ns("stream", Jn("mode", {
      throttle: [os("delay"), ys("stopEvent", !0), Ri("streams", {
        setup: function setup(e, t) {
          var o = e.stream,
            n = PC(e.onStream, o.delay);
          return t.setTimer(n), function (e, t) {
            n.throttle(e, t), o.stopEvent && t.stop();
          };
        },
        state: g_
      })]
    })), ys("event", "input"), us("cancelEvent"), Fi("onStream")];
  var f_ = Ol({
      fields: h_,
      name: "streaming",
      active: m_,
      state: p_
    }),
    b_ = function b_(e, t, o) {
      var n = pu.getValue(o);
      pu.setValue(t, n), y_(t);
    },
    v_ = function v_(e, t) {
      var o = e.element,
        n = $a(o),
        s = o.dom;
      "number" !== Ot(o, "type") && t(s, n);
    },
    y_ = function y_(e) {
      v_(e, function (e, t) {
        return e.setSelectionRange(t.length, t.length);
      });
    },
    x_ = x("alloy.typeahead.itemexecute"),
    w_ = x([us("lazySink"), os("fetch"), ys("minChars", 5), ys("responseTime", 1e3), Di("onOpen"), ys("getHotspot", A.some), ys("getAnchorOverrides", x({})), ys("layouts", A.none()), ys("eventOrder", {}), Ts("model", {}, [ys("getDisplayText", function (e) {
      return void 0 !== e.meta && void 0 !== e.meta.text ? e.meta.text : e.value;
    }), ys("selectsOver", !0), ys("populateFromBrowse", !0)]), Di("onSetValue"), Bi("onExecute"), Di("onItemExecute"), ys("inputClasses", []), ys("inputAttributes", {}), ys("inputStyles", {}), ys("matchWidth", !0), ys("useMinWidth", !1), ys("dismissOnBlur", !0), Ai(["openClass"]), us("initialData"), hu("typeaheadBehaviours", [oh, pu, f_, Pp, dh, uw]), es("lazyTypeaheadComp", function () {
      return Es(A.none);
    }), es("previewing", function () {
      return Es(!0);
    })].concat(Fb()).concat(Ew())),
    S_ = x([Wu({
      schema: [Ei()],
      name: "menu",
      overrides: function overrides(e) {
        return {
          fakeFocus: !0,
          onHighlightItem: function onHighlightItem(t, o, n) {
            e.previewing.get() ? e.lazyTypeaheadComp.get().each(function (t) {
              (function (e, t, o) {
                if (e.selectsOver) {
                  var _n34 = pu.getValue(t),
                    _s24 = e.getDisplayText(_n34),
                    _r11 = pu.getValue(o);
                  return 0 === e.getDisplayText(_r11).indexOf(_s24) ? A.some(function () {
                    b_(0, t, o), function (e, t) {
                      v_(e, function (e, o) {
                        return e.setSelectionRange(t, o.length);
                      });
                    }(t, _s24.length);
                  }) : A.none();
                }
                return A.none();
              })(e.model, t, n).fold(function () {
                e.model.selectsOver ? (Gm.dehighlight(o, n), e.previewing.set(!0)) : e.previewing.set(!1);
              }, function (t) {
                t(), e.previewing.set(!1);
              });
            }) : e.lazyTypeaheadComp.get().each(function (t) {
              e.model.populateFromBrowse && b_(e.model, t, n), _t(n.element, "id").each(function (e) {
                return kt(t.element, "aria-activedescendant", e);
              });
            });
          },
          onExecute: function onExecute(t, o) {
            return e.lazyTypeaheadComp.get().map(function (e) {
              return Ir(e, x_(), {
                item: o
              }), !0;
            });
          },
          onHover: function onHover(t, o) {
            e.previewing.set(!1), e.lazyTypeaheadComp.get().each(function (t) {
              e.model.populateFromBrowse && b_(e.model, t, o);
            });
          }
        };
      }
    })]),
    k_ = bm({
      name: "Typeahead",
      configFields: w_(),
      partFields: S_(),
      factory: function factory(e, t, o, n) {
        var s = function s(t, o, _s25) {
            e.previewing.set(!1);
            var r = uw.getCoupled(t, "sandbox");
            if (Xd.isOpen(r)) wm.getCurrent(r).each(function (e) {
              Gm.getHighlighted(e).fold(function () {
                _s25(e);
              }, function () {
                zr(r, e.element, "keydown", o);
              });
            });else {
              var _o30 = function _o30(e) {
                wm.getCurrent(e).each(_s25);
              };
              ww(e, a(t), t, r, n, _o30, zh.HighlightMenuAndItem).get(b);
            }
          },
          r = Ib(e),
          a = function a(e) {
            return function (t) {
              return t.map(function (t) {
                var o = fe(t.menus),
                  n = X(o, function (e) {
                    return U(e.items, function (e) {
                      return "item" === e.type;
                    });
                  });
                return pu.getState(e).update(H(n, function (e) {
                  return e.data;
                })), t;
              });
            };
          },
          i = function i(e) {
            return wm.getCurrent(e);
          },
          l = "typeaheadevents",
          c = [oh.config({}), pu.config({
            onSetValue: e.onSetValue,
            store: _objectSpread({
              mode: "dataset",
              getDataKey: function getDataKey(e) {
                return $a(e.element);
              },
              getFallbackEntry: function getFallbackEntry(e) {
                return {
                  value: e,
                  meta: {}
                };
              },
              setValue: function setValue(t, o) {
                qa(t.element, e.model.getDisplayText(o));
              }
            }, e.initialData.map(function (e) {
              return Ms("initialValue", e);
            }).getOr({}))
          }), f_.config({
            stream: {
              mode: "throttle",
              delay: e.responseTime,
              stopEvent: !1
            },
            onStream: function onStream(t, o) {
              var s = uw.getCoupled(t, "sandbox");
              if (oh.isFocused(t) && $a(t.element).length >= e.minChars) {
                var _o31 = i(s).bind(function (e) {
                  return Gm.getHighlighted(e).map(pu.getValue);
                });
                e.previewing.set(!0);
                var _r12 = function _r12(t) {
                  i(s).each(function (t) {
                    _o31.fold(function () {
                      e.model.selectsOver && Gm.highlightFirst(t);
                    }, function (e) {
                      Gm.highlightBy(t, function (t) {
                        return pu.getValue(t).value === e.value;
                      }), Gm.getHighlighted(t).orThunk(function () {
                        return Gm.highlightFirst(t), A.none();
                      });
                    });
                  });
                };
                ww(e, a(t), t, s, n, _r12, zh.HighlightJustMenu).get(b);
              }
            },
            cancelEvent: fr()
          }), Pp.config({
            mode: "special",
            onDown: function onDown(e, t) {
              return s(e, t, Gm.highlightFirst), A.some(!0);
            },
            onEscape: function onEscape(e) {
              var t = uw.getCoupled(e, "sandbox");
              return Xd.isOpen(t) ? (Xd.close(t), A.some(!0)) : A.none();
            },
            onUp: function onUp(e, t) {
              return s(e, t, Gm.highlightLast), A.some(!0);
            },
            onEnter: function onEnter(t) {
              var o = uw.getCoupled(t, "sandbox"),
                n = Xd.isOpen(o);
              if (n && !e.previewing.get()) return i(o).bind(function (e) {
                return Gm.getHighlighted(e);
              }).map(function (e) {
                return Ir(t, x_(), {
                  item: e
                }), !0;
              });
              {
                var _s26 = pu.getValue(t);
                return Fr(t, fr()), e.onExecute(o, t, _s26), n && Xd.close(o), A.some(!0);
              }
            }
          }), dh.config({
            toggleClass: e.markers.openClass,
            aria: {
              mode: "expanded"
            }
          }), uw.config({
            others: {
              sandbox: function sandbox(t) {
                return _w(e, t, {
                  onOpen: function onOpen() {
                    return dh.on(t);
                  },
                  onClose: function onClose() {
                    e.lazyTypeaheadComp.get().each(function (e) {
                      return Et(e.element, "aria-activedescendant");
                    }), dh.off(t);
                  }
                });
              }
            }
          }), Jp(l, [Kr(function (t) {
            e.lazyTypeaheadComp.set(A.some(t));
          }), Jr(function (t) {
            e.lazyTypeaheadComp.set(A.none());
          }), Qr(function (t) {
            var o = b;
            kw(e, a(t), t, n, o, zh.HighlightMenuAndItem).get(b);
          }), Ur(x_(), function (t, o) {
            var n = uw.getCoupled(t, "sandbox");
            b_(e.model, t, o.event.item), Fr(t, fr()), e.onItemExecute(t, n, o.event.item, pu.getValue(t)), Xd.close(n), y_(t);
          })].concat(e.dismissOnBlur ? [Ur(lr(), function (e) {
            var t = uw.getCoupled(e, "sandbox");
            Rl(t.element).isNone() && Xd.close(t);
          })] : []))],
          d = _objectSpread(_defineProperty({}, kr(), [pu.name(), f_.name(), l]), e.eventOrder);
        return {
          uid: e.uid,
          dom: Nb(fn(e, {
            inputAttributes: {
              role: "combobox",
              "aria-autocomplete": "list",
              "aria-haspopup": "true"
            }
          })),
          behaviours: _objectSpread(_objectSpread({}, r), bu(e.typeaheadBehaviours, c)),
          eventOrder: d
        };
      }
    }),
    C_ = function C_(e) {
      return _objectSpread(_objectSpread({}, e), {}, {
        toCached: function toCached() {
          return C_(e.toCached());
        },
        bindFuture: function bindFuture(t) {
          return C_(e.bind(function (e) {
            return e.fold(function (e) {
              return bw(sn.error(e));
            }, function (e) {
              return t(e);
            });
          }));
        },
        bindResult: function bindResult(t) {
          return C_(e.map(function (e) {
            return e.bind(t);
          }));
        },
        mapResult: function mapResult(t) {
          return C_(e.map(function (e) {
            return e.map(t);
          }));
        },
        mapError: function mapError(t) {
          return C_(e.map(function (e) {
            return e.mapError(t);
          }));
        },
        foldResult: function foldResult(t, o) {
          return e.map(function (e) {
            return e.fold(t, o);
          });
        },
        withTimeout: function withTimeout(t, o) {
          return C_(fw(function (n) {
            var s = !1;
            var r = setTimeout(function () {
              s = !0, n(sn.error(o()));
            }, t);
            e.get(function (e) {
              s || (clearTimeout(r), n(e));
            });
          }));
        }
      });
    },
    O_ = function O_(e) {
      return C_(fw(e));
    },
    __ = function __(e, t) {
      var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
      var n = arguments.length > 3 ? arguments[3] : undefined;
      var s = arguments.length > 4 ? arguments[4] : undefined;
      var r = arguments.length > 5 ? arguments[5] : undefined;
      var a = t.fold(function () {
          return {};
        }, function (e) {
          return {
            action: e
          };
        }),
        i = _objectSpread({
          buttonBehaviours: kl([ky(function () {
            return !e.enabled || r.isDisabled();
          }), Sy(), cS.config({}), Jp("button press", [Pr("click"), Pr("mousedown")])].concat(o)),
          eventOrder: {
            click: ["button press", "alloy.base.behaviour"],
            mousedown: ["button press", "alloy.base.behaviour"]
          }
        }, a),
        l = fn(i, {
          dom: n
        });
      return fn(l, {
        components: s
      });
    },
    T_ = function T_(e, t, o) {
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];
      var s = {
          tag: "button",
          classes: ["tox-tbtn"],
          attributes: e.tooltip.map(function (e) {
            return {
              "aria-label": o.translate(e),
              title: o.translate(e)
            };
          }).getOr({})
        },
        r = e.icon.map(function (e) {
          return hO(e, o.icons);
        }),
        a = Dy([r]);
      return __(e, t, n, s, a, o);
    },
    E_ = function E_(e) {
      switch (e) {
        case "primary":
          return ["tox-button"];
        case "toolbar":
          return ["tox-tbtn"];
        default:
          return ["tox-button", "tox-button--secondary"];
      }
    },
    A_ = function A_(e, t, o) {
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];
      var s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];
      var r = o.translate(e.text),
        a = e.icon.map(function (e) {
          return hO(e, o.icons);
        }),
        i = [a.getOrThunk(function () {
          return ti(r);
        })],
        l = e.buttonType.getOr(e.primary || e.borderless ? "primary" : "secondary"),
        c = [].concat(_toConsumableArray(E_(l)), _toConsumableArray(a.isSome() ? ["tox-button--icon"] : []), _toConsumableArray(e.borderless ? ["tox-button--naked"] : []), _toConsumableArray(s));
      return __(e, t, n, {
        tag: "button",
        classes: c,
        attributes: {
          title: r
        }
      }, i, o);
    },
    M_ = function M_(e, t, o) {
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];
      var s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];
      var r = A_(e, A.some(t), o, n, s);
      return Wh.sketch(r);
    },
    D_ = function D_(e, t) {
      return function (o) {
        "custom" === t ? Ir(o, vS, {
          name: e,
          value: {}
        }) : "submit" === t ? Fr(o, yS) : "cancel" === t ? Fr(o, bS) : console.error("Unknown button type: ", t);
      };
    },
    B_ = function B_(e, t, o) {
      if (function (e, t) {
        return "menu" === t;
      }(0, t)) {
        var _t36 = function _t36() {
            return _r13;
          },
          _n35 = e,
          _s27 = _objectSpread(_objectSpread({}, e), {}, {
            type: "menubutton",
            search: A.none(),
            onSetup: function onSetup(t) {
              return t.setEnabled(e.enabled), b;
            },
            fetch: o_(_n35.items, _t36, o)
          }),
          _r13 = jh(t_(_s27, "tox-tbtn", o, A.none()));
        return _r13.asSpec();
      }
      if (function (e, t) {
        return "custom" === t || "cancel" === t || "submit" === t;
      }(0, t)) {
        var _n36 = D_(e.name, t),
          _s28 = _objectSpread(_objectSpread({}, e), {}, {
            borderless: !1
          });
        return M_(_s28, _n36, o.shared.providers, []);
      }
      if (function (e, t) {
        return "togglebutton" === t;
      }(0, t)) return function (e, t) {
        var o, n;
        var s = e.icon.map(function (e) {
            return fO(e, t.icons);
          }).map(jh),
          r = e.buttonType.getOr(e.primary ? "primary" : "secondary"),
          a = _objectSpread(_objectSpread({}, e), {}, {
            name: null !== (o = e.name) && void 0 !== o ? o : "",
            primary: "primary" === r,
            tooltip: A.from(e.tooltip),
            enabled: null !== (n = e.enabled) && void 0 !== n && n,
            borderless: !1
          }),
          i = a.tooltip.map(function (e) {
            return {
              "aria-label": t.translate(e),
              title: t.translate(e)
            };
          }).getOr({}),
          l = E_(null != r ? r : "secondary"),
          c = e.icon.isSome() && e.text.isSome(),
          d = {
            tag: "button",
            classes: [].concat(_toConsumableArray(l.concat(e.icon.isSome() ? ["tox-button--icon"] : [])), _toConsumableArray(e.active ? ["tox-button--enabled"] : []), _toConsumableArray(c ? ["tox-button--icon-and-text"] : [])),
            attributes: i
          },
          u = t.translate(e.text.getOr("")),
          m = ti(u),
          g = [].concat(_toConsumableArray(Dy([s.map(function (e) {
            return e.asSpec();
          })])), _toConsumableArray(e.text.isSome() ? [m] : [])),
          p = __(a, A.some(function (o) {
            Ir(o, vS, {
              name: e.name,
              value: {
                setIcon: function setIcon(e) {
                  s.map(function (n) {
                    return n.getOpt(o).each(function (o) {
                      Kp.set(o, [fO(e, t.icons)]);
                    });
                  });
                }
              }
            });
          }), [], d, g, t);
        return Wh.sketch(p);
      }(e, o.shared.providers);
      throw console.error("Unknown footer button type: ", t), new Error("Unknown footer button type");
    },
    F_ = {
      type: "separator"
    },
    I_ = function I_(e) {
      return {
        type: "menuitem",
        value: e.url,
        text: e.title,
        meta: {
          attach: e.attach
        },
        onAction: b
      };
    },
    R_ = function R_(e, t) {
      return {
        type: "menuitem",
        value: t,
        text: e,
        meta: {
          attach: void 0
        },
        onAction: b
      };
    },
    N_ = function N_(e, t) {
      return function (e) {
        return H(e, I_);
      }(function (e, t) {
        return U(t, function (t) {
          return t.type === e;
        });
      }(e, t));
    },
    V_ = function V_(e) {
      return N_("header", e.targets);
    },
    z_ = function z_(e) {
      return N_("anchor", e.targets);
    },
    H_ = function H_(e) {
      return A.from(e.anchorTop).map(function (e) {
        return R_("<top>", e);
      }).toArray();
    },
    L_ = function L_(e) {
      return A.from(e.anchorBottom).map(function (e) {
        return R_("<bottom>", e);
      }).toArray();
    },
    P_ = function P_(e, t) {
      var o = e.toLowerCase();
      return U(t, function (e) {
        var t;
        var n = void 0 !== e.meta && void 0 !== e.meta.text ? e.meta.text : e.text,
          s = null !== (t = e.value) && void 0 !== t ? t : "";
        return Te(n.toLowerCase(), o) || Te(s.toLowerCase(), o);
      });
    },
    U_ = la("aria-invalid"),
    W_ = function W_(e, t) {
      e.dom.checked = t;
    },
    j_ = function j_(e) {
      return e.dom.checked;
    },
    G_ = function G_(e) {
      return function (t, o, n, s) {
        return be(o, "name").fold(function () {
          return e(o, s, A.none());
        }, function (r) {
          return t.field(r, e(o, s, be(n, r)));
        });
      };
    },
    $_ = {
      bar: G_(function (e, t) {
        return function (e, t) {
          return {
            dom: {
              tag: "div",
              classes: ["tox-bar", "tox-form__controls-h-stack"]
            },
            components: H(e.items, t.interpreter)
          };
        }(e, t.shared);
      }),
      collection: G_(function (e, t, o) {
        return function (e, t, o) {
          var n = e.label.map(function (e) {
              return pS(e, t);
            }),
            s = function s(e) {
              return function (t, o) {
                hi(o.event.target, "[data-collection-item-value]").each(function (n) {
                  e(t, o, n, Ot(n, "data-collection-item-value"));
                });
              };
            },
            r = s(function (o, n, s, r) {
              n.stop(), t.isDisabled() || Ir(o, vS, {
                name: e.name,
                value: r
              });
            }),
            a = [Ur(qs(), s(function (e, t, o) {
              Dl(o);
            })), Ur(er(), r), Ur(gr(), r), Ur(Xs(), s(function (e, t, o) {
              pi(e.element, "." + kb).each(function (e) {
                Pa(e, kb);
              }), La(o, kb);
            })), Ur(Ys(), s(function (e) {
              pi(e.element, "." + kb).each(function (e) {
                Pa(e, kb);
              });
            })), Qr(s(function (t, o, n, s) {
              Ir(t, vS, {
                name: e.name,
                value: s
              });
            }))],
            i = function i(e, t) {
              return H(Xc(e.element, ".tox-collection__item"), t);
            },
            l = aS.parts.field({
              dom: {
                tag: "div",
                classes: ["tox-collection"].concat(1 !== e.columns ? ["tox-collection--grid"] : ["tox-collection--list"])
              },
              components: [],
              factory: {
                sketch: w
              },
              behaviours: kl([Rm.config({
                disabled: t.isDisabled,
                onDisabled: function onDisabled(e) {
                  i(e, function (e) {
                    La(e, "tox-collection__item--state-disabled"), kt(e, "aria-disabled", !0);
                  });
                },
                onEnabled: function onEnabled(e) {
                  i(e, function (e) {
                    Pa(e, "tox-collection__item--state-disabled"), Et(e, "aria-disabled");
                  });
                }
              }), Sy(), Kp.config({}), pu.config({
                store: {
                  mode: "memory",
                  initialValue: o.getOr([])
                },
                onSetValue: function onSetValue(o, n) {
                  (function (o, n) {
                    var s = H(n, function (o) {
                        var n = Gh.translate(o.text),
                          s = 1 === e.columns ? "<div class=\"tox-collection__item-label\">".concat(n, "</div>") : "",
                          r = "<div class=\"tox-collection__item-icon\">".concat(o.icon, "</div>"),
                          a = {
                            _: " ",
                            " - ": " ",
                            "-": " "
                          },
                          i = n.replace(/\_| \- |\-/g, function (e) {
                            return a[e];
                          });
                        return "<div class=\"tox-collection__item".concat(t.isDisabled() ? " tox-collection__item--state-disabled" : "", "\" tabindex=\"-1\" data-collection-item-value=\"").concat(dS.encodeAllRaw(o.value), "\" title=\"").concat(i, "\" aria-label=\"").concat(i, "\">").concat(r).concat(s, "</div>");
                      }),
                      r = "auto" !== e.columns && e.columns > 1 ? z(s, e.columns) : [s],
                      a = H(r, function (e) {
                        return "<div class=\"tox-collection__group\">".concat(e.join(""), "</div>");
                      });
                    ta(o.element, a.join(""));
                  })(o, n), "auto" === e.columns && iy(o, 5, "tox-collection__item").each(function (_ref17) {
                    var e = _ref17.numRows,
                      t = _ref17.numColumns;
                    Pp.setGridSize(o, e, t);
                  }), Fr(o, kS);
                }
              }), cS.config({}), Pp.config((c = e.columns, 1 === c ? {
                mode: "menu",
                moveOnTab: !1,
                selector: ".tox-collection__item"
              } : "auto" === c ? {
                mode: "flatgrid",
                selector: ".tox-collection__item",
                initSize: {
                  numColumns: 1,
                  numRows: 1
                }
              } : {
                mode: "matrix",
                selectors: {
                  row: ".tox-collection__group",
                  cell: ".".concat(fb)
                }
              })), Jp("collection-events", a)]),
              eventOrder: _defineProperty({}, ur(), ["disabling", "alloy.base.behaviour", "collection-events"])
            });
          var c;
          return uS(n, l, ["tox-form__group--collection"], []);
        }(e, t.shared.providers, o);
      }),
      alertbanner: G_(function (e, t) {
        return function (e, t) {
          var o = Jh(e.icon, t.icons);
          return oS.sketch({
            dom: {
              tag: "div",
              attributes: {
                role: "alert"
              },
              classes: ["tox-notification", "tox-notification--in", "tox-notification--".concat(e.level)]
            },
            components: [{
              dom: {
                tag: "div",
                classes: ["tox-notification__icon"],
                innerHtml: e.url ? void 0 : o
              },
              components: e.url ? [Wh.sketch({
                dom: {
                  tag: "button",
                  classes: ["tox-button", "tox-button--naked", "tox-button--icon"],
                  innerHtml: o,
                  attributes: {
                    title: t.translate(e.iconTooltip)
                  }
                },
                action: function action(t) {
                  return Ir(t, vS, {
                    name: "alert-banner",
                    value: e.url
                  });
                },
                buttonBehaviours: kl([Zh()])
              })] : void 0
            }, {
              dom: {
                tag: "div",
                classes: ["tox-notification__body"],
                innerHtml: t.translate(e.text)
              }
            }]
          });
        }(e, t.shared.providers);
      }),
      input: G_(function (e, t, o) {
        return function (e, t, o) {
          return VO({
            name: e.name,
            multiline: !1,
            label: e.label,
            inputMode: e.inputMode,
            placeholder: e.placeholder,
            flex: !1,
            disabled: !e.enabled,
            classname: "tox-textfield",
            validation: A.none(),
            maximized: e.maximized,
            data: o
          }, t);
        }(e, t.shared.providers, o);
      }),
      textarea: G_(function (e, t, o) {
        return function (e, t, o) {
          return VO({
            name: e.name,
            multiline: !0,
            label: e.label,
            inputMode: A.none(),
            placeholder: e.placeholder,
            flex: !0,
            disabled: !e.enabled,
            classname: "tox-textarea",
            validation: A.none(),
            maximized: e.maximized,
            data: o
          }, t);
        }(e, t.shared.providers, o);
      }),
      label: G_(function (e, t) {
        return function (e, t) {
          var o = "tox-label";
          return {
            dom: {
              tag: "div",
              classes: ["tox-form__group"]
            },
            components: [{
              dom: {
                tag: "label",
                classes: [o].concat(_toConsumableArray("center" === e.align ? ["".concat(o, "--center")] : []), _toConsumableArray("end" === e.align ? ["".concat(o, "--end")] : []))
              },
              components: [ti(t.providers.translate(e.label))]
            }].concat(_toConsumableArray(H(e.items, t.interpreter))),
            behaviours: kl([DC(), Kp.config({}), (n = A.none(), NC(n, ea, ta)), Pp.config({
              mode: "acyclic"
            })])
          };
          var n;
        }(e, t.shared);
      }),
      iframe: (vE = function vE(e, t, o) {
        return function (e, t, o) {
          var n = "tox-dialog__iframe",
            s = e.transparent ? [] : ["".concat(n, "--opaque")],
            r = e.border ? ["tox-navobj-bordered"] : [],
            a = _objectSpread(_objectSpread(_objectSpread({}, e.label.map(function (e) {
              return {
                title: e
              };
            }).getOr({})), o.map(function (e) {
              return {
                srcdoc: e
              };
            }).getOr({})), e.sandboxed ? {
              sandbox: "allow-scripts allow-same-origin"
            } : {}),
            i = function (e, t) {
              var o = Es(e.getOr(""));
              return {
                getValue: function getValue(e) {
                  return o.get();
                },
                setValue: function setValue(e, n) {
                  if (o.get() !== n) {
                    var _o32 = e.element,
                      _s29 = function _s29() {
                        return kt(_o32, "srcdoc", n);
                      };
                    t ? cO.fold(x(lO), function (e) {
                      return e.throttle;
                    })(_o32, n, _s29) : _s29();
                  }
                  o.set(n);
                }
              };
            }(o, e.streamContent),
            l = e.label.map(function (e) {
              return pS(e, t);
            }),
            c = aS.parts.field({
              factory: {
                sketch: function sketch(e) {
                  return GC(A.from(r), {
                    uid: e.uid,
                    dom: {
                      tag: "iframe",
                      attributes: a,
                      classes: [n].concat(s)
                    },
                    behaviours: kl([cS.config({}), oh.config({}), RC(o, i.getValue, i.setValue), Al.config({
                      channels: _defineProperty({}, eO, {
                        onReceive: function onReceive(e, t) {
                          t.newFocus.each(function (t) {
                            rt(e.element).each(function (o) {
                              (Ze(e.element, t) ? La : Pa)(o, "tox-navobj-bordered-focus");
                            });
                          });
                        }
                      })
                    })])
                  });
                }
              }
            });
          return uS(l, c, ["tox-form__group--stretched"], []);
        }(e, t.shared.providers, o);
      }, function (e, t, o, n) {
        var s = fn(t, {
          source: "dynamic"
        });
        return G_(vE)(e, s, o, n);
      }),
      button: G_(function (e, t) {
        return function (e, t) {
          var o = D_(e.name, "custom");
          return n = A.none(), s = aS.parts.field(_objectSpread({
            factory: Wh
          }, A_(e, A.some(o), t, [VC(""), DC()]))), uS(n, s, [], []);
          var n, s;
        }(e, t.shared.providers);
      }),
      checkbox: G_(function (e, t, o) {
        return function (e, t, o) {
          var n = function n(e) {
              return e.element.dom.click(), A.some(!0);
            },
            s = aS.parts.field({
              factory: {
                sketch: w
              },
              dom: {
                tag: "input",
                classes: ["tox-checkbox__input"],
                attributes: {
                  type: "checkbox"
                }
              },
              behaviours: kl([DC(), Rm.config({
                disabled: function disabled() {
                  return !e.enabled || t.isDisabled();
                },
                onDisabled: function onDisabled(e) {
                  rt(e.element).each(function (e) {
                    return La(e, "tox-checkbox--disabled");
                  });
                },
                onEnabled: function onEnabled(e) {
                  rt(e.element).each(function (e) {
                    return Pa(e, "tox-checkbox--disabled");
                  });
                }
              }), cS.config({}), oh.config({}), NC(o, j_, W_), Pp.config({
                mode: "special",
                onEnter: n,
                onSpace: n,
                stopSpaceKeyup: !0
              }), Jp("checkbox-events", [Ur(Qs(), function (t, o) {
                Ir(t, hS, {
                  name: e.name
                });
              })])])
            }),
            r = aS.parts.label({
              dom: {
                tag: "span",
                classes: ["tox-checkbox__label"]
              },
              components: [ti(t.translate(e.label))],
              behaviours: kl([IS.config({})])
            }),
            a = function a(e) {
              return ef("checked" === e ? "selected" : "unselected", {
                tag: "span",
                classes: ["tox-icon", "tox-checkbox-icon__" + e]
              }, t.icons);
            },
            i = jh({
              dom: {
                tag: "div",
                classes: ["tox-checkbox__icons"]
              },
              components: [a("checked"), a("unchecked")]
            });
          return aS.sketch({
            dom: {
              tag: "label",
              classes: ["tox-checkbox"]
            },
            components: [s, i.asSpec(), r],
            fieldBehaviours: kl([Rm.config({
              disabled: function disabled() {
                return !e.enabled || t.isDisabled();
              }
            }), Sy()])
          });
        }(e, t.shared.providers, o);
      }),
      colorinput: G_(function (e, t, o) {
        return function (e, t, o, n) {
          var s = aS.parts.field({
              factory: Vb,
              inputClasses: ["tox-textfield"],
              data: n,
              onSetValue: function onSetValue(e) {
                return FS.run(e).get(b);
              },
              inputBehaviours: kl([Rm.config({
                disabled: t.providers.isDisabled
              }), Sy(), cS.config({}), FS.config({
                invalidClass: "tox-textbox-field-invalid",
                getRoot: function getRoot(e) {
                  return rt(e.element);
                },
                notify: {
                  onValid: function onValid(e) {
                    var t = pu.getValue(e);
                    Ir(e, RS, {
                      color: t
                    });
                  }
                },
                validator: {
                  validateOnLoad: !1,
                  validate: function validate(e) {
                    var t = pu.getValue(e);
                    if (0 === t.length) return bw(sn.value(!0));
                    {
                      var _e22 = Re("span");
                      Dt(_e22, "background-color", t);
                      var _o33 = Nt(_e22, "background-color").fold(function () {
                        return sn.error("blah");
                      }, function (e) {
                        return sn.value(t);
                      });
                      return bw(_o33);
                    }
                  }
                }
              })]),
              selectOnFocus: !1
            }),
            r = e.label.map(function (e) {
              return pS(e, t.providers);
            }),
            a = function a(e, t) {
              Ir(e, NS, {
                value: t
              });
            },
            i = jh(function (e, t) {
              return Dw.sketch({
                dom: e.dom,
                components: e.components,
                toggleClass: "mce-active",
                dropdownBehaviours: kl([ky(t.providers.isDisabled), Sy(), IS.config({}), cS.config({})]),
                layouts: e.layouts,
                sandboxClasses: ["tox-dialog__popups"],
                lazySink: t.getSink,
                fetch: function fetch(o) {
                  return fw(function (t) {
                    return e.fetch(t);
                  }).map(function (n) {
                    return A.from(Hw(fn(Zx(la("menu-value"), n, function (t) {
                      e.onItemAction(o, t);
                    }, e.columns, e.presets, pb.CLOSE_ON_EXECUTE, T, t.providers), {
                      movement: ew(e.columns, e.presets)
                    })));
                  });
                },
                parts: {
                  menu: Bb(0, 0, e.presets)
                }
              });
            }({
              dom: {
                tag: "span",
                attributes: {
                  "aria-label": t.providers.translate("Color swatch")
                }
              },
              layouts: {
                onRtl: function onRtl() {
                  return [rl, sl, cl];
                },
                onLtr: function onLtr() {
                  return [sl, rl, cl];
                }
              },
              components: [],
              fetch: $x(o.getColors(e.storageKey), e.storageKey, o.hasCustomColors()),
              columns: o.getColorCols(e.storageKey),
              presets: "color",
              onItemAction: function onItemAction(t, n) {
                i.getOpt(t).each(function (t) {
                  "custom" === n ? o.colorPicker(function (o) {
                    o.fold(function () {
                      return Fr(t, VS);
                    }, function (o) {
                      a(t, o), Ox(e.storageKey, o);
                    });
                  }, "#ffffff") : a(t, "remove" === n ? "" : n);
                });
              }
            }, t));
          return aS.sketch({
            dom: {
              tag: "div",
              classes: ["tox-form__group"]
            },
            components: r.toArray().concat([{
              dom: {
                tag: "div",
                classes: ["tox-color-input"]
              },
              components: [s, i.asSpec()]
            }]),
            fieldBehaviours: kl([Jp("form-field-events", [Ur(RS, function (t, o) {
              i.getOpt(t).each(function (e) {
                Dt(e.element, "background-color", o.event.color);
              }), Ir(t, hS, {
                name: e.name
              });
            }), Ur(NS, function (e, t) {
              aS.getField(e).each(function (o) {
                pu.setValue(o, t.event.value), wm.getCurrent(e).each(oh.focus);
              });
            }), Ur(VS, function (e, t) {
              aS.getField(e).each(function (t) {
                wm.getCurrent(e).each(oh.focus);
              });
            })])])
          });
        }(e, t.shared, t.colorinput, o);
      }),
      colorpicker: G_(function (e, t, o) {
        return function (e, t, o) {
          var n = function n(e) {
              return "tox-" + e;
            },
            s = MC(function (e) {
              return function (t) {
                return e.translate(zC[t]);
              };
            }(t), n),
            r = jh(s.sketch({
              dom: {
                tag: "div",
                classes: [n("color-picker-container")],
                attributes: {
                  role: "presentation"
                }
              },
              onValidHex: function onValidHex(e) {
                Ir(e, vS, {
                  name: "hex-valid",
                  value: !0
                });
              },
              onInvalidHex: function onInvalidHex(e) {
                Ir(e, vS, {
                  name: "hex-valid",
                  value: !1
                });
              }
            }));
          return {
            dom: {
              tag: "div"
            },
            components: [r.asSpec()],
            behaviours: kl([RC(o, function (e) {
              var t = r.get(e);
              return wm.getCurrent(t).bind(function (e) {
                return pu.getValue(e).hex;
              }).map(function (e) {
                return "#" + _e(e, "#");
              }).getOr("");
            }, function (e, t) {
              var o = A.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t)).bind(function (e) {
                  return te(e, 1);
                }),
                n = r.get(e);
              wm.getCurrent(n).fold(function () {
                console.log("Can not find form");
              }, function (e) {
                pu.setValue(e, {
                  hex: o.getOr("")
                }), CC.getField(e, "hex").each(function (e) {
                  Fr(e, Zs());
                });
              });
            }), DC()])
          };
        }(0, t.shared.providers, o);
      }),
      dropzone: G_(function (e, t, o) {
        return function (e, t, o) {
          var n = function n(e, t) {
              t.stop();
            },
            s = function s(e) {
              return function (t, o) {
                L(e, function (e) {
                  e(t, o);
                });
              };
            },
            r = function r(e, t) {
              var o;
              if (!Rm.isDisabled(e)) {
                var _n37 = t.event.raw;
                i(e, null === (o = _n37.dataTransfer) || void 0 === o ? void 0 : o.files);
              }
            },
            a = function a(e, t) {
              var o = t.event.raw.target;
              i(e, o.files);
            },
            i = function i(o, n) {
              n && (pu.setValue(o, function (e, t) {
                var o = LC.explode(t.getOption("images_file_types"));
                return U(se(e), function (e) {
                  return N(o, function (t) {
                    return Ae(e.name.toLowerCase(), ".".concat(t.toLowerCase()));
                  });
                });
              }(n, t)), Ir(o, hS, {
                name: e.name
              }));
            },
            l = jh({
              dom: {
                tag: "input",
                attributes: {
                  type: "file",
                  accept: "image/*"
                },
                styles: {
                  display: "none"
                }
              },
              behaviours: kl([Jp("input-file-events", [qr(er()), qr(gr())])])
            }),
            c = e.label.map(function (e) {
              return pS(e, t);
            }),
            d = aS.parts.field({
              factory: {
                sketch: function sketch(e) {
                  return {
                    uid: e.uid,
                    dom: {
                      tag: "div",
                      classes: ["tox-dropzone-container"]
                    },
                    behaviours: kl([VC(o.getOr([])), DC(), Rm.config({}), dh.config({
                      toggleClass: "dragenter",
                      toggleOnExecute: !1
                    }), Jp("dropzone-events", [Ur("dragenter", s([n, dh.toggle])), Ur("dragleave", s([n, dh.toggle])), Ur("dragover", n), Ur("drop", s([n, r])), Ur(Qs(), a)])]),
                    components: [{
                      dom: {
                        tag: "div",
                        classes: ["tox-dropzone"],
                        styles: {}
                      },
                      components: [{
                        dom: {
                          tag: "p"
                        },
                        components: [ti(t.translate("Drop an image here"))]
                      }, Wh.sketch({
                        dom: {
                          tag: "button",
                          styles: {
                            position: "relative"
                          },
                          classes: ["tox-button", "tox-button--secondary"]
                        },
                        components: [ti(t.translate("Browse for an image")), l.asSpec()],
                        action: function action(e) {
                          l.get(e).element.dom.click();
                        },
                        buttonBehaviours: kl([cS.config({}), ky(t.isDisabled), Sy()])
                      })]
                    }]
                  };
                }
              }
            });
          return uS(c, d, ["tox-form__group--stretched"], []);
        }(e, t.shared.providers, o);
      }),
      grid: G_(function (e, t) {
        return function (e, t) {
          return {
            dom: {
              tag: "div",
              classes: ["tox-form__grid", "tox-form__grid--".concat(e.columns, "col")]
            },
            components: H(e.items, t.interpreter)
          };
        }(e, t.shared);
      }),
      listbox: G_(function (e, t, o) {
        return function (e, t, o) {
          var n = t.shared.providers,
            s = o.bind(function (t) {
              return EO(e.items, t);
            }).orThunk(function () {
              return oe(e.items).filter(OO);
            }),
            r = e.label.map(function (e) {
              return pS(e, n);
            }),
            a = aS.parts.field({
              dom: {},
              factory: {
                sketch: function sketch(o) {
                  return xO({
                    uid: o.uid,
                    text: s.map(function (e) {
                      return e.text;
                    }),
                    icon: A.none(),
                    tooltip: e.label,
                    role: A.none(),
                    fetch: function fetch(o, n) {
                      var s = TO(o, e.name, e.items, pu.getValue(o));
                      n(CO(s, pb.CLOSE_ON_EXECUTE, t, {
                        isHorizontalMenu: !1,
                        search: A.none()
                      }));
                    },
                    onSetup: x(b),
                    getApi: x({}),
                    columns: 1,
                    presets: "normal",
                    classes: [],
                    dropdownBehaviours: [cS.config({}), RC(s.map(function (e) {
                      return e.value;
                    }), function (e) {
                      return Ot(e.element, _O);
                    }, function (t, o) {
                      EO(e.items, o).each(function (e) {
                        kt(t.element, _O, e.value), Ir(t, vO, {
                          text: e.text
                        });
                      });
                    })]
                  }, "tox-listbox", t.shared);
                }
              }
            }),
            i = {
              dom: {
                tag: "div",
                classes: ["tox-listboxfield"]
              },
              components: [a]
            };
          return aS.sketch({
            dom: {
              tag: "div",
              classes: ["tox-form__group"]
            },
            components: q([r.toArray(), [i]]),
            fieldBehaviours: kl([Rm.config({
              disabled: x(!e.enabled),
              onDisabled: function onDisabled(e) {
                aS.getField(e).each(Rm.disable);
              },
              onEnabled: function onEnabled(e) {
                aS.getField(e).each(Rm.enable);
              }
            })])
          });
        }(e, t, o);
      }),
      selectbox: G_(function (e, t, o) {
        return function (e, t, o) {
          var n = H(e.items, function (e) {
              return {
                text: t.translate(e.text),
                value: e.value
              };
            }),
            s = e.label.map(function (e) {
              return pS(e, t);
            }),
            r = aS.parts.field(_objectSpread(_objectSpread({
              dom: {}
            }, o.map(function (e) {
              return {
                data: e
              };
            }).getOr({})), {}, {
              selectAttributes: {
                size: e.size
              },
              options: n,
              factory: AO,
              selectBehaviours: kl([Rm.config({
                disabled: function disabled() {
                  return !e.enabled || t.isDisabled();
                }
              }), cS.config({}), Jp("selectbox-change", [Ur(Qs(), function (t, o) {
                Ir(t, hS, {
                  name: e.name
                });
              })])])
            })),
            a = e.size > 1 ? A.none() : A.some(ef("chevron-down", {
              tag: "div",
              classes: ["tox-selectfield__icon-js"]
            }, t.icons)),
            i = {
              dom: {
                tag: "div",
                classes: ["tox-selectfield"]
              },
              components: q([[r], a.toArray()])
            };
          return aS.sketch({
            dom: {
              tag: "div",
              classes: ["tox-form__group"]
            },
            components: q([s.toArray(), [i]]),
            fieldBehaviours: kl([Rm.config({
              disabled: function disabled() {
                return !e.enabled || t.isDisabled();
              },
              onDisabled: function onDisabled(e) {
                aS.getField(e).each(Rm.disable);
              },
              onEnabled: function onEnabled(e) {
                aS.getField(e).each(Rm.enable);
              }
            }), Sy()])
          });
        }(e, t.shared.providers, o);
      }),
      sizeinput: G_(function (e, t) {
        return function (e, t) {
          var o = NO;
          var n = la("ratio-event"),
            s = function s(e) {
              return ef(e, {
                tag: "span",
                classes: ["tox-icon", "tox-lock-icon__" + e]
              }, t.icons);
            },
            r = FO.parts.lock({
              dom: {
                tag: "button",
                classes: ["tox-lock", "tox-button", "tox-button--naked", "tox-button--icon"],
                attributes: {
                  title: t.translate(e.label.getOr("Constrain proportions"))
                }
              },
              components: [s("lock"), s("unlock")],
              buttonBehaviours: kl([Rm.config({
                disabled: function disabled() {
                  return !e.enabled || t.isDisabled();
                }
              }), Sy(), cS.config({})])
            }),
            a = function a(e) {
              return {
                dom: {
                  tag: "div",
                  classes: ["tox-form__group"]
                },
                components: e
              };
            },
            i = function i(o) {
              return aS.parts.field({
                factory: Vb,
                inputClasses: ["tox-textfield"],
                inputBehaviours: kl([Rm.config({
                  disabled: function disabled() {
                    return !e.enabled || t.isDisabled();
                  }
                }), Sy(), cS.config({}), Jp("size-input-events", [Ur(Xs(), function (e, t) {
                  Ir(e, n, {
                    isField1: o
                  });
                }), Ur(Qs(), function (t, o) {
                  Ir(t, hS, {
                    name: e.name
                  });
                })])]),
                selectOnFocus: !1
              });
            },
            l = function l(e) {
              return {
                dom: {
                  tag: "label",
                  classes: ["tox-label"]
                },
                components: [ti(t.translate(e))]
              };
            },
            c = FO.parts.field1(a([aS.parts.label(l("Width")), i(!0)])),
            d = FO.parts.field2(a([aS.parts.label(l("Height")), i(!1)]));
          return FO.sketch({
            dom: {
              tag: "div",
              classes: ["tox-form__group"]
            },
            components: [{
              dom: {
                tag: "div",
                classes: ["tox-form__controls-h-stack"]
              },
              components: [c, d, a([l("\xa0"), r])]
            }],
            field1Name: "width",
            field2Name: "height",
            locked: !0,
            markers: {
              lockClass: "tox-locked"
            },
            onLockedChange: function onLockedChange(e, t, n) {
              IO(pu.getValue(e)).each(function (e) {
                o(e).each(function (e) {
                  pu.setValue(t, function (e) {
                    var t = {
                      "": 0,
                      px: 0,
                      pt: 1,
                      mm: 1,
                      pc: 2,
                      ex: 2,
                      em: 2,
                      ch: 2,
                      rem: 2,
                      cm: 3,
                      "in": 4,
                      "%": 4
                    };
                    var o = e.value.toFixed((n = e.unit) in t ? t[n] : 1);
                    var n;
                    return -1 !== o.indexOf(".") && (o = o.replace(/\.?0*$/, "")), o + e.unit;
                  }(e));
                });
              });
            },
            coupledFieldBehaviours: kl([Rm.config({
              disabled: function disabled() {
                return !e.enabled || t.isDisabled();
              },
              onDisabled: function onDisabled(e) {
                FO.getField1(e).bind(aS.getField).each(Rm.disable), FO.getField2(e).bind(aS.getField).each(Rm.disable), FO.getLock(e).each(Rm.disable);
              },
              onEnabled: function onEnabled(e) {
                FO.getField1(e).bind(aS.getField).each(Rm.enable), FO.getField2(e).bind(aS.getField).each(Rm.enable), FO.getLock(e).each(Rm.enable);
              }
            }), Sy(), Jp("size-input-events2", [Ur(n, function (e, t) {
              var n = t.event.isField1,
                s = n ? FO.getField1(e) : FO.getField2(e),
                r = n ? FO.getField2(e) : FO.getField1(e),
                a = s.map(pu.getValue).getOr(""),
                i = r.map(pu.getValue).getOr("");
              o = function (e, t) {
                var o = IO(e).toOptional(),
                  n = IO(t).toOptional();
                return Se(o, n, function (e, t) {
                  return RO(e, t.unit).map(function (e) {
                    return t.value / e;
                  }).map(function (e) {
                    return o = e, n = t.unit, function (e) {
                      return RO(e, n).map(function (e) {
                        return {
                          value: e * o,
                          unit: n
                        };
                      });
                    };
                    var o, n;
                  }).getOr(NO);
                }).getOr(NO);
              }(a, i);
            })])])
          });
        }(e, t.shared.providers);
      }),
      slider: G_(function (e, t, o) {
        return function (e, t, o) {
          var n = fC.parts.label({
              dom: {
                tag: "label",
                classes: ["tox-label"]
              },
              components: [ti(t.translate(e.label))]
            }),
            s = fC.parts.spectrum({
              dom: {
                tag: "div",
                classes: ["tox-slider__rail"],
                attributes: {
                  role: "presentation"
                }
              }
            }),
            r = fC.parts.thumb({
              dom: {
                tag: "div",
                classes: ["tox-slider__handle"],
                attributes: {
                  role: "presentation"
                }
              }
            });
          return fC.sketch({
            dom: {
              tag: "div",
              classes: ["tox-slider"],
              attributes: {
                role: "presentation"
              }
            },
            model: {
              mode: "x",
              minX: e.min,
              maxX: e.max,
              getInitialValue: x(o.getOrThunk(function () {
                return (Math.abs(e.max) - Math.abs(e.min)) / 2;
              }))
            },
            components: [n, s, r],
            sliderBehaviours: kl([DC(), oh.config({})]),
            onChoose: function onChoose(t, o, n) {
              Ir(t, hS, {
                name: e.name,
                value: n
              });
            }
          });
        }(e, t.shared.providers, o);
      }),
      urlinput: G_(function (e, t, o) {
        return function (e, t, o, n) {
          var s = t.shared.providers,
            r = function r(t) {
              var n = pu.getValue(t);
              o.addToHistory(n.value, e.filetype);
            },
            a = _objectSpread(_objectSpread({}, n.map(function (e) {
              return {
                initialData: e
              };
            }).getOr({})), {}, {
              dismissOnBlur: !0,
              inputClasses: ["tox-textfield"],
              sandboxClasses: ["tox-dialog__popups"],
              inputAttributes: {
                "aria-errormessage": U_,
                type: "url"
              },
              minChars: 0,
              responseTime: 0,
              fetch: function fetch(n) {
                var s = function (e, t, o) {
                    var n, s;
                    var r = pu.getValue(t),
                      a = null !== (s = null === (n = null == r ? void 0 : r.meta) || void 0 === n ? void 0 : n.text) && void 0 !== s ? s : r.value;
                    return o.getLinkInformation().fold(function () {
                      return [];
                    }, function (t) {
                      var n = P_(a, function (e) {
                        return H(e, function (e) {
                          return R_(e, e);
                        });
                      }(o.getHistory(e)));
                      return "file" === e ? (s = [n, P_(a, V_(t)), P_(a, q([H_(t), z_(t), L_(t)]))], j(s, function (e, t) {
                        return 0 === e.length || 0 === t.length ? e.concat(t) : e.concat(F_, t);
                      }, [])) : n;
                      var s;
                    });
                  }(e.filetype, n, o),
                  r = CO(s, pb.BUBBLE_TO_SANDBOX, t, {
                    isHorizontalMenu: !1,
                    search: A.none()
                  });
                return bw(r);
              },
              getHotspot: function getHotspot(e) {
                return g.getOpt(e);
              },
              onSetValue: function onSetValue(e, t) {
                e.hasConfigured(FS) && FS.run(e).get(b);
              },
              typeaheadBehaviours: kl([].concat(_toConsumableArray(o.getValidationHandler().map(function (t) {
                return FS.config({
                  getRoot: function getRoot(e) {
                    return rt(e.element);
                  },
                  invalidClass: "tox-control-wrap--status-invalid",
                  notify: {
                    onInvalid: function onInvalid(e, t) {
                      c.getOpt(e).each(function (e) {
                        kt(e.element, "title", s.translate(t));
                      });
                    }
                  },
                  validator: {
                    validate: function validate(o) {
                      var n = pu.getValue(o);
                      return O_(function (o) {
                        t({
                          type: e.filetype,
                          url: n.value
                        }, function (e) {
                          if ("invalid" === e.status) {
                            var _t37 = sn.error(e.message);
                            o(_t37);
                          } else {
                            var _t38 = sn.value(e.message);
                            o(_t38);
                          }
                        });
                      });
                    },
                    validateOnLoad: !1
                  }
                });
              }).toArray()), [Rm.config({
                disabled: function disabled() {
                  return !e.enabled || s.isDisabled();
                }
              }), cS.config({}), Jp("urlinput-events", [Ur(Zs(), function (t) {
                var o = $a(t.element),
                  n = o.trim();
                n !== o && qa(t.element, n), "file" === e.filetype && Ir(t, hS, {
                  name: e.name
                });
              }), Ur(Qs(), function (t) {
                Ir(t, hS, {
                  name: e.name
                }), r(t);
              }), Ur(cr(), function (t) {
                Ir(t, hS, {
                  name: e.name
                }), r(t);
              })])])),
              eventOrder: _defineProperty({}, Zs(), ["streaming", "urlinput-events", "invalidating"]),
              model: {
                getDisplayText: function getDisplayText(e) {
                  return e.value;
                },
                selectsOver: !1,
                populateFromBrowse: !1
              },
              markers: {
                openClass: "tox-textfield--popup-open"
              },
              lazySink: t.shared.getSink,
              parts: {
                menu: Bb(0, 0, "normal")
              },
              onExecute: function onExecute(e, t, o) {
                Ir(t, yS, {});
              },
              onItemExecute: function onItemExecute(t, o, n, s) {
                r(t), Ir(t, hS, {
                  name: e.name
                });
              }
            }),
            i = aS.parts.field(_objectSpread(_objectSpread({}, a), {}, {
              factory: k_
            })),
            l = e.label.map(function (e) {
              return pS(e, s);
            }),
            c = jh(function (e, t) {
              var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : e;
              var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : e;
              return ef(o, {
                tag: "div",
                classes: ["tox-icon", "tox-control-wrap__status-icon-" + e],
                attributes: _objectSpread({
                  title: s.translate(n),
                  "aria-live": "polite"
                }, t.fold(function () {
                  return {};
                }, function (e) {
                  return {
                    id: e
                  };
                }))
              }, s.icons);
            }("invalid", A.some(U_), "warning")),
            d = jh({
              dom: {
                tag: "div",
                classes: ["tox-control-wrap__status-icon-wrap"]
              },
              components: [c.asSpec()]
            }),
            u = o.getUrlPicker(e.filetype),
            m = la("browser.url.event"),
            g = jh({
              dom: {
                tag: "div",
                classes: ["tox-control-wrap"]
              },
              components: [i, d.asSpec()],
              behaviours: kl([Rm.config({
                disabled: function disabled() {
                  return !e.enabled || s.isDisabled();
                }
              })])
            }),
            p = jh(M_({
              name: e.name,
              icon: A.some("browse"),
              text: e.label.getOr(""),
              enabled: e.enabled,
              primary: !1,
              buttonType: A.none(),
              borderless: !0
            }, function (e) {
              return Fr(e, m);
            }, s, [], ["tox-browse-url"]));
          return aS.sketch({
            dom: gS([]),
            components: l.toArray().concat([{
              dom: {
                tag: "div",
                classes: ["tox-form__controls-h-stack"]
              },
              components: q([[g.asSpec()], u.map(function () {
                return p.asSpec();
              }).toArray()])
            }]),
            fieldBehaviours: kl([Rm.config({
              disabled: function disabled() {
                return !e.enabled || s.isDisabled();
              },
              onDisabled: function onDisabled(e) {
                aS.getField(e).each(Rm.disable), p.getOpt(e).each(Rm.disable);
              },
              onEnabled: function onEnabled(e) {
                aS.getField(e).each(Rm.enable), p.getOpt(e).each(Rm.enable);
              }
            }), Sy(), Jp("url-input-events", [Ur(m, function (t) {
              wm.getCurrent(t).each(function (o) {
                var n = pu.getValue(o),
                  s = _objectSpread({
                    fieldname: e.name
                  }, n);
                u.each(function (n) {
                  n(s).get(function (n) {
                    pu.setValue(o, n), Ir(t, hS, {
                      name: e.name
                    });
                  });
                });
              });
            })])])
          });
        }(e, t, t.urlinput, o);
      }),
      customeditor: G_(function (e) {
        var t = Ql(),
          o = jh({
            dom: {
              tag: e.tag
            }
          }),
          n = Ql();
        return {
          dom: {
            tag: "div",
            classes: ["tox-custom-editor"]
          },
          behaviours: kl([Jp("custom-editor-events", [Kr(function (s) {
            o.getOpt(s).each(function (o) {
              ((function (e) {
                return ve(e, "init");
              })(e) ? e.init(o.element.dom) : HC.load(e.scriptId, e.scriptUrl).then(function (t) {
                return t(o.element.dom, e.settings);
              })).then(function (e) {
                n.on(function (t) {
                  e.setValue(t);
                }), n.clear(), t.set(e);
              });
            });
          })]), RC(A.none(), function () {
            return t.get().fold(function () {
              return n.get().getOr("");
            }, function (e) {
              return e.getValue();
            });
          }, function (e, o) {
            t.get().fold(function () {
              return n.set(o);
            }, function (e) {
              return e.setValue(o);
            });
          }), DC()]),
          components: [o.asSpec()]
        };
      }),
      htmlpanel: G_(function (e) {
        return "presentation" === e.presets ? oS.sketch({
          dom: {
            tag: "div",
            classes: ["tox-form__group"],
            innerHtml: e.html
          }
        }) : oS.sketch({
          dom: {
            tag: "div",
            classes: ["tox-form__group"],
            innerHtml: e.html,
            attributes: {
              role: "document"
            }
          },
          containerBehaviours: kl([cS.config({}), oh.config({})])
        });
      }),
      imagepreview: G_(function (e, t, o) {
        return function (e, t) {
          var o = Es(t.getOr({
              url: ""
            })),
            n = jh({
              dom: {
                tag: "img",
                classes: ["tox-imagepreview__image"],
                attributes: t.map(function (e) {
                  return {
                    src: e.url
                  };
                }).getOr({})
              }
            }),
            s = jh({
              dom: {
                tag: "div",
                classes: ["tox-imagepreview__container"],
                attributes: {
                  role: "presentation"
                }
              },
              components: [n.asSpec()]
            }),
            r = {};
          e.height.each(function (e) {
            return r.height = e;
          });
          var a = t.map(function (e) {
            return {
              url: e.url,
              zoom: A.from(e.zoom),
              cachedWidth: A.from(e.cachedWidth),
              cachedHeight: A.from(e.cachedHeight)
            };
          });
          return {
            dom: {
              tag: "div",
              classes: ["tox-imagepreview"],
              styles: r,
              attributes: {
                role: "presentation"
              }
            },
            components: [s.asSpec()],
            behaviours: kl([DC(), RC(a, function () {
              return o.get();
            }, function (e, t) {
              var r = {
                url: t.url
              };
              t.zoom.each(function (e) {
                return r.zoom = e;
              }), t.cachedWidth.each(function (e) {
                return r.cachedWidth = e;
              }), t.cachedHeight.each(function (e) {
                return r.cachedHeight = e;
              }), o.set(r);
              var a = function a() {
                var t = r.cachedWidth,
                  o = r.cachedHeight,
                  n = r.zoom;
                if (!u(t) && !u(o)) {
                  if (u(n)) {
                    var _n38 = function (e, t, o) {
                      var n = Jt(e),
                        s = Wt(e);
                      return Math.min(n / t, s / o, 1);
                    }(e.element, t, o);
                    r.zoom = _n38;
                  }
                  var _a6 = function (e, t, o, n, s) {
                    var r = o * s,
                      a = n * s,
                      i = Math.max(0, e / 2 - r / 2),
                      l = Math.max(0, t / 2 - a / 2);
                    return {
                      left: i.toString() + "px",
                      top: l.toString() + "px",
                      width: r.toString() + "px",
                      height: a.toString() + "px"
                    };
                  }(Jt(e.element), Wt(e.element), t, o, r.zoom);
                  s.getOpt(e).each(function (e) {
                    Bt(e.element, _a6);
                  });
                }
              };
              n.getOpt(e).each(function (o) {
                var n = o.element;
                var s;
                t.url !== Ot(n, "src") && (kt(n, "src", t.url), Pa(e.element, "tox-imagepreview__loaded")), a(), (s = n, new Promise(function (e, t) {
                  var o = function o() {
                      r(), e(s);
                    },
                    n = [tc(s, "load", o), tc(s, "error", function () {
                      r(), t("Unable to load data from image: " + s.dom.src);
                    })],
                    r = function r() {
                      return L(n, function (e) {
                        return e.unbind();
                      });
                    };
                  s.dom.complete && o();
                })).then(function (t) {
                  e.getSystem().isConnected() && (La(e.element, "tox-imagepreview__loaded"), r.cachedWidth = t.dom.naturalWidth, r.cachedHeight = t.dom.naturalHeight, a());
                });
              });
            })])
          };
        }(e, o);
      }),
      table: G_(function (e, t) {
        return function (e, t) {
          var o = function o(e) {
            return {
              dom: {
                tag: "td",
                innerHtml: t.translate(e)
              }
            };
          };
          return {
            dom: {
              tag: "table",
              classes: ["tox-dialog__table"]
            },
            components: [(s = e.header, {
              dom: {
                tag: "thead"
              },
              components: [{
                dom: {
                  tag: "tr"
                },
                components: H(s, function (e) {
                  return {
                    dom: {
                      tag: "th",
                      innerHtml: t.translate(e)
                    }
                  };
                })
              }]
            }), (n = e.cells, {
              dom: {
                tag: "tbody"
              },
              components: H(n, function (e) {
                return {
                  dom: {
                    tag: "tr"
                  },
                  components: H(e, o)
                };
              })
            })],
            behaviours: kl([cS.config({}), oh.config({})])
          };
          var n, s;
        }(e, t.shared.providers);
      }),
      tree: G_(function (e, t) {
        return function (e, t) {
          var o = e.onLeafAction.getOr(b),
            n = e.onToggleExpand.getOr(b),
            s = e.defaultExpandedIds,
            r = Es(s),
            a = Es(e.defaultSelectedId),
            i = la("tree-id"),
            l = function l(n, s) {
              return e.items.map(function (e) {
                return "leaf" === e.type ? r_({
                  leaf: e,
                  selectedId: n,
                  onLeafAction: o,
                  visible: !0,
                  treeId: i,
                  backstage: t
                }) : d_({
                  directory: e,
                  selectedId: n,
                  onLeafAction: o,
                  expandedIds: s,
                  labelTabstopping: !0,
                  treeId: i,
                  backstage: t
                });
              });
            };
          return {
            dom: {
              tag: "div",
              classes: ["tox-tree"],
              attributes: {
                role: "tree"
              }
            },
            components: l(a.get(), r.get()),
            behaviours: kl([Pp.config({
              mode: "flow",
              selector: ".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",
              cycles: !1
            }), Jp(u_, [Ur("expand-tree-node", function (e, t) {
              var _t$event3 = t.event,
                o = _t$event3.expanded,
                s = _t$event3.node;
              r.set(o ? [].concat(_toConsumableArray(r.get()), [s]) : r.get().filter(function (e) {
                return e !== s;
              })), n(r.get(), {
                expanded: o,
                node: s
              });
            })]), Al.config({
              channels: _defineProperty({}, "update-active-item-".concat(i), {
                onReceive: function onReceive(e, t) {
                  a.set(A.some(t.value)), Kp.set(e, l(A.some(t.value), r.get()));
                }
              })
            }), Kp.config({})])
          };
        }(e, t);
      }),
      panel: G_(function (e, t) {
        return function (e, t) {
          return {
            dom: {
              tag: "div",
              classes: e.classes
            },
            components: H(e.items, t.shared.interpreter)
          };
        }(e, t);
      })
    },
    q_ = {
      field: function field(e, t) {
        return t;
      },
      record: x([])
    },
    X_ = function X_(e, t, o, n) {
      var s = fn(n, {
        shared: {
          interpreter: function interpreter(t) {
            return Y_(e, t, o, s);
          }
        }
      });
      return Y_(e, t, o, s);
    },
    Y_ = function Y_(e, t, o, n) {
      return be($_, t.type).fold(function () {
        return console.error("Unknown factory type \"".concat(t.type, "\", defaulting to container: "), t), t;
      }, function (s) {
        return s(e, t, o, n);
      });
    },
    K_ = function K_(e, t, o) {
      return Y_(q_, e, t, o);
    },
    J_ = "layout-inset",
    Z_ = function Z_(e) {
      return e.x;
    },
    Q_ = function Q_(e, t) {
      return e.x + e.width / 2 - t.width / 2;
    },
    eT = function eT(e, t) {
      return e.x + e.width - t.width;
    },
    tT = function tT(e) {
      return e.y;
    },
    oT = function oT(e, t) {
      return e.y + e.height - t.height;
    },
    nT = function nT(e, t) {
      return e.y + e.height / 2 - t.height / 2;
    },
    sT = function sT(e, t, o) {
      return zi(eT(e, t), oT(e, t), o.insetSouthwest(), Wi(), "southwest", Ki(e, {
        right: 0,
        bottom: 3
      }), J_);
    },
    rT = function rT(e, t, o) {
      return zi(Z_(e), oT(e, t), o.insetSoutheast(), Ui(), "southeast", Ki(e, {
        left: 1,
        bottom: 3
      }), J_);
    },
    aT = function aT(e, t, o) {
      return zi(eT(e, t), tT(e), o.insetNorthwest(), Pi(), "northwest", Ki(e, {
        right: 0,
        top: 2
      }), J_);
    },
    iT = function iT(e, t, o) {
      return zi(Z_(e), tT(e), o.insetNortheast(), Li(), "northeast", Ki(e, {
        left: 1,
        top: 2
      }), J_);
    },
    lT = function lT(e, t, o) {
      return zi(Q_(e, t), tT(e), o.insetNorth(), ji(), "north", Ki(e, {
        top: 2
      }), J_);
    },
    cT = function cT(e, t, o) {
      return zi(Q_(e, t), oT(e, t), o.insetSouth(), Gi(), "south", Ki(e, {
        bottom: 3
      }), J_);
    },
    dT = function dT(e, t, o) {
      return zi(eT(e, t), nT(e, t), o.insetEast(), qi(), "east", Ki(e, {
        right: 0
      }), J_);
    },
    uT = function uT(e, t, o) {
      return zi(Z_(e), nT(e, t), o.insetWest(), $i(), "west", Ki(e, {
        left: 1
      }), J_);
    },
    mT = function mT(e) {
      switch (e) {
        case "north":
          return lT;
        case "northeast":
          return iT;
        case "northwest":
          return aT;
        case "south":
          return cT;
        case "southeast":
          return rT;
        case "southwest":
          return sT;
        case "east":
          return dT;
        case "west":
          return uT;
      }
    },
    gT = function gT(e, t, o, n, s) {
      return Xl(n).map(mT).getOr(lT)(e, t, o, n, s);
    },
    pT = function pT(e) {
      switch (e) {
        case "north":
          return cT;
        case "northeast":
          return rT;
        case "northwest":
          return sT;
        case "south":
          return lT;
        case "southeast":
          return iT;
        case "southwest":
          return aT;
        case "east":
          return uT;
        case "west":
          return dT;
      }
    },
    hT = function hT(e, t, o, n, s) {
      return Xl(n).map(pT).getOr(lT)(e, t, o, n, s);
    },
    fT = {
      valignCentre: [],
      alignCentre: [],
      alignLeft: [],
      alignRight: [],
      right: [],
      left: [],
      bottom: [],
      top: []
    },
    bT = function bT(e, t, o) {
      var n = {
        maxHeightFunction: cc()
      };
      return function () {
        return o() ? {
          type: "node",
          root: ft(ht(e())),
          node: A.from(e()),
          bubble: gc(12, 12, fT),
          layouts: {
            onRtl: function onRtl() {
              return [iT];
            },
            onLtr: function onLtr() {
              return [aT];
            }
          },
          overrides: n
        } : {
          type: "hotspot",
          hotspot: t(),
          bubble: gc(-12, 12, fT),
          layouts: {
            onRtl: function onRtl() {
              return [sl, rl, cl];
            },
            onLtr: function onLtr() {
              return [rl, sl, cl];
            }
          },
          overrides: n
        };
      };
    },
    vT = function vT(e, t, o, n) {
      var s = {
        maxHeightFunction: cc()
      };
      return function () {
        return n() ? {
          type: "node",
          root: ft(ht(t())),
          node: A.from(t()),
          bubble: gc(12, 12, fT),
          layouts: {
            onRtl: function onRtl() {
              return [lT];
            },
            onLtr: function onLtr() {
              return [lT];
            }
          },
          overrides: s
        } : e ? {
          type: "node",
          root: ft(ht(t())),
          node: A.from(t()),
          bubble: gc(0, -jt(t()), fT),
          layouts: {
            onRtl: function onRtl() {
              return [ll];
            },
            onLtr: function onLtr() {
              return [ll];
            }
          },
          overrides: s
        } : {
          type: "hotspot",
          hotspot: o(),
          bubble: gc(0, 0, fT),
          layouts: {
            onRtl: function onRtl() {
              return [ll];
            },
            onLtr: function onLtr() {
              return [ll];
            }
          },
          overrides: s
        };
      };
    },
    yT = function yT(e, t, o) {
      return function () {
        return o() ? {
          type: "node",
          root: ft(ht(e())),
          node: A.from(e()),
          layouts: {
            onRtl: function onRtl() {
              return [lT];
            },
            onLtr: function onLtr() {
              return [lT];
            }
          }
        } : {
          type: "hotspot",
          hotspot: t(),
          layouts: {
            onRtl: function onRtl() {
              return [cl];
            },
            onLtr: function onLtr() {
              return [cl];
            }
          }
        };
      };
    },
    xT = function xT(e, t) {
      return function () {
        return {
          type: "selection",
          root: t(),
          getSelection: function getSelection() {
            var t = e.selection.getRng(),
              o = e.model.table.getSelectedCells();
            if (o.length > 1) {
              var _e23 = o[0],
                _t39 = o[o.length - 1],
                _n39 = {
                  firstCell: Ve(_e23),
                  lastCell: Ve(_t39)
                };
              return A.some(_n39);
            }
            return A.some(Lc.range(Ve(t.startContainer), t.startOffset, Ve(t.endContainer), t.endOffset));
          }
        };
      };
    },
    wT = function wT(e) {
      return function (t) {
        return {
          type: "node",
          root: e(),
          node: t
        };
      };
    },
    ST = function ST(e, t, o, n) {
      var s = sb(e),
        r = function r() {
          return Ve(e.getBody());
        },
        a = function a() {
          return Ve(e.getContentAreaContainer());
        },
        i = function i() {
          return s || !n();
        };
      return {
        inlineDialog: bT(a, t, i),
        inlineBottomDialog: vT(e.inline, a, o, i),
        banner: yT(a, t, i),
        cursor: xT(e, r),
        node: wT(r)
      };
    },
    kT = function kT(e) {
      return function (t, o) {
        Jx(e)(t, o);
      };
    },
    CT = function CT(e) {
      return function () {
        return Hx(e);
      };
    },
    OT = function OT(e) {
      return function (t) {
        return Rx(e, t);
      };
    },
    _T = function _T(e) {
      return function (t) {
        return zx(e, t);
      };
    },
    TT = function TT(e) {
      return function () {
        return Lf(e);
      };
    },
    ET = function ET(e) {
      return ye(e, "items");
    },
    AT = function AT(e) {
      return ye(e, "format");
    },
    MT = [{
      title: "Headings",
      items: [{
        title: "Heading 1",
        format: "h1"
      }, {
        title: "Heading 2",
        format: "h2"
      }, {
        title: "Heading 3",
        format: "h3"
      }, {
        title: "Heading 4",
        format: "h4"
      }, {
        title: "Heading 5",
        format: "h5"
      }, {
        title: "Heading 6",
        format: "h6"
      }]
    }, {
      title: "Inline",
      items: [{
        title: "Bold",
        format: "bold"
      }, {
        title: "Italic",
        format: "italic"
      }, {
        title: "Underline",
        format: "underline"
      }, {
        title: "Strikethrough",
        format: "strikethrough"
      }, {
        title: "Superscript",
        format: "superscript"
      }, {
        title: "Subscript",
        format: "subscript"
      }, {
        title: "Code",
        format: "code"
      }]
    }, {
      title: "Blocks",
      items: [{
        title: "Paragraph",
        format: "p"
      }, {
        title: "Blockquote",
        format: "blockquote"
      }, {
        title: "Div",
        format: "div"
      }, {
        title: "Pre",
        format: "pre"
      }]
    }, {
      title: "Align",
      items: [{
        title: "Left",
        format: "alignleft"
      }, {
        title: "Center",
        format: "aligncenter"
      }, {
        title: "Right",
        format: "alignright"
      }, {
        title: "Justify",
        format: "alignjustify"
      }]
    }],
    DT = function DT(e) {
      return j(e, function (e, t) {
        if (ve(t, "items")) {
          var _o34 = DT(t.items);
          return {
            customFormats: e.customFormats.concat(_o34.customFormats),
            formats: e.formats.concat([{
              title: t.title,
              items: _o34.formats
            }])
          };
        }
        if (ve(t, "inline") || function (e) {
          return ve(e, "block");
        }(t) || function (e) {
          return ve(e, "selector");
        }(t)) {
          var _o35 = "custom-".concat(r(t.name) ? t.name : t.title.toLowerCase());
          return {
            customFormats: e.customFormats.concat([{
              name: _o35,
              format: t
            }]),
            formats: e.formats.concat([{
              title: t.title,
              format: _o35,
              icon: t.icon
            }])
          };
        }
        return _objectSpread(_objectSpread({}, e), {}, {
          formats: e.formats.concat(t)
        });
      }, {
        customFormats: [],
        formats: []
      });
    },
    BT = function BT(e) {
      return yf(e).map(function (t) {
        var o = function (e, t) {
          var o = DT(t),
            n = function n(t) {
              L(t, function (t) {
                e.formatter.has(t.name) || e.formatter.register(t.name, t.format);
              });
            };
          return e.formatter ? n(o.customFormats) : e.on("init", function () {
            n(o.customFormats);
          }), o.formats;
        }(e, t);
        return xf(e) ? MT.concat(o) : o;
      }).getOr(MT);
    },
    FT = function FT(e, t, o) {
      return _objectSpread(_objectSpread({}, e), {}, {
        type: "formatter",
        isSelected: t(e.format),
        getStylePreview: o(e.format)
      });
    },
    IT = function IT(e, t, o, n) {
      var s = function s(t) {
        return H(t, function (t) {
          return ET(t) ? function (e) {
            var t = s(e.items);
            return _objectSpread(_objectSpread({}, e), {}, {
              type: "submenu",
              getStyleItems: x(t)
            });
          }(t) : AT(t) ? function (e) {
            return FT(e, o, n);
          }(t) : function (e) {
            var t = ae(e);
            return 1 === t.length && R(t, "title");
          }(t) ? _objectSpread(_objectSpread({}, t), {}, {
            type: "separator"
          }) : function (t) {
            var s = r(t.name) ? t.name : la(t.title),
              a = "custom-".concat(s),
              i = _objectSpread(_objectSpread({}, t), {}, {
                type: "formatter",
                format: a,
                isSelected: o(a),
                getStylePreview: n(a)
              });
            return e.formatter.register(s, i), i;
          }(t);
        });
      };
      return s(t);
    },
    RT = LC.trim,
    NT = function NT(e) {
      return function (t) {
        if (function (e) {
          return g(e) && 1 === e.nodeType;
        }(t)) {
          if (t.contentEditable === e) return !0;
          if (t.getAttribute("data-mce-contenteditable") === e) return !0;
        }
        return !1;
      };
    },
    VT = NT("true"),
    zT = NT("false"),
    HT = function HT(e, t, o, n, s) {
      return {
        type: e,
        title: t,
        url: o,
        level: n,
        attach: s
      };
    },
    LT = function LT(e) {
      return e.innerText || e.textContent;
    },
    PT = function PT(e) {
      return function (e) {
        return e && "A" === e.nodeName && void 0 !== (e.id || e.name);
      }(e) && WT(e);
    },
    UT = function UT(e) {
      return e && /^(H[1-6])$/.test(e.nodeName);
    },
    WT = function WT(e) {
      return function (e) {
        var t = e;
        for (; t = t.parentNode;) {
          var _e24 = t.contentEditable;
          if (_e24 && "inherit" !== _e24) return VT(t);
        }
        return !1;
      }(e) && !zT(e);
    },
    jT = function jT(e) {
      return UT(e) && WT(e);
    },
    GT = function GT(e) {
      var t;
      var o = function (e) {
        return e.id ? e.id : la("h");
      }(e);
      return HT("header", null !== (t = LT(e)) && void 0 !== t ? t : "", "#" + o, function (e) {
        return UT(e) ? parseInt(e.nodeName.substr(1), 10) : 0;
      }(e), function () {
        e.id = o;
      });
    },
    $T = function $T(e) {
      var t = e.id || e.name,
        o = LT(e);
      return HT("anchor", o || "#" + t, "#" + t, 0, b);
    },
    qT = function qT(e) {
      return RT(e.title).length > 0;
    },
    XT = function XT(e) {
      var t = function (e) {
        var t = H(Xc(Ve(e), "h1,h2,h3,h4,h5,h6,a:not([href])"), function (e) {
          return e.dom;
        });
        return t;
      }(e);
      return U(function (e) {
        return H(U(e, jT), GT);
      }(t).concat(function (e) {
        return H(U(e, PT), $T);
      }(t)), qT);
    },
    YT = "tinymce-url-history",
    KT = function KT(e) {
      return r(e) && /^https?/.test(e);
    },
    JT = function JT(e) {
      return a(e) && he(e, function (e) {
        return !(l(t = e) && t.length <= 5 && Y(t, KT));
        var t;
      }).isNone();
    },
    ZT = function ZT() {
      var e = Sx.getItem(YT);
      if (null === e) return {};
      var t;
      try {
        t = JSON.parse(e);
      } catch (e) {
        if (e instanceof SyntaxError) return console.log("Local storage " + YT + " was not valid JSON", e), {};
        throw e;
      }
      return JT(t) ? t : (console.log("Local storage " + YT + " was not valid format", t), {});
    },
    QT = function QT(e) {
      var t = ZT();
      return be(t, e).getOr([]);
    },
    eE = function eE(e, t) {
      if (!KT(e)) return;
      var o = ZT(),
        n = be(o, t).getOr([]),
        s = U(n, function (t) {
          return t !== e;
        });
      o[t] = [e].concat(s).slice(0, 5), function (e) {
        if (!JT(e)) throw new Error("Bad format for history:\n" + JSON.stringify(e));
        Sx.setItem(YT, JSON.stringify(e));
      }(o);
    },
    tE = function tE(e) {
      return !!e;
    },
    oE = function oE(e) {
      return ce(LC.makeMap(e, /[, ]/), tE);
    },
    nE = function nE(e) {
      return A.from(Ff(e));
    },
    sE = function sE(e) {
      return A.from(e).filter(r).getOrUndefined();
    },
    rE = function rE(e) {
      return {
        getHistory: QT,
        addToHistory: eE,
        getLinkInformation: function getLinkInformation() {
          return function (e) {
            return Vf(e) ? A.some({
              targets: XT(e.getBody()),
              anchorTop: sE(zf(e)),
              anchorBottom: sE(Hf(e))
            }) : A.none();
          }(e);
        },
        getValidationHandler: function getValidationHandler() {
          return function (e) {
            return A.from(If(e));
          }(e);
        },
        getUrlPicker: function getUrlPicker(t) {
          return function (e, t) {
            return function (e, t) {
              var o = function (e) {
                var t = A.from(Nf(e)).filter(tE).map(oE);
                return nE(e).fold(T, function (e) {
                  return t.fold(E, function (e) {
                    return ae(e).length > 0 && e;
                  });
                });
              }(e);
              return d(o) ? o ? nE(e) : A.none() : o[t] ? nE(e) : A.none();
            }(e, t).map(function (o) {
              return function (n) {
                return fw(function (s) {
                  var i = _objectSpread({
                    filetype: t,
                    fieldname: n.fieldname
                  }, A.from(n.meta).getOr({}));
                  o.call(e, function (e, t) {
                    if (!r(e)) throw new Error("Expected value to be string");
                    if (void 0 !== t && !a(t)) throw new Error("Expected meta to be a object");
                    s({
                      value: e,
                      meta: t
                    });
                  }, n.value, i);
                });
              };
            });
          }(e, t);
        }
      };
    },
    aE = dm,
    iE = qu,
    lE = x([ys("shell", !1), os("makeItem"), ys("setupItem", b), vu("listBehaviours", [Kp])]),
    cE = ju({
      name: "items",
      overrides: function overrides() {
        return {
          behaviours: kl([Kp.config({})])
        };
      }
    }),
    dE = x([cE]),
    uE = bm({
      name: x("CustomList")(),
      configFields: lE(),
      partFields: dE(),
      factory: function factory(e, t, o, n) {
        var s = e.shell ? {
          behaviours: [Kp.config({})],
          components: []
        } : {
          behaviours: [],
          components: t
        };
        return {
          uid: e.uid,
          dom: e.dom,
          components: s.components,
          behaviours: bu(e.listBehaviours, s.behaviours),
          apis: {
            setItems: function setItems(t, o) {
              var n;
              (n = t, e.shell ? A.some(n) : om(n, e, "items")).fold(function () {
                throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"), new Error("Custom List was defined to not be a shell, but no item container was specified in components");
              }, function (n) {
                var s = Kp.contents(n),
                  r = o.length,
                  a = r - s.length,
                  i = a > 0 ? V(a, function () {
                    return e.makeItem();
                  }) : [],
                  l = s.slice(r);
                L(l, function (e) {
                  return Kp.remove(n, e);
                }), L(i, function (e) {
                  return Kp.append(n, e);
                });
                var c = Kp.contents(n);
                L(c, function (n, s) {
                  e.setupItem(t, n, o[s], s);
                });
              });
            }
          }
        };
      },
      apis: {
        setItems: function setItems(e, t, o) {
          e.setItems(t, o);
        }
      }
    }),
    mE = x([os("dom"), ys("shell", !0), hu("toolbarBehaviours", [Kp])]),
    gE = x([ju({
      name: "groups",
      overrides: function overrides() {
        return {
          behaviours: kl([Kp.config({})])
        };
      }
    })]),
    pE = bm({
      name: "Toolbar",
      configFields: mE(),
      partFields: gE(),
      factory: function factory(e, t, o, n) {
        var s = e.shell ? {
          behaviours: [Kp.config({})],
          components: []
        } : {
          behaviours: [],
          components: t
        };
        return {
          uid: e.uid,
          dom: e.dom,
          components: s.components,
          behaviours: bu(e.toolbarBehaviours, s.behaviours),
          apis: {
            setGroups: function setGroups(t, o) {
              var n;
              (n = t, e.shell ? A.some(n) : om(n, e, "groups")).fold(function () {
                throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"), new Error("Toolbar was defined to not be a shell, but no groups container was specified in components");
              }, function (e) {
                Kp.set(e, o);
              });
            },
            refresh: b
          },
          domModification: {
            attributes: {
              role: "group"
            }
          }
        };
      },
      apis: {
        setGroups: function setGroups(e, t, o) {
          e.setGroups(t, o);
        }
      }
    }),
    hE = b,
    fE = T,
    bE = x([]);
  var vE,
    yE = Object.freeze({
      __proto__: null,
      setup: hE,
      isDocked: fE,
      getBehaviours: bE
    });
  var xE = function xE(e) {
      return (xe(Nt(e, "position"), "fixed") ? A.none() : at(e)).orThunk(function () {
        var t = Re("span");
        return st(e).bind(function (e) {
          zo(e, t);
          var o = at(t);
          return Po(t), o;
        });
      });
    },
    wE = function wE(e) {
      return xE(e).map(Xt).getOrThunk(function () {
        return $t(0, 0);
      });
    },
    SE = function SE(e, t) {
      var o = e.element;
      La(o, t.transitionClass), Pa(o, t.fadeOutClass), La(o, t.fadeInClass), t.onShow(e);
    },
    kE = function kE(e, t) {
      var o = e.element;
      La(o, t.transitionClass), Pa(o, t.fadeInClass), La(o, t.fadeOutClass), t.onHide(e);
    },
    CE = function CE(e, t) {
      return e.y >= t.y;
    },
    OE = function OE(e, t) {
      return e.bottom <= t.bottom;
    },
    _E = function _E(e, t, o) {
      return {
        location: "top",
        leftX: t,
        topY: o.bounds.y - e.y
      };
    },
    TE = function TE(e, t, o) {
      return {
        location: "bottom",
        leftX: t,
        bottomY: e.bottom - o.bounds.bottom
      };
    },
    EE = function EE(e) {
      return e.box.x - e.win.x;
    },
    AE = function AE(e, t, o) {
      return o.getInitialPos().map(function (o) {
        var n = function (e, t) {
          var o = t.optScrollEnv.fold(x(e.bounds.y), function (t) {
            return t.scrollElmTop + (e.bounds.y - t.currentScrollTop);
          });
          return $t(e.bounds.x, o);
        }(o, t);
        return {
          box: Ko(n.left, n.top, Jt(e), Wt(e)),
          location: o.location
        };
      });
    },
    ME = function ME(e, t, o, n, s) {
      var r = function (e, t) {
          var o = t.optScrollEnv.fold(x(e.y), function (t) {
            return e.y + t.currentScrollTop - t.scrollElmTop;
          });
          return $t(e.x, o);
        }(t, o),
        a = Ko(r.left, r.top, t.width, t.height);
      n.setInitialPos({
        style: Vt(e),
        position: It(e, "position") || "static",
        bounds: a,
        location: s.location
      });
    },
    DE = function DE(e, t, o) {
      return o.getInitialPos().bind(function (n) {
        var s;
        switch (o.clearInitialPos(), n.position) {
          case "static":
            return A.some({
              morph: "static"
            });
          case "absolute":
            var _o36 = xE(e).getOr(xt()),
              _r14 = Jo(_o36),
              _a7 = null !== (s = _o36.dom.scrollTop) && void 0 !== s ? s : 0;
            return A.some({
              morph: "absolute",
              positionCss: Vl("absolute", be(n.style, "left").map(function (e) {
                return t.x - _r14.x;
              }), be(n.style, "top").map(function (e) {
                return t.y - _r14.y + _a7;
              }), be(n.style, "right").map(function (e) {
                return _r14.right - t.right;
              }), be(n.style, "bottom").map(function (e) {
                return _r14.bottom - t.bottom;
              }))
            });
          default:
            return A.none();
        }
      });
    },
    BE = function BE(e) {
      switch (e.location) {
        case "top":
          return A.some({
            morph: "fixed",
            positionCss: Vl("fixed", A.some(e.leftX), A.some(e.topY), A.none(), A.none())
          });
        case "bottom":
          return A.some({
            morph: "fixed",
            positionCss: Vl("fixed", A.some(e.leftX), A.none(), A.none(), A.some(e.bottomY))
          });
        default:
          return A.none();
      }
    },
    FE = function FE(e, t, o) {
      var n = e.element;
      return xe(Nt(n, "position"), "fixed") ? function (e, t, o) {
        return function (e, t, o) {
          return AE(e, t, o).filter(function (_ref18) {
            var e = _ref18.box;
            return function (e, t, o) {
              return Y(e, function (e) {
                switch (e) {
                  case "bottom":
                    return OE(t, o.bounds);
                  case "top":
                    return CE(t, o.bounds);
                }
              });
            }(o.getModes(), e, t);
          }).bind(function (_ref19) {
            var t = _ref19.box;
            return DE(e, t, o);
          });
        }(e, t, o).orThunk(function () {
          return t.optScrollEnv.bind(function (n) {
            return AE(e, t, o);
          }).bind(function (_ref20) {
            var e = _ref20.box,
              o = _ref20.location;
            var n = en(),
              s = EE({
                win: n,
                box: e
              }),
              r = "top" === o ? _E(n, s, t) : TE(n, s, t);
            return BE(r);
          });
        });
      }(n, t, o) : function (e, t, o) {
        var n = Jo(e),
          s = en(),
          r = function (e, t, o) {
            var n = t.win,
              s = t.box,
              r = EE(t);
            return re(e, function (e) {
              switch (e) {
                case "bottom":
                  return OE(s, o.bounds) ? A.none() : A.some(TE(n, r, o));
                case "top":
                  return CE(s, o.bounds) ? A.none() : A.some(_E(n, r, o));
                default:
                  return A.none();
              }
            }).getOr({
              location: "no-dock"
            });
          }(o.getModes(), {
            win: s,
            box: n
          }, t);
        return "top" === r.location || "bottom" === r.location ? (ME(e, n, t, o, r), BE(r)) : A.none();
      }(n, t, o);
    },
    IE = function IE(e, t, o) {
      o.setDocked(!1), L(["left", "right", "top", "bottom", "position"], function (t) {
        return Ht(e.element, t);
      }), t.onUndocked(e);
    },
    RE = function RE(e, t, o, n) {
      var s = "fixed" === n.position;
      o.setDocked(s), zl(e.element, n), (s ? t.onDocked : t.onUndocked)(e);
    },
    NE = function NE(e, t, o, n) {
      var s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;
      t.contextual.each(function (t) {
        t.lazyContext(e).each(function (r) {
          var a = function (e, t) {
            return e.y < t.bottom && e.bottom > t.y;
          }(r, n.bounds);
          a !== o.isVisible() && (o.setVisible(a), s && !a ? (Wa(e.element, [t.fadeOutClass]), t.onHide(e)) : (a ? SE : kE)(e, t));
        });
      });
    },
    VE = function VE(e, t, o, n, s) {
      NE(e, t, o, n, !0), RE(e, t, o, s.positionCss);
    },
    zE = function zE(e, t, o) {
      e.getSystem().isConnected() && function (e, t, o) {
        var n = t.lazyViewport(e);
        NE(e, t, o, n), FE(e, n, o).each(function (s) {
          (function (e, t, o, n, s) {
            switch (s.morph) {
              case "static":
                return IE(e, t, o);
              case "absolute":
                return RE(e, t, o, s.positionCss);
              case "fixed":
                VE(e, t, o, n, s);
            }
          })(e, t, o, n, s);
        });
      }(e, t, o);
    },
    HE = function HE(e, t, o) {
      o.isDocked() && function (e, t, o) {
        var n = e.element;
        o.setDocked(!1);
        var s = t.lazyViewport(e);
        (function (e, t, o) {
          var n = e.element;
          return AE(n, t, o).bind(function (_ref21) {
            var e = _ref21.box;
            return DE(n, e, o);
          });
        })(e, s, o).each(function (n) {
          switch (n.morph) {
            case "static":
              IE(e, t, o);
              break;
            case "absolute":
              RE(e, t, o, n.positionCss);
          }
        }), o.setVisible(!0), t.contextual.each(function (t) {
          ja(n, [t.fadeInClass, t.fadeOutClass, t.transitionClass]), t.onShow(e);
        }), zE(e, t, o);
      }(e, t, o);
    },
    LE = function LE(e) {
      return function (t, o, n) {
        var s = o.lazyViewport(t);
        (function (e, t, o, n) {
          var s = Jo(e),
            r = en(),
            a = n(r, EE({
              win: r,
              box: s
            }), t);
          return "bottom" === a.location || "top" === a.location ? (function (e, t, o, n, s) {
            n.getInitialPos().fold(function () {
              return ME(e, t, o, n, s);
            }, function () {
              return b;
            });
          }(e, s, t, o, a), BE(a)) : A.none();
        })(t.element, s, n, e).each(function (e) {
          VE(t, o, n, s, e);
        });
      };
    },
    PE = LE(_E),
    UE = LE(TE);
  var WE = Object.freeze({
      __proto__: null,
      refresh: zE,
      reset: HE,
      isDocked: function isDocked(e, t, o) {
        return o.isDocked();
      },
      getModes: function getModes(e, t, o) {
        return o.getModes();
      },
      setModes: function setModes(e, t, o, n) {
        return o.setModes(n);
      },
      forceDockToTop: PE,
      forceDockToBottom: UE
    }),
    jE = Object.freeze({
      __proto__: null,
      events: function events(e, t) {
        return Hr([Yr(or(), function (o, n) {
          e.contextual.each(function (e) {
            Ua(o.element, e.transitionClass) && (ja(o.element, [e.transitionClass, e.fadeInClass]), (t.isVisible() ? e.onShown : e.onHidden)(o)), n.stop();
          });
        }), Ur(xr(), function (o, n) {
          zE(o, e, t);
        }), Ur(Er(), function (o, n) {
          zE(o, e, t);
        }), Ur(wr(), function (o, n) {
          HE(o, e, t);
        })]);
      }
    }),
    GE = [vs("contextual", [rs("fadeInClass"), rs("fadeOutClass"), rs("transitionClass"), is("lazyContext"), Di("onShow"), Di("onShown"), Di("onHide"), Di("onHidden")]), Os("lazyViewport", function () {
      return {
        bounds: en(),
        optScrollEnv: A.none()
      };
    }), _s("modes", ["top", "bottom"], Hn), Di("onDocked"), Di("onUndocked")];
  var $E = Ol({
      fields: GE,
      name: "docking",
      active: jE,
      apis: WE,
      state: Object.freeze({
        __proto__: null,
        init: function init(e) {
          var t = Es(!1),
            o = Es(!0),
            n = Ql(),
            s = Es(e.modes);
          return _a({
            isDocked: t.get,
            setDocked: t.set,
            getInitialPos: n.get,
            setInitialPos: n.set,
            clearInitialPos: n.clear,
            isVisible: o.get,
            setVisible: o.set,
            getModes: s.get,
            setModes: s.set,
            readState: function readState() {
              return "docked:  ".concat(t.get(), ", visible: ").concat(o.get(), ", modes: ").concat(s.get().join(","));
            }
          });
        }
      })
    }),
    qE = x(la("toolbar-height-change")),
    XE = {
      fadeInClass: "tox-editor-dock-fadein",
      fadeOutClass: "tox-editor-dock-fadeout",
      transitionClass: "tox-editor-dock-transition"
    },
    YE = "tox-tinymce--toolbar-sticky-on",
    KE = "tox-tinymce--toolbar-sticky-off",
    JE = function JE(e, t) {
      return R($E.getModes(e), t);
    },
    ZE = function ZE(e) {
      var t = e.element;
      rt(t).each(function (o) {
        var n = "padding-" + $E.getModes(e)[0];
        if ($E.isDocked(e)) {
          var _e25 = Jt(o);
          Dt(t, "width", _e25 + "px"), Dt(o, n, function (e) {
            return jt(e) + (parseInt(It(e, "margin-top"), 10) || 0) + (parseInt(It(e, "margin-bottom"), 10) || 0);
          }(t) + "px");
        } else Ht(t, "width"), Ht(o, n);
      });
    },
    QE = function QE(e, t) {
      t ? (Pa(e, XE.fadeOutClass), Wa(e, [XE.transitionClass, XE.fadeInClass])) : (Pa(e, XE.fadeInClass), Wa(e, [XE.fadeOutClass, XE.transitionClass]));
    },
    eA = function eA(e, t) {
      var o = Ve(e.getContainer());
      t ? (La(o, YE), Pa(o, KE)) : (La(o, KE), Pa(o, YE));
    },
    tA = function tA(e, t) {
      var o = Ql(),
        n = t.getSink,
        s = function s(e) {
          n().each(function (t) {
            return e(t.element);
          });
        },
        r = function r(t) {
          e.inline || ZE(t), eA(e, $E.isDocked(t)), t.getSystem().broadcastOn([Kd()], {}), n().each(function (e) {
            return e.getSystem().broadcastOn([Kd()], {});
          });
        },
        a = e.inline ? [] : [Al.config({
          channels: _defineProperty({}, qE(), {
            onReceive: ZE
          })
        })];
      return [oh.config({}), $E.config({
        contextual: _objectSpread({
          lazyContext: function lazyContext(t) {
            var o = jt(t.element),
              n = e.inline ? e.getContentAreaContainer() : e.getContainer();
            return A.from(n).map(function (n) {
              var s = Jo(Ve(n));
              return jw(e, t.element).fold(function () {
                var e = s.height - o,
                  n = s.y + (JE(t, "top") ? 0 : o);
                return Ko(s.x, n, s.width, e);
              }, function (e) {
                var n = Qo(s, Gw(e)),
                  r = JE(t, "top") ? n.y : n.y + o;
                return Ko(n.x, r, n.width, n.height - o);
              });
            });
          },
          onShow: function onShow() {
            s(function (e) {
              return QE(e, !0);
            });
          },
          onShown: function onShown(e) {
            s(function (e) {
              return ja(e, [XE.transitionClass, XE.fadeInClass]);
            }), o.get().each(function (t) {
              (function (e, t) {
                var o = et(t);
                Il(o).filter(function (e) {
                  return !Ze(t, e);
                }).filter(function (t) {
                  return Ze(t, Ve(o.dom.body)) || Qe(e, t);
                }).each(function () {
                  return Dl(t);
                });
              })(e.element, t), o.clear();
            });
          },
          onHide: function onHide(e) {
            (function (e, t) {
              return Rl(e).orThunk(function () {
                return t().toOptional().bind(function (e) {
                  return Rl(e.element);
                });
              });
            })(e.element, n).fold(o.clear, o.set), s(function (e) {
              return QE(e, !1);
            });
          },
          onHidden: function onHidden() {
            s(function (e) {
              return ja(e, [XE.transitionClass]);
            });
          }
        }, XE),
        lazyViewport: function lazyViewport(t) {
          return jw(e, t.element).fold(function () {
            var o = en(),
              n = Mf(e),
              s = o.y + (JE(t, "top") ? n : 0),
              r = o.height - (JE(t, "bottom") ? n : 0);
            return {
              bounds: Ko(o.x, s, o.width, r),
              optScrollEnv: A.none()
            };
          }, function (e) {
            return {
              bounds: Gw(e),
              optScrollEnv: A.some({
                currentScrollTop: e.element.dom.scrollTop,
                scrollElmTop: Xt(e.element).top
              })
            };
          });
        },
        modes: [t.header.getDockingMode()],
        onDocked: r,
        onUndocked: r
      })].concat(a);
    };
  var oA = Object.freeze({
    __proto__: null,
    setup: function setup(e, t, o) {
      e.inline || (t.header.isPositionedAtTop() || e.on("ResizeEditor", function () {
        o().each($E.reset);
      }), e.on("ResizeWindow ResizeEditor", function () {
        o().each(ZE);
      }), e.on("SkinLoaded", function () {
        o().each(function (e) {
          $E.isDocked(e) ? $E.reset(e) : $E.refresh(e);
        });
      }), e.on("FullscreenStateChanged", function () {
        o().each($E.reset);
      })), e.on("AfterScrollIntoView", function (e) {
        o().each(function (t) {
          $E.refresh(t);
          var o = t.element;
          Ig(o) && function (e, t) {
            var o = et(t),
              n = nt(t).dom.innerHeight,
              s = Uo(o),
              r = Ve(e.elm),
              a = Zo(r),
              i = Wt(r),
              l = a.y,
              c = l + i,
              d = Xt(t),
              u = Wt(t),
              m = d.top,
              g = m + u,
              p = Math.abs(m - s.top) < 2,
              h = Math.abs(g - (s.top + n)) < 2;
            if (p && l < g) Wo(s.left, l - u, o);else if (h && c > m) {
              var _e26 = l - n + i + u;
              Wo(s.left, _e26, o);
            }
          }(e, o);
        });
      }), e.on("PostRender", function () {
        eA(e, !1);
      });
    },
    isDocked: function isDocked(e) {
      return e().map($E.isDocked).getOr(!1);
    },
    getBehaviours: tA
  });
  var nA = Dn([tv, ns("items", Fn([Rn([ov, ds("items", Hn)]), Hn]))].concat(Dv)),
    sA = [ps("text"), ps("tooltip"), ps("icon"), xs("search", !1, Fn([Ln, Dn([ps("placeholder")])], function (e) {
      return d(e) ? e ? A.some({
        placeholder: A.none()
      }) : A.none() : A.some(e);
    })), is("fetch"), Os("onSetup", function () {
      return b;
    })],
    rA = Dn([tv].concat(sA)),
    aA = function aA(e) {
      return qn("menubutton", rA, e);
    },
    iA = Dn([tv, fv, hv, pv, yv, lv, mv, ks("presets", "normal", ["normal", "color", "listpreview"]), Cv(1), dv, uv]);
  var lA = fm({
    factory: function factory(e, t) {
      var o = {
        focus: Pp.focusIn,
        setMenus: function setMenus(e, o) {
          var n = H(o, function (e) {
            var o = {
                type: "menubutton",
                text: e.text,
                fetch: function fetch(t) {
                  t(e.getItems());
                }
              },
              n = aA(o).mapError(function (e) {
                return Kn(e);
              }).getOrDie();
            return t_(n, "tox-mbtn", t.backstage, A.some("menuitem"));
          });
          Kp.set(e, n);
        }
      };
      return {
        uid: e.uid,
        dom: e.dom,
        components: [],
        behaviours: kl([Kp.config({}), Jp("menubar-events", [Kr(function (t) {
          e.onSetup(t);
        }), Ur(qs(), function (e, t) {
          pi(e.element, ".tox-mbtn--active").each(function (o) {
            hi(t.event.target, ".tox-mbtn").each(function (t) {
              Ze(o, t) || e.getSystem().getByDom(o).each(function (o) {
                e.getSystem().getByDom(t).each(function (e) {
                  Dw.expand(e), Dw.close(o), oh.focus(e);
                });
              });
            });
          });
        }), Ur(_r(), function (e, t) {
          t.event.prevFocus.bind(function (t) {
            return e.getSystem().getByDom(t).toOptional();
          }).each(function (o) {
            t.event.newFocus.bind(function (t) {
              return e.getSystem().getByDom(t).toOptional();
            }).each(function (e) {
              Dw.isOpen(o) && (Dw.expand(e), Dw.close(o));
            });
          });
        })]), Pp.config({
          mode: "flow",
          selector: ".tox-mbtn",
          onEscape: function onEscape(t) {
            return e.onEscape(t), A.some(!0);
          }
        }), cS.config({})]),
        apis: o,
        domModification: {
          attributes: {
            role: "menubar"
          }
        }
      };
    },
    name: "silver.Menubar",
    configFields: [os("dom"), os("uid"), os("onEscape"), os("backstage"), ys("onSetup", b)],
    apis: {
      focus: function focus(e, t) {
        e.focus(t);
      },
      setMenus: function setMenus(e, t, o) {
        e.setMenus(t, o);
      }
    }
  });
  var cA = "container",
    dA = [hu("slotBehaviours", [])],
    uA = function uA(e) {
      return "<alloy.field." + e + ">";
    },
    mA = function mA(e, t) {
      var o = function o(t) {
          return am(e);
        },
        n = function n(t, o) {
          return function (n, s) {
            return om(n, e, s).map(function (e) {
              return t(e, s);
            }).getOr(o);
          };
        },
        s = function s(e, t) {
          return "true" !== Ot(e.element, "aria-hidden");
        },
        r = n(s, !1),
        a = n(function (e, t) {
          if (s(e)) {
            var _o37 = e.element;
            Dt(_o37, "display", "none"), kt(_o37, "aria-hidden", "true"), Ir(e, Tr(), {
              name: t,
              visible: !1
            });
          }
        }),
        i = function (e) {
          return function (t, o) {
            L(o, function (o) {
              return e(t, o);
            });
          };
        }(a),
        l = n(function (e, t) {
          if (!s(e)) {
            var _o38 = e.element;
            Ht(_o38, "display"), Et(_o38, "aria-hidden"), Ir(e, Tr(), {
              name: t,
              visible: !0
            });
          }
        }),
        c = {
          getSlotNames: o,
          getSlot: function getSlot(t, o) {
            return om(t, e, o);
          },
          isShowing: r,
          hideSlot: a,
          hideAllSlots: function hideAllSlots(e) {
            return i(e, o());
          },
          showSlot: l
        };
      return {
        uid: e.uid,
        dom: e.dom,
        components: t,
        behaviours: fu(e.slotBehaviours),
        apis: c
      };
    },
    gA = ce({
      getSlotNames: function getSlotNames(e, t) {
        return e.getSlotNames(t);
      },
      getSlot: function getSlot(e, t, o) {
        return e.getSlot(t, o);
      },
      isShowing: function isShowing(e, t, o) {
        return e.isShowing(t, o);
      },
      hideSlot: function hideSlot(e, t, o) {
        return e.hideSlot(t, o);
      },
      hideAllSlots: function hideAllSlots(e, t) {
        return e.hideAllSlots(t);
      },
      showSlot: function showSlot(e, t, o) {
        return e.showSlot(t, o);
      }
    }, function (e) {
      return Ca(e);
    }),
    pA = _objectSpread(_objectSpread({}, gA), {}, {
      sketch: function sketch(e) {
        var t = function () {
            var e = [];
            return {
              slot: function slot(t, o) {
                return e.push(t), Ju(cA, uA(t), o);
              },
              record: x(e)
            };
          }(),
          o = e(t),
          n = t.record(),
          s = H(n, function (e) {
            return Uu({
              name: e,
              pname: uA(e)
            });
          });
        return mm(cA, dA, s, mA, o);
      }
    }),
    hA = Dn([hv, fv, Os("onShow", b), Os("onHide", b), mv]),
    fA = function fA(e) {
      return {
        element: function element() {
          return e.element.dom;
        }
      };
    },
    bA = function bA(e, t) {
      var o = H(ae(t), function (e) {
        var o = t[e],
          n = Xn(function (e) {
            return qn("sidebar", hA, e);
          }(o));
        return {
          name: e,
          getApi: fA,
          onSetup: n.onSetup,
          onShow: n.onShow,
          onHide: n.onHide
        };
      });
      return H(o, function (t) {
        var n = Es(b);
        return e.slot(t.name, {
          dom: {
            tag: "div",
            classes: ["tox-sidebar__pane"]
          },
          behaviours: ly([Ty(t, n), Ey(t, n), Ur(Tr(), function (e, t) {
            var n = t.event,
              s = G(o, function (e) {
                return e.name === n.name;
              });
            s.each(function (t) {
              (n.visible ? t.onShow : t.onHide)(t.getApi(e));
            });
          })])
        });
      });
    },
    vA = function vA(e) {
      return pA.sketch(function (t) {
        return {
          dom: {
            tag: "div",
            classes: ["tox-sidebar__pane-container"]
          },
          components: bA(t, e),
          slotBehaviours: ly([Kr(function (e) {
            return pA.hideAllSlots(e);
          })])
        };
      });
    },
    yA = function yA(e, t) {
      kt(e, "role", t);
    },
    xA = function xA(e) {
      return wm.getCurrent(e).bind(function (e) {
        return QO.isGrowing(e) || QO.hasGrown(e) ? wm.getCurrent(e).bind(function (e) {
          return G(pA.getSlotNames(e), function (t) {
            return pA.isShowing(e, t);
          });
        }) : A.none();
      });
    },
    wA = la("FixSizeEvent"),
    SA = la("AutoSizeEvent");
  var kA = Object.freeze({
      __proto__: null,
      block: function block(e, t, o, n) {
        kt(e.element, "aria-busy", !0);
        var s = t.getRoot(e).getOr(e),
          r = kl([Pp.config({
            mode: "special",
            onTab: function onTab() {
              return A.some(!0);
            },
            onShiftTab: function onShiftTab() {
              return A.some(!0);
            }
          }), oh.config({})]),
          a = n(s, r),
          i = s.getSystem().build(a);
        Kp.append(s, ai(i)), i.hasConfigured(Pp) && t.focus && Pp.focusIn(i), o.isBlocked() || t.onBlock(e), o.blockWith(function () {
          return Kp.remove(s, i);
        });
      },
      unblock: function unblock(e, t, o) {
        Et(e.element, "aria-busy"), o.isBlocked() && t.onUnblock(e), o.clear();
      },
      isBlocked: function isBlocked(e, t, o) {
        return o.isBlocked();
      }
    }),
    CA = [Os("getRoot", A.none), Cs("focus", !0), Di("onBlock"), Di("onUnblock")];
  var OA = Ol({
      fields: CA,
      name: "blocking",
      apis: kA,
      state: Object.freeze({
        __proto__: null,
        init: function init() {
          var e = Jl(function (e) {
            return e.destroy();
          });
          return _a({
            readState: e.isSet,
            blockWith: function blockWith(t) {
              e.set({
                destroy: t
              });
            },
            clear: e.clear,
            isBlocked: e.isSet
          });
        }
      })
    }),
    _A = function _A(e) {
      var t = Ie(e),
        o = it(t),
        n = function (e) {
          var t = void 0 !== e.dom.attributes ? e.dom.attributes : [];
          return j(t, function (e, t) {
            return "class" === t.name ? e : _objectSpread(_objectSpread({}, e), {}, _defineProperty({}, t.name, t.value));
          }, {});
        }(t),
        s = function (e) {
          return Array.prototype.slice.call(e.dom.classList, 0);
        }(t),
        r = 0 === o.length ? {} : {
          innerHtml: ea(t)
        };
      return _objectSpread({
        tag: Ue(t),
        classes: s,
        attributes: n
      }, r);
    },
    TA = function TA(e) {
      return wm.getCurrent(e).each(function (e) {
        return Dl(e.element);
      });
    },
    EA = function EA(e, t, o) {
      var n = Es(!1),
        s = Ql(),
        r = function r(o) {
          var s;
          n.get() && (!function (e) {
            return "focusin" === e.type;
          }(s = o) || !(s.composed ? oe(s.composedPath()) : A.from(s.target)).map(Ve).filter(Ge).exists(function (e) {
            return Ua(e, "mce-pastebin");
          })) && (o.preventDefault(), TA(t()), e.editorManager.setActive(e));
        };
      e.inline || e.on("PreInit", function () {
        e.dom.bind(e.getWin(), "focusin", r), e.on("BeforeExecCommand", function (e) {
          "mcefocus" === e.command.toLowerCase() && !0 !== e.value && r(e);
        });
      });
      var a = function a(s) {
        s !== n.get() && (n.set(s), function (e, t, o, n) {
          var s = t.element;
          if (function (e, t) {
            var o = "tabindex",
              n = "data-mce-".concat(o);
            A.from(e.iframeElement).map(Ve).each(function (e) {
              t ? (_t(e, o).each(function (t) {
                return kt(e, n, t);
              }), kt(e, o, -1)) : (Et(e, o), _t(e, n).each(function (t) {
                kt(e, o, t), Et(e, n);
              }));
            });
          }(e, o), o) OA.block(t, function (e) {
            return function (t, o) {
              return {
                dom: {
                  tag: "div",
                  attributes: {
                    "aria-label": e.translate("Loading..."),
                    tabindex: "0"
                  },
                  classes: ["tox-throbber__busy-spinner"]
                },
                components: [{
                  dom: _A('<div class="tox-spinner"><div></div><div></div><div></div></div>')
                }]
              };
            };
          }(n)), Ht(s, "display"), Et(s, "aria-hidden"), e.hasFocus() && TA(t);else {
            var _o39 = wm.getCurrent(t).exists(function (e) {
              return Fl(e.element);
            });
            OA.unblock(t), Dt(s, "display", "none"), kt(s, "aria-hidden", "true"), _o39 && e.focus();
          }
        }(e, t(), s, o.providers), function (e, t) {
          e.dispatch("AfterProgressState", {
            state: t
          });
        }(e, s));
      };
      e.on("ProgressState", function (t) {
        if (s.on(clearTimeout), h(t.time)) {
          var _o40 = Uh.setEditorTimeout(e, function () {
            return a(t.state);
          }, t.time);
          s.set(_o40);
        } else a(t.state), s.clear();
      });
    },
    AA = function AA(e, t, o) {
      return {
        within: e,
        extra: t,
        withinWidth: o
      };
    },
    MA = function MA(e, t, o) {
      var n = j(e, function (e, t) {
          return function (e, t) {
            var n = o(e);
            return A.some({
              element: e,
              start: t,
              finish: t + n,
              width: n
            });
          }(t, e.len).fold(x(e), function (t) {
            return {
              len: t.finish,
              list: e.list.concat([t])
            };
          });
        }, {
          len: 0,
          list: []
        }).list,
        s = U(n, function (e) {
          return e.finish <= t;
        }),
        r = W(s, function (e, t) {
          return e + t.width;
        }, 0);
      return {
        within: s,
        extra: n.slice(s.length),
        withinWidth: r
      };
    },
    DA = function DA(e) {
      return H(e, function (e) {
        return e.element;
      });
    },
    BA = function BA(e, t) {
      var o = H(t, function (e) {
        return ai(e);
      });
      pE.setGroups(e, o);
    },
    FA = function FA(e, t, o) {
      var n = t.builtGroups.get();
      if (0 === n.length) return;
      var s = nm(e, t, "primary"),
        r = uw.getCoupled(e, "overflowGroup");
      Dt(s.element, "visibility", "hidden");
      var a = n.concat([r]),
        i = re(a, function (e) {
          return Rl(e.element).bind(function (t) {
            return e.getSystem().getByDom(t).toOptional();
          });
        });
      o([]), BA(s, a);
      var l = function (e, t, o, n) {
        var s = function (e, t, o) {
            var n = MA(t, e, o);
            return 0 === n.extra.length ? A.some(n) : A.none();
          }(e, t, o).getOrThunk(function () {
            return MA(t, e - o(n), o);
          }),
          r = s.within,
          a = s.extra,
          i = s.withinWidth;
        return 1 === a.length && a[0].width <= o(n) ? function (e, t, o) {
          var n = DA(e.concat(t));
          return AA(n, [], o);
        }(r, a, i) : a.length >= 1 ? function (e, t, o, n) {
          var s = DA(e).concat([o]);
          return AA(s, DA(t), n);
        }(r, a, n, i) : function (e, t, o) {
          return AA(DA(e), [], o);
        }(r, 0, i);
      }(Jt(s.element), t.builtGroups.get(), function (e) {
        return Jt(e.element);
      }, r);
      0 === l.extra.length ? (Kp.remove(s, r), o([])) : (BA(s, l.within), o(l.extra)), Ht(s.element, "visibility"), Lt(s.element), i.each(oh.focus);
    },
    IA = x([hu("splitToolbarBehaviours", [uw]), es("builtGroups", function () {
      return Es([]);
    })]),
    RA = x([Ai(["overflowToggledClass"]), fs("getOverflowBounds"), os("lazySink"), es("overflowGroups", function () {
      return Es([]);
    }), Di("onOpened"), Di("onClosed")].concat(IA())),
    NA = x([Uu({
      factory: pE,
      schema: mE(),
      name: "primary"
    }), Wu({
      schema: mE(),
      name: "overflow"
    }), Wu({
      name: "overflow-button"
    }), Wu({
      name: "overflow-group"
    })]),
    VA = x(function (e, t) {
      (function (e, t) {
        var o = Kt.max(e, t, ["margin-left", "border-left-width", "padding-left", "padding-right", "border-right-width", "margin-right"]);
        Dt(e, "max-width", o + "px");
      })(e, Math.floor(t));
    }),
    zA = x([Ai(["toggledClass"]), os("lazySink"), is("fetch"), fs("getBounds"), vs("fireDismissalEventInstead", [ys("event", Cr())]), wc(), Di("onToggled")]),
    HA = x([Wu({
      name: "button",
      overrides: function overrides(e) {
        return {
          dom: {
            attributes: {
              "aria-haspopup": "true"
            }
          },
          buttonBehaviours: kl([dh.config({
            toggleClass: e.markers.toggledClass,
            aria: {
              mode: "expanded"
            },
            toggleOnExecute: !1,
            onToggled: e.onToggled
          })])
        };
      }
    }), Wu({
      factory: pE,
      schema: mE(),
      name: "toolbar",
      overrides: function overrides(e) {
        return {
          toolbarBehaviours: kl([Pp.config({
            mode: "cyclic",
            onEscape: function onEscape(t) {
              return om(t, e, "button").each(oh.focus), A.none();
            }
          })])
        };
      }
    })]),
    LA = Ql(),
    PA = function PA(e, t) {
      var o = uw.getCoupled(e, "toolbarSandbox");
      Xd.isOpen(o) ? Xd.close(o) : Xd.open(o, t.toolbar());
    },
    UA = function UA(e, t, o, n) {
      var s = o.getBounds.map(function (e) {
          return e();
        }),
        r = o.lazySink(e).getOrDie();
      Sd.positionWithinBounds(r, t, {
        anchor: {
          type: "hotspot",
          hotspot: e,
          layouts: n,
          overrides: {
            maxWidthFunction: VA()
          }
        }
      }, s);
    },
    WA = function WA(e, t, o, n, s) {
      pE.setGroups(t, s), UA(e, t, o, n), dh.on(e);
    },
    jA = bm({
      name: "FloatingToolbarButton",
      factory: function factory(e, t, o, n) {
        return _objectSpread(_objectSpread({}, Wh.sketch(_objectSpread(_objectSpread({}, n.button()), {}, {
          action: function action(e) {
            PA(e, n);
          },
          buttonBehaviours: yu({
            dump: n.button().buttonBehaviours
          }, [uw.config({
            others: {
              toolbarSandbox: function toolbarSandbox(t) {
                return function (e, t, o) {
                  var n = bi();
                  return {
                    dom: {
                      tag: "div",
                      attributes: {
                        id: n.id
                      }
                    },
                    behaviours: kl([Pp.config({
                      mode: "special",
                      onEscape: function onEscape(e) {
                        return Xd.close(e), A.some(!0);
                      }
                    }), Xd.config({
                      onOpen: function onOpen(s, r) {
                        var a = LA.get().getOr(!1);
                        o.fetch().get(function (s) {
                          WA(e, r, o, t.layouts, s), n.link(e.element), a || Pp.focusIn(r);
                        });
                      },
                      onClose: function onClose() {
                        dh.off(e), LA.get().getOr(!1) || oh.focus(e), n.unlink(e.element);
                      },
                      isPartOf: function isPartOf(t, o, n) {
                        return vi(o, n) || vi(e, n);
                      },
                      getAttachPoint: function getAttachPoint() {
                        return o.lazySink(e).getOrDie();
                      }
                    }), Al.config({
                      channels: _objectSpread(_objectSpread({}, Qd(_objectSpread({
                        isExtraPart: T
                      }, o.fireDismissalEventInstead.map(function (e) {
                        return {
                          fireEventInstead: {
                            event: e.event
                          }
                        };
                      }).getOr({})))), tu({
                        doReposition: function doReposition() {
                          Xd.getState(uw.getCoupled(e, "toolbarSandbox")).each(function (n) {
                            UA(e, n, o, t.layouts);
                          });
                        }
                      }))
                    })])
                  };
                }(t, o, e);
              }
            }
          })])
        }))), {}, {
          apis: {
            setGroups: function setGroups(t, n) {
              Xd.getState(uw.getCoupled(t, "toolbarSandbox")).each(function (s) {
                WA(t, s, e, o.layouts, n);
              });
            },
            reposition: function reposition(t) {
              Xd.getState(uw.getCoupled(t, "toolbarSandbox")).each(function (n) {
                UA(t, n, e, o.layouts);
              });
            },
            toggle: function toggle(e) {
              PA(e, n);
            },
            toggleWithoutFocusing: function toggleWithoutFocusing(e) {
              (function (e, t) {
                LA.set(!0), PA(e, t), LA.clear();
              })(e, n);
            },
            getToolbar: function getToolbar(e) {
              return Xd.getState(uw.getCoupled(e, "toolbarSandbox"));
            },
            isOpen: function isOpen(e) {
              return Xd.isOpen(uw.getCoupled(e, "toolbarSandbox"));
            }
          }
        });
      },
      configFields: zA(),
      partFields: HA(),
      apis: {
        setGroups: function setGroups(e, t, o) {
          e.setGroups(t, o);
        },
        reposition: function reposition(e, t) {
          e.reposition(t);
        },
        toggle: function toggle(e, t) {
          e.toggle(t);
        },
        toggleWithoutFocusing: function toggleWithoutFocusing(e, t) {
          e.toggleWithoutFocusing(t);
        },
        getToolbar: function getToolbar(e, t) {
          return e.getToolbar(t);
        },
        isOpen: function isOpen(e, t) {
          return e.isOpen(t);
        }
      }
    }),
    GA = x([os("items"), Ai(["itemSelector"]), hu("tgroupBehaviours", [Pp])]),
    $A = x([Gu({
      name: "items",
      unit: "item"
    })]),
    qA = bm({
      name: "ToolbarGroup",
      configFields: GA(),
      partFields: $A(),
      factory: function factory(e, t, o, n) {
        return {
          uid: e.uid,
          dom: e.dom,
          components: t,
          behaviours: bu(e.tgroupBehaviours, [Pp.config({
            mode: "flow",
            selector: e.markers.itemSelector
          })]),
          domModification: {
            attributes: {
              role: "toolbar"
            }
          }
        };
      }
    }),
    XA = function XA(e) {
      return H(e, function (e) {
        return ai(e);
      });
    },
    YA = function YA(e, t, o) {
      FA(e, o, function (n) {
        o.overflowGroups.set(n), t.getOpt(e).each(function (e) {
          jA.setGroups(e, XA(n));
        });
      });
    },
    KA = bm({
      name: "SplitFloatingToolbar",
      configFields: RA(),
      partFields: NA(),
      factory: function factory(e, t, o, n) {
        var s = jh(jA.sketch({
          fetch: function fetch() {
            return fw(function (t) {
              t(XA(e.overflowGroups.get()));
            });
          },
          layouts: {
            onLtr: function onLtr() {
              return [rl, sl];
            },
            onRtl: function onRtl() {
              return [sl, rl];
            },
            onBottomLtr: function onBottomLtr() {
              return [il, al];
            },
            onBottomRtl: function onBottomRtl() {
              return [al, il];
            }
          },
          getBounds: o.getOverflowBounds,
          lazySink: e.lazySink,
          fireDismissalEventInstead: {},
          markers: {
            toggledClass: e.markers.overflowToggledClass
          },
          parts: {
            button: n["overflow-button"](),
            toolbar: n.overflow()
          },
          onToggled: function onToggled(t, o) {
            return e[o ? "onOpened" : "onClosed"](t);
          }
        }));
        return {
          uid: e.uid,
          dom: e.dom,
          components: t,
          behaviours: bu(e.splitToolbarBehaviours, [uw.config({
            others: {
              overflowGroup: function overflowGroup() {
                return qA.sketch(_objectSpread(_objectSpread({}, n["overflow-group"]()), {}, {
                  items: [s.asSpec()]
                }));
              }
            }
          })]),
          apis: {
            setGroups: function setGroups(t, o) {
              e.builtGroups.set(H(o, t.getSystem().build)), YA(t, s, e);
            },
            refresh: function refresh(t) {
              return YA(t, s, e);
            },
            toggle: function toggle(e) {
              s.getOpt(e).each(function (e) {
                jA.toggle(e);
              });
            },
            toggleWithoutFocusing: function toggleWithoutFocusing(e) {
              s.getOpt(e).each(jA.toggleWithoutFocusing);
            },
            isOpen: function isOpen(e) {
              return s.getOpt(e).map(jA.isOpen).getOr(!1);
            },
            reposition: function reposition(e) {
              s.getOpt(e).each(function (e) {
                jA.reposition(e);
              });
            },
            getOverflow: function getOverflow(e) {
              return s.getOpt(e).bind(jA.getToolbar);
            }
          },
          domModification: {
            attributes: {
              role: "group"
            }
          }
        };
      },
      apis: {
        setGroups: function setGroups(e, t, o) {
          e.setGroups(t, o);
        },
        refresh: function refresh(e, t) {
          e.refresh(t);
        },
        reposition: function reposition(e, t) {
          e.reposition(t);
        },
        toggle: function toggle(e, t) {
          e.toggle(t);
        },
        toggleWithoutFocusing: function toggleWithoutFocusing(e, t) {
          e.toggle(t);
        },
        isOpen: function isOpen(e, t) {
          return e.isOpen(t);
        },
        getOverflow: function getOverflow(e, t) {
          return e.getOverflow(t);
        }
      }
    }),
    JA = x([Ai(["closedClass", "openClass", "shrinkingClass", "growingClass", "overflowToggledClass"]), Di("onOpened"), Di("onClosed")].concat(IA())),
    ZA = x([Uu({
      factory: pE,
      schema: mE(),
      name: "primary"
    }), Uu({
      factory: pE,
      schema: mE(),
      name: "overflow",
      overrides: function overrides(e) {
        return {
          toolbarBehaviours: kl([QO.config({
            dimension: {
              property: "height"
            },
            closedClass: e.markers.closedClass,
            openClass: e.markers.openClass,
            shrinkingClass: e.markers.shrinkingClass,
            growingClass: e.markers.growingClass,
            onShrunk: function onShrunk(t) {
              om(t, e, "overflow-button").each(function (e) {
                dh.off(e), oh.focus(e);
              }), e.onClosed(t);
            },
            onGrown: function onGrown(t) {
              Pp.focusIn(t), e.onOpened(t);
            },
            onStartGrow: function onStartGrow(t) {
              om(t, e, "overflow-button").each(dh.on);
            }
          }), Pp.config({
            mode: "acyclic",
            onEscape: function onEscape(t) {
              return om(t, e, "overflow-button").each(oh.focus), A.some(!0);
            }
          })])
        };
      }
    }), Wu({
      name: "overflow-button",
      overrides: function overrides(e) {
        return {
          buttonBehaviours: kl([dh.config({
            toggleClass: e.markers.overflowToggledClass,
            aria: {
              mode: "pressed"
            },
            toggleOnExecute: !1
          })])
        };
      }
    }), Wu({
      name: "overflow-group"
    })]),
    QA = function QA(e, t) {
      om(e, t, "overflow-button").bind(function () {
        return om(e, t, "overflow");
      }).each(function (o) {
        eM(e, t), QO.toggleGrow(o);
      });
    },
    eM = function eM(e, t) {
      om(e, t, "overflow").each(function (o) {
        FA(e, t, function (e) {
          var t = H(e, function (e) {
            return ai(e);
          });
          pE.setGroups(o, t);
        }), om(e, t, "overflow-button").each(function (e) {
          QO.hasGrown(o) && dh.on(e);
        }), QO.refresh(o);
      });
    },
    tM = bm({
      name: "SplitSlidingToolbar",
      configFields: JA(),
      partFields: ZA(),
      factory: function factory(e, t, o, n) {
        var s = "alloy.toolbar.toggle";
        return {
          uid: e.uid,
          dom: e.dom,
          components: t,
          behaviours: bu(e.splitToolbarBehaviours, [uw.config({
            others: {
              overflowGroup: function overflowGroup(e) {
                return qA.sketch(_objectSpread(_objectSpread({}, n["overflow-group"]()), {}, {
                  items: [Wh.sketch(_objectSpread(_objectSpread({}, n["overflow-button"]()), {}, {
                    action: function action(t) {
                      Fr(e, s);
                    }
                  }))]
                }));
              }
            }
          }), Jp("toolbar-toggle-events", [Ur(s, function (t) {
            QA(t, e);
          })])]),
          apis: {
            setGroups: function setGroups(t, o) {
              (function (t, o) {
                var n = H(o, t.getSystem().build);
                e.builtGroups.set(n);
              })(t, o), eM(t, e);
            },
            refresh: function refresh(t) {
              return eM(t, e);
            },
            toggle: function toggle(t) {
              return QA(t, e);
            },
            isOpen: function isOpen(t) {
              return function (e, t) {
                return om(e, t, "overflow").map(QO.hasGrown).getOr(!1);
              }(t, e);
            }
          },
          domModification: {
            attributes: {
              role: "group"
            }
          }
        };
      },
      apis: {
        setGroups: function setGroups(e, t, o) {
          e.setGroups(t, o);
        },
        refresh: function refresh(e, t) {
          e.refresh(t);
        },
        toggle: function toggle(e, t) {
          e.toggle(t);
        },
        isOpen: function isOpen(e, t) {
          return e.isOpen(t);
        }
      }
    }),
    oM = function oM(e) {
      var t = e.title.fold(function () {
        return {};
      }, function (e) {
        return {
          attributes: {
            title: e
          }
        };
      });
      return {
        dom: _objectSpread({
          tag: "div",
          classes: ["tox-toolbar__group"]
        }, t),
        components: [qA.parts.items({})],
        items: e.items,
        markers: {
          itemSelector: "*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"
        },
        tgroupBehaviours: kl([cS.config({}), oh.config({})])
      };
    },
    nM = function nM(e) {
      return qA.sketch(oM(e));
    },
    sM = function sM(e, t) {
      var o = Kr(function (t) {
        var o = H(e.initGroups, nM);
        pE.setGroups(t, o);
      });
      return kl([Oy(e.providers.isDisabled), Sy(), Pp.config({
        mode: t,
        onEscape: e.onEscape,
        selector: ".tox-toolbar__group"
      }), Jp("toolbar-events", [o])]);
    },
    rM = function rM(e) {
      var t = e.cyclicKeying ? "cyclic" : "acyclic";
      return {
        uid: e.uid,
        dom: {
          tag: "div",
          classes: ["tox-toolbar-overlord"]
        },
        parts: {
          "overflow-group": oM({
            title: A.none(),
            items: []
          }),
          "overflow-button": T_({
            name: "more",
            icon: A.some("more-drawer"),
            enabled: !0,
            tooltip: A.some("Reveal or hide additional toolbar items"),
            primary: !1,
            buttonType: A.none(),
            borderless: !1
          }, A.none(), e.providers)
        },
        splitToolbarBehaviours: sM(e, t)
      };
    },
    aM = function aM(e) {
      var t = rM(e),
        o = KA.parts.primary({
          dom: {
            tag: "div",
            classes: ["tox-toolbar__primary"]
          }
        });
      return KA.sketch(_objectSpread(_objectSpread({}, t), {}, {
        lazySink: e.getSink,
        getOverflowBounds: function getOverflowBounds() {
          var t = e.moreDrawerData.lazyHeader().element,
            o = Zo(t),
            n = ot(t),
            s = Zo(n),
            r = Math.max(n.dom.scrollHeight, s.height);
          return Ko(o.x + 4, s.y, o.width - 8, r);
        },
        parts: _objectSpread(_objectSpread({}, t.parts), {}, {
          overflow: {
            dom: {
              tag: "div",
              classes: ["tox-toolbar__overflow"],
              attributes: e.attributes
            }
          }
        }),
        components: [o],
        markers: {
          overflowToggledClass: "tox-tbtn--enabled"
        },
        onOpened: function onOpened(t) {
          return e.onToggled(t, !0);
        },
        onClosed: function onClosed(t) {
          return e.onToggled(t, !1);
        }
      }));
    },
    iM = function iM(e) {
      var t = tM.parts.primary({
          dom: {
            tag: "div",
            classes: ["tox-toolbar__primary"]
          }
        }),
        o = tM.parts.overflow({
          dom: {
            tag: "div",
            classes: ["tox-toolbar__overflow"]
          }
        }),
        n = rM(e);
      return tM.sketch(_objectSpread(_objectSpread({}, n), {}, {
        components: [t, o],
        markers: {
          openClass: "tox-toolbar__overflow--open",
          closedClass: "tox-toolbar__overflow--closed",
          growingClass: "tox-toolbar__overflow--growing",
          shrinkingClass: "tox-toolbar__overflow--shrinking",
          overflowToggledClass: "tox-tbtn--enabled"
        },
        onOpened: function onOpened(t) {
          t.getSystem().broadcastOn([qE()], {
            type: "opened"
          }), e.onToggled(t, !0);
        },
        onClosed: function onClosed(t) {
          t.getSystem().broadcastOn([qE()], {
            type: "closed"
          }), e.onToggled(t, !1);
        }
      }));
    },
    lM = function lM(e) {
      var t = e.cyclicKeying ? "cyclic" : "acyclic";
      return pE.sketch({
        uid: e.uid,
        dom: {
          tag: "div",
          classes: ["tox-toolbar"].concat(e.type === nf.scrolling ? ["tox-toolbar--scrolling"] : [])
        },
        components: [pE.parts.groups({})],
        toolbarBehaviours: sM(e, t)
      });
    },
    cM = [pv, hv, ps("tooltip"), ks("buttonType", "secondary", ["primary", "secondary"]), Cs("borderless", !1), is("onAction")],
    dM = {
      button: [].concat(cM, [sv, as("type", ["button"])]),
      togglebutton: [].concat(cM, [Cs("active", !1), as("type", ["togglebutton"])])
    },
    uM = [as("type", ["group"]), _s("buttons", [], Jn("type", dM))],
    mM = Jn("type", _objectSpread(_objectSpread({}, dM), {}, {
      group: uM
    })),
    gM = Dn([_s("buttons", [], mM), is("onShow"), is("onHide")]),
    pM = function pM(e, t) {
      return function (e, t, _i$concat$concat$conc, _i$concat$concat, _i$concat) {
        var o, n;
        var s = "togglebutton" === e.type,
          r = e.icon.map(function (e) {
            return fO(e, t.icons);
          }).map(jh),
          a = _objectSpread(_objectSpread({}, e), {}, {
            name: s ? e.text.getOr(e.icon.getOr("")) : null !== (o = e.text) && void 0 !== o ? o : e.icon.getOr(""),
            primary: "primary" === e.buttonType,
            buttonType: A.from(e.buttonType),
            tooltip: e.tooltip,
            icon: e.icon,
            enabled: !0,
            borderless: e.borderless
          }),
          i = E_(null !== (n = e.buttonType) && void 0 !== n ? n : "secondary"),
          l = s ? e.text.map(t.translate) : A.some(t.translate(e.text)),
          c = l.map(ti),
          d = a.tooltip.or(l).map(function (e) {
            return {
              "aria-label": t.translate(e),
              title: t.translate(e)
            };
          }).getOr({}),
          u = r.map(function (e) {
            return e.asSpec();
          }),
          m = Dy([u, c]),
          g = e.icon.isSome() && c.isSome(),
          p = {
            tag: "button",
            classes: (_i$concat$concat$conc = (_i$concat$concat = (_i$concat = i.concat.apply(i, _toConsumableArray(e.icon.isSome() && !g ? ["tox-button--icon"] : []))).concat.apply(_i$concat, _toConsumableArray(g ? ["tox-button--icon-and-text"] : []))).concat.apply(_i$concat$concat, _toConsumableArray(e.borderless ? ["tox-button--naked"] : []))).concat.apply(_i$concat$concat$conc, _toConsumableArray("togglebutton" === e.type && e.active ? ["tox-button--enabled"] : [])),
            attributes: d
          },
          h = __(a, A.some(function (o) {
            var n = function n(e) {
              r.map(function (n) {
                return n.getOpt(o).each(function (o) {
                  Kp.set(o, [fO(e, t.icons)]);
                });
              });
            };
            return s ? e.onAction({
              setIcon: n,
              setActive: function setActive(e) {
                var t = o.element;
                e ? (La(t, "tox-button--enabled"), kt(t, "aria-pressed", !0)) : (Pa(t, "tox-button--enabled"), Et(t, "aria-pressed"));
              },
              isActive: function isActive() {
                return Ua(o.element, "tox-button--enabled");
              }
            }) : "button" === e.type ? e.onAction({
              setIcon: n
            }) : void 0;
          }), [], p, m, t);
        return Wh.sketch(h);
      }(e, t);
    },
    hM = Do().deviceType,
    fM = hM.isPhone(),
    bM = hM.isTablet();
  var vM = bm({
    name: "silver.View",
    configFields: [os("viewConfig")],
    partFields: [ju({
      factory: {
        sketch: function sketch(e) {
          var t = !1;
          var o = H(e.buttons, function (o) {
            return "group" === o.type ? (t = !0, function (e, t) {
              return {
                dom: {
                  tag: "div",
                  classes: ["tox-view__toolbar__group"]
                },
                components: H(e.buttons, function (e) {
                  return pM(e, t);
                })
              };
            }(o, e.providers)) : pM(o, e.providers);
          });
          return {
            uid: e.uid,
            dom: {
              tag: "div",
              classes: [t ? "tox-view__toolbar" : "tox-view__header"].concat(_toConsumableArray(fM || bM ? ["tox-view--mobile", "tox-view--scrolling"] : []))
            },
            behaviours: kl([oh.config({}), Pp.config({
              mode: "flow",
              selector: "button, .tox-button",
              focusInside: pg.OnEnterOrSpaceMode
            })]),
            components: t ? o : [oS.sketch({
              dom: {
                tag: "div",
                classes: ["tox-view__header-start"]
              },
              components: []
            }), oS.sketch({
              dom: {
                tag: "div",
                classes: ["tox-view__header-end"]
              },
              components: o
            })]
          };
        }
      },
      schema: [os("buttons"), os("providers")],
      name: "header"
    }), ju({
      factory: {
        sketch: function sketch(e) {
          return {
            uid: e.uid,
            dom: {
              tag: "div",
              classes: ["tox-view__pane"]
            }
          };
        }
      },
      schema: [],
      name: "pane"
    })],
    factory: function factory(e, t, o, n) {
      var s = {
        getPane: function getPane(t) {
          return aE.getPart(t, e, "pane");
        },
        getOnShow: function getOnShow(t) {
          return e.viewConfig.onShow;
        },
        getOnHide: function getOnHide(t) {
          return e.viewConfig.onHide;
        }
      };
      return {
        uid: e.uid,
        dom: e.dom,
        components: t,
        apis: s
      };
    },
    apis: {
      getPane: function getPane(e, t) {
        return e.getPane(t);
      },
      getOnShow: function getOnShow(e, t) {
        return e.getOnShow(t);
      },
      getOnHide: function getOnHide(e, t) {
        return e.getOnHide(t);
      }
    }
  });
  var yM = function yM(e, t, o) {
      return pe(t, function (t, n) {
        var s = Xn(qn("view", gM, t));
        return e.slot(n, vM.sketch({
          dom: {
            tag: "div",
            classes: ["tox-view"]
          },
          viewConfig: s,
          components: [].concat(_toConsumableArray(s.buttons.length > 0 ? [vM.parts.header({
            buttons: s.buttons,
            providers: o
          })] : []), [vM.parts.pane({})])
        }));
      });
    },
    xM = function xM(e, t) {
      return pA.sketch(function (o) {
        return {
          dom: {
            tag: "div",
            classes: ["tox-view-wrap__slot-container"]
          },
          components: yM(o, e, t),
          slotBehaviours: ly([Kr(function (e) {
            return pA.hideAllSlots(e);
          })])
        };
      });
    },
    wM = function wM(e) {
      return G(pA.getSlotNames(e), function (t) {
        return pA.isShowing(e, t);
      });
    },
    SM = function SM(e, t, o) {
      pA.getSlot(e, t).each(function (e) {
        vM.getPane(e).each(function (t) {
          var n;
          o(e)((n = t.element.dom, {
            getContainer: x(n)
          }));
        });
      });
    };
  var kM = fm({
    factory: function factory(e, t) {
      var o = {
        setViews: function setViews(e, o) {
          Kp.set(e, [xM(o, t.backstage.shared.providers)]);
        },
        whichView: function whichView(e) {
          return wm.getCurrent(e).bind(wM);
        },
        toggleView: function toggleView(e, t, o, n) {
          return wm.getCurrent(e).exists(function (s) {
            var r = wM(s),
              a = r.exists(function (e) {
                return n === e;
              }),
              i = pA.getSlot(s, n).isSome();
            return i && (pA.hideAllSlots(s), a ? (function (e) {
              var t = e.element;
              Dt(t, "display", "none"), kt(t, "aria-hidden", "true");
            }(e), t()) : (o(), function (e) {
              var t = e.element;
              Ht(t, "display"), Et(t, "aria-hidden");
            }(e), pA.showSlot(s, n), function (e, t) {
              SM(e, t, vM.getOnShow);
            }(s, n)), r.each(function (e) {
              return function (e, t) {
                return SM(e, t, vM.getOnHide);
              }(s, e);
            })), i;
          });
        }
      };
      return {
        uid: e.uid,
        dom: {
          tag: "div",
          classes: ["tox-view-wrap"],
          attributes: {
            "aria-hidden": "true"
          },
          styles: {
            display: "none"
          }
        },
        components: [],
        behaviours: kl([Kp.config({}), wm.config({
          find: function find(e) {
            var t = Kp.contents(e);
            return oe(t);
          }
        })]),
        apis: o
      };
    },
    name: "silver.ViewWrapper",
    configFields: [os("backstage")],
    apis: {
      setViews: function setViews(e, t, o) {
        return e.setViews(t, o);
      },
      toggleView: function toggleView(e, t, o, n, s) {
        return e.toggleView(t, o, n, s);
      },
      whichView: function whichView(e, t) {
        return e.whichView(t);
      }
    }
  });
  var CM = iE.optional({
      factory: lA,
      name: "menubar",
      schema: [os("backstage")]
    }),
    OM = iE.optional({
      factory: {
        sketch: function sketch(e) {
          return uE.sketch({
            uid: e.uid,
            dom: e.dom,
            listBehaviours: kl([Pp.config({
              mode: "acyclic",
              selector: ".tox-toolbar"
            })]),
            makeItem: function makeItem() {
              return lM({
                type: e.type,
                uid: la("multiple-toolbar-item"),
                cyclicKeying: !1,
                initGroups: [],
                providers: e.providers,
                onEscape: function onEscape() {
                  return e.onEscape(), A.some(!0);
                }
              });
            },
            setupItem: function setupItem(e, t, o, n) {
              pE.setGroups(t, o);
            },
            shell: !0
          });
        }
      },
      name: "multiple-toolbar",
      schema: [os("dom"), os("onEscape")]
    }),
    _M = iE.optional({
      factory: {
        sketch: function sketch(e) {
          var t = function (e) {
            return e.type === nf.sliding ? iM : e.type === nf.floating ? aM : lM;
          }(e);
          return t({
            type: e.type,
            uid: e.uid,
            onEscape: function onEscape() {
              return e.onEscape(), A.some(!0);
            },
            onToggled: function onToggled(t, o) {
              return e.onToolbarToggled(o);
            },
            cyclicKeying: !1,
            initGroups: [],
            getSink: e.getSink,
            providers: e.providers,
            moreDrawerData: {
              lazyToolbar: e.lazyToolbar,
              lazyMoreButton: e.lazyMoreButton,
              lazyHeader: e.lazyHeader
            },
            attributes: e.attributes
          });
        }
      },
      name: "toolbar",
      schema: [os("dom"), os("onEscape"), os("getSink")]
    }),
    TM = iE.optional({
      factory: {
        sketch: function sketch(e) {
          var t = e.editor,
            o = e.sticky ? tA : bE;
          return {
            uid: e.uid,
            dom: e.dom,
            components: e.components,
            behaviours: kl(o(t, e.sharedBackstage))
          };
        }
      },
      name: "header",
      schema: [os("dom")]
    }),
    EM = iE.optional({
      factory: {
        sketch: function sketch(e) {
          return {
            uid: e.uid,
            dom: e.dom,
            components: [{
              dom: {
                tag: "a",
                attributes: {
                  href: "https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",
                  rel: "noopener",
                  target: "_blank",
                  "aria-hidden": "true"
                },
                classes: ["tox-promotion-link"],
                innerHtml: "\u26A1\uFE0FUpgrade"
              }
            }]
          };
        }
      },
      name: "promotion",
      schema: [os("dom")]
    }),
    AM = iE.optional({
      name: "socket",
      schema: [os("dom")]
    }),
    MM = iE.optional({
      factory: {
        sketch: function sketch(e) {
          return {
            uid: e.uid,
            dom: {
              tag: "div",
              classes: ["tox-sidebar"],
              attributes: {
                role: "presentation"
              }
            },
            components: [{
              dom: {
                tag: "div",
                classes: ["tox-sidebar__slider"]
              },
              components: [],
              behaviours: kl([cS.config({}), oh.config({}), QO.config({
                dimension: {
                  property: "width"
                },
                closedClass: "tox-sidebar--sliding-closed",
                openClass: "tox-sidebar--sliding-open",
                shrinkingClass: "tox-sidebar--sliding-shrinking",
                growingClass: "tox-sidebar--sliding-growing",
                onShrunk: function onShrunk(e) {
                  wm.getCurrent(e).each(pA.hideAllSlots), Fr(e, SA);
                },
                onGrown: function onGrown(e) {
                  Fr(e, SA);
                },
                onStartGrow: function onStartGrow(e) {
                  Ir(e, wA, {
                    width: Nt(e.element, "width").getOr("")
                  });
                },
                onStartShrink: function onStartShrink(e) {
                  Ir(e, wA, {
                    width: Jt(e.element) + "px"
                  });
                }
              }), Kp.config({}), wm.config({
                find: function find(e) {
                  var t = Kp.contents(e);
                  return oe(t);
                }
              })])
            }],
            behaviours: kl([BC(0), Jp("sidebar-sliding-events", [Ur(wA, function (e, t) {
              Dt(e.element, "width", t.event.width);
            }), Ur(SA, function (e, t) {
              Ht(e.element, "width");
            })])])
          };
        }
      },
      name: "sidebar",
      schema: [os("dom")]
    }),
    DM = iE.optional({
      factory: {
        sketch: function sketch(e) {
          return {
            uid: e.uid,
            dom: {
              tag: "div",
              attributes: {
                "aria-hidden": "true"
              },
              classes: ["tox-throbber"],
              styles: {
                display: "none"
              }
            },
            behaviours: kl([Kp.config({}), OA.config({
              focus: !1
            }), wm.config({
              find: function find(e) {
                return oe(e.components());
              }
            })]),
            components: []
          };
        }
      },
      name: "throbber",
      schema: [os("dom")]
    }),
    BM = iE.optional({
      factory: kM,
      name: "viewWrapper",
      schema: [os("backstage")]
    }),
    FM = iE.optional({
      factory: {
        sketch: function sketch(e) {
          return {
            uid: e.uid,
            dom: {
              tag: "div",
              classes: ["tox-editor-container"]
            },
            components: e.components
          };
        }
      },
      name: "editorContainer",
      schema: []
    });
  var IM = bm({
    name: "OuterContainer",
    factory: function factory(e, t, o) {
      var n = !1;
      var s = {
        getSocket: function getSocket(t) {
          return aE.getPart(t, e, "socket");
        },
        setSidebar: function setSidebar(t, o, n) {
          aE.getPart(t, e, "sidebar").each(function (e) {
            return function (e, t, o) {
              wm.getCurrent(e).each(function (n) {
                Kp.set(n, [vA(t)]);
                var s = null == o ? void 0 : o.toLowerCase();
                r(s) && ve(t, s) && wm.getCurrent(n).each(function (t) {
                  pA.showSlot(t, s), QO.immediateGrow(n), Ht(n.element, "width"), yA(e.element, "region");
                });
              });
            }(e, o, n);
          });
        },
        toggleSidebar: function toggleSidebar(t, o) {
          aE.getPart(t, e, "sidebar").each(function (e) {
            return function (e, t) {
              wm.getCurrent(e).each(function (o) {
                wm.getCurrent(o).each(function (n) {
                  QO.hasGrown(o) ? pA.isShowing(n, t) ? (QO.shrink(o), yA(e.element, "presentation")) : (pA.hideAllSlots(n), pA.showSlot(n, t), yA(e.element, "region")) : (pA.hideAllSlots(n), pA.showSlot(n, t), QO.grow(o), yA(e.element, "region"));
                });
              });
            }(e, o);
          });
        },
        whichSidebar: function whichSidebar(t) {
          return aE.getPart(t, e, "sidebar").bind(xA).getOrNull();
        },
        getHeader: function getHeader(t) {
          return aE.getPart(t, e, "header");
        },
        getToolbar: function getToolbar(t) {
          return aE.getPart(t, e, "toolbar");
        },
        setToolbar: function setToolbar(t, o) {
          aE.getPart(t, e, "toolbar").each(function (e) {
            var t = H(o, nM);
            e.getApis().setGroups(e, t);
          });
        },
        setToolbars: function setToolbars(t, o) {
          aE.getPart(t, e, "multiple-toolbar").each(function (e) {
            var t = H(o, function (e) {
              return H(e, nM);
            });
            uE.setItems(e, t);
          });
        },
        refreshToolbar: function refreshToolbar(t) {
          aE.getPart(t, e, "toolbar").each(function (e) {
            return e.getApis().refresh(e);
          });
        },
        toggleToolbarDrawer: function toggleToolbarDrawer(t) {
          aE.getPart(t, e, "toolbar").each(function (e) {
            ke(e.getApis().toggle, function (t) {
              return t(e);
            });
          });
        },
        toggleToolbarDrawerWithoutFocusing: function toggleToolbarDrawerWithoutFocusing(t) {
          aE.getPart(t, e, "toolbar").each(function (e) {
            ke(e.getApis().toggleWithoutFocusing, function (t) {
              return t(e);
            });
          });
        },
        isToolbarDrawerToggled: function isToolbarDrawerToggled(t) {
          return aE.getPart(t, e, "toolbar").bind(function (e) {
            return A.from(e.getApis().isOpen).map(function (t) {
              return t(e);
            });
          }).getOr(!1);
        },
        getThrobber: function getThrobber(t) {
          return aE.getPart(t, e, "throbber");
        },
        focusToolbar: function focusToolbar(t) {
          aE.getPart(t, e, "toolbar").orThunk(function () {
            return aE.getPart(t, e, "multiple-toolbar");
          }).each(function (e) {
            Pp.focusIn(e);
          });
        },
        setMenubar: function setMenubar(t, o) {
          aE.getPart(t, e, "menubar").each(function (e) {
            lA.setMenus(e, o);
          });
        },
        focusMenubar: function focusMenubar(t) {
          aE.getPart(t, e, "menubar").each(function (e) {
            lA.focus(e);
          });
        },
        setViews: function setViews(t, o) {
          aE.getPart(t, e, "viewWrapper").each(function (e) {
            kM.setViews(e, o);
          });
        },
        toggleView: function toggleView(t, o) {
          return aE.getPart(t, e, "viewWrapper").exists(function (e) {
            return kM.toggleView(e, function () {
              return s.showMainView(t);
            }, function () {
              return s.hideMainView(t);
            }, o);
          });
        },
        whichView: function whichView(t) {
          return aE.getPart(t, e, "viewWrapper").bind(kM.whichView).getOrNull();
        },
        hideMainView: function hideMainView(t) {
          n = s.isToolbarDrawerToggled(t), n && s.toggleToolbarDrawer(t), aE.getPart(t, e, "editorContainer").each(function (e) {
            var t = e.element;
            Dt(t, "display", "none"), kt(t, "aria-hidden", "true");
          });
        },
        showMainView: function showMainView(t) {
          n && s.toggleToolbarDrawer(t), aE.getPart(t, e, "editorContainer").each(function (e) {
            var t = e.element;
            Ht(t, "display"), Et(t, "aria-hidden");
          });
        }
      };
      return {
        uid: e.uid,
        dom: e.dom,
        components: t,
        apis: s,
        behaviours: e.behaviours
      };
    },
    configFields: [os("dom"), os("behaviours")],
    partFields: [TM, CM, _M, OM, AM, MM, EM, DM, BM, FM],
    apis: {
      getSocket: function getSocket(e, t) {
        return e.getSocket(t);
      },
      setSidebar: function setSidebar(e, t, o, n) {
        e.setSidebar(t, o, n);
      },
      toggleSidebar: function toggleSidebar(e, t, o) {
        e.toggleSidebar(t, o);
      },
      whichSidebar: function whichSidebar(e, t) {
        return e.whichSidebar(t);
      },
      getHeader: function getHeader(e, t) {
        return e.getHeader(t);
      },
      getToolbar: function getToolbar(e, t) {
        return e.getToolbar(t);
      },
      setToolbar: function setToolbar(e, t, o) {
        e.setToolbar(t, o);
      },
      setToolbars: function setToolbars(e, t, o) {
        e.setToolbars(t, o);
      },
      refreshToolbar: function refreshToolbar(e, t) {
        return e.refreshToolbar(t);
      },
      toggleToolbarDrawer: function toggleToolbarDrawer(e, t) {
        e.toggleToolbarDrawer(t);
      },
      toggleToolbarDrawerWithoutFocusing: function toggleToolbarDrawerWithoutFocusing(e, t) {
        e.toggleToolbarDrawerWithoutFocusing(t);
      },
      isToolbarDrawerToggled: function isToolbarDrawerToggled(e, t) {
        return e.isToolbarDrawerToggled(t);
      },
      getThrobber: function getThrobber(e, t) {
        return e.getThrobber(t);
      },
      setMenubar: function setMenubar(e, t, o) {
        e.setMenubar(t, o);
      },
      focusMenubar: function focusMenubar(e, t) {
        e.focusMenubar(t);
      },
      focusToolbar: function focusToolbar(e, t) {
        e.focusToolbar(t);
      },
      setViews: function setViews(e, t, o) {
        e.setViews(t, o);
      },
      toggleView: function toggleView(e, t, o) {
        return e.toggleView(t, o);
      },
      whichView: function whichView(e, t) {
        return e.whichView(t);
      }
    }
  });
  var RM = {
      file: {
        title: "File",
        items: "newdocument restoredraft | preview | export print | deleteallconversations"
      },
      edit: {
        title: "Edit",
        items: "undo redo | cut copy paste pastetext | selectall | searchreplace"
      },
      view: {
        title: "View",
        items: "code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"
      },
      insert: {
        title: "Insert",
        items: "image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"
      },
      format: {
        title: "Format",
        items: "bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"
      },
      tools: {
        title: "Tools",
        items: "aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"
      },
      table: {
        title: "Table",
        items: "inserttable | cell row column | advtablesort | tableprops deletetable"
      },
      help: {
        title: "Help",
        items: "help"
      }
    },
    NM = function NM(e) {
      return e.split(" ");
    },
    VM = function VM(e, t) {
      var o = _objectSpread(_objectSpread({}, RM), t.menus),
        n = ae(t.menus).length > 0,
        s = void 0 === t.menubar || !0 === t.menubar ? NM("file edit view insert format tools table help") : NM(!1 === t.menubar ? "" : t.menubar),
        a = U(s, function (e) {
          var o = ve(RM, e);
          return n ? o || be(t.menus, e).exists(function (e) {
            return ve(e, "items");
          }) : o;
        }),
        i = H(a, function (n) {
          var s = o[n];
          return function (e, t, o) {
            var n = kf(o).split(/[ ,]/);
            return {
              text: e.title,
              getItems: function getItems() {
                return X(e.items, function (e) {
                  var o = e.toLowerCase();
                  return 0 === o.trim().length || N(n, function (e) {
                    return e === o;
                  }) ? [] : "separator" === o || "|" === o ? [{
                    type: "separator"
                  }] : t.menuItems[o] ? [t.menuItems[o]] : [];
                });
              }
            };
          }({
            title: s.title,
            items: NM(s.items)
          }, t, e);
        });
      return U(i, function (e) {
        return e.getItems().length > 0 && N(e.getItems(), function (e) {
          return r(e) || "separator" !== e.type;
        });
      });
    },
    zM = function zM(e) {
      var t = function t() {
        e._skinLoaded = !0, function (e) {
          e.dispatch("SkinLoaded");
        }(e);
      };
      return function () {
        e.initialized ? t() : e.on("init", t);
      };
    },
    HM = function HM(e, t, o) {
      return e.on("remove", function () {
        return o.unload(t);
      }), o.load(t);
    },
    LM = function LM(e, t) {
      return HM(e, t + "/skin.min.css", e.ui.styleSheetLoader);
    },
    PM = function PM(e, t) {
      var o;
      return o = Ve(e.getElement()), bt(o).isSome() ? HM(e, t + "/skin.shadowdom.min.css", rf.DOM.styleSheetLoader) : Promise.resolve();
    },
    UM = function UM(e, t) {
      var o = Jf(t);
      return o && t.contentCSS.push(o + (e ? "/content.inline" : "/content") + ".min.css"), !Yf(t) && r(o) ? Promise.all([LM(t, o), PM(t, o)]).then(zM(t), function (e, t) {
        return function () {
          return function (e, t) {
            e.dispatch("SkinLoadError", t);
          }(e, {
            message: "Skin could not be loaded"
          });
        };
      }(t)) : Promise.resolve(zM(t)());
    },
    WM = k(UM, !1),
    jM = k(UM, !0),
    GM = function GM(e, t, o) {
      var n = function n(e, _n40, r, a) {
          var i = t.shared.providers.translate(e.title);
          if ("separator" === e.type) return A.some({
            type: "separator",
            text: i
          });
          if ("submenu" === e.type) {
            var _t40 = X(e.getStyleItems(), function (e) {
              return s(e, _n40, a);
            });
            return 0 === _n40 && _t40.length <= 0 ? A.none() : A.some({
              type: "nestedmenuitem",
              text: i,
              enabled: _t40.length > 0,
              getSubmenuItems: function getSubmenuItems() {
                return X(e.getStyleItems(), function (e) {
                  return s(e, _n40, a);
                });
              }
            });
          }
          return A.some(_objectSpread({
            type: "togglemenuitem",
            text: i,
            icon: e.icon,
            active: e.isSelected(a),
            enabled: !r,
            onAction: o.onAction(e)
          }, e.getStylePreview().fold(function () {
            return {};
          }, function (e) {
            return {
              meta: {
                style: e
              }
            };
          })));
        },
        s = function s(e, t, _s30) {
          var r = "formatter" === e.type && o.isInvalid(e);
          return 0 === t ? r ? [] : n(e, t, !1, _s30).toArray() : n(e, t, r, _s30).toArray();
        },
        r = function r(e) {
          var t = o.getCurrentValue(),
            n = o.shouldHide ? 0 : 1;
          return X(e, function (e) {
            return s(e, n, t);
          });
        };
      return {
        validateItems: r,
        getFetch: function getFetch(e, t) {
          return function (o, n) {
            var s = t(),
              a = r(s);
            n(CO(a, pb.CLOSE_ON_EXECUTE, e, {
              isHorizontalMenu: !1,
              search: A.none()
            }));
          };
        }
      };
    },
    $M = function $M(e, t, o) {
      var n = o.dataset,
        s = "basic" === n.type ? function () {
          return H(n.data, function (e) {
            return FT(e, o.isSelectedFor, o.getPreviewFor);
          });
        } : n.getData;
      return {
        items: GM(0, t, o),
        getStyleItems: s
      };
    },
    qM = function qM(e, t, o) {
      var _$M = $M(0, t, o),
        n = _$M.items,
        s = _$M.getStyleItems,
        r = yx(e, "NodeChange", function (t) {
          var n = t.getComponent();
          o.updateText(n), Rm.set(t.getComponent(), !e.selection.isEditable());
        });
      return xO({
        text: o.icon.isSome() ? A.none() : o.text,
        icon: o.icon,
        tooltip: A.from(o.tooltip),
        role: A.none(),
        fetch: n.getFetch(t, s),
        onSetup: r,
        getApi: function getApi(e) {
          return {
            getComponent: x(e)
          };
        },
        columns: 1,
        presets: "normal",
        classes: o.icon.isSome() ? [] : ["bespoke"],
        dropdownBehaviours: []
      }, "tox-tbtn", t.shared);
    };
  var XM;
  !function (e) {
    e[e.SemiColon = 0] = "SemiColon", e[e.Space = 1] = "Space";
  }(XM || (XM = {}));
  var YM = function YM(e, t, o) {
      var n = (s = function (e, t) {
        return t === XM.SemiColon ? e.replace(/;$/, "").split(";") : e.split(" ");
      }(e.options.get(t), o), H(s, function (e) {
        var t = e,
          o = e;
        var n = e.split("=");
        return n.length > 1 && (t = n[0], o = n[1]), {
          title: t,
          format: o
        };
      }));
      var s;
      return {
        type: "basic",
        data: n
      };
    },
    KM = [{
      title: "Left",
      icon: "align-left",
      format: "alignleft",
      command: "JustifyLeft"
    }, {
      title: "Center",
      icon: "align-center",
      format: "aligncenter",
      command: "JustifyCenter"
    }, {
      title: "Right",
      icon: "align-right",
      format: "alignright",
      command: "JustifyRight"
    }, {
      title: "Justify",
      icon: "align-justify",
      format: "alignjustify",
      command: "JustifyFull"
    }],
    JM = function JM(e) {
      var t = {
        type: "basic",
        data: KM
      };
      return {
        tooltip: "Align",
        text: A.none(),
        icon: A.some("align-left"),
        isSelectedFor: function isSelectedFor(t) {
          return function () {
            return e.formatter.match(t);
          };
        },
        getCurrentValue: A.none,
        getPreviewFor: function getPreviewFor(e) {
          return A.none;
        },
        onAction: function onAction(t) {
          return function () {
            return G(KM, function (e) {
              return e.format === t.format;
            }).each(function (t) {
              return e.execCommand(t.command);
            });
          };
        },
        updateText: function updateText(t) {
          var o = G(KM, function (t) {
            return e.formatter.match(t.format);
          }).fold(x("left"), function (e) {
            return e.title.toLowerCase();
          });
          Ir(t, yO, {
            icon: "align-".concat(o)
          });
        },
        dataset: t,
        shouldHide: !1,
        isInvalid: function isInvalid(t) {
          return !e.formatter.canApply(t.format);
        }
      };
    },
    ZM = function ZM(e, t) {
      var o = t(),
        n = H(o, function (e) {
          return e.format;
        });
      return A.from(e.formatter.closest(n)).bind(function (e) {
        return G(o, function (t) {
          return t.format === e;
        });
      }).orThunk(function () {
        return Ce(e.formatter.match("p"), {
          title: "Paragraph",
          format: "p"
        });
      });
    },
    QM = function QM(e) {
      var t = "Paragraph",
        o = YM(e, "block_formats", XM.SemiColon);
      return {
        tooltip: "Blocks",
        text: A.some(t),
        icon: A.none(),
        isSelectedFor: function isSelectedFor(t) {
          return function () {
            return e.formatter.match(t);
          };
        },
        getCurrentValue: A.none,
        getPreviewFor: function getPreviewFor(t) {
          return function () {
            var o = e.formatter.get(t);
            return o ? A.some({
              tag: o.length > 0 && (o[0].inline || o[0].block) || "div",
              styles: e.dom.parseStyle(e.formatter.getCssText(t))
            }) : A.none();
          };
        },
        onAction: xx(e),
        updateText: function updateText(n) {
          var s = ZM(e, function () {
            return o.data;
          }).fold(x(t), function (e) {
            return e.title;
          });
          Ir(n, vO, {
            text: s
          });
        },
        dataset: o,
        shouldHide: !1,
        isInvalid: function isInvalid(t) {
          return !e.formatter.canApply(t.format);
        }
      };
    },
    eD = ["-apple-system", "Segoe UI", "Roboto", "Helvetica Neue", "sans-serif"],
    tD = function tD(e) {
      var t = e.split(/\s*,\s*/);
      return H(t, function (e) {
        return e.replace(/^['"]+|['"]+$/g, "");
      });
    },
    oD = function oD(e) {
      var t = "System Font",
        o = function o() {
          var o = function o(e) {
              return e ? tD(e)[0] : "";
            },
            s = e.queryCommandValue("FontName"),
            r = n.data,
            a = s ? s.toLowerCase() : "",
            i = G(r, function (e) {
              var t = e.format;
              return t.toLowerCase() === a || o(t).toLowerCase() === o(a).toLowerCase();
            }).orThunk(function () {
              return Ce(function (e) {
                return 0 === e.indexOf("-apple-system") && function () {
                  var t = tD(e.toLowerCase());
                  return Y(eD, function (e) {
                    return t.indexOf(e.toLowerCase()) > -1;
                  });
                }();
              }(a), {
                title: t,
                format: a
              });
            });
          return {
            matchOpt: i,
            font: s
          };
        },
        n = YM(e, "font_family_formats", XM.SemiColon);
      return {
        tooltip: "Fonts",
        text: A.some(t),
        icon: A.none(),
        isSelectedFor: function isSelectedFor(e) {
          return function (t) {
            return t.exists(function (t) {
              return t.format === e;
            });
          };
        },
        getCurrentValue: function getCurrentValue() {
          var _o41 = o(),
            e = _o41.matchOpt;
          return e;
        },
        getPreviewFor: function getPreviewFor(e) {
          return function () {
            return A.some({
              tag: "div",
              styles: -1 === e.indexOf("dings") ? {
                "font-family": e
              } : {}
            });
          };
        },
        onAction: function onAction(t) {
          return function () {
            e.undoManager.transact(function () {
              e.focus(), e.execCommand("FontName", !1, t.format);
            });
          };
        },
        updateText: function updateText(e) {
          var _o42 = o(),
            t = _o42.matchOpt,
            n = _o42.font,
            s = t.fold(x(n), function (e) {
              return e.title;
            });
          Ir(e, vO, {
            text: s
          });
        },
        dataset: n,
        shouldHide: !1,
        isInvalid: T
      };
    },
    nD = {
      unsupportedLength: ["em", "ex", "cap", "ch", "ic", "rem", "lh", "rlh", "vw", "vh", "vi", "vb", "vmin", "vmax", "cm", "mm", "Q", "in", "pc", "pt", "px"],
      fixed: ["px", "pt"],
      relative: ["%"],
      empty: [""]
    },
    sD = function () {
      var e = "[0-9]+",
        t = "[eE][+-]?" + e,
        o = function o(e) {
          return "(?:".concat(e, ")?");
        },
        n = ["Infinity", e + "\\." + o(e) + o(t), "\\." + e + o(t), e + o(t)].join("|");
      return new RegExp("^([+-]?(?:".concat(n, "))(.*)$"));
    }(),
    rD = function rD(e, t) {
      return A.from(sD.exec(e)).bind(function (e) {
        var o = Number(e[1]),
          n = e[2];
        return function (e, t) {
          return N(t, function (t) {
            return N(nD[t], function (t) {
              return e === t;
            });
          });
        }(n, t) ? A.some({
          value: o,
          unit: n
        }) : A.none();
      });
    },
    aD = {
      tab: x(9),
      escape: x(27),
      enter: x(13),
      backspace: x(8),
      "delete": x(46),
      left: x(37),
      up: x(38),
      right: x(39),
      down: x(40),
      space: x(32),
      home: x(36),
      end: x(35),
      pageUp: x(33),
      pageDown: x(34)
    },
    iD = {
      "8pt": "1",
      "10pt": "2",
      "12pt": "3",
      "14pt": "4",
      "18pt": "5",
      "24pt": "6",
      "36pt": "7"
    },
    lD = {
      "xx-small": "7pt",
      "x-small": "8pt",
      small: "10pt",
      medium: "12pt",
      large: "14pt",
      "x-large": "18pt",
      "xx-large": "24pt"
    },
    cD = function cD(e, t) {
      return /[0-9.]+px$/.test(e) ? function (e, t) {
        var o = Math.pow(10, t);
        return Math.round(e * o) / o;
      }(72 * parseInt(e, 10) / 96, t || 0) + "pt" : be(lD, e).getOr(e);
    },
    dD = function dD(e) {
      return be(iD, e).getOr("");
    },
    uD = function uD(e) {
      var t = function t() {
          var t = A.none();
          var o = n.data,
            s = e.queryCommandValue("FontSize");
          if (s) {
            var _loop = function _loop() {
              var n = cD(s, _e27),
                r = dD(n);
              t = G(o, function (e) {
                return e.format === s || e.format === n || e.format === r;
              });
            };
            for (var _e27 = 3; t.isNone() && _e27 >= 0; _e27--) {
              _loop();
            }
          }
          return {
            matchOpt: t,
            size: s
          };
        },
        o = x(A.none),
        n = YM(e, "font_size_formats", XM.Space);
      return {
        tooltip: "Font sizes",
        text: A.some("12pt"),
        icon: A.none(),
        isSelectedFor: function isSelectedFor(e) {
          return function (t) {
            return t.exists(function (t) {
              return t.format === e;
            });
          };
        },
        getPreviewFor: o,
        getCurrentValue: function getCurrentValue() {
          var _t41 = t(),
            e = _t41.matchOpt;
          return e;
        },
        onAction: function onAction(t) {
          return function () {
            e.undoManager.transact(function () {
              e.focus(), e.execCommand("FontSize", !1, t.format);
            });
          };
        },
        updateText: function updateText(e) {
          var _t42 = t(),
            o = _t42.matchOpt,
            n = _t42.size,
            s = o.fold(x(n), function (e) {
              return e.title;
            });
          Ir(e, vO, {
            text: s
          });
        },
        dataset: n,
        shouldHide: !1,
        isInvalid: T
      };
    },
    mD = function mD(e, t) {
      var o = "Paragraph";
      return {
        tooltip: "Formats",
        text: A.some(o),
        icon: A.none(),
        isSelectedFor: function isSelectedFor(t) {
          return function () {
            return e.formatter.match(t);
          };
        },
        getCurrentValue: A.none,
        getPreviewFor: function getPreviewFor(t) {
          return function () {
            var o = e.formatter.get(t);
            return void 0 !== o ? A.some({
              tag: o.length > 0 && (o[0].inline || o[0].block) || "div",
              styles: e.dom.parseStyle(e.formatter.getCssText(t))
            }) : A.none();
          };
        },
        onAction: xx(e),
        updateText: function updateText(t) {
          var n = function n(e) {
              return ET(e) ? X(e.items, n) : AT(e) ? [{
                title: e.title,
                format: e.format
              }] : [];
            },
            s = X(BT(e), n),
            r = ZM(e, x(s)).fold(x(o), function (e) {
              return e.title;
            });
          Ir(t, vO, {
            text: r
          });
        },
        shouldHide: wf(e),
        isInvalid: function isInvalid(t) {
          return !e.formatter.canApply(t.format);
        },
        dataset: t
      };
    },
    gD = x([os("toggleClass"), os("fetch"), Fi("onExecute"), ys("getHotspot", A.some), ys("getAnchorOverrides", x({})), wc(), Fi("onItemExecute"), us("lazySink"), os("dom"), Di("onOpen"), hu("splitDropdownBehaviours", [uw, Pp, oh]), ys("matchWidth", !1), ys("useMinWidth", !1), ys("eventOrder", {}), us("role")].concat(Ew())),
    pD = Uu({
      factory: Wh,
      schema: [os("dom")],
      name: "arrow",
      defaults: function defaults() {
        return {
          buttonBehaviours: kl([oh.revoke()])
        };
      },
      overrides: function overrides(e) {
        return {
          dom: {
            tag: "span",
            attributes: {
              role: "presentation"
            }
          },
          action: function action(t) {
            t.getSystem().getByUid(e.uid).each(Rr);
          },
          buttonBehaviours: kl([dh.config({
            toggleOnExecute: !1,
            toggleClass: e.toggleClass
          })])
        };
      }
    }),
    hD = Uu({
      factory: Wh,
      schema: [os("dom")],
      name: "button",
      defaults: function defaults() {
        return {
          buttonBehaviours: kl([oh.revoke()])
        };
      },
      overrides: function overrides(e) {
        return {
          dom: {
            tag: "span",
            attributes: {
              role: "presentation"
            }
          },
          action: function action(t) {
            t.getSystem().getByUid(e.uid).each(function (o) {
              e.onExecute(o, t);
            });
          }
        };
      }
    }),
    fD = x([pD, hD, ju({
      factory: {
        sketch: function sketch(e) {
          return {
            uid: e.uid,
            dom: {
              tag: "span",
              styles: {
                display: "none"
              },
              attributes: {
                "aria-hidden": "true"
              },
              innerHtml: e.text
            }
          };
        }
      },
      schema: [os("text")],
      name: "aria-descriptor"
    }), Wu({
      schema: [Ei()],
      name: "menu",
      defaults: function defaults(e) {
        return {
          onExecute: function onExecute(t, o) {
            t.getSystem().getByUid(e.uid).each(function (n) {
              e.onItemExecute(n, t, o);
            });
          }
        };
      }
    }), yw()]),
    bD = bm({
      name: "SplitDropdown",
      configFields: gD(),
      partFields: fD(),
      factory: function factory(e, t, o, n) {
        var s = function s(e) {
            wm.getCurrent(e).each(function (e) {
              Gm.highlightFirst(e), Pp.focusIn(e);
            });
          },
          r = function r(t) {
            kw(e, w, t, n, s, zh.HighlightMenuAndItem).get(b);
          },
          a = function a(t) {
            var o = nm(t, e, "button");
            return Rr(o), A.some(!0);
          },
          i = _objectSpread(_objectSpread({}, Hr([Kr(function (t, o) {
            om(t, e, "aria-descriptor").each(function (e) {
              var o = la("aria");
              kt(e.element, "id", o), kt(t.element, "aria-describedby", o);
            });
          })])), mh(A.some(r))),
          l = {
            repositionMenus: function repositionMenus(e) {
              dh.isOn(e) && Tw(e);
            }
          };
        return {
          uid: e.uid,
          dom: e.dom,
          components: t,
          apis: l,
          eventOrder: _objectSpread(_objectSpread({}, e.eventOrder), {}, _defineProperty({}, ur(), ["disabling", "toggling", "alloy.base.behaviour"])),
          events: i,
          behaviours: bu(e.splitDropdownBehaviours, [uw.config({
            others: {
              sandbox: function sandbox(t) {
                var o = nm(t, e, "arrow");
                return _w(e, t, {
                  onOpen: function onOpen() {
                    dh.on(o), dh.on(t);
                  },
                  onClose: function onClose() {
                    dh.off(o), dh.off(t);
                  }
                });
              }
            }
          }), Pp.config({
            mode: "special",
            onSpace: a,
            onEnter: a,
            onDown: function onDown(e) {
              return r(e), A.some(!0);
            }
          }), oh.config({}), dh.config({
            toggleOnExecute: !1,
            aria: {
              mode: "expanded"
            }
          })]),
          domModification: {
            attributes: {
              role: e.role.getOr("button"),
              "aria-haspopup": !0
            }
          }
        };
      },
      apis: {
        repositionMenus: function repositionMenus(e, t) {
          return e.repositionMenus(t);
        }
      }
    }),
    vD = function vD(e) {
      return {
        isEnabled: function isEnabled() {
          return !Rm.isDisabled(e);
        },
        setEnabled: function setEnabled(t) {
          return Rm.set(e, !t);
        },
        setText: function setText(t) {
          return Ir(e, vO, {
            text: t
          });
        },
        setIcon: function setIcon(t) {
          return Ir(e, yO, {
            icon: t
          });
        }
      };
    },
    yD = function yD(e) {
      return {
        setActive: function setActive(t) {
          dh.set(e, t);
        },
        isActive: function isActive() {
          return dh.isOn(e);
        },
        isEnabled: function isEnabled() {
          return !Rm.isDisabled(e);
        },
        setEnabled: function setEnabled(t) {
          return Rm.set(e, !t);
        },
        setText: function setText(t) {
          return Ir(e, vO, {
            text: t
          });
        },
        setIcon: function setIcon(t) {
          return Ir(e, yO, {
            icon: t
          });
        }
      };
    },
    xD = function xD(e, t) {
      return e.map(function (e) {
        return {
          "aria-label": t.translate(e),
          title: t.translate(e)
        };
      }).getOr({});
    },
    wD = la("focus-button"),
    SD = function SD(e, t, o, n, s) {
      var _eventOrder5;
      var r = t.map(function (e) {
          return jh(bO(e, "tox-tbtn", s));
        }),
        a = e.map(function (e) {
          return jh(fO(e, s.icons));
        });
      return {
        dom: {
          tag: "button",
          classes: ["tox-tbtn"].concat(t.isSome() ? ["tox-tbtn--select"] : []),
          attributes: xD(o, s)
        },
        components: Dy([a.map(function (e) {
          return e.asSpec();
        }), r.map(function (e) {
          return e.asSpec();
        })]),
        eventOrder: (_eventOrder5 = {}, _defineProperty(_eventOrder5, Ws(), ["focusing", "alloy.base.behaviour", uO]), _defineProperty(_eventOrder5, Sr(), [uO, "toolbar-group-button-events"]), _eventOrder5),
        buttonBehaviours: kl([Oy(s.isDisabled), Sy(), Jp(uO, [Kr(function (e, t) {
          return gO(e);
        }), Ur(vO, function (e, t) {
          r.bind(function (t) {
            return t.getOpt(e);
          }).each(function (e) {
            Kp.set(e, [ti(s.translate(t.event.text))]);
          });
        }), Ur(yO, function (e, t) {
          a.bind(function (t) {
            return t.getOpt(e);
          }).each(function (e) {
            Kp.set(e, [fO(t.event.icon, s.icons)]);
          });
        }), Ur(Ws(), function (e, t) {
          t.event.prevent(), Fr(e, wD);
        })])].concat(n.getOr([])))
      };
    },
    kD = function kD(e, t, o) {
      var n;
      var s = Es(b),
        r = SD(e.icon, e.text, e.tooltip, A.none(), o);
      return Wh.sketch({
        dom: r.dom,
        components: r.components,
        eventOrder: mO,
        buttonBehaviours: _objectSpread(_objectSpread({}, kl([Jp("toolbar-button-events", [(a = {
          onAction: e.onAction,
          getApi: t.getApi
        }, Qr(function (e, t) {
          _y(a, e)(function (t) {
            Ir(e, dO, {
              buttonApi: t
            }), a.onAction(t);
          });
        })), Ty(t, s), Ey(t, s)]), Oy(function () {
          return !e.enabled || o.isDisabled();
        }), Sy()].concat(t.toolbarButtonBehaviours))), {}, _defineProperty({}, uO, null === (n = r.buttonBehaviours) || void 0 === n ? void 0 : n[uO]))
      });
      var a;
    },
    CD = function CD(e, t, o) {
      return kD(e, {
        toolbarButtonBehaviours: o.length > 0 ? [Jp("toolbarButtonWith", o)] : [],
        getApi: vD,
        onSetup: e.onSetup
      }, t);
    },
    OD = function OD(e, t, o) {
      return kD(e, {
        toolbarButtonBehaviours: [Kp.config({}), dh.config({
          toggleClass: "tox-tbtn--enabled",
          aria: {
            mode: "pressed"
          },
          toggleOnExecute: !1
        })].concat(o.length > 0 ? [Jp("toolbarToggleButtonWith", o)] : []),
        getApi: yD,
        onSetup: e.onSetup
      }, t);
    },
    _D = function _D(e, t, o) {
      return function (n) {
        return fw(function (e) {
          return t.fetch(e);
        }).map(function (s) {
          return A.from(Hw(fn(Zx(la("menu-value"), s, function (o) {
            t.onItemAction(e(n), o);
          }, t.columns, t.presets, pb.CLOSE_ON_EXECUTE, t.select.getOr(T), o), {
            movement: ew(t.columns, t.presets),
            menuBehaviours: ly("auto" !== t.columns ? [] : [Kr(function (e, o) {
              iy(e, 4, _b(t.presets)).each(function (_ref22) {
                var t = _ref22.numRows,
                  o = _ref22.numColumns;
                Pp.setGridSize(e, t, o);
              });
            })])
          })));
        });
      };
    },
    TD = [{
      name: "history",
      items: ["undo", "redo"]
    }, {
      name: "ai",
      items: ["aidialog", "aishortcuts"]
    }, {
      name: "styles",
      items: ["styles"]
    }, {
      name: "formatting",
      items: ["bold", "italic"]
    }, {
      name: "alignment",
      items: ["alignleft", "aligncenter", "alignright", "alignjustify"]
    }, {
      name: "indentation",
      items: ["outdent", "indent"]
    }, {
      name: "permanent pen",
      items: ["permanentpen"]
    }, {
      name: "comments",
      items: ["addcomment"]
    }],
    ED = function ED(e, t) {
      return function (o, n, s) {
        var r = e(o).mapError(function (e) {
          return Kn(e);
        }).getOrDie();
        return t(r, n, s);
      };
    },
    AD = {
      button: ED(Fv, function (e, t) {
        return o = e, n = t.shared.providers, CD(o, n, []);
        var o, n;
      }),
      togglebutton: ED(Nv, function (e, t) {
        return o = e, n = t.shared.providers, OD(o, n, []);
        var o, n;
      }),
      menubutton: ED(aA, function (e, t) {
        return t_(e, "tox-tbtn", t, A.none(), !1);
      }),
      splitbutton: ED(function (e) {
        return qn("SplitButton", iA, e);
      }, function (e, t) {
        return function (e, t) {
          var o = function o(e) {
              return {
                isEnabled: function isEnabled() {
                  return !Rm.isDisabled(e);
                },
                setEnabled: function setEnabled(t) {
                  return Rm.set(e, !t);
                },
                setIconFill: function setIconFill(t, o) {
                  pi(e.element, "svg path[class=\"".concat(t, "\"], rect[class=\"").concat(t, "\"]")).each(function (e) {
                    kt(e, "fill", o);
                  });
                },
                setActive: function setActive(t) {
                  kt(e.element, "aria-pressed", t), pi(e.element, "span").each(function (o) {
                    e.getSystem().getByDom(o).each(function (e) {
                      return dh.set(e, t);
                    });
                  });
                },
                isActive: function isActive() {
                  return pi(e.element, "span").exists(function (t) {
                    return e.getSystem().getByDom(t).exists(dh.isOn);
                  });
                },
                setText: function setText(t) {
                  return pi(e.element, "span").each(function (o) {
                    return e.getSystem().getByDom(o).each(function (e) {
                      return Ir(e, vO, {
                        text: t
                      });
                    });
                  });
                },
                setIcon: function setIcon(t) {
                  return pi(e.element, "span").each(function (o) {
                    return e.getSystem().getByDom(o).each(function (e) {
                      return Ir(e, yO, {
                        icon: t
                      });
                    });
                  });
                }
              };
            },
            n = Es(b),
            s = {
              getApi: o,
              onSetup: e.onSetup
            };
          return bD.sketch({
            dom: {
              tag: "div",
              classes: ["tox-split-button"],
              attributes: _objectSpread({
                "aria-pressed": !1
              }, xD(e.tooltip, t.providers))
            },
            onExecute: function onExecute(t) {
              var n = o(t);
              n.isEnabled() && e.onAction(n);
            },
            onItemExecute: function onItemExecute(e, t, o) {},
            splitDropdownBehaviours: kl([Cy(t.providers.isDisabled), Sy(), Jp("split-dropdown-events", [Kr(function (e, t) {
              return gO(e);
            }), Ur(wD, oh.focus), Ty(s, n), Ey(s, n)]), IS.config({})]),
            eventOrder: _defineProperty({}, Sr(), ["alloy.base.behaviour", "split-dropdown-events"]),
            toggleClass: "tox-tbtn--enabled",
            lazySink: t.getSink,
            fetch: _D(o, e, t.providers),
            parts: {
              menu: Bb(0, e.columns, e.presets)
            },
            components: [bD.parts.button(SD(e.icon, e.text, A.none(), A.some([dh.config({
              toggleClass: "tox-tbtn--enabled",
              toggleOnExecute: !1
            })]), t.providers)), bD.parts.arrow({
              dom: {
                tag: "button",
                classes: ["tox-tbtn", "tox-split-button__chevron"],
                innerHtml: Jh("chevron-down", t.providers.icons)
              },
              buttonBehaviours: kl([Cy(t.providers.isDisabled), Sy(), Zh()])
            }), bD.parts["aria-descriptor"]({
              text: t.providers.translate("To open the popup, press Shift+Enter")
            })]
          });
        }(e, t.shared);
      }),
      grouptoolbarbutton: ED(function (e) {
        return qn("GroupToolbarButton", nA, e);
      }, function (e, t, o) {
        var n = o.ui.registry.getAll().buttons,
          s = _defineProperty({}, yc, t.shared.header.isPositionedAtTop() ? vc.TopToBottom : vc.BottomToTop);
        if (Cf(o) === nf.floating) return function (e, t, o, n) {
          var s = t.shared,
            r = Es(b),
            a = {
              toolbarButtonBehaviours: [],
              getApi: vD,
              onSetup: e.onSetup
            },
            i = [Jp("toolbar-group-button-events", [Ty(a, r), Ey(a, r)])];
          return jA.sketch({
            lazySink: s.getSink,
            fetch: function fetch() {
              return fw(function (t) {
                t(H(o(e.items), nM));
              });
            },
            markers: {
              toggledClass: "tox-tbtn--enabled"
            },
            parts: {
              button: SD(e.icon, e.text, e.tooltip, A.some(i), s.providers),
              toolbar: {
                dom: {
                  tag: "div",
                  classes: ["tox-toolbar__overflow"],
                  attributes: n
                }
              }
            }
          });
        }(e, t, function (e) {
          return DD(o, {
            buttons: n,
            toolbar: e,
            allowToolbarGroups: !1
          }, t, A.none());
        }, s);
        throw new Error("Toolbar groups are only supported when using floating toolbar mode");
      })
    },
    MD = {
      styles: function styles(e, t) {
        var o = _objectSpread({
          type: "advanced"
        }, t.styles);
        return qM(e, t, mD(e, o));
      },
      fontsize: function fontsize(e, t) {
        return qM(e, t, uD(e));
      },
      fontsizeinput: function fontsizeinput(e, t) {
        return function (e, t, o) {
          var n = A.none();
          var s = yx(e, "NodeChange SwitchMode", function (t) {
              var s = t.getComponent();
              n = A.some(s), o.updateInputValue(s), Rm.set(s, !e.selection.isEditable());
            }),
            r = function r(e) {
              return {
                getComponent: x(e)
              };
            },
            a = Es(b),
            i = la("custom-number-input-events"),
            l = function l(e, t, s) {
              var r = n.map(function (e) {
                  return pu.getValue(e);
                }).getOr(""),
                a = o.getNewValue(r, e),
                i = r.length - "".concat(a).length,
                l = n.map(function (e) {
                  return e.element.dom.selectionStart - i;
                }),
                c = n.map(function (e) {
                  return e.element.dom.selectionEnd - i;
                });
              o.onAction(a, s), n.each(function (e) {
                pu.setValue(e, a), t && (l.each(function (t) {
                  return e.element.dom.selectionStart = t;
                }), c.each(function (t) {
                  return e.element.dom.selectionEnd = t;
                }));
              });
            },
            c = function c(e, t) {
              return l(function (e, t) {
                return e - t;
              }, e, t);
            },
            d = function d(e, t) {
              return l(function (e, t) {
                return e + t;
              }, e, t);
            },
            u = function u(e) {
              return rt(e.element).fold(A.none, function (e) {
                return Dl(e), A.some(!0);
              });
            },
            m = function m(e) {
              return Fl(e.element) ? (ct(e.element).each(function (e) {
                return Dl(e);
              }), A.some(!0)) : A.none();
            },
            g = function g(o, n, s, i) {
              var _eventOrder7;
              var l = t.shared.providers.translate(s),
                c = la("altExecuting"),
                d = yx(e, "NodeChange SwitchMode", function (t) {
                  Rm.set(t.getComponent(), !e.selection.isEditable());
                }),
                u = function u(e) {
                  Rm.isDisabled(e) || o(!0);
                };
              return Wh.sketch({
                dom: {
                  tag: "button",
                  attributes: {
                    title: l,
                    "aria-label": l
                  },
                  classes: i.concat(n)
                },
                components: [hO(n, t.shared.providers.icons)],
                buttonBehaviours: kl([Rm.config({}), Jp(c, [Ty({
                  onSetup: d,
                  getApi: r
                }, a), Ey({
                  getApi: r
                }, a), Ur(Ks(), function (e, t) {
                  t.event.raw.keyCode !== aD.space() && t.event.raw.keyCode !== aD.enter() || Rm.isDisabled(e) || o(!1);
                }), Ur(er(), u), Ur(Ps(), u)])]),
                eventOrder: (_eventOrder7 = {}, _defineProperty(_eventOrder7, Ks(), [c, "keying"]), _defineProperty(_eventOrder7, er(), [c, "alloy.base.behaviour"]), _defineProperty(_eventOrder7, Ps(), [c, "alloy.base.behaviour"]), _eventOrder7)
              });
            },
            p = jh(g(function (e) {
              return c(!1, e);
            }, "minus", "Decrease font size", ["highlight-on-focus"])),
            h = jh(g(function (e) {
              return d(!1, e);
            }, "plus", "Increase font size", ["highlight-on-focus"])),
            f = jh({
              dom: {
                tag: "div",
                classes: ["tox-input-wrapper", "highlight-on-focus"]
              },
              components: [Vb.sketch({
                inputBehaviours: kl([Rm.config({}), Jp(i, [Ty({
                  onSetup: s,
                  getApi: r
                }, a), Ey({
                  getApi: r
                }, a)]), Jp("input-update-display-text", [Ur(vO, function (e, t) {
                  pu.setValue(e, t.event.text);
                }), Ur(Ys(), function (e) {
                  o.onAction(pu.getValue(e));
                }), Ur(Qs(), function (e) {
                  o.onAction(pu.getValue(e));
                })]), Pp.config({
                  mode: "special",
                  onEnter: function onEnter(e) {
                    return l(w, !0, !0), A.some(!0);
                  },
                  onEscape: u,
                  onUp: function onUp(e) {
                    return d(!0, !1), A.some(!0);
                  },
                  onDown: function onDown(e) {
                    return c(!0, !1), A.some(!0);
                  },
                  onLeft: function onLeft(e, t) {
                    return t.cut(), A.none();
                  },
                  onRight: function onRight(e, t) {
                    return t.cut(), A.none();
                  }
                })])
              })],
              behaviours: kl([oh.config({}), Pp.config({
                mode: "special",
                onEnter: m,
                onSpace: m,
                onEscape: u
              }), Jp("input-wrapper-events", [Ur(qs(), function (e) {
                L([p, h], function (t) {
                  var o = Ve(t.get(e).element.dom);
                  Fl(o) && Bl(o);
                });
              })])])
            });
          return {
            dom: {
              tag: "div",
              classes: ["tox-number-input"]
            },
            components: [p.asSpec(), f.asSpec(), h.asSpec()],
            behaviours: kl([oh.config({}), Pp.config({
              mode: "flow",
              focusInside: pg.OnEnterOrSpaceMode,
              cycles: !1,
              selector: "button, .tox-input-wrapper",
              onEscape: function onEscape(e) {
                return Fl(e.element) ? A.none() : (Dl(e.element), A.some(!0));
              }
            })])
          };
        }(e, t, function (e) {
          var t = function t() {
            return e.queryCommandValue("FontSize");
          };
          return {
            updateInputValue: function updateInputValue(e) {
              return Ir(e, vO, {
                text: t()
              });
            },
            onAction: function onAction(t, o) {
              return e.execCommand("FontSize", !1, t, {
                skip_focus: !o
              });
            },
            getNewValue: function getNewValue(o, n) {
              rD(o, ["unsupportedLength", "empty"]);
              var s = rD(o, ["unsupportedLength", "empty"]).or(rD(t(), ["unsupportedLength", "empty"])),
                r = s.map(function (e) {
                  return e.value;
                }).getOr(16),
                a = Rf(e),
                i = s.map(function (e) {
                  return e.unit;
                }).filter(function (e) {
                  return "" !== e;
                }).getOr(a),
                l = n(r, function (e) {
                  var t;
                  return null !== (t = {
                    em: {
                      step: .1
                    },
                    cm: {
                      step: .1
                    },
                    "in": {
                      step: .1
                    },
                    pc: {
                      step: .1
                    },
                    ch: {
                      step: .1
                    },
                    rem: {
                      step: .1
                    }
                  }[e]) && void 0 !== t ? t : {
                    step: 1
                  };
                }(i).step);
              return "".concat(function (e) {
                return e >= 0;
              }(l) ? l : r).concat(i);
            }
          };
        }(e));
      },
      fontfamily: function fontfamily(e, t) {
        return qM(e, t, oD(e));
      },
      blocks: function blocks(e, t) {
        return qM(e, t, QM(e));
      },
      align: function align(e, t) {
        return qM(e, t, JM(e));
      }
    },
    DD = function DD(e, t, o, n) {
      var s = function (e) {
          var t = e.toolbar,
            o = e.buttons;
          return !1 === t ? [] : void 0 === t || !0 === t ? function (e) {
            var t = H(TD, function (t) {
              var o = U(t.items, function (t) {
                return ve(e, t) || ve(MD, t);
              });
              return {
                name: t.name,
                items: o
              };
            });
            return U(t, function (e) {
              return e.items.length > 0;
            });
          }(o) : r(t) ? function (e) {
            var t = e.split("|");
            return H(t, function (e) {
              return {
                items: e.trim().split(" ")
              };
            });
          }(t) : function (e) {
            return f(e, function (e) {
              return ve(e, "name") && ve(e, "items");
            });
          }(t) ? t : (console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"), []);
        }(t),
        a = H(s, function (s) {
          var r = X(s.items, function (s) {
            return 0 === s.trim().length ? [] : function (e, t, o, n, s, r) {
              return be(t, o.toLowerCase()).orThunk(function () {
                return r.bind(function (e) {
                  return re(e, function (e) {
                    return be(t, e + o.toLowerCase());
                  });
                });
              }).fold(function () {
                return be(MD, o.toLowerCase()).map(function (t) {
                  return t(e, s);
                });
              }, function (t) {
                return "grouptoolbarbutton" !== t.type || n ? function (e, t, o) {
                  return be(AD, e.type).fold(function () {
                    return console.error("skipping button defined by", e), A.none();
                  }, function (n) {
                    return A.some(n(e, t, o));
                  });
                }(t, s, e) : (console.warn("Ignoring the '".concat(o, "' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.")), A.none());
              });
            }(e, t.buttons, s, t.allowToolbarGroups, o, n).toArray();
          });
          return {
            title: A.from(e.translate(s.name)),
            items: r
          };
        });
      return U(a, function (e) {
        return e.items.length > 0;
      });
    },
    BD = function BD(e, t, o, n) {
      var s = t.mainUi.outerContainer,
        a = o.toolbar,
        i = o.buttons;
      if (f(a, r)) {
        var _t43 = a.map(function (t) {
          var s = {
            toolbar: t,
            buttons: i,
            allowToolbarGroups: o.allowToolbarGroups
          };
          return DD(e, s, n, A.none());
        });
        IM.setToolbars(s, _t43);
      } else IM.setToolbar(s, DD(e, o, n, A.none()));
    },
    FD = Do(),
    ID = FD.os.isiOS() && FD.os.version.major <= 12;
  var RD = Object.freeze({
    __proto__: null,
    render: function () {
      var _render = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e, t, o, n, s) {
        var r, a, i, l, d, u, m, _t44, _o43, g, p;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              r = t.mainUi, a = t.uiMotherships, i = Es(0), l = r.outerContainer;
              _context.next = 3;
              return WM(e);
            case 3:
              d = Ve(s.targetNode), u = ft(ht(d));
              Rd(d, r.mothership), function (e, t, o) {
                lb(e) && Rd(o.mainUi.mothership.element, o.popupUi.mothership), Id(t, o.dialogUi.mothership);
              }(e, u, t), e.on("PostRender", function () {
                IM.setSidebar(l, o.sidebar, $f(e)), BD(e, t, o, n), i.set(e.getWin().innerWidth), IM.setMenubar(l, VM(e, o)), IM.setViews(l, o.views), function (e, t) {
                  var o = t.uiMotherships,
                    n = e.dom;
                  var s = e.getWin();
                  var r = e.getDoc().documentElement,
                    a = Es($t(s.innerWidth, s.innerHeight)),
                    i = Es($t(r.offsetWidth, r.offsetHeight)),
                    l = function l() {
                      var t = a.get();
                      t.left === s.innerWidth && t.top === s.innerHeight || (a.set($t(s.innerWidth, s.innerHeight)), gx(e));
                    },
                    c = function c() {
                      var t = e.getDoc().documentElement,
                        o = i.get();
                      o.left === t.offsetWidth && o.top === t.offsetHeight || (i.set($t(t.offsetWidth, t.offsetHeight)), gx(e));
                    },
                    d = function d(t) {
                      (function (e, t) {
                        e.dispatch("ScrollContent", t);
                      })(e, t);
                    };
                  n.bind(s, "resize", l), n.bind(s, "scroll", d);
                  var u = oc(Ve(e.getBody()), "load", c);
                  e.on("hide", function () {
                    L(o, function (e) {
                      Dt(e.element, "display", "none");
                    });
                  }), e.on("show", function () {
                    L(o, function (e) {
                      Ht(e.element, "display");
                    });
                  }), e.on("NodeChange", c), e.on("remove", function () {
                    u.unbind(), n.unbind(s, "resize", l), n.unbind(s, "scroll", d), s = null;
                  });
                }(e, t);
              });
              m = IM.getSocket(l).getOrDie("Could not find expected socket element");
              if (ID) {
                Bt(m.element, {
                  overflow: "scroll",
                  "-webkit-overflow-scrolling": "touch"
                });
                _t44 = function (e, t) {
                  var o = null;
                  return {
                    cancel: function cancel() {
                      c(o) || (clearTimeout(o), o = null);
                    },
                    throttle: function throttle() {
                      for (var _len17 = arguments.length, t = new Array(_len17), _key17 = 0; _key17 < _len17; _key17++) {
                        t[_key17] = arguments[_key17];
                      }
                      c(o) && (o = setTimeout(function () {
                        o = null, e.apply(null, t);
                      }, 20));
                    }
                  };
                }(function () {
                  e.dispatch("ScrollContent");
                }), _o43 = tc(m.element, "scroll", _t44.throttle);
                e.on("remove", _o43.unbind);
              }
              wy(e, t), e.addCommand("ToggleSidebar", function (t, o) {
                IM.toggleSidebar(l, o), e.dispatch("ToggleSidebar");
              }), e.addQueryValueHandler("ToggleSidebar", function () {
                var e;
                return null !== (e = IM.whichSidebar(l)) && void 0 !== e ? e : "";
              }), e.addCommand("ToggleView", function (t, o) {
                if (IM.toggleView(l, o)) {
                  var _t45 = l.element;
                  r.mothership.broadcastOn([Yd()], {
                    target: _t45
                  }), L(a, function (e) {
                    e.broadcastOn([Yd()], {
                      target: _t45
                    });
                  }), c(IM.whichView(l)) && (e.focus(), e.nodeChanged(), IM.refreshToolbar(l));
                }
              }), e.addQueryValueHandler("ToggleView", function () {
                var e;
                return null !== (e = IM.whichView(l)) && void 0 !== e ? e : "";
              });
              g = Cf(e);
              g !== nf.sliding && g !== nf.floating || e.on("ResizeWindow ResizeEditor ResizeContent", function () {
                var o = e.getWin().innerWidth;
                o !== i.get() && (IM.refreshToolbar(t.mainUi.outerContainer), i.set(o));
              });
              p = {
                setEnabled: function setEnabled(e) {
                  xy(t, !e);
                },
                isEnabled: function isEnabled() {
                  return !Rm.isDisabled(l);
                }
              };
              return _context.abrupt("return", {
                iframeContainer: m.element.dom,
                editorContainer: l.element.dom,
                api: p
              });
            case 12:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function render(_x2, _x3, _x4, _x5, _x6) {
        return _render.apply(this, arguments);
      }
      return render;
    }()
  });
  var ND = function ND(e) {
      return /^[0-9\.]+(|px)$/i.test("" + e) ? A.some(parseInt("" + e, 10)) : A.none();
    },
    VD = function VD(e) {
      return h(e) ? e + "px" : e;
    },
    zD = function zD(e, t, o) {
      var n = t.filter(function (t) {
          return e < t;
        }),
        s = o.filter(function (t) {
          return e > t;
        });
      return n.or(s).getOr(e);
    },
    HD = function HD(e) {
      var t = pf(e),
        o = hf(e),
        n = bf(e);
      return ND(t).map(function (e) {
        return zD(e, o, n);
      });
    },
    LD = db.ToolbarLocation,
    PD = db.ToolbarMode,
    UD = function UD(e, t, o, n, s) {
      var r = o.mainUi,
        a = o.uiMotherships,
        i = rf.DOM,
        l = sb(e),
        c = ib(e),
        d = bf(e).or(HD(e)),
        u = n.shared.header,
        m = u.isPositionedAtTop,
        g = Cf(e),
        p = g === PD.sliding || g === PD.floating,
        h = Es(!1),
        f = function f() {
          return h.get() && !e.removed;
        },
        b = function b(e) {
          return p ? e.fold(x(0), function (e) {
            return e.components().length > 1 ? Wt(e.components()[1].element) : 0;
          }) : 0;
        },
        v = function v() {
          L(a, function (e) {
            e.broadcastOn([Kd()], {});
          });
        },
        y = function y(o) {
          if (!f()) return;
          l || s.on(function (e) {
            var o = d.getOrThunk(function () {
              var e = ND(It(xt(), "margin-left")).getOr(0);
              return Jt(xt()) - Xt(t).left + e;
            });
            Dt(e.element, "max-width", o + "px");
          });
          var n = l ? A.none() : function () {
            if (l) return A.none();
            if (Xt(r.outerContainer.element).left + Zt(r.outerContainer.element) >= window.innerWidth - 40 || Nt(r.outerContainer.element, "width").isSome()) {
              Dt(r.outerContainer.element, "position", "absolute"), Dt(r.outerContainer.element, "left", "0px"), Ht(r.outerContainer.element, "width");
              var _e28 = Zt(r.outerContainer.element);
              return A.some(_e28);
            }
            return A.none();
          }();
          p && IM.refreshToolbar(r.outerContainer), l || function (o) {
            s.on(function (n) {
              var s = IM.getToolbar(r.outerContainer),
                a = b(s),
                i = Jo(t),
                _fold = function (e, t) {
                  return lb(e) ? xE(t) : A.none();
                }(e, r.outerContainer.element).fold(function () {
                  return {
                    top: m() ? Math.max(i.y - Wt(n.element) + a, 0) : i.bottom,
                    left: i.x
                  };
                }, function (e) {
                  var t;
                  var o = Jo(e),
                    s = null !== (t = e.dom.scrollTop) && void 0 !== t ? t : 0,
                    r = Ze(e, xt()),
                    l = r ? Math.max(i.y - Wt(n.element) + a, 0) : i.y - o.y + s - Wt(n.element) + a;
                  return {
                    top: m() ? l : i.bottom,
                    left: r ? i.x : i.x - o.x
                  };
                }),
                l = _fold.top,
                c = _fold.left,
                d = {
                  position: "absolute",
                  left: Math.round(c) + "px",
                  top: Math.round(l) + "px"
                },
                u = o.map(function (e) {
                  var t = Uo(),
                    o = window.innerWidth - (c - t.left);
                  return {
                    width: Math.max(Math.min(e, o), 150) + "px"
                  };
                }).getOr({});
              Bt(r.outerContainer.element, _objectSpread(_objectSpread({}, d), u));
            });
          }(n), c && s.on(o), v();
        },
        w = function w() {
          return !(l || !c || !f()) && s.get().exists(function (o) {
            var n = u.getDockingMode(),
              a = function (o) {
                switch (_f(e)) {
                  case LD.auto:
                    var _e29 = IM.getToolbar(r.outerContainer),
                      _n41 = b(_e29),
                      _s32 = Wt(o.element) - _n41,
                      _a8 = Jo(t);
                    if (_a8.y > _s32) return "top";
                    {
                      var _e30 = ot(t),
                        _o44 = Math.max(_e30.dom.scrollHeight, Wt(_e30));
                      return _a8.bottom < _o44 - _s32 || en().bottom < _a8.bottom - _s32 ? "bottom" : "top";
                    }
                  case LD.bottom:
                    return "bottom";
                  case LD.top:
                  default:
                    return "top";
                }
              }(o);
            return a !== n && (i = a, s.on(function (e) {
              $E.setModes(e, [i]), u.setDockingMode(i);
              var t = m() ? vc.TopToBottom : vc.BottomToTop;
              kt(e.element, yc, t);
            }), !0);
            var i;
          });
        };
      return {
        isVisible: f,
        isPositionedAtTop: m,
        show: function show() {
          h.set(!0), Dt(r.outerContainer.element, "display", "flex"), i.addClass(e.getBody(), "mce-edit-focus"), L(a, function (e) {
            Ht(e.element, "display");
          }), w(), lb(e) ? y(function (e) {
            return $E.isDocked(e) ? $E.reset(e) : $E.refresh(e);
          }) : y($E.refresh);
        },
        hide: function hide() {
          h.set(!1), Dt(r.outerContainer.element, "display", "none"), i.removeClass(e.getBody(), "mce-edit-focus"), L(a, function (e) {
            Dt(e.element, "display", "none");
          });
        },
        update: y,
        updateMode: function updateMode() {
          w() && y($E.reset);
        },
        repositionPopups: v
      };
    },
    WD = function WD(e, t) {
      var o = Jo(e);
      return {
        pos: t ? o.y : o.bottom,
        bounds: o
      };
    };
  var jD = Object.freeze({
    __proto__: null,
    render: function () {
      var _render2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e, t, o, n, s) {
        var r, a, i, l, c, d, u;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              r = t.mainUi, a = Ql(), i = Ve(s.targetNode), l = UD(e, i, t, n, a), c = Af(e);
              _context2.next = 3;
              return jM(e);
            case 3:
              d = function d() {
                if (a.isSet()) return void l.show();
                a.set(IM.getHeader(r.outerContainer).getOrDie());
                var s = rb(e);
                lb(e) ? (Rd(i, r.mothership), Rd(i, t.popupUi.mothership)) : Id(s, r.mothership), Id(s, t.dialogUi.mothership), BD(e, t, o, n), IM.setMenubar(r.outerContainer, VM(e, o)), l.show(), function (e, t, o, n) {
                  var s = Es(WD(t, o.isPositionedAtTop())),
                    r = function r(n) {
                      var _WD = WD(t, o.isPositionedAtTop()),
                        r = _WD.pos,
                        a = _WD.bounds,
                        _s$get = s.get(),
                        i = _s$get.pos,
                        l = _s$get.bounds,
                        c = a.height !== l.height || a.width !== l.width;
                      s.set({
                        pos: r,
                        bounds: a
                      }), c && gx(e, n), o.isVisible() && (i !== r ? o.update($E.reset) : c && (o.updateMode(), o.repositionPopups()));
                    };
                  n || (e.on("activate", o.show), e.on("deactivate", o.hide)), e.on("SkinLoaded ResizeWindow", function () {
                    return o.update($E.reset);
                  }), e.on("NodeChange keydown", function (e) {
                    requestAnimationFrame(function () {
                      return r(e);
                    });
                  });
                  var a = 0;
                  var i = PC(function () {
                    return o.update($E.refresh);
                  }, 33);
                  e.on("ScrollWindow", function () {
                    var e = Uo().left;
                    e !== a && (a = e, i.throttle()), o.updateMode();
                  }), lb(e) && e.on("ElementScroll", function (e) {
                    o.update($E.refresh);
                  });
                  var l = Zl();
                  l.set(oc(Ve(e.getBody()), "load", function (e) {
                    return r(e.raw);
                  })), e.on("remove", function () {
                    l.clear();
                  });
                }(e, i, l, c), e.nodeChanged();
              };
              e.on("show", d), e.on("hide", l.hide), c || (e.on("focus", d), e.on("blur", l.hide)), e.on("init", function () {
                (e.hasFocus() || c) && d();
              }), wy(e, t);
              u = {
                show: d,
                hide: l.hide,
                setEnabled: function setEnabled(e) {
                  xy(t, !e);
                },
                isEnabled: function isEnabled() {
                  return !Rm.isDisabled(r.outerContainer);
                }
              };
              return _context2.abrupt("return", {
                editorContainer: r.outerContainer.element.dom,
                api: u
              });
            case 7:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }));
      function render(_x7, _x8, _x9, _x10, _x11) {
        return _render2.apply(this, arguments);
      }
      return render;
    }()
  });
  var GD = "contexttoolbar-hide",
    $D = function $D(e, t) {
      return Ur(dO, function (o, n) {
        var s = function (e) {
          return {
            hide: function hide() {
              return Fr(e, hr());
            },
            getValue: function getValue() {
              return pu.getValue(e);
            }
          };
        }(e.get(o));
        t.onAction(s, n.event.buttonApi);
      });
    },
    qD = function qD(e, t) {
      var o = e.label.fold(function () {
          return {};
        }, function (e) {
          return {
            "aria-label": e
          };
        }),
        n = jh(Vb.sketch({
          inputClasses: ["tox-toolbar-textfield", "tox-toolbar-nav-js"],
          data: e.initValue(),
          inputAttributes: o,
          selectOnFocus: !0,
          inputBehaviours: kl([Pp.config({
            mode: "special",
            onEnter: function onEnter(e) {
              return s.findPrimary(e).map(function (e) {
                return Rr(e), !0;
              });
            },
            onLeft: function onLeft(e, t) {
              return t.cut(), A.none();
            },
            onRight: function onRight(e, t) {
              return t.cut(), A.none();
            }
          })])
        })),
        s = function (e, t, o) {
          var n = H(t, function (t) {
            return jh(function (e, t, o) {
              return function (e) {
                return "contextformtogglebutton" === e.type;
              }(t) ? function (e, t, o) {
                var _t$original = t.original,
                  n = _t$original.primary,
                  s = _objectWithoutProperties(_t$original, _excluded4),
                  r = Xn(Nv(_objectSpread(_objectSpread({}, s), {}, {
                    type: "togglebutton",
                    onAction: b
                  })));
                return OD(r, o, [$D(e, t)]);
              }(e, t, o) : function (e, t, o) {
                var _t$original2 = t.original,
                  n = _t$original2.primary,
                  s = _objectWithoutProperties(_t$original2, _excluded5),
                  r = Xn(Fv(_objectSpread(_objectSpread({}, s), {}, {
                    type: "button",
                    onAction: b
                  })));
                return CD(r, o, [$D(e, t)]);
              }(e, t, o);
            }(e, t, o));
          });
          return {
            asSpecs: function asSpecs() {
              return H(n, function (e) {
                return e.asSpec();
              });
            },
            findPrimary: function findPrimary(e) {
              return re(t, function (t, o) {
                return t.primary ? A.from(n[o]).bind(function (t) {
                  return t.getOpt(e);
                }).filter(C(Rm.isDisabled)) : A.none();
              });
            }
          };
        }(n, e.commands, t);
      return [{
        title: A.none(),
        items: [n.asSpec()]
      }, {
        title: A.none(),
        items: s.asSpecs()
      }];
    },
    XD = function XD(e, t, o) {
      return t.bottom - e.y >= o && e.bottom - t.y >= o;
    },
    YD = function YD(e) {
      var t = function (e) {
        var t = e.getBoundingClientRect();
        if (t.height <= 0 && t.width <= 0) {
          var _o45 = ut(Ve(e.startContainer), e.startOffset).element;
          return ($e(_o45) ? st(_o45) : A.some(_o45)).filter(Ge).map(function (e) {
            return e.dom.getBoundingClientRect();
          }).getOr(t);
        }
        return t;
      }(e.selection.getRng());
      if (e.inline) {
        var _e31 = Uo();
        return Ko(_e31.left + t.left, _e31.top + t.top, t.width, t.height);
      }
      {
        var _o46 = Zo(Ve(e.getBody()));
        return Ko(_o46.x + t.left, _o46.y + t.top, t.width, t.height);
      }
    },
    KD = function KD(e, t, o) {
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
      var s = Go(window),
        r = Jo(Ve(e.getContentAreaContainer())),
        a = Kf(e) || Qf(e) || tb(e),
        _ref23 = function (e, t, o) {
          var n = Math.max(e.x + o, t.x);
          return {
            x: n,
            width: Math.min(e.right - o, t.right) - n
          };
        }(r, s, n),
        i = _ref23.x,
        l = _ref23.width;
      if (e.inline && !a) return Ko(i, s.y, l, s.height);
      {
        var _a9 = t.header.isPositionedAtTop(),
          _ref24 = function (e, t, o, n, s, r) {
            var a = Ve(e.getContainer()),
              i = pi(a, ".tox-editor-header").getOr(a),
              l = Jo(i),
              c = l.y >= t.bottom,
              d = n && !c;
            if (e.inline && d) return {
              y: Math.max(l.bottom + r, o.y),
              bottom: o.bottom
            };
            if (e.inline && !d) return {
              y: o.y,
              bottom: Math.min(l.y - r, o.bottom)
            };
            var u = "line" === s ? Jo(a) : t;
            return d ? {
              y: Math.max(l.bottom + r, o.y),
              bottom: Math.min(u.bottom - r, o.bottom)
            } : {
              y: Math.max(u.y + r, o.y),
              bottom: Math.min(l.y - r, o.bottom)
            };
          }(e, r, s, _a9, o, n),
          _c4 = _ref24.y,
          _d2 = _ref24.bottom;
        return Ko(i, _c4, l, _d2 - _c4);
      }
    },
    JD = {
      valignCentre: [],
      alignCentre: [],
      alignLeft: ["tox-pop--align-left"],
      alignRight: ["tox-pop--align-right"],
      right: ["tox-pop--right"],
      left: ["tox-pop--left"],
      bottom: ["tox-pop--bottom"],
      top: ["tox-pop--top"],
      inset: ["tox-pop--inset"]
    },
    ZD = {
      maxHeightFunction: cc(),
      maxWidthFunction: VA()
    },
    QD = function QD(e) {
      return "node" === e;
    },
    eB = function eB(e, t, o, n, s) {
      var r = YD(e),
        a = n.lastElement().exists(function (e) {
          return Ze(o, e);
        });
      return function (e, t) {
        var o = e.selection.getRng(),
          n = ut(Ve(o.startContainer), o.startOffset);
        return o.startContainer === o.endContainer && o.startOffset === o.endOffset - 1 && Ze(n.element, t);
      }(e, o) ? a ? gT : lT : a ? function (e, o, s) {
        var a = Nt(e, "position");
        Dt(e, "position", o);
        var i = XD(r, Jo(t), -20) && !n.isReposition() ? hT : gT;
        return a.each(function (t) {
          return Dt(e, "position", t);
        }), i;
      }(t, n.getMode()) : ("fixed" === n.getMode() ? s.y + Uo().top : s.y) + (Wt(t) + 12) <= r.y ? lT : cT;
    },
    tB = function tB(e, t, o, n) {
      var s = function s(t) {
          return function (n, s, r, a, i) {
            return _objectSpread(_objectSpread({}, eB(e, a, t, o, i)(_objectSpread(_objectSpread({}, n), {}, {
              y: i.y,
              height: i.height
            }), s, r, a, i)), {}, {
              alwaysFit: !0
            });
          };
        },
        r = function r(e) {
          return QD(n) ? [s(e)] : [];
        };
      return t ? {
        onLtr: function onLtr(e) {
          return [cl, sl, rl, al, il, ll].concat(r(e));
        },
        onRtl: function onRtl(e) {
          return [cl, rl, sl, il, al, ll].concat(r(e));
        }
      } : {
        onLtr: function onLtr(e) {
          return [ll, cl, al, sl, il, rl].concat(r(e));
        },
        onRtl: function onRtl(e) {
          return [ll, cl, il, rl, al, sl].concat(r(e));
        }
      };
    },
    oB = function oB(e, t) {
      var o = U(t, function (t) {
          return t.predicate(e.dom);
        }),
        _P = P(o, function (e) {
          return "contexttoolbar" === e.type;
        }),
        n = _P.pass,
        s = _P.fail;
      return {
        contextToolbars: n,
        contextForms: s
      };
    },
    nB = function nB(e, t) {
      var o = {},
        n = [],
        s = [],
        r = {},
        a = {},
        i = ae(e);
      return L(i, function (i) {
        var l = e[i];
        "contextform" === l.type ? function (e, i) {
          var l = Xn(qn("ContextForm", Wv, i));
          o[e] = l, l.launch.map(function (o) {
            r["form:" + e] = _objectSpread(_objectSpread({}, i.launch), {}, {
              type: "contextformtogglebutton" === o.type ? "togglebutton" : "button",
              onAction: function onAction() {
                t(l);
              }
            });
          }), "editor" === l.scope ? s.push(l) : n.push(l), a[e] = l;
        }(i, l) : "contexttoolbar" === l.type && function (e, t) {
          var o;
          (o = t, qn("ContextToolbar", jv, o)).each(function (o) {
            "editor" === t.scope ? s.push(o) : n.push(o), a[e] = o;
          });
        }(i, l);
      }), {
        forms: o,
        inNodeScope: n,
        inEditorScope: s,
        lookupTable: a,
        formNavigators: r
      };
    },
    sB = la("forward-slide"),
    rB = la("backward-slide"),
    aB = la("change-slide-event"),
    iB = "tox-pop--resizing",
    lB = "tox-pop--transition",
    cB = function cB(e, t, o, n) {
      var s = n.backstage,
        r = s.shared,
        a = Do().deviceType.isTouch,
        i = Ql(),
        l = Ql(),
        c = Ql(),
        d = ri(function (e) {
          var t = Es([]);
          return Ph.sketch({
            dom: {
              tag: "div",
              classes: ["tox-pop"]
            },
            fireDismissalEventInstead: {
              event: "doNotDismissYet"
            },
            onShow: function onShow(e) {
              t.set([]), Ph.getContent(e).each(function (e) {
                Ht(e.element, "visibility");
              }), Pa(e.element, iB), Ht(e.element, "width");
            },
            inlineBehaviours: kl([Jp("context-toolbar-events", [Yr(or(), function (e, t) {
              "width" === t.event.raw.propertyName && (Pa(e.element, iB), Ht(e.element, "width"));
            }), Ur(aB, function (e, t) {
              var o = e.element;
              Ht(o, "width");
              var n = Jt(o);
              Ph.setContent(e, t.event.contents), La(o, iB);
              var s = Jt(o);
              Dt(o, "width", n + "px"), Ph.getContent(e).each(function (e) {
                t.event.focus.bind(function (e) {
                  return Dl(e), Rl(o);
                }).orThunk(function () {
                  return Pp.focusIn(e), Il(ht(o));
                });
              }), setTimeout(function () {
                Dt(e.element, "width", s + "px");
              }, 0);
            }), Ur(sB, function (e, o) {
              Ph.getContent(e).each(function (o) {
                t.set(t.get().concat([{
                  bar: o,
                  focus: Il(ht(e.element))
                }]));
              }), Ir(e, aB, {
                contents: o.event.forwardContents,
                focus: A.none()
              });
            }), Ur(rB, function (e, o) {
              ne(t.get()).each(function (o) {
                t.set(t.get().slice(0, t.get().length - 1)), Ir(e, aB, {
                  contents: ai(o.bar),
                  focus: o.focus
                });
              });
            })]), Pp.config({
              mode: "special",
              onEscape: function onEscape(o) {
                return ne(t.get()).fold(function () {
                  return e.onEscape();
                }, function (e) {
                  return Fr(o, rB), A.some(!0);
                });
              }
            })]),
            lazySink: function lazySink() {
              return sn.value(e.sink);
            }
          });
        }({
          sink: o,
          onEscape: function onEscape() {
            return e.focus(), A.some(!0);
          }
        })),
        u = function u() {
          var t = c.get().getOr("node"),
            o = QD(t) ? 1 : 0;
          return KD(e, r, t, o);
        },
        m = function m() {
          return !(e.removed || a() && s.isContextMenuOpen());
        },
        g = function g() {
          if (m()) {
            var _t46 = u(),
              _o47 = xe(c.get(), "node") ? function (e, t) {
                return t.filter(function (e) {
                  return yt(e) && je(e);
                }).map(Zo).getOrThunk(function () {
                  return YD(e);
                });
              }(e, i.get()) : YD(e);
            return _t46.height <= 0 || !XD(_o47, _t46, .01);
          }
          return !0;
        },
        p = function p() {
          i.clear(), l.clear(), c.clear(), Ph.hide(d);
        },
        h = function h() {
          if (Ph.isOpen(d)) {
            var _e32 = d.element;
            Ht(_e32, "display"), g() ? Dt(_e32, "display", "none") : (l.set(0), Ph.reposition(d));
          }
        },
        f = function f(t) {
          return {
            dom: {
              tag: "div",
              classes: ["tox-pop__dialog"]
            },
            components: [t],
            behaviours: kl([Pp.config({
              mode: "acyclic"
            }), Jp("pop-dialog-wrap-events", [Kr(function (t) {
              e.shortcuts.add("ctrl+F9", "focus statusbar", function () {
                return Pp.focusIn(t);
              });
            }), Jr(function (t) {
              e.shortcuts.remove("ctrl+F9");
            })])])
          };
        },
        v = Qt(function () {
          return nB(t, function (e) {
            var t = y([e]);
            Ir(d, sB, {
              forwardContents: f(t)
            });
          });
        }),
        y = function y(t) {
          var _e$ui$registry$getAll = e.ui.registry.getAll(),
            o = _e$ui$registry$getAll.buttons,
            s = _objectSpread(_objectSpread({}, o), v().formNavigators),
            a = Cf(e) === nf.scrolling ? nf.scrolling : nf["default"],
            i = q(H(t, function (t) {
              return "contexttoolbar" === t.type ? function (t, o) {
                return DD(e, {
                  buttons: t,
                  toolbar: o.items,
                  allowToolbarGroups: !1
                }, n.backstage, A.some(["form:"]));
              }(s, t) : function (e, t) {
                return qD(e, t);
              }(t, r.providers);
            }));
          return lM({
            type: a,
            uid: la("context-toolbar"),
            initGroups: i,
            onEscape: A.none,
            cyclicKeying: !0,
            providers: r.providers
          });
        },
        x = function x(t, n) {
          if (S.cancel(), !m()) return;
          var s = y(t),
            p = t[0].position,
            h = function (t, n) {
              var s = "node" === t ? r.anchors.node(n) : r.anchors.cursor(),
                c = function (e, t, o, n) {
                  return "line" === t ? {
                    bubble: gc(12, 0, JD),
                    layouts: {
                      onLtr: function onLtr() {
                        return [dl];
                      },
                      onRtl: function onRtl() {
                        return [ul];
                      }
                    },
                    overrides: ZD
                  } : {
                    bubble: gc(0, 12, JD, 1 / 12),
                    layouts: tB(e, o, n, t),
                    overrides: ZD
                  };
                }(e, t, a(), {
                  lastElement: i.get,
                  isReposition: function isReposition() {
                    return xe(l.get(), 0);
                  },
                  getMode: function getMode() {
                    return Sd.getMode(o);
                  }
                });
              return fn(s, c);
            }(p, n);
          c.set(p), l.set(1);
          var b = d.element;
          Ht(b, "display"), function (e) {
            return xe(Se(e, i.get(), Ze), !0);
          }(n) || (Pa(b, lB), Sd.reset(o, d)), Ph.showWithinBounds(d, f(s), {
            anchor: h,
            transition: {
              classes: [lB],
              mode: "placement"
            }
          }, function () {
            return A.some(u());
          }), n.fold(i.clear, i.set), g() && Dt(b, "display", "none");
        };
      var w = !1;
      var S = PC(function () {
        !e.hasFocus() || e.removed || w || (Ua(d.element, lB) ? S.throttle() : function (e, t) {
          var o = Ve(t.getBody()),
            n = function n(e) {
              return Ze(e, o);
            },
            s = Ve(t.selection.getNode());
          return function (e) {
            return !n(e) && !Qe(o, e);
          }(s) ? A.none() : function (e, t, o) {
            var n = oB(e, t);
            if (n.contextForms.length > 0) return A.some({
              elem: e,
              toolbars: [n.contextForms[0]]
            });
            {
              var _t47 = oB(e, o);
              if (_t47.contextForms.length > 0) return A.some({
                elem: e,
                toolbars: [_t47.contextForms[0]]
              });
              if (n.contextToolbars.length > 0 || _t47.contextToolbars.length > 0) {
                var _o48 = function (e) {
                  if (e.length <= 1) return e;
                  {
                    var _t48 = function _t48(t) {
                        return N(e, function (e) {
                          return e.position === t;
                        });
                      },
                      _o49 = function _o49(t) {
                        return U(e, function (e) {
                          return e.position === t;
                        });
                      },
                      _n42 = _t48("selection"),
                      _s33 = _t48("node");
                    if (_n42 || _s33) {
                      if (_s33 && _n42) {
                        var _e33 = _o49("node"),
                          _t49 = H(_o49("selection"), function (e) {
                            return _objectSpread(_objectSpread({}, e), {}, {
                              position: "node"
                            });
                          });
                        return _e33.concat(_t49);
                      }
                      return _o49(_n42 ? "selection" : "node");
                    }
                    return _o49("line");
                  }
                }(n.contextToolbars.concat(_t47.contextToolbars));
                return A.some({
                  elem: e,
                  toolbars: _o48
                });
              }
              return A.none();
            }
          }(s, e.inNodeScope, e.inEditorScope).orThunk(function () {
            return function (e, t, o) {
              return e(t) ? A.none() : Fs(t, function (e) {
                if (Ge(e)) {
                  var _oB = oB(e, o.inNodeScope),
                    _t50 = _oB.contextToolbars,
                    _n43 = _oB.contextForms,
                    _s34 = _n43.length > 0 ? _n43 : function (e) {
                      if (e.length <= 1) return e;
                      {
                        var _t51 = function _t51(t) {
                          return G(e, function (e) {
                            return e.position === t;
                          });
                        };
                        return _t51("selection").orThunk(function () {
                          return _t51("node");
                        }).orThunk(function () {
                          return _t51("line");
                        }).map(function (e) {
                          return e.position;
                        }).fold(function () {
                          return [];
                        }, function (t) {
                          return U(e, function (e) {
                            return e.position === t;
                          });
                        });
                      }
                    }(_t50);
                  return _s34.length > 0 ? A.some({
                    elem: e,
                    toolbars: _s34
                  }) : A.none();
                }
                return A.none();
              }, e);
            }(n, s, e);
          });
        }(v(), e).fold(p, function (e) {
          x(e.toolbars, A.some(e.elem));
        }));
      }, 17);
      e.on("init", function () {
        e.on("remove", p), e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress", h), e.on("click keyup focus SetContent", S.throttle), e.on(GD, p), e.on("contexttoolbar-show", function (t) {
          var o = v();
          be(o.lookupTable, t.toolbarKey).each(function (o) {
            x([o], Ce(t.target !== e, t.target)), Ph.getContent(d).each(Pp.focusIn);
          });
        }), e.on("focusout", function (t) {
          Uh.setEditorTimeout(e, function () {
            Rl(o.element).isNone() && Rl(d.element).isNone() && p();
          }, 0);
        }), e.on("SwitchMode", function () {
          e.mode.isReadOnly() && p();
        }), e.on("AfterProgressState", function (t) {
          t.state ? p() : e.hasFocus() && S.throttle();
        }), e.on("dragstart", function () {
          w = !0;
        }), e.on("dragend drop", function () {
          w = !1;
        }), e.on("NodeChange", function (e) {
          Rl(d.element).fold(S.throttle, b);
        });
      });
    },
    dB = function dB(e, t) {
      var o = function o() {
        var o = t.getOptions(e),
          n = t.getCurrent(e).map(t.hash),
          s = Ql();
        return H(o, function (o) {
          return {
            type: "togglemenuitem",
            text: t.display(o),
            onSetup: function onSetup(r) {
              var a = function a(e) {
                e && (s.on(function (e) {
                  return e.setActive(!1);
                }), s.set(r)), r.setActive(e);
              };
              a(xe(n, t.hash(o)));
              var i = t.watcher(e, o, a);
              return function () {
                s.clear(), i();
              };
            },
            onAction: function onAction() {
              return t.setCurrent(e, o);
            }
          };
        });
      };
      e.ui.registry.addMenuButton(t.name, {
        tooltip: t.text,
        icon: t.icon,
        fetch: function fetch(e) {
          return e(o());
        },
        onSetup: t.onToolbarSetup
      }), e.ui.registry.addNestedMenuItem(t.name, {
        type: "nestedmenuitem",
        text: t.text,
        getSubmenuItems: o,
        onSetup: t.onMenuSetup
      });
    },
    uB = function uB(e) {
      dB(e, function (e) {
        return {
          name: "lineheight",
          text: "Line height",
          icon: "line-height",
          getOptions: Zf,
          hash: function hash(e) {
            return function (e, t) {
              return rD(e, ["fixed", "relative", "empty"]).map(function (_ref25) {
                var e = _ref25.value,
                  t = _ref25.unit;
                return e + t;
              });
            }(e).getOr(e);
          },
          display: w,
          watcher: function watcher(e, t, o) {
            return e.formatter.formatChanged("lineheight", o, !1, {
              value: t
            }).unbind;
          },
          getCurrent: function getCurrent(e) {
            return A.from(e.queryCommandValue("LineHeight"));
          },
          setCurrent: function setCurrent(e, t) {
            return e.execCommand("LineHeight", !1, t);
          },
          onToolbarSetup: bx(e),
          onMenuSetup: bx(e)
        };
      }(e)), function (e) {
        return A.from(Sf(e)).map(function (t) {
          return {
            name: "language",
            text: "Language",
            icon: "language",
            getOptions: x(t),
            hash: function hash(e) {
              return u(e.customCode) ? e.code : "".concat(e.code, "/").concat(e.customCode);
            },
            display: function display(e) {
              return e.title;
            },
            watcher: function watcher(e, t, o) {
              var n;
              return e.formatter.formatChanged("lang", o, !1, {
                value: t.code,
                customValue: null !== (n = t.customCode) && void 0 !== n ? n : null
              }).unbind;
            },
            getCurrent: function getCurrent(e) {
              var t = Ve(e.selection.getNode());
              return Is(t, function (e) {
                return A.some(e).filter(Ge).bind(function (e) {
                  return _t(e, "lang").map(function (t) {
                    return {
                      code: t,
                      customCode: _t(e, "data-mce-lang").getOrUndefined(),
                      title: ""
                    };
                  });
                });
              });
            },
            setCurrent: function setCurrent(e, t) {
              return e.execCommand("Lang", !1, t);
            },
            onToolbarSetup: function onToolbarSetup(t) {
              var o = Zl();
              return t.setActive(e.formatter.match("lang", {}, void 0, !0)), o.set(e.formatter.formatChanged("lang", t.setActive, !0)), fx(o.clear, bx(e)(t));
            },
            onMenuSetup: bx(e)
          };
        });
      }(e).each(function (t) {
        return dB(e, t);
      });
    },
    mB = function mB(e) {
      return yx(e, "NodeChange", function (t) {
        t.setEnabled(e.queryCommandState("outdent") && e.selection.isEditable());
      });
    },
    gB = function gB(e, t) {
      return function (o) {
        o.setActive(t.get());
        var n = function n(e) {
          t.set(e.state), o.setActive(e.state);
        };
        return e.on("PastePlainTextToggle", n), fx(function () {
          return e.off("PastePlainTextToggle", n);
        }, bx(e)(o));
      };
    },
    pB = function pB(e, t) {
      return function () {
        e.execCommand("mceToggleFormat", !1, t);
      };
    },
    hB = function hB(e) {
      (function (e) {
        (function (e) {
          LC.each([{
            name: "bold",
            text: "Bold",
            icon: "bold"
          }, {
            name: "italic",
            text: "Italic",
            icon: "italic"
          }, {
            name: "underline",
            text: "Underline",
            icon: "underline"
          }, {
            name: "strikethrough",
            text: "Strikethrough",
            icon: "strike-through"
          }, {
            name: "subscript",
            text: "Subscript",
            icon: "subscript"
          }, {
            name: "superscript",
            text: "Superscript",
            icon: "superscript"
          }], function (t, o) {
            e.ui.registry.addToggleButton(t.name, {
              tooltip: t.text,
              icon: t.icon,
              onSetup: vx(e, t.name),
              onAction: pB(e, t.name)
            });
          });
          for (var _t52 = 1; _t52 <= 6; _t52++) {
            var _o50 = "h" + _t52;
            e.ui.registry.addToggleButton(_o50, {
              text: _o50.toUpperCase(),
              tooltip: "Heading " + _t52,
              onSetup: vx(e, _o50),
              onAction: pB(e, _o50)
            });
          }
        })(e), function (e) {
          LC.each([{
            name: "copy",
            text: "Copy",
            action: "Copy",
            icon: "copy"
          }, {
            name: "help",
            text: "Help",
            action: "mceHelp",
            icon: "help"
          }, {
            name: "selectall",
            text: "Select all",
            action: "SelectAll",
            icon: "select-all"
          }, {
            name: "newdocument",
            text: "New document",
            action: "mceNewDocument",
            icon: "new-document"
          }, {
            name: "print",
            text: "Print",
            action: "mcePrint",
            icon: "print"
          }], function (t) {
            e.ui.registry.addButton(t.name, {
              tooltip: t.text,
              icon: t.icon,
              onAction: wx(e, t.action)
            });
          }), LC.each([{
            name: "cut",
            text: "Cut",
            action: "Cut",
            icon: "cut"
          }, {
            name: "paste",
            text: "Paste",
            action: "Paste",
            icon: "paste"
          }, {
            name: "removeformat",
            text: "Clear formatting",
            action: "RemoveFormat",
            icon: "remove-formatting"
          }, {
            name: "remove",
            text: "Remove",
            action: "Delete",
            icon: "remove"
          }, {
            name: "hr",
            text: "Horizontal line",
            action: "InsertHorizontalRule",
            icon: "horizontal-rule"
          }], function (t) {
            e.ui.registry.addButton(t.name, {
              tooltip: t.text,
              icon: t.icon,
              onSetup: bx(e),
              onAction: wx(e, t.action)
            });
          });
        }(e), function (e) {
          LC.each([{
            name: "blockquote",
            text: "Blockquote",
            action: "mceBlockQuote",
            icon: "quote"
          }], function (t) {
            e.ui.registry.addToggleButton(t.name, {
              tooltip: t.text,
              icon: t.icon,
              onAction: wx(e, t.action),
              onSetup: vx(e, t.name)
            });
          });
        }(e);
      })(e), function (e) {
        LC.each([{
          name: "newdocument",
          text: "New document",
          action: "mceNewDocument",
          icon: "new-document"
        }, {
          name: "copy",
          text: "Copy",
          action: "Copy",
          icon: "copy",
          shortcut: "Meta+C"
        }, {
          name: "selectall",
          text: "Select all",
          action: "SelectAll",
          icon: "select-all",
          shortcut: "Meta+A"
        }, {
          name: "print",
          text: "Print...",
          action: "mcePrint",
          icon: "print",
          shortcut: "Meta+P"
        }], function (t) {
          e.ui.registry.addMenuItem(t.name, {
            text: t.text,
            icon: t.icon,
            shortcut: t.shortcut,
            onAction: wx(e, t.action)
          });
        }), LC.each([{
          name: "bold",
          text: "Bold",
          action: "Bold",
          icon: "bold",
          shortcut: "Meta+B"
        }, {
          name: "italic",
          text: "Italic",
          action: "Italic",
          icon: "italic",
          shortcut: "Meta+I"
        }, {
          name: "underline",
          text: "Underline",
          action: "Underline",
          icon: "underline",
          shortcut: "Meta+U"
        }, {
          name: "strikethrough",
          text: "Strikethrough",
          action: "Strikethrough",
          icon: "strike-through"
        }, {
          name: "subscript",
          text: "Subscript",
          action: "Subscript",
          icon: "subscript"
        }, {
          name: "superscript",
          text: "Superscript",
          action: "Superscript",
          icon: "superscript"
        }, {
          name: "removeformat",
          text: "Clear formatting",
          action: "RemoveFormat",
          icon: "remove-formatting"
        }, {
          name: "cut",
          text: "Cut",
          action: "Cut",
          icon: "cut",
          shortcut: "Meta+X"
        }, {
          name: "paste",
          text: "Paste",
          action: "Paste",
          icon: "paste",
          shortcut: "Meta+V"
        }, {
          name: "hr",
          text: "Horizontal line",
          action: "InsertHorizontalRule",
          icon: "horizontal-rule"
        }], function (t) {
          e.ui.registry.addMenuItem(t.name, {
            text: t.text,
            icon: t.icon,
            shortcut: t.shortcut,
            onSetup: bx(e),
            onAction: wx(e, t.action)
          });
        }), e.ui.registry.addMenuItem("codeformat", {
          text: "Code",
          icon: "sourcecode",
          onSetup: bx(e),
          onAction: pB(e, "code")
        });
      }(e);
    },
    fB = function fB(e, t) {
      return yx(e, "Undo Redo AddUndo TypingUndo ClearUndos SwitchMode", function (o) {
        o.setEnabled(!e.mode.isReadOnly() && e.undoManager[t]());
      });
    },
    bB = function bB(e) {
      return yx(e, "VisualAid", function (t) {
        t.setActive(e.hasVisual);
      });
    },
    vB = function vB(e, t) {
      (function (e) {
        L([{
          name: "alignleft",
          text: "Align left",
          cmd: "JustifyLeft",
          icon: "align-left"
        }, {
          name: "aligncenter",
          text: "Align center",
          cmd: "JustifyCenter",
          icon: "align-center"
        }, {
          name: "alignright",
          text: "Align right",
          cmd: "JustifyRight",
          icon: "align-right"
        }, {
          name: "alignjustify",
          text: "Justify",
          cmd: "JustifyFull",
          icon: "align-justify"
        }], function (t) {
          e.ui.registry.addToggleButton(t.name, {
            tooltip: t.text,
            icon: t.icon,
            onAction: wx(e, t.cmd),
            onSetup: vx(e, t.name)
          });
        }), e.ui.registry.addButton("alignnone", {
          tooltip: "No alignment",
          icon: "align-none",
          onSetup: bx(e),
          onAction: wx(e, "JustifyNone")
        });
      })(e), hB(e), function (e, t) {
        (function (e, t) {
          var o = $M(0, t, JM(e));
          e.ui.registry.addNestedMenuItem("align", {
            text: t.shared.providers.translate("Align"),
            onSetup: bx(e),
            getSubmenuItems: function getSubmenuItems() {
              return o.items.validateItems(o.getStyleItems());
            }
          });
        })(e, t), function (e, t) {
          var o = $M(0, t, oD(e));
          e.ui.registry.addNestedMenuItem("fontfamily", {
            text: t.shared.providers.translate("Fonts"),
            onSetup: bx(e),
            getSubmenuItems: function getSubmenuItems() {
              return o.items.validateItems(o.getStyleItems());
            }
          });
        }(e, t), function (e, t) {
          var o = _objectSpread({
              type: "advanced"
            }, t.styles),
            n = $M(0, t, mD(e, o));
          e.ui.registry.addNestedMenuItem("styles", {
            text: "Formats",
            onSetup: bx(e),
            getSubmenuItems: function getSubmenuItems() {
              return n.items.validateItems(n.getStyleItems());
            }
          });
        }(e, t), function (e, t) {
          var o = $M(0, t, QM(e));
          e.ui.registry.addNestedMenuItem("blocks", {
            text: "Blocks",
            onSetup: bx(e),
            getSubmenuItems: function getSubmenuItems() {
              return o.items.validateItems(o.getStyleItems());
            }
          });
        }(e, t), function (e, t) {
          var o = $M(0, t, uD(e));
          e.ui.registry.addNestedMenuItem("fontsize", {
            text: "Font sizes",
            onSetup: bx(e),
            getSubmenuItems: function getSubmenuItems() {
              return o.items.validateItems(o.getStyleItems());
            }
          });
        }(e, t);
      }(e, t), function (e) {
        (function (e) {
          e.ui.registry.addMenuItem("undo", {
            text: "Undo",
            icon: "undo",
            shortcut: "Meta+Z",
            onSetup: fB(e, "hasUndo"),
            onAction: wx(e, "undo")
          }), e.ui.registry.addMenuItem("redo", {
            text: "Redo",
            icon: "redo",
            shortcut: "Meta+Y",
            onSetup: fB(e, "hasRedo"),
            onAction: wx(e, "redo")
          });
        })(e), function (e) {
          e.ui.registry.addButton("undo", {
            tooltip: "Undo",
            icon: "undo",
            enabled: !1,
            onSetup: fB(e, "hasUndo"),
            onAction: wx(e, "undo")
          }), e.ui.registry.addButton("redo", {
            tooltip: "Redo",
            icon: "redo",
            enabled: !1,
            onSetup: fB(e, "hasRedo"),
            onAction: wx(e, "redo")
          });
        }(e);
      }(e), function (e) {
        (function (e) {
          e.addCommand("mceApplyTextcolor", function (t, o) {
            (function (e, t, o) {
              e.undoManager.transact(function () {
                e.focus(), e.formatter.apply(t, {
                  value: o
                }), e.nodeChanged();
              });
            })(e, t, o);
          }), e.addCommand("mceRemoveTextcolor", function (t) {
            (function (e, t) {
              e.undoManager.transact(function () {
                e.focus(), e.formatter.remove(t, {
                  value: null
                }, void 0, !0), e.nodeChanged();
              });
            })(e, t);
          });
        })(e);
        var t = Lx(e),
          o = Px(e),
          n = Es(t),
          s = Es(o);
        Yx(e, "forecolor", "forecolor", "Text color", n), Yx(e, "backcolor", "hilitecolor", "Background color", s), Kx(e, "forecolor", "forecolor", "Text color", n), Kx(e, "backcolor", "hilitecolor", "Background color", s);
      }(e), function (e) {
        (function (e) {
          e.ui.registry.addButton("visualaid", {
            tooltip: "Visual aids",
            text: "Visual aids",
            onAction: wx(e, "mceToggleVisualAid")
          });
        })(e), function (e) {
          e.ui.registry.addToggleMenuItem("visualaid", {
            text: "Visual aids",
            onSetup: bB(e),
            onAction: wx(e, "mceToggleVisualAid")
          });
        }(e);
      }(e), function (e) {
        (function (e) {
          e.ui.registry.addButton("outdent", {
            tooltip: "Decrease indent",
            icon: "outdent",
            onSetup: mB(e),
            onAction: wx(e, "outdent")
          }), e.ui.registry.addButton("indent", {
            tooltip: "Increase indent",
            icon: "indent",
            onSetup: bx(e),
            onAction: wx(e, "indent")
          });
        })(e);
      }(e), uB(e), function (e) {
        var t = Es(Gf(e)),
          o = function o() {
            return e.execCommand("mceTogglePlainTextPaste");
          };
        e.ui.registry.addToggleButton("pastetext", {
          active: !1,
          icon: "paste-text",
          tooltip: "Paste as text",
          onAction: o,
          onSetup: gB(e, t)
        }), e.ui.registry.addToggleMenuItem("pastetext", {
          text: "Paste as text",
          icon: "paste-text",
          onAction: o,
          onSetup: gB(e, t)
        });
      }(e);
    },
    yB = function yB(e) {
      return r(e) ? e.split(/[ ,]/) : e;
    },
    xB = function xB(e) {
      return function (t) {
        return t.options.get(e);
      };
    },
    wB = xB("contextmenu_never_use_native"),
    SB = xB("contextmenu_avoid_overlap"),
    kB = function kB(e) {
      var t = e.ui.registry.getAll().contextMenus,
        o = e.options.get("contextmenu");
      return e.options.isSet("contextmenu") ? o : U(o, function (e) {
        return ve(t, e);
      });
    },
    CB = function CB(e, t) {
      return {
        type: "makeshift",
        x: e,
        y: t
      };
    },
    OB = function OB(e) {
      return "longpress" === e.type || 0 === e.type.indexOf("touch");
    },
    _B = function _B(e, t) {
      return "contextmenu" === t.type || "longpress" === t.type ? e.inline ? function (e) {
        if (OB(e)) {
          var _t53 = e.touches[0];
          return CB(_t53.pageX, _t53.pageY);
        }
        return CB(e.pageX, e.pageY);
      }(t) : function (e, t) {
        var o = rf.DOM.getPos(e);
        return function (e, t, o) {
          return CB(e.x + t, e.y + o);
        }(t, o.x, o.y);
      }(e.getContentAreaContainer(), function (e) {
        if (OB(e)) {
          var _t54 = e.touches[0];
          return CB(_t54.clientX, _t54.clientY);
        }
        return CB(e.clientX, e.clientY);
      }(t)) : TB(e);
    },
    TB = function TB(e) {
      return {
        type: "selection",
        root: Ve(e.selection.getNode())
      };
    },
    EB = function EB(e, t, o) {
      switch (o) {
        case "node":
          return function (e) {
            return {
              type: "node",
              node: A.some(Ve(e.selection.getNode())),
              root: Ve(e.getBody())
            };
          }(e);
        case "point":
          return _B(e, t);
        case "selection":
          return TB(e);
      }
    },
    AB = function AB(e, t, o, n, s, r) {
      var a = o(),
        i = EB(e, t, r);
      CO(a, pb.CLOSE_ON_EXECUTE, n, {
        isHorizontalMenu: !1,
        search: A.none()
      }).map(function (e) {
        t.preventDefault(), Ph.showMenuAt(s, {
          anchor: i
        }, {
          menu: {
            markers: Ab("normal")
          },
          data: e
        });
      });
    },
    MB = {
      onLtr: function onLtr() {
        return [cl, sl, rl, al, il, ll, lT, cT, iT, rT, aT, sT];
      },
      onRtl: function onRtl() {
        return [cl, rl, sl, il, al, ll, lT, cT, aT, sT, iT, rT];
      }
    },
    DB = {
      valignCentre: [],
      alignCentre: [],
      alignLeft: ["tox-pop--align-left"],
      alignRight: ["tox-pop--align-right"],
      right: ["tox-pop--right"],
      left: ["tox-pop--left"],
      bottom: ["tox-pop--bottom"],
      top: ["tox-pop--top"]
    },
    BB = function BB(e, t, o, n, s, r) {
      var a = Do(),
        i = a.os.isiOS(),
        l = a.os.isMacOS(),
        c = a.os.isAndroid(),
        d = a.deviceType.isTouch(),
        u = function u() {
          var a = o();
          (function (e, t, o, n, s, r, a) {
            var i = function (e, t, o) {
              var n = EB(e, t, o);
              return _objectSpread({
                bubble: gc(0, "point" === o ? 12 : 0, DB),
                layouts: MB,
                overrides: {
                  maxWidthFunction: VA(),
                  maxHeightFunction: cc()
                }
              }, n);
            }(e, t, r);
            CO(o, pb.CLOSE_ON_EXECUTE, n, {
              isHorizontalMenu: !0,
              search: A.none()
            }).map(function (o) {
              t.preventDefault();
              var l = a ? zh.HighlightMenuAndItem : zh.HighlightNone;
              Ph.showMenuWithinBounds(s, {
                anchor: i
              }, {
                menu: {
                  markers: Ab("normal"),
                  highlightOnOpen: l
                },
                data: o,
                type: "horizontal"
              }, function () {
                return A.some(KD(e, n.shared, "node" === r ? "node" : "selection"));
              }), e.dispatch(GD);
            });
          })(e, t, a, n, s, r, !(c || i || l && d));
        };
      if ((l || i) && "node" !== r) {
        var _o51 = function _o51() {
          (function (e) {
            var t = e.selection.getRng(),
              o = function o() {
                Uh.setEditorTimeout(e, function () {
                  e.selection.setRng(t);
                }, 10), r();
              };
            e.once("touchend", o);
            var n = function n(e) {
              e.preventDefault(), e.stopImmediatePropagation();
            };
            e.on("mousedown", n, !0);
            var s = function s() {
              return r();
            };
            e.once("longpresscancel", s);
            var r = function r() {
              e.off("touchend", o), e.off("longpresscancel", s), e.off("mousedown", n);
            };
          })(e), u();
        };
        (function (e, t) {
          var o = e.selection;
          if (o.isCollapsed() || t.touches.length < 1) return !1;
          {
            var _n44 = t.touches[0],
              _s35 = o.getRng();
            return Jc(e.getWin(), Lc.domRange(_s35)).exists(function (e) {
              return e.left <= _n44.clientX && e.right >= _n44.clientX && e.top <= _n44.clientY && e.bottom >= _n44.clientY;
            });
          }
        })(e, t) ? _o51() : (e.once("selectionchange", _o51), e.once("touchend", function () {
          return e.off("selectionchange", _o51);
        }));
      } else u();
    },
    FB = function FB(e) {
      return r(e) ? "|" === e : "separator" === e.type;
    },
    IB = {
      type: "separator"
    },
    RB = function RB(e) {
      var t = function t(e) {
        return {
          text: e.text,
          icon: e.icon,
          enabled: e.enabled,
          shortcut: e.shortcut
        };
      };
      if (r(e)) return e;
      switch (e.type) {
        case "separator":
          return IB;
        case "submenu":
          return _objectSpread(_objectSpread({
            type: "nestedmenuitem"
          }, t(e)), {}, {
            getSubmenuItems: function getSubmenuItems() {
              var t = e.getSubmenuItems();
              return r(t) ? t : H(t, RB);
            }
          });
        default:
          var _o52 = e;
          return _objectSpread(_objectSpread({
            type: "menuitem"
          }, t(_o52)), {}, {
            onAction: v(_o52.onAction)
          });
      }
    },
    NB = function NB(e, t) {
      if (0 === t.length) return e;
      var o = ne(e).filter(function (e) {
        return !FB(e);
      }).fold(function () {
        return [];
      }, function (e) {
        return [IB];
      });
      return e.concat(o).concat(t).concat([IB]);
    },
    VB = function VB(e, t) {
      return !function (e) {
        return "longpress" === e.type || ve(e, "touches");
      }(t) && (2 !== t.button || t.target === e.getBody() && "" === t.pointerType);
    },
    zB = function zB(e, t) {
      return VB(e, t) ? e.selection.getStart(!0) : t.target;
    },
    HB = function HB(e, t, o) {
      var n = Do().deviceType.isTouch,
        s = ri(Ph.sketch({
          dom: {
            tag: "div"
          },
          lazySink: t,
          onEscape: function onEscape() {
            return e.focus();
          },
          onShow: function onShow() {
            return o.setContextMenuState(!0);
          },
          onHide: function onHide() {
            return o.setContextMenuState(!1);
          },
          fireDismissalEventInstead: {},
          inlineBehaviours: kl([Jp("dismissContextMenu", [Ur(Cr(), function (t, o) {
            Xd.close(t), e.focus();
          })])])
        })),
        a = function a() {
          return Ph.hide(s);
        },
        i = function i(t) {
          if (wB(e) && t.preventDefault(), function (e, t) {
            return t.ctrlKey && !wB(e);
          }(e, t) || function (e) {
            return 0 === kB(e).length;
          }(e)) return;
          var a = function (e, t) {
            var o = SB(e),
              n = VB(e, t) ? "selection" : "point";
            if (De(o)) {
              var _s36 = zB(e, t);
              return $w(Ve(_s36), o) ? "node" : n;
            }
            return n;
          }(e, t);
          (n() ? BB : AB)(e, t, function () {
            var o = zB(e, t),
              n = e.ui.registry.getAll(),
              s = kB(e);
            return function (e, t, o) {
              var n = j(t, function (t, n) {
                return be(e, n.toLowerCase()).map(function (e) {
                  var n = e.update(o);
                  if (r(n) && De(Me(n))) return NB(t, n.split(" "));
                  if (l(n) && n.length > 0) {
                    var _e34 = H(n, RB);
                    return NB(t, _e34);
                  }
                  return t;
                }).getOrThunk(function () {
                  return t.concat([n]);
                });
              }, []);
              return n.length > 0 && FB(n[n.length - 1]) && n.pop(), n;
            }(n.contextMenus, s, o);
          }, o, s, a);
        };
      e.on("init", function () {
        var t = "ResizeEditor ScrollContent ScrollWindow longpresscancel" + (n() ? "" : " ResizeWindow");
        e.on(t, a), e.on("longpress contextmenu", i);
      });
    },
    LB = As([{
      offset: ["x", "y"]
    }, {
      absolute: ["x", "y"]
    }, {
      fixed: ["x", "y"]
    }]),
    PB = function PB(e) {
      return function (t) {
        return t.translate(-e.left, -e.top);
      };
    },
    UB = function UB(e) {
      return function (t) {
        return t.translate(e.left, e.top);
      };
    },
    WB = function WB(e) {
      return function (t, o) {
        return j(e, function (e, t) {
          return t(e);
        }, $t(t, o));
      };
    },
    jB = function jB(e, t, o) {
      return e.fold(WB([UB(o), PB(t)]), WB([PB(t)]), WB([]));
    },
    GB = function GB(e, t, o) {
      return e.fold(WB([UB(o)]), WB([]), WB([UB(t)]));
    },
    $B = function $B(e, t, o) {
      return e.fold(WB([]), WB([PB(o)]), WB([UB(t), PB(o)]));
    },
    qB = function qB(e, t, o) {
      var n = e.fold(function (e, t) {
        return {
          position: A.some("absolute"),
          left: A.some(e + "px"),
          top: A.some(t + "px")
        };
      }, function (e, t) {
        return {
          position: A.some("absolute"),
          left: A.some(e - o.left + "px"),
          top: A.some(t - o.top + "px")
        };
      }, function (e, t) {
        return {
          position: A.some("fixed"),
          left: A.some(e + "px"),
          top: A.some(t + "px")
        };
      });
      return _objectSpread({
        right: A.none(),
        bottom: A.none()
      }, n);
    },
    XB = function XB(e, t, o, n) {
      var s = function s(e, _s37) {
        return function (r, a) {
          var i = e(t, o, n);
          return _s37(r.getOr(i.left), a.getOr(i.top));
        };
      };
      return e.fold(s($B, YB), s(GB, KB), s(jB, JB));
    },
    YB = LB.offset,
    KB = LB.absolute,
    JB = LB.fixed,
    ZB = function ZB(e, t) {
      var o = Ot(e, t);
      return u(o) ? NaN : parseInt(o, 10);
    },
    QB = function QB(e, t, o, n, s, r) {
      var a = function (e, t, o, n) {
          return function (e, t) {
            var o = e.element,
              n = ZB(o, t.leftAttr),
              s = ZB(o, t.topAttr);
            return isNaN(n) || isNaN(s) ? A.none() : A.some($t(n, s));
          }(e, t).fold(function () {
            return o;
          }, function (e) {
            return JB(e.left + n.left, e.top + n.top);
          });
        }(e, t, o, n),
        i = t.mustSnap ? tF(e, t, a, s, r) : oF(e, t, a, s, r),
        l = jB(a, s, r);
      return function (e, t, o) {
        var n = e.element;
        kt(n, t.leftAttr, o.left + "px"), kt(n, t.topAttr, o.top + "px");
      }(e, t, l), i.fold(function () {
        return {
          coord: JB(l.left, l.top),
          extra: A.none()
        };
      }, function (e) {
        return {
          coord: e.output,
          extra: e.extra
        };
      });
    },
    eF = function eF(e, t, o, n) {
      return re(e, function (e) {
        var s = e.sensor,
          r = function (e, t, o, n, s, r) {
            var a = GB(e, s, r),
              i = GB(t, s, r);
            return Math.abs(a.left - i.left) <= o && Math.abs(a.top - i.top) <= n;
          }(t, s, e.range.left, e.range.top, o, n);
        return r ? A.some({
          output: XB(e.output, t, o, n),
          extra: e.extra
        }) : A.none();
      });
    },
    tF = function tF(e, t, o, n, s) {
      var r = t.getSnapPoints(e);
      return eF(r, o, n, s).orThunk(function () {
        var e = j(r, function (e, t) {
          var r = t.sensor,
            a = function (e, t, o, n, s, r) {
              var a = GB(e, s, r),
                i = GB(t, s, r),
                l = Math.abs(a.left - i.left),
                c = Math.abs(a.top - i.top);
              return $t(l, c);
            }(o, r, t.range.left, t.range.top, n, s);
          return e.deltas.fold(function () {
            return {
              deltas: A.some(a),
              snap: A.some(t)
            };
          }, function (o) {
            return (a.left + a.top) / 2 <= (o.left + o.top) / 2 ? {
              deltas: A.some(a),
              snap: A.some(t)
            } : e;
          });
        }, {
          deltas: A.none(),
          snap: A.none()
        });
        return e.snap.map(function (e) {
          return {
            output: XB(e.output, o, n, s),
            extra: e.extra
          };
        });
      });
    },
    oF = function oF(e, t, o, n, s) {
      var r = t.getSnapPoints(e);
      return eF(r, o, n, s);
    };
  var nF = Object.freeze({
    __proto__: null,
    snapTo: function snapTo(e, t, o, n) {
      var s = t.getTarget(e.element);
      if (t.repositionTarget) {
        var _t55 = et(e.element),
          _o53 = Uo(_t55),
          _r15 = wE(s),
          _a10 = function (e, t, o) {
            return {
              coord: XB(e.output, e.output, t, o),
              extra: e.extra
            };
          }(n, _o53, _r15),
          _i2 = qB(_a10.coord, 0, _r15);
        Ft(s, _i2);
      }
    }
  });
  var sF = "data-initial-z-index",
    rF = function rF(e, t) {
      e.getSystem().addToGui(t), function (e) {
        st(e.element).filter(Ge).each(function (t) {
          Nt(t, "z-index").each(function (e) {
            kt(t, sF, e);
          }), Dt(t, "z-index", It(e.element, "z-index"));
        });
      }(t);
    },
    aF = function aF(e) {
      (function (e) {
        st(e.element).filter(Ge).each(function (e) {
          _t(e, sF).fold(function () {
            return Ht(e, "z-index");
          }, function (t) {
            return Dt(e, "z-index", t);
          }), Et(e, sF);
        });
      })(e), e.getSystem().removeFromGui(e);
    },
    iF = function iF(e, t, o) {
      return e.getSystem().build(oS.sketch({
        dom: {
          styles: {
            left: "0px",
            top: "0px",
            width: "100%",
            height: "100%",
            position: "fixed",
            "z-index": "1000000000000000"
          },
          classes: [t]
        },
        events: o
      }));
    };
  var lF = vs("snaps", [os("getSnapPoints"), Di("onSensor"), os("leftAttr"), os("topAttr"), ys("lazyViewport", en), ys("mustSnap", !1)]);
  var cF = [ys("useFixed", T), os("blockerClass"), ys("getTarget", w), ys("onDrag", b), ys("repositionTarget", !0), ys("onDrop", b), Os("getBounds", en), lF],
    dF = function dF(e) {
      return (t = Nt(e, "left"), o = Nt(e, "top"), n = Nt(e, "position"), t.isSome() && o.isSome() && n.isSome() ? A.some(function (e, t, o) {
        return ("fixed" === o ? JB : YB)(parseInt(e, 10), parseInt(t, 10));
      }(t.getOrDie(), o.getOrDie(), n.getOrDie())) : A.none()).getOrThunk(function () {
        var t = Xt(e);
        return KB(t.left, t.top);
      });
      var t, o, n;
    },
    uF = function uF(e, t) {
      return {
        bounds: e.getBounds(),
        height: jt(t.element),
        width: Zt(t.element)
      };
    },
    mF = function mF(e, t, o, n, s) {
      var r = o.update(n, s),
        a = o.getStartData().getOrThunk(function () {
          return uF(t, e);
        });
      r.each(function (o) {
        (function (e, t, o, n) {
          var s = t.getTarget(e.element);
          if (t.repositionTarget) {
            var _r16 = et(e.element),
              _a11 = Uo(_r16),
              _i3 = wE(s),
              _l4 = dF(s),
              _c5 = function (e, t, o, n, s, r, a) {
                return function (e, t, o, n, s) {
                  var r = s.bounds,
                    a = GB(t, o, n),
                    i = Yi(a.left, r.x, r.x + r.width - s.width),
                    l = Yi(a.top, r.y, r.y + r.height - s.height),
                    c = KB(i, l);
                  return t.fold(function () {
                    var e = $B(c, o, n);
                    return YB(e.left, e.top);
                  }, x(c), function () {
                    var e = jB(c, o, n);
                    return JB(e.left, e.top);
                  });
                }(0, t.fold(function () {
                  var e = (t = o, a = r.left, i = r.top, t.fold(function (e, t) {
                    return YB(e + a, t + i);
                  }, function (e, t) {
                    return KB(e + a, t + i);
                  }, function (e, t) {
                    return JB(e + a, t + i);
                  }));
                  var t, a, i;
                  var l = jB(e, n, s);
                  return JB(l.left, l.top);
                }, function (t) {
                  var a = QB(e, t, o, r, n, s);
                  return a.extra.each(function (o) {
                    t.onSensor(e, o);
                  }), a.coord;
                }), n, s, a);
              }(e, t.snaps, _l4, _a11, _i3, n, o),
              _d3 = qB(_c5, 0, _i3);
            Ft(s, _d3);
          }
          t.onDrag(e, s, n);
        })(e, t, a, o);
      });
    },
    gF = function gF(e, t, o, n) {
      t.each(aF), o.snaps.each(function (t) {
        (function (e, t) {
          (function (e, t) {
            var o = e.element;
            Et(o, t.leftAttr), Et(o, t.topAttr);
          })(e, t);
        })(e, t);
      });
      var s = o.getTarget(e.element);
      n.reset(), o.onDrop(e, s);
    },
    pF = function pF(e) {
      return function (t, o) {
        var n = function n(e) {
          o.setStartData(uF(t, e));
        };
        return Hr([Ur(xr(), function (e) {
          o.getStartData().each(function () {
            return n(e);
          });
        })].concat(_toConsumableArray(e(t, o, n))));
      };
    };
  var hF = Object.freeze({
    __proto__: null,
    getData: function getData(e) {
      return A.from($t(e.x, e.y));
    },
    getDelta: function getDelta(e, t) {
      return $t(t.left - e.left, t.top - e.top);
    }
  });
  var fF = function fF(e, t, o) {
      return [Ur(Ws(), function (n, s) {
        if (0 !== s.event.raw.button) return;
        s.stop();
        var r = function r() {
            return gF(n, A.some(l), e, t);
          },
          a = qw(r, 200),
          i = {
            drop: r,
            delayDrop: a.schedule,
            forceDrop: r,
            move: function move(o) {
              a.cancel(), mF(n, e, t, hF, o);
            }
          },
          l = iF(n, e.blockerClass, function (e) {
            return Hr([Ur(Ws(), e.forceDrop), Ur($s(), e.drop), Ur(js(), function (t, o) {
              e.move(o.event);
            }), Ur(Gs(), e.delayDrop)]);
          }(i));
        o(n), rF(n, l);
      })];
    },
    bF = [].concat(cF, [Ri("dragger", {
      handlers: pF(fF)
    })]);
  var vF = Object.freeze({
    __proto__: null,
    getData: function getData(e) {
      var t = e.raw.touches;
      return 1 === t.length ? function (e) {
        var t = e[0];
        return A.some($t(t.clientX, t.clientY));
      }(t) : A.none();
    },
    getDelta: function getDelta(e, t) {
      return $t(t.left - e.left, t.top - e.top);
    }
  });
  var yF = function yF(e, t, o) {
      var n = Ql(),
        s = function s(o) {
          gF(o, n.get(), e, t), n.clear();
        };
      return [Ur(Hs(), function (r, a) {
        a.stop();
        var i = function i() {
            return s(r);
          },
          l = {
            drop: i,
            delayDrop: b,
            forceDrop: i,
            move: function move(o) {
              mF(r, e, t, vF, o);
            }
          },
          c = iF(r, e.blockerClass, function (e) {
            return Hr([Ur(Hs(), e.forceDrop), Ur(Ps(), e.drop), Ur(Us(), e.drop), Ur(Ls(), function (t, o) {
              e.move(o.event);
            })]);
          }(l));
        n.set(c), o(r), rF(r, c);
      }), Ur(Ls(), function (o, n) {
        n.stop(), mF(o, e, t, vF, n.event);
      }), Ur(Ps(), function (e, t) {
        t.stop(), s(e);
      }), Ur(Us(), s)];
    },
    xF = bF,
    wF = [].concat(cF, [Ri("dragger", {
      handlers: pF(yF)
    })]),
    SF = [].concat(cF, [Ri("dragger", {
      handlers: pF(function (e, t, o) {
        return [].concat(_toConsumableArray(fF(e, t, o)), _toConsumableArray(yF(e, t, o)));
      })
    })]);
  var kF = Object.freeze({
      __proto__: null,
      mouse: xF,
      touch: wF,
      mouseOrTouch: SF
    }),
    CF = Object.freeze({
      __proto__: null,
      init: function init() {
        var e = A.none(),
          t = A.none();
        var o = x({});
        return _a({
          readState: o,
          reset: function reset() {
            e = A.none(), t = A.none();
          },
          update: function update(t, o) {
            return t.getData(o).bind(function (o) {
              return function (t, o) {
                var n = e.map(function (e) {
                  return t.getDelta(e, o);
                });
                return e = A.some(o), n;
              }(t, o);
            });
          },
          getStartData: function getStartData() {
            return t;
          },
          setStartData: function setStartData(e) {
            t = A.some(e);
          }
        });
      }
    });
  var OF = Tl({
      branchKey: "mode",
      branches: kF,
      name: "dragging",
      active: {
        events: function events(e, t) {
          return e.dragger.handlers(e, t);
        }
      },
      extra: {
        snap: function snap(e) {
          return {
            sensor: e.sensor,
            range: e.range,
            output: e.output,
            extra: A.from(e.extra)
          };
        }
      },
      state: CF,
      apis: nF
    }),
    _F = function _F(e, t, o, n, s, r) {
      return e.fold(function () {
        return OF.snap({
          sensor: KB(o - 20, n - 20),
          range: $t(s, r),
          output: KB(A.some(o), A.some(n)),
          extra: {
            td: t
          }
        });
      }, function (e) {
        var s = o - 20,
          r = n - 20,
          a = e.element.dom.getBoundingClientRect();
        return OF.snap({
          sensor: KB(s, r),
          range: $t(40, 40),
          output: KB(A.some(o - a.width / 2), A.some(n - a.height / 2)),
          extra: {
            td: t
          }
        });
      });
    },
    TF = function TF(e, t, o) {
      return {
        getSnapPoints: e,
        leftAttr: "data-drag-left",
        topAttr: "data-drag-top",
        onSensor: function onSensor(e, n) {
          var s = n.td;
          (function (e, t) {
            return e.exists(function (e) {
              return Ze(e, t);
            });
          })(t.get(), s) || (t.set(s), o(s));
        },
        mustSnap: !0
      };
    },
    EF = function EF(e) {
      return jh(Wh.sketch({
        dom: {
          tag: "div",
          classes: ["tox-selector"]
        },
        buttonBehaviours: kl([OF.config({
          mode: "mouseOrTouch",
          blockerClass: "blocker",
          snaps: e
        }), IS.config({})]),
        eventOrder: {
          mousedown: ["dragging", "alloy.base.behaviour"],
          touchstart: ["dragging", "alloy.base.behaviour"]
        }
      }));
    },
    AF = function AF(e, t) {
      var o = Es([]),
        n = Es([]),
        s = Es(!1),
        r = Ql(),
        a = Ql(),
        i = function i(e) {
          var o = Zo(e);
          return _F(u.getOpt(t), e, o.x, o.y, o.width, o.height);
        },
        l = function l(e) {
          var o = Zo(e);
          return _F(m.getOpt(t), e, o.right, o.bottom, o.width, o.height);
        },
        c = TF(function () {
          return H(o.get(), function (e) {
            return i(e);
          });
        }, r, function (t) {
          a.get().each(function (o) {
            e.dispatch("TableSelectorChange", {
              start: t,
              finish: o
            });
          });
        }),
        d = TF(function () {
          return H(n.get(), function (e) {
            return l(e);
          });
        }, a, function (t) {
          r.get().each(function (o) {
            e.dispatch("TableSelectorChange", {
              start: o,
              finish: t
            });
          });
        }),
        u = EF(c),
        m = EF(d),
        g = ri(u.asSpec()),
        p = ri(m.asSpec()),
        h = function h(t, o, n, s) {
          var r = n(o);
          OF.snapTo(t, r), function (t, o, n, r) {
            var a = o.dom.getBoundingClientRect();
            Ht(t.element, "display");
            var i = nt(Ve(e.getBody())).dom.innerHeight,
              l = a[s] < 0,
              c = function (e, t) {
                return e[s] > t;
              }(a, i);
            (l || c) && Dt(t.element, "display", "none");
          }(t, o);
        },
        f = function f(e) {
          return h(g, e, i, "top");
        },
        b = function b(e) {
          return h(p, e, l, "bottom");
        };
      Do().deviceType.isTouch() && (e.on("TableSelectionChange", function (e) {
        s.get() || (Ad(t, g), Ad(t, p), s.set(!0)), r.set(e.start), a.set(e.finish), e.otherCells.each(function (t) {
          o.set(t.upOrLeftCells), n.set(t.downOrRightCells), f(e.start), b(e.finish);
        });
      }), e.on("ResizeEditor ResizeWindow ScrollContent", function () {
        r.get().each(f), a.get().each(b);
      }), e.on("TableSelectionClear", function () {
        s.get() && (Bd(g), Bd(p), s.set(!1)), r.clear(), a.clear();
      }));
    },
    MF = function MF(e, t, o) {
      var n;
      var s = null !== (n = t.delimiter) && void 0 !== n ? n : "\u203A";
      return {
        dom: {
          tag: "div",
          classes: ["tox-statusbar__path"],
          attributes: {
            role: "navigation"
          }
        },
        behaviours: kl([Pp.config({
          mode: "flow",
          selector: "div[role=button]"
        }), Rm.config({
          disabled: o.isDisabled
        }), Sy(), cS.config({}), Kp.config({}), Jp("elementPathEvents", [Kr(function (t, n) {
          e.shortcuts.add("alt+F11", "focus statusbar elementpath", function () {
            return Pp.focusIn(t);
          }), e.on("NodeChange", function (n) {
            var r = function (t) {
                var o = [];
                var n = t.length;
                for (; n-- > 0;) {
                  var _r17 = t[n];
                  if (1 === _r17.nodeType && "BR" !== (s = _r17).nodeName && !s.getAttribute("data-mce-bogus") && "bookmark" !== s.getAttribute("data-mce-type")) {
                    var _t56 = hx(e, _r17);
                    if (_t56.isDefaultPrevented() || o.push({
                      name: _t56.name,
                      element: _r17
                    }), _t56.isPropagationStopped()) break;
                  }
                }
                var s;
                return o;
              }(n.parents),
              a = r.length > 0 ? j(r, function (t, n, r) {
                var a = function (t, n, s) {
                  return Wh.sketch({
                    dom: {
                      tag: "div",
                      classes: ["tox-statusbar__path-item"],
                      attributes: {
                        "data-index": s,
                        "aria-level": s + 1
                      }
                    },
                    components: [ti(t)],
                    action: function action(t) {
                      e.focus(), e.selection.select(n), e.nodeChanged();
                    },
                    buttonBehaviours: kl([ky(o.isDisabled), Sy()])
                  });
                }(n.name, n.element, r);
                return 0 === r ? t.concat([a]) : t.concat([{
                  dom: {
                    tag: "div",
                    classes: ["tox-statusbar__path-divider"],
                    attributes: {
                      "aria-hidden": !0
                    }
                  },
                  components: [ti(" ".concat(s, " "))]
                }, a]);
              }, []) : [];
            Kp.set(t, a);
          });
        })])]),
        components: []
      };
    };
  var DF;
  !function (e) {
    e[e.None = 0] = "None", e[e.Both = 1] = "Both", e[e.Vertical = 2] = "Vertical";
  }(DF || (DF = {}));
  var BF = function BF(e, t, o) {
      var n = Ve(e.getContainer()),
        s = function (e, t, o, n, s) {
          var r = {
            height: zD(n + t.top, ff(e), vf(e))
          };
          return o === DF.Both && (r.width = zD(s + t.left, hf(e), bf(e))), r;
        }(e, t, o, Wt(n), Jt(n));
      le(s, function (e, t) {
        h(e) && Dt(n, t, VD(e));
      }), function (e) {
        e.dispatch("ResizeEditor");
      }(e);
    },
    FF = function FF(e, t, o, n) {
      var s = $t(20 * o, 20 * n);
      return BF(e, s, t), A.some(!0);
    },
    IF = function IF(e, t) {
      var o = function o() {
        var o = [],
          n = Xf(e),
          s = Uf(e),
          r = Wf(e) || e.hasPlugin("wordcount");
        return s && o.push(MF(e, {}, t)), n && o.push(function () {
          var e = Iy("Alt+0");
          return {
            dom: {
              tag: "div",
              classes: ["tox-statusbar__help-text"]
            },
            components: [ti(Gh.translate(["Press {0} for help", e]))]
          };
        }()), r && o.push(function () {
          var o = [];
          return e.hasPlugin("wordcount") && o.push(function (e, t) {
            var o = function o(e, _o54, n) {
              return Kp.set(e, [ti(t.translate(["{0} " + n, _o54[n]]))]);
            };
            return Wh.sketch({
              dom: {
                tag: "button",
                classes: ["tox-statusbar__wordcount"]
              },
              components: [],
              buttonBehaviours: kl([ky(t.isDisabled), Sy(), cS.config({}), Kp.config({}), pu.config({
                store: {
                  mode: "memory",
                  initialValue: {
                    mode: "words",
                    count: {
                      words: 0,
                      characters: 0
                    }
                  }
                }
              }), Jp("wordcount-events", [Qr(function (e) {
                var t = pu.getValue(e),
                  n = "words" === t.mode ? "characters" : "words";
                pu.setValue(e, {
                  mode: n,
                  count: t.count
                }), o(e, t.count, n);
              }), Kr(function (t) {
                e.on("wordCountUpdate", function (e) {
                  var _pu$getValue = pu.getValue(t),
                    n = _pu$getValue.mode;
                  pu.setValue(t, {
                    mode: n,
                    count: e.wordCount
                  }), o(t, e.wordCount, n);
                });
              })])]),
              eventOrder: _defineProperty({}, ur(), ["disabling", "alloy.base.behaviour", "wordcount-events"])
            });
          }(e, t)), Wf(e) && o.push({
            dom: {
              tag: "span",
              classes: ["tox-statusbar__branding"]
            },
            components: [{
              dom: {
                tag: "a",
                attributes: {
                  href: "https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",
                  rel: "noopener",
                  target: "_blank",
                  "aria-label": Gh.translate(["Powered by {0}", "Tiny"])
                },
                innerHtml: '<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>\n</svg>\n'.trim()
              },
              behaviours: kl([oh.config({})])
            }]
          }), {
            dom: {
              tag: "div",
              classes: ["tox-statusbar__right-container"]
            },
            components: o
          };
        }()), o.length > 0 ? [{
          dom: {
            tag: "div",
            classes: ["tox-statusbar__text-container"].concat(_toConsumableArray(function () {
              var e = "tox-statusbar__text-container--flex-start",
                t = "tox-statusbar__text-container--flex-end";
              if (n) {
                var _o55 = "tox-statusbar__text-container-3-cols";
                return r || s ? r && !s ? [_o55, t] : [_o55, e] : [_o55, "tox-statusbar__text-container--space-around"];
              }
              return [r && !s ? t : e];
            }()))
          },
          components: o
        }] : [];
      };
      return {
        dom: {
          tag: "div",
          classes: ["tox-statusbar"]
        },
        components: function () {
          var n = o(),
            s = function (e, t) {
              var o = function (e) {
                var t = jf(e);
                return !1 === t ? DF.None : "both" === t ? DF.Both : DF.Vertical;
              }(e);
              if (o === DF.None) return A.none();
              var n = o === DF.Both ? "Press the arrow keys to resize the editor." : "Press the Up and Down arrow keys to resize the editor.";
              return A.some(ef("resize-handle", {
                tag: "div",
                classes: ["tox-statusbar__resize-handle"],
                attributes: {
                  title: t.translate("Resize"),
                  "aria-label": t.translate(n)
                },
                behaviours: [OF.config({
                  mode: "mouse",
                  repositionTarget: !1,
                  onDrag: function onDrag(t, n, s) {
                    return BF(e, s, o);
                  },
                  blockerClass: "tox-blocker"
                }), Pp.config({
                  mode: "special",
                  onLeft: function onLeft() {
                    return FF(e, o, -1, 0);
                  },
                  onRight: function onRight() {
                    return FF(e, o, 1, 0);
                  },
                  onUp: function onUp() {
                    return FF(e, o, 0, -1);
                  },
                  onDown: function onDown() {
                    return FF(e, o, 0, 1);
                  }
                }), cS.config({}), oh.config({})]
              }, t.icons));
            }(e, t);
          return n.concat(s.toArray());
        }()
      };
    },
    RF = function RF(e, t) {
      return t.get().getOrDie("UI for ".concat(e, " has not been rendered"));
    },
    NF = function NF(e, t) {
      var o = e.inline,
        n = o ? jD : RD,
        s = ib(e) ? oA : yE,
        r = function () {
          var e = Ql(),
            t = Ql(),
            o = Ql();
          return {
            dialogUi: e,
            popupUi: t,
            mainUi: o,
            getUiMotherships: function getUiMotherships() {
              var o = e.get().map(function (e) {
                  return e.mothership;
                }),
                n = t.get().map(function (e) {
                  return e.mothership;
                });
              return o.fold(function () {
                return n.toArray();
              }, function (e) {
                return n.fold(function () {
                  return [e];
                }, function (t) {
                  return Ze(e.element, t.element) ? [e] : [e, t];
                });
              });
            },
            lazyGetInOuterOrDie: function lazyGetInOuterOrDie(e, t) {
              return function () {
                return o.get().bind(function (e) {
                  return t(e.outerContainer);
                }).getOrDie("Could not find ".concat(e, " element in OuterContainer"));
              };
            }
          };
        }(),
        a = Ql(),
        i = Ql(),
        l = Ql(),
        c = Do().deviceType.isTouch() ? ["tox-platform-touch"] : [],
        d = ob(e),
        u = Cf(e),
        m = jh({
          dom: {
            tag: "div",
            classes: ["tox-anchorbar"]
          }
        }),
        g = jh({
          dom: {
            tag: "div",
            classes: ["tox-bottom-anchorbar"]
          }
        }),
        p = function p() {
          return r.mainUi.get().map(function (e) {
            return e.outerContainer;
          }).bind(IM.getHeader);
        },
        h = r.lazyGetInOuterOrDie("anchor bar", m.getOpt),
        f = r.lazyGetInOuterOrDie("bottom anchor bar", g.getOpt),
        b = r.lazyGetInOuterOrDie("toolbar", IM.getToolbar),
        v = r.lazyGetInOuterOrDie("throbber", IM.getThrobber),
        y = function (e, t, o, n) {
          var s = Es(!1),
            r = function (e) {
              var t = Es(ob(e) ? "bottom" : "top");
              return {
                isPositionedAtTop: function isPositionedAtTop() {
                  return "top" === t.get();
                },
                getDockingMode: t.get,
                setDockingMode: t.set
              };
            }(t),
            a = {
              icons: function icons() {
                return t.ui.registry.getAll().icons;
              },
              menuItems: function menuItems() {
                return t.ui.registry.getAll().menuItems;
              },
              translate: Gh.translate,
              isDisabled: function isDisabled() {
                return t.mode.isReadOnly() || !t.ui.isEnabled();
              },
              getOption: t.options.get
            },
            i = rE(t),
            l = function (e) {
              var t = function t(_t57) {
                  return function () {
                    return e.formatter.match(_t57);
                  };
                },
                o = function o(t) {
                  return function () {
                    var o = e.formatter.get(t);
                    return void 0 !== o ? A.some({
                      tag: o.length > 0 && (o[0].inline || o[0].block) || "div",
                      styles: e.dom.parseStyle(e.formatter.getCssText(t))
                    }) : A.none();
                  };
                },
                n = Es([]),
                s = Es([]),
                r = Es(!1);
              return e.on("PreInit", function (s) {
                var r = BT(e),
                  a = IT(e, r, t, o);
                n.set(a);
              }), e.on("addStyleModifications", function (n) {
                var a = IT(e, n.items, t, o);
                s.set(a), r.set(n.replace);
              }), {
                getData: function getData() {
                  var e = r.get() ? [] : n.get(),
                    t = s.get();
                  return e.concat(t);
                }
              };
            }(t),
            c = function (e) {
              return {
                colorPicker: kT(e),
                hasCustomColors: CT(e),
                getColors: OT(e),
                getColorCols: _T(e)
              };
            }(t),
            d = function (e) {
              return {
                isDraggableModal: TT(e)
              };
            }(t),
            u = {
              shared: {
                providers: a,
                anchors: ST(t, o, n, r.isPositionedAtTop),
                header: r
              },
              urlinput: i,
              styles: l,
              colorinput: c,
              dialog: d,
              isContextMenuOpen: function isContextMenuOpen() {
                return s.get();
              },
              setContextMenuState: function setContextMenuState(e) {
                return s.set(e);
              }
            },
            m = _objectSpread(_objectSpread({}, u), {}, {
              shared: _objectSpread(_objectSpread({}, u.shared), {}, {
                interpreter: function interpreter(e) {
                  return K_(e, {}, m);
                },
                getSink: e.popup
              })
            }),
            g = _objectSpread(_objectSpread({}, u), {}, {
              shared: _objectSpread(_objectSpread({}, u.shared), {}, {
                interpreter: function interpreter(e) {
                  return K_(e, {}, g);
                },
                getSink: e.dialog
              })
            });
          return {
            popup: m,
            dialog: g
          };
        }({
          popup: function popup() {
            return sn.fromOption(r.popupUi.get().map(function (e) {
              return e.sink;
            }), "(popup) UI has not been rendered");
          },
          dialog: function dialog() {
            return sn.fromOption(r.dialogUi.get().map(function (e) {
              return e.sink;
            }), "UI has not been rendered");
          }
        }, e, h, f),
        x = function x() {
          var t = function () {
              var t = {
                  attributes: _defineProperty({}, yc, d ? vc.BottomToTop : vc.TopToBottom)
                },
                o = IM.parts.menubar({
                  dom: {
                    tag: "div",
                    classes: ["tox-menubar"]
                  },
                  backstage: y.popup,
                  onEscape: function onEscape() {
                    e.focus();
                  }
                }),
                n = IM.parts.toolbar(_objectSpread({
                  dom: {
                    tag: "div",
                    classes: ["tox-toolbar"]
                  },
                  getSink: y.popup.shared.getSink,
                  providers: y.popup.shared.providers,
                  onEscape: function onEscape() {
                    e.focus();
                  },
                  onToolbarToggled: function onToolbarToggled(t) {
                    (function (e, t) {
                      e.dispatch("ToggleToolbarDrawer", {
                        state: t
                      });
                    })(e, t);
                  },
                  type: u,
                  lazyToolbar: b,
                  lazyHeader: function lazyHeader() {
                    return p().getOrDie("Could not find header element");
                  }
                }, t)),
                s = IM.parts["multiple-toolbar"]({
                  dom: {
                    tag: "div",
                    classes: ["tox-toolbar-overlord"]
                  },
                  providers: y.popup.shared.providers,
                  onEscape: function onEscape() {
                    e.focus();
                  },
                  type: u
                }),
                r = tb(e),
                a = Qf(e),
                i = Kf(e),
                l = qf(e),
                c = IM.parts.promotion({
                  dom: {
                    tag: "div",
                    classes: ["tox-promotion"]
                  }
                }),
                g = r || a || i,
                h = l ? [c, o] : [o];
              return IM.parts.header({
                dom: _objectSpread({
                  tag: "div",
                  classes: ["tox-editor-header"].concat(g ? [] : ["tox-editor-header--empty"])
                }, t),
                components: q([i ? h : [], r ? [s] : a ? [n] : [], sb(e) ? [] : [m.asSpec()]]),
                sticky: ib(e),
                editor: e,
                sharedBackstage: y.popup.shared
              });
            }(),
            n = {
              dom: {
                tag: "div",
                classes: ["tox-sidebar-wrap"]
              },
              components: [IM.parts.socket({
                dom: {
                  tag: "div",
                  classes: ["tox-edit-area"]
                }
              }), IM.parts.sidebar({
                dom: {
                  tag: "div",
                  classes: ["tox-sidebar"]
                }
              })]
            },
            s = IM.parts.throbber({
              dom: {
                tag: "div",
                classes: ["tox-throbber"]
              },
              backstage: y.popup
            }),
            r = IM.parts.viewWrapper({
              backstage: y.popup
            }),
            i = Pf(e) && !o ? A.some(IF(e, y.popup.shared.providers)) : A.none(),
            l = q([d ? [] : [t], o ? [] : [n], d ? [t] : []]),
            h = IM.parts.editorContainer({
              components: q([l, o ? [] : [g.asSpec()].concat(_toConsumableArray(i.toArray()))])
            }),
            f = ab(e),
            v = _objectSpread(_objectSpread({
              role: "application"
            }, Gh.isRtl() ? {
              dir: "rtl"
            } : {}), f ? {
              "aria-hidden": "true"
            } : {}),
            x = ri(IM.sketch({
              dom: {
                tag: "div",
                classes: ["tox", "tox-tinymce"].concat(o ? ["tox-tinymce-inline"] : []).concat(d ? ["tox-tinymce--toolbar-bottom"] : []).concat(c),
                styles: _objectSpread({
                  visibility: "hidden"
                }, f ? {
                  opacity: "0",
                  border: "0"
                } : {}),
                attributes: v
              },
              components: [h].concat(_toConsumableArray(o ? [] : [r]), [s]),
              behaviours: kl([Sy(), Rm.config({
                disableClass: "tox-tinymce--disabled"
              }), Pp.config({
                mode: "cyclic",
                selector: ".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"
              })])
            })),
            w = nS(x);
          return a.set(w), {
            mothership: w,
            outerContainer: x
          };
        },
        w = function w(t) {
          var o = VD(function (e) {
              var t = function (e) {
                var t = gf(e),
                  o = ff(e),
                  n = vf(e);
                return ND(t).map(function (e) {
                  return zD(e, o, n);
                });
              }(e);
              return t.getOr(gf(e));
            }(e)),
            n = VD(function (e) {
              return HD(e).getOr(pf(e));
            }(e));
          return e.inline || (zt("div", "width", n) && Dt(t.element, "width", n), zt("div", "height", o) ? Dt(t.element, "height", o) : Dt(t.element, "height", "400px")), o;
        };
      return {
        popups: {
          backstage: y.popup,
          getMothership: function getMothership() {
            return RF("popups", l);
          }
        },
        dialogs: {
          backstage: y.dialog,
          getMothership: function getMothership() {
            return RF("dialogs", i);
          }
        },
        renderUI: function renderUI() {
          var o = x(),
            a = function () {
              var t = rb(e),
                o = Ze(xt(), t) && "grid" === It(t, "display"),
                n = {
                  dom: {
                    tag: "div",
                    classes: ["tox", "tox-silver-sink", "tox-tinymce-aux"].concat(c),
                    attributes: _objectSpread({}, Gh.isRtl() ? {
                      dir: "rtl"
                    } : {})
                  },
                  behaviours: kl([Sd.config({
                    useFixed: function useFixed() {
                      return s.isDocked(p);
                    }
                  })])
                },
                r = {
                  dom: {
                    styles: {
                      width: document.body.clientWidth + "px"
                    }
                  },
                  events: Hr([Ur(wr(), function (e) {
                    Dt(e.element, "width", document.body.clientWidth + "px");
                  })])
                },
                a = ri(fn(n, o ? r : {})),
                l = nS(a);
              return i.set(l), {
                sink: a,
                mothership: l
              };
            }(),
            d = lb(e) ? function () {
              var e = {
                  dom: {
                    tag: "div",
                    classes: ["tox", "tox-silver-sink", "tox-silver-popup-sink", "tox-tinymce-aux"].concat(c),
                    attributes: _objectSpread({}, Gh.isRtl() ? {
                      dir: "rtl"
                    } : {})
                  },
                  behaviours: kl([Sd.config({
                    useFixed: function useFixed() {
                      return s.isDocked(p);
                    },
                    getBounds: function getBounds() {
                      return t.getPopupSinkBounds();
                    }
                  })])
                },
                o = ri(e),
                n = nS(o);
              return l.set(n), {
                sink: o,
                mothership: n
              };
            }() : function (e) {
              return l.set(e.mothership), e;
            }(a);
          r.dialogUi.set(a), r.popupUi.set(d), r.mainUi.set(o);
          return function (t) {
            var o = t.mainUi,
              r = t.popupUi,
              a = t.uiMotherships;
            ce(Of(e), function (t, o) {
              e.ui.registry.addGroupToolbarButton(o, t);
            });
            var _e$ui$registry$getAll2 = e.ui.registry.getAll(),
              i = _e$ui$registry$getAll2.buttons,
              l = _e$ui$registry$getAll2.menuItems,
              c = _e$ui$registry$getAll2.contextToolbars,
              d = _e$ui$registry$getAll2.sidebars,
              m = _e$ui$registry$getAll2.views,
              g = eb(e),
              h = {
                menuItems: l,
                menus: cb(e),
                menubar: Df(e),
                toolbar: g.getOrThunk(function () {
                  return Bf(e);
                }),
                allowToolbarGroups: u === nf.floating,
                buttons: i,
                sidebar: d,
                views: m
              };
            var f;
            f = o.outerContainer, e.addShortcut("alt+F9", "focus menubar", function () {
              IM.focusMenubar(f);
            }), e.addShortcut("alt+F10", "focus toolbar", function () {
              IM.focusToolbar(f);
            }), e.addCommand("ToggleToolbarDrawer", function (e, t) {
              (null == t ? void 0 : t.skipFocus) ? IM.toggleToolbarDrawerWithoutFocusing(f) : IM.toggleToolbarDrawer(f);
            }), e.addQueryStateHandler("ToggleToolbarDrawer", function () {
              return IM.isToolbarDrawerToggled(f);
            }), function (e, t, o) {
              var n = function n(e, _n45) {
                  L([t].concat(_toConsumableArray(o)), function (t) {
                    t.broadcastEvent(e, _n45);
                  });
                },
                s = function s(e, n) {
                  L([t].concat(_toConsumableArray(o)), function (t) {
                    t.broadcastOn([e], n);
                  });
                },
                r = function r(e) {
                  return s(Yd(), {
                    target: e.target
                  });
                },
                a = $o(),
                i = tc(a, "touchstart", r),
                l = tc(a, "touchmove", function (e) {
                  return n(vr(), e);
                }),
                c = tc(a, "touchend", function (e) {
                  return n(yr(), e);
                }),
                d = tc(a, "mousedown", r),
                u = tc(a, "mouseup", function (e) {
                  0 === e.raw.button && s(Jd(), {
                    target: e.target
                  });
                }),
                m = function m(e) {
                  return s(Yd(), {
                    target: Ve(e.target)
                  });
                },
                g = function g(e) {
                  0 === e.button && s(Jd(), {
                    target: Ve(e.target)
                  });
                },
                p = function p() {
                  L(e.editorManager.get(), function (t) {
                    e !== t && t.dispatch("DismissPopups", {
                      relatedTarget: e
                    });
                  });
                },
                h = function h(e) {
                  return n(xr(), nc(e));
                },
                f = function f(e) {
                  s(Kd(), {}), n(wr(), nc(e));
                },
                b = ht(Ve(e.getElement())),
                v = oc(b, "scroll", function (o) {
                  requestAnimationFrame(function () {
                    if (null != e.getContainer()) {
                      var _s38 = jw(e, t.element).map(function (e) {
                        return [e.element].concat(_toConsumableArray(e.others));
                      }).getOr([]);
                      N(_s38, function (e) {
                        return Ze(e, o.target);
                      }) && (e.dispatch("ElementScroll", {
                        target: o.target.dom
                      }), n(Er(), o));
                    }
                  });
                }),
                y = function y() {
                  return s(Kd(), {});
                },
                x = function x(t) {
                  t.state && s(Yd(), {
                    target: Ve(e.getContainer())
                  });
                },
                w = function w(e) {
                  s(Yd(), {
                    target: Ve(e.relatedTarget.getContainer())
                  });
                };
              e.on("PostRender", function () {
                e.on("click", m), e.on("tap", m), e.on("mouseup", g), e.on("mousedown", p), e.on("ScrollWindow", h), e.on("ResizeWindow", f), e.on("ResizeEditor", y), e.on("AfterProgressState", x), e.on("DismissPopups", w);
              }), e.on("remove", function () {
                e.off("click", m), e.off("tap", m), e.off("mouseup", g), e.off("mousedown", p), e.off("ScrollWindow", h), e.off("ResizeWindow", f), e.off("ResizeEditor", y), e.off("AfterProgressState", x), e.off("DismissPopups", w), d.unbind(), i.unbind(), l.unbind(), c.unbind(), u.unbind(), v.unbind();
              }), e.on("detach", function () {
                L([t].concat(_toConsumableArray(o)), Vd), L([t].concat(_toConsumableArray(o)), function (e) {
                  return e.destroy();
                });
              });
            }(e, o.mothership, a), s.setup(e, y.popup.shared, p), vB(e, y.popup), HB(e, y.popup.shared.getSink, y.popup), function (e) {
              var _e$ui$registry$getAll3 = e.ui.registry.getAll(),
                t = _e$ui$registry$getAll3.sidebars;
              L(ae(t), function (o) {
                var n = t[o],
                  s = function s() {
                    return xe(A.from(e.queryCommandValue("ToggleSidebar")), o);
                  };
                e.ui.registry.addToggleButton(o, {
                  icon: n.icon,
                  tooltip: n.tooltip,
                  onAction: function onAction(t) {
                    e.execCommand("ToggleSidebar", !1, o), t.setActive(s());
                  },
                  onSetup: function onSetup(t) {
                    t.setActive(s());
                    var o = function o() {
                      return t.setActive(s());
                    };
                    return e.on("ToggleSidebar", o), function () {
                      e.off("ToggleSidebar", o);
                    };
                  }
                });
              });
            }(e), EA(e, v, y.popup.shared), cB(e, c, r.sink, {
              backstage: y.popup
            }), AF(e, r.sink);
            var b = {
              targetNode: e.getElement(),
              height: w(o.outerContainer)
            };
            return n.render(e, t, h, y.popup, b);
          }({
            popupUi: d,
            dialogUi: a,
            mainUi: o,
            uiMotherships: r.getUiMotherships()
          });
        }
      };
    },
    VF = x([os("lazySink"), us("dragBlockClass"), Os("getBounds", en), ys("useTabstopAt", E), ys("firstTabstop", 0), ys("eventOrder", {}), hu("modalBehaviours", [Pp]), Bi("onExecute"), Ii("onEscape")]),
    zF = {
      sketch: w
    },
    HF = x([ju({
      name: "draghandle",
      overrides: function overrides(e, t) {
        return {
          behaviours: kl([OF.config({
            mode: "mouse",
            getTarget: function getTarget(e) {
              return mi(e, '[role="dialog"]').getOr(e);
            },
            blockerClass: e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n" + JSON.stringify(t, null, 2)).message),
            getBounds: e.getDragBounds
          })])
        };
      }
    }), Uu({
      schema: [os("dom")],
      name: "title"
    }), Uu({
      factory: zF,
      schema: [os("dom")],
      name: "close"
    }), Uu({
      factory: zF,
      schema: [os("dom")],
      name: "body"
    }), ju({
      factory: zF,
      schema: [os("dom")],
      name: "footer"
    }), Wu({
      factory: {
        sketch: function sketch(e, t) {
          return _objectSpread(_objectSpread({}, e), {}, {
            dom: t.dom,
            components: t.components
          });
        }
      },
      schema: [ys("dom", {
        tag: "div",
        styles: {
          position: "fixed",
          left: "0px",
          top: "0px",
          right: "0px",
          bottom: "0px"
        }
      }), ys("components", [])],
      name: "blocker"
    })]),
    LF = bm({
      name: "ModalDialog",
      configFields: VF(),
      partFields: HF(),
      factory: function factory(e, t, o, n) {
        var s = Ql(),
          r = la("modal-events"),
          a = _objectSpread(_objectSpread({}, e.eventOrder), {}, _defineProperty({}, Sr(), [r].concat(e.eventOrder["alloy.system.attached"] || [])));
        return {
          uid: e.uid,
          dom: e.dom,
          components: t,
          apis: {
            show: function show(t) {
              s.set(t);
              var o = e.lazySink(t).getOrDie(),
                r = n.blocker(),
                a = o.getSystem().build(_objectSpread(_objectSpread({}, r), {}, {
                  components: r.components.concat([ai(t)]),
                  behaviours: kl([oh.config({}), Jp("dialog-blocker-events", [Yr(Xs(), function () {
                    OA.isBlocked(t) || Pp.focusIn(t);
                  })])])
                }));
              Ad(o, a), Pp.focusIn(t);
            },
            hide: function hide(e) {
              s.clear(), st(e.element).each(function (t) {
                e.getSystem().getByDom(t).each(function (e) {
                  Bd(e);
                });
              });
            },
            getBody: function getBody(t) {
              return nm(t, e, "body");
            },
            getFooter: function getFooter(t) {
              return om(t, e, "footer");
            },
            setIdle: function setIdle(e) {
              OA.unblock(e);
            },
            setBusy: function setBusy(e, t) {
              OA.block(e, t);
            }
          },
          eventOrder: a,
          domModification: {
            attributes: {
              role: "dialog",
              "aria-modal": "true"
            }
          },
          behaviours: bu(e.modalBehaviours, [Kp.config({}), Pp.config({
            mode: "cyclic",
            onEnter: e.onExecute,
            onEscape: e.onEscape,
            useTabstopAt: e.useTabstopAt,
            firstTabstop: e.firstTabstop
          }), OA.config({
            getRoot: s.get
          }), Jp(r, [Kr(function (t) {
            (function (e, t) {
              var o = _t(e, "id").fold(function () {
                var e = la("dialog-label");
                return kt(t, "id", e), e;
              }, w);
              kt(e, "aria-labelledby", o);
            })(t.element, nm(t, e, "title").element);
          })])])
        };
      },
      apis: {
        show: function show(e, t) {
          e.show(t);
        },
        hide: function hide(e, t) {
          e.hide(t);
        },
        getBody: function getBody(e, t) {
          return e.getBody(t);
        },
        getFooter: function getFooter(e, t) {
          return e.getFooter(t);
        },
        setBusy: function setBusy(e, t, o) {
          e.setBusy(t, o);
        },
        setIdle: function setIdle(e, t) {
          e.setIdle(t);
        }
      }
    }),
    PF = Dn([tv, ov].concat(Jv)),
    UF = Ln,
    WF = [Ev("button"), hv, ks("align", "end", ["start", "end"]), kv, Sv, hs("buttonType", ["primary", "secondary"])],
    jF = [].concat(WF, [sv]),
    GF = [as("type", ["submit", "cancel", "custom"])].concat(_toConsumableArray(jF)),
    $F = [as("type", ["menu"]), pv, fv, hv, ds("items", PF)].concat(WF),
    qF = [].concat(WF, [as("type", ["togglebutton"]), rs("tooltip"), hv, pv, Cs("active", !1)]),
    XF = Jn("type", {
      submit: GF,
      cancel: GF,
      custom: GF,
      menu: $F,
      togglebutton: qF
    }),
    YF = [tv, sv, as("level", ["info", "warn", "error", "success"]), av, ys("url", "")],
    KF = Dn(YF),
    JF = [tv, sv, Sv, Ev("button"), hv, wv, hs("buttonType", ["primary", "secondary", "toolbar"]), kv],
    ZF = Dn(JF),
    QF = [tv, ov],
    eI = QF.concat([bv]),
    tI = QF.concat([nv, Sv]),
    oI = Dn(tI),
    nI = Ln,
    sI = eI.concat([Cv("auto")]),
    rI = Dn(sI),
    aI = Rn([iv, sv, av]),
    iI = eI.concat([Ss("storageKey", "default")]),
    lI = Dn(iI),
    cI = Hn,
    dI = Dn(eI),
    uI = Hn,
    mI = QF.concat([Ss("tag", "textarea"), rs("scriptId"), rs("scriptUrl"), xs("settings", void 0, Wn)]),
    gI = QF.concat([Ss("tag", "textarea"), is("init")]),
    pI = Gn(function (e) {
      return qn("customeditor.old", Mn(gI), e).orThunk(function () {
        return qn("customeditor.new", Mn(mI), e);
      });
    }),
    hI = Hn,
    fI = Dn(eI),
    bI = Bn(On),
    vI = function vI(e) {
      return [tv, ss("columns"), e];
    },
    yI = [tv, rs("html"), ks("presets", "presentation", ["presentation", "document"])],
    xI = Dn(yI),
    wI = eI.concat([Cs("border", !1), Cs("sandboxed", !0), Cs("streamContent", !1), Cs("transparent", !0)]),
    SI = Dn(wI),
    kI = Hn,
    CI = Dn(QF.concat([ps("height")])),
    OI = Dn([rs("url"), gs("zoom"), gs("cachedWidth"), gs("cachedHeight")]),
    _I = eI.concat([ps("inputMode"), ps("placeholder"), Cs("maximized", !1), Sv]),
    TI = Dn(_I),
    EI = Hn,
    AI = function AI(e) {
      return [tv, nv, e, ks("align", "start", ["start", "center", "end"])];
    },
    MI = [sv, iv],
    DI = [sv, ds("items", Zn(0, function () {
      return BI;
    }))],
    BI = Fn([Dn(MI), Dn(DI)]),
    FI = eI.concat([ds("items", BI), Sv]),
    II = Dn(FI),
    RI = Hn,
    NI = eI.concat([cs("items", [sv, iv]), ws("size", 1), Sv]),
    VI = Dn(NI),
    zI = Hn,
    HI = eI.concat([Cs("constrain", !0), Sv]),
    LI = Dn(HI),
    PI = Dn([rs("width"), rs("height")]),
    UI = QF.concat([nv, ws("min", 0), ws("max", 0)]),
    WI = Dn(UI),
    jI = zn,
    GI = [tv, ds("header", Hn), ds("cells", Bn(Hn))],
    $I = Dn(GI),
    qI = eI.concat([ps("placeholder"), Cs("maximized", !1), Sv]),
    XI = Dn(qI),
    YI = Hn,
    KI = [as("type", ["directory", "leaf"]), rv, rs("id"), ms("menu", rA)],
    JI = Dn(KI),
    ZI = KI.concat([ds("children", Zn(0, function () {
      return jn("type", {
        directory: QI,
        leaf: JI
      });
    }))]),
    QI = Dn(ZI),
    eR = jn("type", {
      directory: QI,
      leaf: JI
    }),
    tR = [tv, ds("items", eR), fs("onLeafAction"), fs("onToggleExpand"), _s("defaultExpandedIds", [], Hn), ps("defaultSelectedId")],
    oR = Dn(tR),
    nR = eI.concat([ks("filetype", "file", ["image", "media", "file"]), Sv]),
    sR = Dn(nR),
    rR = Dn([iv, Ov]),
    aR = function aR(e) {
      return Qn("items", "items", {
        tag: "required",
        process: {}
      }, Bn(Gn(function (t) {
        return qn("Checking item of ".concat(e), iR, t).fold(function (e) {
          return sn.error(Kn(e));
        }, function (e) {
          return sn.value(e);
        });
      })));
    },
    iR = En(function () {
      return jn("type", {
        alertbanner: KF,
        bar: Dn((e = aR("bar"), [tv, e])),
        button: ZF,
        checkbox: oI,
        colorinput: lI,
        colorpicker: dI,
        dropzone: fI,
        grid: Dn(vI(aR("grid"))),
        iframe: SI,
        input: TI,
        listbox: II,
        selectbox: VI,
        sizeinput: LI,
        slider: WI,
        textarea: XI,
        urlinput: sR,
        customeditor: pI,
        htmlpanel: xI,
        imagepreview: CI,
        collection: rI,
        label: Dn(AI(aR("label"))),
        table: $I,
        tree: oR,
        panel: cR
      });
      var e;
    }),
    lR = [tv, ys("classes", []), ds("items", iR)],
    cR = Dn(lR),
    dR = [Ev("tab"), rv, ds("items", iR)],
    uR = [tv, cs("tabs", dR)],
    mR = Dn(uR),
    gR = jF,
    pR = XF,
    hR = Dn([rs("title"), ns("body", jn("type", {
      panel: cR,
      tabpanel: mR
    })), Ss("size", "normal"), _s("buttons", [], pR), ys("initialData", {}), Os("onAction", b), Os("onChange", b), Os("onSubmit", b), Os("onClose", b), Os("onCancel", b), Os("onTabChange", b)]),
    fR = Dn([as("type", ["cancel", "custom"])].concat(_toConsumableArray(gR))),
    bR = Dn([rs("title"), rs("url"), gs("height"), gs("width"), bs("buttons", fR), Os("onAction", b), Os("onCancel", b), Os("onClose", b), Os("onMessage", b)]),
    vR = function vR(e) {
      return a(e) ? [e].concat(X(fe(e), vR)) : l(e) ? X(e, vR) : [];
    },
    yR = function yR(e) {
      return r(e.type) && r(e.name);
    },
    xR = {
      checkbox: nI,
      colorinput: cI,
      colorpicker: uI,
      dropzone: bI,
      input: EI,
      iframe: kI,
      imagepreview: OI,
      selectbox: zI,
      sizeinput: PI,
      slider: jI,
      listbox: RI,
      size: PI,
      textarea: YI,
      urlinput: rR,
      customeditor: hI,
      collection: aI,
      togglemenuitem: UF
    },
    wR = function wR(e) {
      var t = function (e) {
          return U(vR(e), yR);
        }(e),
        o = X(t, function (e) {
          return function (e) {
            return A.from(xR[e.type]);
          }(e).fold(function () {
            return [];
          }, function (t) {
            return [ns(e.name, t)];
          });
        });
      return Dn(o);
    },
    SR = function SR(e) {
      var t;
      return {
        internalDialog: Xn(qn("dialog", hR, e)),
        dataValidator: wR(e),
        initialData: null !== (t = e.initialData) && void 0 !== t ? t : {}
      };
    },
    kR = {
      open: function open(e, t) {
        var o = SR(t);
        return e(o.internalDialog, o.initialData, o.dataValidator);
      },
      openUrl: function openUrl(e, t) {
        return e(Xn(qn("dialog", bR, t)));
      },
      redial: function redial(e) {
        return SR(e);
      }
    };
  var CR = Object.freeze({
      __proto__: null,
      events: function events(e, t) {
        var o = function o(_o56, n) {
          e.updateState.each(function (e) {
            var s = e(_o56, n);
            t.set(s);
          }), e.renderComponents.each(function (s) {
            var r = s(n, t.get());
            (e.reuseDom ? Wp : Up)(_o56, r);
          });
        };
        return Hr([Ur(dr(), function (t, n) {
          var s = n;
          if (!s.universal) {
            var _n46 = e.channel;
            R(s.channels, _n46) && o(t, s.data);
          }
        }), Kr(function (t, n) {
          e.initialData.each(function (e) {
            o(t, e);
          });
        })]);
      }
    }),
    OR = Object.freeze({
      __proto__: null,
      getState: function getState(e, t, o) {
        return o;
      }
    }),
    _R = [os("channel"), us("renderComponents"), us("updateState"), us("initialData"), Cs("reuseDom", !0)];
  var TR = Ol({
      fields: _R,
      name: "reflecting",
      active: CR,
      apis: OR,
      state: Object.freeze({
        __proto__: null,
        init: function init() {
          var e = Es(A.none());
          return {
            readState: function readState() {
              return e.get().getOr("none");
            },
            get: e.get,
            set: e.set,
            clear: function clear() {
              return e.set(A.none());
            }
          };
        }
      })
    }),
    ER = function ER(e) {
      var t = [],
        o = {};
      return le(e, function (e, n) {
        e.fold(function () {
          t.push(n);
        }, function (e) {
          o[n] = e;
        });
      }), t.length > 0 ? sn.error(t) : sn.value(o);
    },
    AR = function AR(e, t, o) {
      var n = jh(CC.sketch(function (n) {
        return {
          dom: {
            tag: "div",
            classes: ["tox-form"].concat(e.classes)
          },
          components: H(e.items, function (e) {
            return X_(n, e, t, o);
          })
        };
      }));
      return {
        dom: {
          tag: "div",
          classes: ["tox-dialog__body"]
        },
        components: [{
          dom: {
            tag: "div",
            classes: ["tox-dialog__body-content"]
          },
          components: [n.asSpec()]
        }],
        behaviours: kl([Pp.config({
          mode: "acyclic",
          useTabstopAt: C(XC)
        }), (s = n, wm.config({
          find: s.getOpt
        })), IC(n, {
          postprocess: function postprocess(e) {
            return ER(e).fold(function (e) {
              return console.error(e), {};
            }, w);
          }
        }), Jp("dialog-body-panel", [Ur(Xs(), function (e, t) {
          e.getSystem().broadcastOn([eO], {
            newFocus: A.some(t.event.target)
          });
        })])])
      };
      var s;
    },
    MR = fm({
      name: "TabButton",
      configFields: [ys("uid", void 0), os("value"), Qn("dom", "dom", xn(function () {
        return {
          attributes: {
            role: "tab",
            id: la("aria"),
            "aria-selected": "false"
          }
        };
      }), Nn()), us("action"), ys("domModification", {}), hu("tabButtonBehaviours", [oh, Pp, pu]), os("view")],
      factory: function factory(e, t) {
        return {
          uid: e.uid,
          dom: e.dom,
          components: e.components,
          events: mh(e.action),
          behaviours: bu(e.tabButtonBehaviours, [oh.config({}), Pp.config({
            mode: "execution",
            useSpace: !0,
            useEnter: !0
          }), pu.config({
            store: {
              mode: "memory",
              initialValue: e.value
            }
          })]),
          domModification: e.domModification
        };
      }
    }),
    DR = x([os("tabs"), os("dom"), ys("clickToDismiss", !1), hu("tabbarBehaviours", [Gm, Pp]), Ai(["tabClass", "selectedClass"])]),
    BR = Gu({
      factory: MR,
      name: "tabs",
      unit: "tab",
      overrides: function overrides(e) {
        var t = function t(e, _t58) {
            Gm.dehighlight(e, _t58), Ir(e, Mr(), {
              tabbar: e,
              button: _t58
            });
          },
          o = function o(e, t) {
            Gm.highlight(e, t), Ir(e, Ar(), {
              tabbar: e,
              button: t
            });
          };
        return {
          action: function action(n) {
            var s = n.getSystem().getByUid(e.uid).getOrDie(),
              r = Gm.isHighlighted(s, n);
            (r && e.clickToDismiss ? t : r ? b : o)(s, n);
          },
          domModification: {
            classes: [e.markers.tabClass]
          }
        };
      }
    }),
    FR = x([BR]),
    IR = bm({
      name: "Tabbar",
      configFields: DR(),
      partFields: FR(),
      factory: function factory(e, t, o, n) {
        return {
          uid: e.uid,
          dom: e.dom,
          components: t,
          "debug.sketcher": "Tabbar",
          domModification: {
            attributes: {
              role: "tablist"
            }
          },
          behaviours: bu(e.tabbarBehaviours, [Gm.config({
            highlightClass: e.markers.selectedClass,
            itemClass: e.markers.tabClass,
            onHighlight: function onHighlight(e, t) {
              kt(t.element, "aria-selected", "true");
            },
            onDehighlight: function onDehighlight(e, t) {
              kt(t.element, "aria-selected", "false");
            }
          }), Pp.config({
            mode: "flow",
            getInitial: function getInitial(e) {
              return Gm.getHighlighted(e).map(function (e) {
                return e.element;
              });
            },
            selector: "." + e.markers.tabClass,
            executeOnMove: !0
          })])
        };
      }
    }),
    RR = fm({
      name: "Tabview",
      configFields: [hu("tabviewBehaviours", [Kp])],
      factory: function factory(e, t) {
        return {
          uid: e.uid,
          dom: e.dom,
          behaviours: bu(e.tabviewBehaviours, [Kp.config({})]),
          domModification: {
            attributes: {
              role: "tabpanel"
            }
          }
        };
      }
    }),
    NR = x([ys("selectFirst", !0), Di("onChangeTab"), Di("onDismissTab"), ys("tabs", []), hu("tabSectionBehaviours", [])]),
    VR = Uu({
      factory: IR,
      schema: [os("dom"), ls("markers", [os("tabClass"), os("selectedClass")])],
      name: "tabbar",
      defaults: function defaults(e) {
        return {
          tabs: e.tabs
        };
      }
    }),
    zR = Uu({
      factory: RR,
      name: "tabview"
    }),
    HR = x([VR, zR]),
    LR = bm({
      name: "TabSection",
      configFields: NR(),
      partFields: HR(),
      factory: function factory(e, t, o, n) {
        var s = function s(t, o) {
          om(t, e, "tabbar").each(function (e) {
            o(e).each(Rr);
          });
        };
        return {
          uid: e.uid,
          dom: e.dom,
          components: t,
          behaviours: fu(e.tabSectionBehaviours),
          events: Hr(q([e.selectFirst ? [Kr(function (e, t) {
            s(e, Gm.getFirst);
          })] : [], [Ur(Ar(), function (t, o) {
            (function (t) {
              var o = pu.getValue(t);
              om(t, e, "tabview").each(function (n) {
                G(e.tabs, function (e) {
                  return e.value === o;
                }).each(function (o) {
                  var s = o.view();
                  _t(t.element, "id").each(function (e) {
                    kt(n.element, "aria-labelledby", e);
                  }), Kp.set(n, s), e.onChangeTab(n, t, s);
                });
              });
            })(o.event.button);
          }), Ur(Mr(), function (t, o) {
            var n = o.event.button;
            e.onDismissTab(t, n);
          })]])),
          apis: {
            getViewItems: function getViewItems(t) {
              return om(t, e, "tabview").map(function (e) {
                return Kp.contents(e);
              }).getOr([]);
            },
            showTab: function showTab(e, t) {
              s(e, function (e) {
                var o = Gm.getCandidates(e);
                return G(o, function (e) {
                  return pu.getValue(e) === t;
                }).filter(function (t) {
                  return !Gm.isHighlighted(e, t);
                });
              });
            }
          }
        };
      },
      apis: {
        getViewItems: function getViewItems(e, t) {
          return e.getViewItems(t);
        },
        showTab: function showTab(e, t, o) {
          e.showTab(t, o);
        }
      }
    }),
    PR = function PR(e, t) {
      Dt(e, "height", t + "px"), Dt(e, "flex-basis", t + "px");
    },
    UR = function UR(e, t, o) {
      mi(e, '[role="dialog"]').each(function (e) {
        pi(e, '[role="tablist"]').each(function (n) {
          o.get().map(function (o) {
            return Dt(t, "height", "0"), Dt(t, "flex-basis", "0"), Math.min(o, function (e, t, o) {
              var n = ot(e).dom,
                s = mi(e, ".tox-dialog-wrap").getOr(e);
              var r;
              r = "fixed" === It(s, "position") ? Math.max(n.clientHeight, window.innerHeight) : Math.max(n.offsetHeight, n.scrollHeight);
              var a = Wt(t),
                i = t.dom.offsetLeft >= o.dom.offsetLeft + Jt(o) ? Math.max(Wt(o), a) : a,
                l = parseInt(It(e, "margin-top"), 10) || 0,
                c = parseInt(It(e, "margin-bottom"), 10) || 0;
              return r - (Wt(e) + l + c - i);
            }(e, t, n));
          }).each(function (e) {
            PR(t, e);
          });
        });
      });
    },
    WR = function WR(e) {
      return pi(e, '[role="tabpanel"]');
    },
    jR = "send-data-to-section",
    GR = "send-data-to-view",
    $R = function $R(e, t, o) {
      var n = Es({}),
        s = function s(e) {
          var t = pu.getValue(e),
            o = ER(t).getOr({}),
            s = n.get(),
            r = fn(s, o);
          n.set(r);
        },
        r = function r(e) {
          var t = n.get();
          pu.setValue(e, t);
        },
        a = Es(null),
        i = H(e.tabs, function (e) {
          return {
            value: e.name,
            dom: {
              tag: "div",
              classes: ["tox-dialog__body-nav-item"]
            },
            components: [ti(o.shared.providers.translate(e.title))],
            view: function view() {
              return [CC.sketch(function (n) {
                return {
                  dom: {
                    tag: "div",
                    classes: ["tox-form"]
                  },
                  components: H(e.items, function (e) {
                    return X_(n, e, t, o);
                  }),
                  formBehaviours: kl([Pp.config({
                    mode: "acyclic",
                    useTabstopAt: C(XC)
                  }), Jp("TabView.form.events", [Kr(r), Jr(s)]), Al.config({
                    channels: Ds([{
                      key: jR,
                      value: {
                        onReceive: s
                      }
                    }, {
                      key: GR,
                      value: {
                        onReceive: r
                      }
                    }])
                  })])
                };
              })];
            }
          };
        }),
        l = function (e) {
          var t = Ql(),
            o = [Kr(function (o) {
              var n = o.element;
              WR(n).each(function (s) {
                Dt(s, "visibility", "hidden"), o.getSystem().getByDom(s).toOptional().each(function (o) {
                  var n = function (e, t, o) {
                      return H(e, function (n, s) {
                        Kp.set(o, e[s].view());
                        var r = t.dom.getBoundingClientRect();
                        return Kp.set(o, []), r.height;
                      });
                    }(e, s, o),
                    r = function (e) {
                      return oe(ee(e, function (e, t) {
                        return e > t ? -1 : e < t ? 1 : 0;
                      }));
                    }(n);
                  r.fold(t.clear, t.set);
                }), UR(n, s, t), Ht(s, "visibility"), function (e, t) {
                  oe(e).each(function (e) {
                    return LR.showTab(t, e.value);
                  });
                }(e, o), requestAnimationFrame(function () {
                  UR(n, s, t);
                });
              });
            }), Ur(wr(), function (e) {
              var o = e.element;
              WR(o).each(function (e) {
                UR(o, e, t);
              });
            }), Ur(kS, function (e, o) {
              var n = e.element;
              WR(n).each(function (e) {
                var o = Il(ht(e));
                Dt(e, "visibility", "hidden");
                var s = Nt(e, "height").map(function (e) {
                  return parseInt(e, 10);
                });
                Ht(e, "height"), Ht(e, "flex-basis");
                var r = e.dom.getBoundingClientRect().height;
                s.forall(function (e) {
                  return r > e;
                }) ? (t.set(r), UR(n, e, t)) : s.each(function (t) {
                  PR(e, t);
                }), Ht(e, "visibility"), o.each(Dl);
              });
            })];
          return {
            extraEvents: o,
            selectFirst: !1
          };
        }(i);
      return LR.sketch({
        dom: {
          tag: "div",
          classes: ["tox-dialog__body"]
        },
        onChangeTab: function onChangeTab(e, t, o) {
          var n = pu.getValue(t);
          Ir(e, SS, {
            name: n,
            oldName: a.get()
          }), a.set(n);
        },
        tabs: i,
        components: [LR.parts.tabbar({
          dom: {
            tag: "div",
            classes: ["tox-dialog__body-nav"]
          },
          components: [IR.parts.tabs({})],
          markers: {
            tabClass: "tox-tab",
            selectedClass: "tox-dialog__body-nav-item--active"
          },
          tabbarBehaviours: kl([cS.config({})])
        }), LR.parts.tabview({
          dom: {
            tag: "div",
            classes: ["tox-dialog__body-content"]
          }
        })],
        selectFirst: l.selectFirst,
        tabSectionBehaviours: kl([Jp("tabpanel", l.extraEvents), Pp.config({
          mode: "acyclic"
        }), wm.config({
          find: function find(e) {
            return oe(LR.getViewItems(e));
          }
        }), RC(A.none(), function (e) {
          return e.getSystem().broadcastOn([jR], {}), n.get();
        }, function (e, t) {
          n.set(t), e.getSystem().broadcastOn([GR], {});
        })])
      });
    },
    qR = function qR(e, t, o, n, s) {
      return {
        dom: {
          tag: "div",
          classes: ["tox-dialog__content-js"],
          attributes: _objectSpread(_objectSpread({}, o.map(function (e) {
            return {
              id: e
            };
          }).getOr({})), s ? {
            "aria-live": "polite"
          } : {})
        },
        components: [],
        behaviours: kl([BC(0), TR.config({
          channel: "".concat(JC, "-").concat(t),
          updateState: function updateState(e, t) {
            return A.some({
              isTabPanel: function isTabPanel() {
                return "tabpanel" === t.body.type;
              }
            });
          },
          renderComponents: function renderComponents(e) {
            var t = e.body;
            return "tabpanel" === t.type ? [$R(t, e.initialData, n)] : [AR(t, e.initialData, n)];
          },
          initialData: e
        })])
      };
    };
  function XR(e) {
    return XR = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (e) {
      return _typeof(e);
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : _typeof(e);
    }, XR(e);
  }
  function YR(e, t) {
    return YR = Object.setPrototypeOf || function (e, t) {
      return e.__proto__ = t, e;
    }, YR(e, t);
  }
  function KR(e, t, o) {
    return KR = function () {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
      } catch (e) {
        return !1;
      }
    }() ? Reflect.construct : function (e, t, o) {
      var n = [null];
      n.push.apply(n, t);
      var s = new (Function.bind.apply(e, n))();
      return o && YR(s, o.prototype), s;
    }, KR.apply(null, arguments);
  }
  function JR(e) {
    return function (e) {
      if (Array.isArray(e)) return ZR(e);
    }(e) || function (e) {
      if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"]) return Array.from(e);
    }(e) || function (e, t) {
      if (e) {
        if ("string" == typeof e) return ZR(e, t);
        var o = Object.prototype.toString.call(e).slice(8, -1);
        return "Object" === o && e.constructor && (o = e.constructor.name), "Map" === o || "Set" === o ? Array.from(e) : "Arguments" === o || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o) ? ZR(e, t) : void 0;
      }
    }(e) || function () {
      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }
  function ZR(e, t) {
    (null == t || t > e.length) && (t = e.length);
    for (var o = 0, n = new Array(t); o < t; o++) n[o] = e[o];
    return n;
  }
  var QR = Object.hasOwnProperty,
    eN = Object.setPrototypeOf,
    tN = Object.isFrozen,
    oN = Object.getPrototypeOf,
    nN = Object.getOwnPropertyDescriptor,
    sN = Object.freeze,
    rN = Object.seal,
    aN = Object.create,
    iN = "undefined" != typeof Reflect && Reflect,
    lN = iN.apply,
    cN = iN.construct;
  lN || (lN = function lN(e, t, o) {
    return e.apply(t, o);
  }), sN || (sN = function sN(e) {
    return e;
  }), rN || (rN = function rN(e) {
    return e;
  }), cN || (cN = function cN(e, t) {
    return KR(e, JR(t));
  });
  var dN,
    uN = wN(Array.prototype.forEach),
    mN = wN(Array.prototype.pop),
    gN = wN(Array.prototype.push),
    pN = wN(String.prototype.toLowerCase),
    hN = wN(String.prototype.match),
    fN = wN(String.prototype.replace),
    bN = wN(String.prototype.indexOf),
    vN = wN(String.prototype.trim),
    yN = wN(RegExp.prototype.test),
    xN = (dN = TypeError, function () {
      for (var e = arguments.length, t = new Array(e), o = 0; o < e; o++) t[o] = arguments[o];
      return cN(dN, t);
    });
  function wN(e) {
    return function (t) {
      for (var o = arguments.length, n = new Array(o > 1 ? o - 1 : 0), s = 1; s < o; s++) n[s - 1] = arguments[s];
      return lN(e, t, n);
    };
  }
  function SN(e, t) {
    eN && eN(e, null);
    for (var o = t.length; o--;) {
      var n = t[o];
      if ("string" == typeof n) {
        var s = pN(n);
        s !== n && (tN(t) || (t[o] = s), n = s);
      }
      e[n] = !0;
    }
    return e;
  }
  function kN(e) {
    var t,
      o = aN(null);
    for (t in e) lN(QR, e, [t]) && (o[t] = e[t]);
    return o;
  }
  function CN(e, t) {
    for (; null !== e;) {
      var o = nN(e, t);
      if (o) {
        if (o.get) return wN(o.get);
        if ("function" == typeof o.value) return wN(o.value);
      }
      e = oN(e);
    }
    return function (e) {
      return console.warn("fallback value for", e), null;
    };
  }
  var ON = sN(["a", "abbr", "acronym", "address", "area", "article", "aside", "audio", "b", "bdi", "bdo", "big", "blink", "blockquote", "body", "br", "button", "canvas", "caption", "center", "cite", "code", "col", "colgroup", "content", "data", "datalist", "dd", "decorator", "del", "details", "dfn", "dialog", "dir", "div", "dl", "dt", "element", "em", "fieldset", "figcaption", "figure", "font", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "head", "header", "hgroup", "hr", "html", "i", "img", "input", "ins", "kbd", "label", "legend", "li", "main", "map", "mark", "marquee", "menu", "menuitem", "meter", "nav", "nobr", "ol", "optgroup", "option", "output", "p", "picture", "pre", "progress", "q", "rp", "rt", "ruby", "s", "samp", "section", "select", "shadow", "small", "source", "spacer", "span", "strike", "strong", "style", "sub", "summary", "sup", "table", "tbody", "td", "template", "textarea", "tfoot", "th", "thead", "time", "tr", "track", "tt", "u", "ul", "var", "video", "wbr"]),
    _N = sN(["svg", "a", "altglyph", "altglyphdef", "altglyphitem", "animatecolor", "animatemotion", "animatetransform", "circle", "clippath", "defs", "desc", "ellipse", "filter", "font", "g", "glyph", "glyphref", "hkern", "image", "line", "lineargradient", "marker", "mask", "metadata", "mpath", "path", "pattern", "polygon", "polyline", "radialgradient", "rect", "stop", "style", "switch", "symbol", "text", "textpath", "title", "tref", "tspan", "view", "vkern"]),
    TN = sN(["feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feDistantLight", "feFlood", "feFuncA", "feFuncB", "feFuncG", "feFuncR", "feGaussianBlur", "feImage", "feMerge", "feMergeNode", "feMorphology", "feOffset", "fePointLight", "feSpecularLighting", "feSpotLight", "feTile", "feTurbulence"]),
    EN = sN(["animate", "color-profile", "cursor", "discard", "fedropshadow", "font-face", "font-face-format", "font-face-name", "font-face-src", "font-face-uri", "foreignobject", "hatch", "hatchpath", "mesh", "meshgradient", "meshpatch", "meshrow", "missing-glyph", "script", "set", "solidcolor", "unknown", "use"]),
    AN = sN(["math", "menclose", "merror", "mfenced", "mfrac", "mglyph", "mi", "mlabeledtr", "mmultiscripts", "mn", "mo", "mover", "mpadded", "mphantom", "mroot", "mrow", "ms", "mspace", "msqrt", "mstyle", "msub", "msup", "msubsup", "mtable", "mtd", "mtext", "mtr", "munder", "munderover"]),
    MN = sN(["maction", "maligngroup", "malignmark", "mlongdiv", "mscarries", "mscarry", "msgroup", "mstack", "msline", "msrow", "semantics", "annotation", "annotation-xml", "mprescripts", "none"]),
    DN = sN(["#text"]),
    BN = sN(["accept", "action", "align", "alt", "autocapitalize", "autocomplete", "autopictureinpicture", "autoplay", "background", "bgcolor", "border", "capture", "cellpadding", "cellspacing", "checked", "cite", "class", "clear", "color", "cols", "colspan", "controls", "controlslist", "coords", "crossorigin", "datetime", "decoding", "default", "dir", "disabled", "disablepictureinpicture", "disableremoteplayback", "download", "draggable", "enctype", "enterkeyhint", "face", "for", "headers", "height", "hidden", "high", "href", "hreflang", "id", "inputmode", "integrity", "ismap", "kind", "label", "lang", "list", "loading", "loop", "low", "max", "maxlength", "media", "method", "min", "minlength", "multiple", "muted", "name", "nonce", "noshade", "novalidate", "nowrap", "open", "optimum", "pattern", "placeholder", "playsinline", "poster", "preload", "pubdate", "radiogroup", "readonly", "rel", "required", "rev", "reversed", "role", "rows", "rowspan", "spellcheck", "scope", "selected", "shape", "size", "sizes", "span", "srclang", "start", "src", "srcset", "step", "style", "summary", "tabindex", "title", "translate", "type", "usemap", "valign", "value", "width", "xmlns", "slot"]),
    FN = sN(["accent-height", "accumulate", "additive", "alignment-baseline", "ascent", "attributename", "attributetype", "azimuth", "basefrequency", "baseline-shift", "begin", "bias", "by", "class", "clip", "clippathunits", "clip-path", "clip-rule", "color", "color-interpolation", "color-interpolation-filters", "color-profile", "color-rendering", "cx", "cy", "d", "dx", "dy", "diffuseconstant", "direction", "display", "divisor", "dur", "edgemode", "elevation", "end", "fill", "fill-opacity", "fill-rule", "filter", "filterunits", "flood-color", "flood-opacity", "font-family", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-variant", "font-weight", "fx", "fy", "g1", "g2", "glyph-name", "glyphref", "gradientunits", "gradienttransform", "height", "href", "id", "image-rendering", "in", "in2", "k", "k1", "k2", "k3", "k4", "kerning", "keypoints", "keysplines", "keytimes", "lang", "lengthadjust", "letter-spacing", "kernelmatrix", "kernelunitlength", "lighting-color", "local", "marker-end", "marker-mid", "marker-start", "markerheight", "markerunits", "markerwidth", "maskcontentunits", "maskunits", "max", "mask", "media", "method", "mode", "min", "name", "numoctaves", "offset", "operator", "opacity", "order", "orient", "orientation", "origin", "overflow", "paint-order", "path", "pathlength", "patterncontentunits", "patterntransform", "patternunits", "points", "preservealpha", "preserveaspectratio", "primitiveunits", "r", "rx", "ry", "radius", "refx", "refy", "repeatcount", "repeatdur", "restart", "result", "rotate", "scale", "seed", "shape-rendering", "specularconstant", "specularexponent", "spreadmethod", "startoffset", "stddeviation", "stitchtiles", "stop-color", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke", "stroke-width", "style", "surfacescale", "systemlanguage", "tabindex", "targetx", "targety", "transform", "transform-origin", "text-anchor", "text-decoration", "text-rendering", "textlength", "type", "u1", "u2", "unicode", "values", "viewbox", "visibility", "version", "vert-adv-y", "vert-origin-x", "vert-origin-y", "width", "word-spacing", "wrap", "writing-mode", "xchannelselector", "ychannelselector", "x", "x1", "x2", "xmlns", "y", "y1", "y2", "z", "zoomandpan"]),
    IN = sN(["accent", "accentunder", "align", "bevelled", "close", "columnsalign", "columnlines", "columnspan", "denomalign", "depth", "dir", "display", "displaystyle", "encoding", "fence", "frame", "height", "href", "id", "largeop", "length", "linethickness", "lspace", "lquote", "mathbackground", "mathcolor", "mathsize", "mathvariant", "maxsize", "minsize", "movablelimits", "notation", "numalign", "open", "rowalign", "rowlines", "rowspacing", "rowspan", "rspace", "rquote", "scriptlevel", "scriptminsize", "scriptsizemultiplier", "selection", "separator", "separators", "stretchy", "subscriptshift", "supscriptshift", "symmetric", "voffset", "width", "xmlns"]),
    RN = sN(["xlink:href", "xml:id", "xlink:title", "xml:space", "xmlns:xlink"]),
    NN = rN(/\{\{[\w\W]*|[\w\W]*\}\}/gm),
    VN = rN(/<%[\w\W]*|[\w\W]*%>/gm),
    zN = rN(/^data-[\-\w.\u00B7-\uFFFF]/),
    HN = rN(/^aria-[\-\w]+$/),
    LN = rN(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),
    PN = rN(/^(?:\w+script|data):/i),
    UN = rN(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),
    WN = rN(/^html$/i),
    jN = function jN() {
      return "undefined" == typeof window ? null : window;
    },
    GN = function e() {
      var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : jN(),
        o = function o(t) {
          return e(t);
        };
      if (o.version = "2.3.8", o.removed = [], !t || !t.document || 9 !== t.document.nodeType) return o.isSupported = !1, o;
      var n = t.document,
        s = t.document,
        r = t.DocumentFragment,
        a = t.HTMLTemplateElement,
        i = t.Node,
        l = t.Element,
        c = t.NodeFilter,
        d = t.NamedNodeMap,
        u = void 0 === d ? t.NamedNodeMap || t.MozNamedAttrMap : d,
        m = t.HTMLFormElement,
        g = t.DOMParser,
        p = t.trustedTypes,
        h = l.prototype,
        f = CN(h, "cloneNode"),
        b = CN(h, "nextSibling"),
        v = CN(h, "childNodes"),
        y = CN(h, "parentNode");
      if ("function" == typeof a) {
        var x = s.createElement("template");
        x.content && x.content.ownerDocument && (s = x.content.ownerDocument);
      }
      var w = function (e, t) {
          if ("object" !== XR(e) || "function" != typeof e.createPolicy) return null;
          var o = null,
            n = "data-tt-policy-suffix";
          t.currentScript && t.currentScript.hasAttribute(n) && (o = t.currentScript.getAttribute(n));
          var s = "dompurify" + (o ? "#" + o : "");
          try {
            return e.createPolicy(s, {
              createHTML: function createHTML(e) {
                return e;
              }
            });
          } catch (e) {
            return console.warn("TrustedTypes policy " + s + " could not be created."), null;
          }
        }(p, n),
        S = w ? w.createHTML("") : "",
        k = s,
        C = k.implementation,
        O = k.createNodeIterator,
        _ = k.createDocumentFragment,
        T = k.getElementsByTagName,
        E = n.importNode,
        A = {};
      try {
        A = kN(s).documentMode ? s.documentMode : {};
      } catch (e) {}
      var M = {};
      o.isSupported = "function" == typeof y && C && void 0 !== C.createHTMLDocument && 9 !== A;
      var D,
        B,
        F = NN,
        I = VN,
        R = zN,
        N = HN,
        V = PN,
        z = UN,
        H = LN,
        L = null,
        P = SN({}, [].concat(JR(ON), JR(_N), JR(TN), JR(AN), JR(DN))),
        U = null,
        W = SN({}, [].concat(JR(BN), JR(FN), JR(IN), JR(RN))),
        j = Object.seal(Object.create(null, {
          tagNameCheck: {
            writable: !0,
            configurable: !1,
            enumerable: !0,
            value: null
          },
          attributeNameCheck: {
            writable: !0,
            configurable: !1,
            enumerable: !0,
            value: null
          },
          allowCustomizedBuiltInElements: {
            writable: !0,
            configurable: !1,
            enumerable: !0,
            value: !1
          }
        })),
        G = null,
        $ = null,
        q = !0,
        X = !0,
        Y = !1,
        K = !1,
        J = !1,
        Z = !1,
        Q = !1,
        ee = !1,
        te = !1,
        oe = !1,
        ne = !0,
        se = !0,
        re = !1,
        ae = {},
        ie = null,
        le = SN({}, ["annotation-xml", "audio", "colgroup", "desc", "foreignobject", "head", "iframe", "math", "mi", "mn", "mo", "ms", "mtext", "noembed", "noframes", "noscript", "plaintext", "script", "style", "svg", "template", "thead", "title", "video", "xmp"]),
        ce = null,
        de = SN({}, ["audio", "video", "img", "source", "image", "track"]),
        ue = null,
        me = SN({}, ["alt", "class", "for", "id", "label", "name", "pattern", "placeholder", "role", "summary", "title", "value", "style", "xmlns"]),
        ge = "http://www.w3.org/1998/Math/MathML",
        pe = "http://www.w3.org/2000/svg",
        he = "http://www.w3.org/1999/xhtml",
        fe = he,
        be = !1,
        ve = ["application/xhtml+xml", "text/html"],
        ye = null,
        xe = s.createElement("form"),
        we = function we(e) {
          return e instanceof RegExp || e instanceof Function;
        },
        Se = function Se(e) {
          ye && ye === e || (e && "object" === XR(e) || (e = {}), e = kN(e), L = "ALLOWED_TAGS" in e ? SN({}, e.ALLOWED_TAGS) : P, U = "ALLOWED_ATTR" in e ? SN({}, e.ALLOWED_ATTR) : W, ue = "ADD_URI_SAFE_ATTR" in e ? SN(kN(me), e.ADD_URI_SAFE_ATTR) : me, ce = "ADD_DATA_URI_TAGS" in e ? SN(kN(de), e.ADD_DATA_URI_TAGS) : de, ie = "FORBID_CONTENTS" in e ? SN({}, e.FORBID_CONTENTS) : le, G = "FORBID_TAGS" in e ? SN({}, e.FORBID_TAGS) : {}, $ = "FORBID_ATTR" in e ? SN({}, e.FORBID_ATTR) : {}, ae = "USE_PROFILES" in e && e.USE_PROFILES, q = !1 !== e.ALLOW_ARIA_ATTR, X = !1 !== e.ALLOW_DATA_ATTR, Y = e.ALLOW_UNKNOWN_PROTOCOLS || !1, K = e.SAFE_FOR_TEMPLATES || !1, J = e.WHOLE_DOCUMENT || !1, ee = e.RETURN_DOM || !1, te = e.RETURN_DOM_FRAGMENT || !1, oe = e.RETURN_TRUSTED_TYPE || !1, Q = e.FORCE_BODY || !1, ne = !1 !== e.SANITIZE_DOM, se = !1 !== e.KEEP_CONTENT, re = e.IN_PLACE || !1, H = e.ALLOWED_URI_REGEXP || H, fe = e.NAMESPACE || he, e.CUSTOM_ELEMENT_HANDLING && we(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck) && (j.tagNameCheck = e.CUSTOM_ELEMENT_HANDLING.tagNameCheck), e.CUSTOM_ELEMENT_HANDLING && we(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck) && (j.attributeNameCheck = e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck), e.CUSTOM_ELEMENT_HANDLING && "boolean" == typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (j.allowCustomizedBuiltInElements = e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements), D = D = -1 === ve.indexOf(e.PARSER_MEDIA_TYPE) ? "text/html" : e.PARSER_MEDIA_TYPE, B = "application/xhtml+xml" === D ? function (e) {
            return e;
          } : pN, K && (X = !1), te && (ee = !0), ae && (L = SN({}, JR(DN)), U = [], !0 === ae.html && (SN(L, ON), SN(U, BN)), !0 === ae.svg && (SN(L, _N), SN(U, FN), SN(U, RN)), !0 === ae.svgFilters && (SN(L, TN), SN(U, FN), SN(U, RN)), !0 === ae.mathMl && (SN(L, AN), SN(U, IN), SN(U, RN))), e.ADD_TAGS && (L === P && (L = kN(L)), SN(L, e.ADD_TAGS)), e.ADD_ATTR && (U === W && (U = kN(U)), SN(U, e.ADD_ATTR)), e.ADD_URI_SAFE_ATTR && SN(ue, e.ADD_URI_SAFE_ATTR), e.FORBID_CONTENTS && (ie === le && (ie = kN(ie)), SN(ie, e.FORBID_CONTENTS)), se && (L["#text"] = !0), J && SN(L, ["html", "head", "body"]), L.table && (SN(L, ["tbody"]), delete G.tbody), sN && sN(e), ye = e);
        },
        ke = SN({}, ["mi", "mo", "mn", "ms", "mtext"]),
        Ce = SN({}, ["foreignobject", "desc", "title", "annotation-xml"]),
        Oe = SN({}, ["title", "style", "font", "a", "script"]),
        _e = SN({}, _N);
      SN(_e, TN), SN(_e, EN);
      var Te = SN({}, AN);
      SN(Te, MN);
      var Ee = function Ee(e) {
          gN(o.removed, {
            element: e
          });
          try {
            e.parentNode.removeChild(e);
          } catch (t) {
            try {
              e.outerHTML = S;
            } catch (t) {
              e.remove();
            }
          }
        },
        Ae = function Ae(e, t) {
          try {
            gN(o.removed, {
              attribute: t.getAttributeNode(e),
              from: t
            });
          } catch (e) {
            gN(o.removed, {
              attribute: null,
              from: t
            });
          }
          if (t.removeAttribute(e), "is" === e && !U[e]) if (ee || te) try {
            Ee(t);
          } catch (e) {} else try {
            t.setAttribute(e, "");
          } catch (e) {}
        },
        Me = function Me(e) {
          var t, o;
          if (Q) e = "<remove></remove>" + e;else {
            var n = hN(e, /^[\r\n\t ]+/);
            o = n && n[0];
          }
          "application/xhtml+xml" === D && (e = '<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>' + e + "</body></html>");
          var r = w ? w.createHTML(e) : e;
          if (fe === he) try {
            t = new g().parseFromString(r, D);
          } catch (e) {}
          if (!t || !t.documentElement) {
            t = C.createDocument(fe, "template", null);
            try {
              t.documentElement.innerHTML = be ? "" : r;
            } catch (e) {}
          }
          var a = t.body || t.documentElement;
          return e && o && a.insertBefore(s.createTextNode(o), a.childNodes[0] || null), fe === he ? T.call(t, J ? "html" : "body")[0] : J ? t.documentElement : a;
        },
        De = function De(e) {
          return O.call(e.ownerDocument || e, e, c.SHOW_ELEMENT | c.SHOW_COMMENT | c.SHOW_TEXT, null, !1);
        },
        Be = function Be(e) {
          return "object" === XR(i) ? e instanceof i : e && "object" === XR(e) && "number" == typeof e.nodeType && "string" == typeof e.nodeName;
        },
        Fe = function Fe(e, t, n) {
          M[e] && uN(M[e], function (e) {
            e.call(o, t, n, ye);
          });
        },
        Ie = function Ie(e) {
          var t, n;
          if (Fe("beforeSanitizeElements", e, null), (n = e) instanceof m && ("string" != typeof n.nodeName || "string" != typeof n.textContent || "function" != typeof n.removeChild || !(n.attributes instanceof u) || "function" != typeof n.removeAttribute || "function" != typeof n.setAttribute || "string" != typeof n.namespaceURI || "function" != typeof n.insertBefore)) return Ee(e), !0;
          if (yN(/[\u0080-\uFFFF]/, e.nodeName)) return Ee(e), !0;
          var s = B(e.nodeName);
          if (Fe("uponSanitizeElement", e, {
            tagName: s,
            allowedTags: L
          }), e.hasChildNodes() && !Be(e.firstElementChild) && (!Be(e.content) || !Be(e.content.firstElementChild)) && yN(/<[/\w]/g, e.innerHTML) && yN(/<[/\w]/g, e.textContent)) return Ee(e), !0;
          if ("select" === s && yN(/<template/i, e.innerHTML)) return Ee(e), !0;
          if (!L[s] || G[s]) {
            if (!G[s] && Ne(s)) {
              if (j.tagNameCheck instanceof RegExp && yN(j.tagNameCheck, s)) return !1;
              if (j.tagNameCheck instanceof Function && j.tagNameCheck(s)) return !1;
            }
            if (se && !ie[s]) {
              var r = y(e) || e.parentNode,
                a = v(e) || e.childNodes;
              if (a && r) for (var i = a.length - 1; i >= 0; --i) r.insertBefore(f(a[i], !0), b(e));
            }
            return Ee(e), !0;
          }
          return e instanceof l && !function (e) {
            var t = y(e);
            t && t.tagName || (t = {
              namespaceURI: he,
              tagName: "template"
            });
            var o = pN(e.tagName),
              n = pN(t.tagName);
            return e.namespaceURI === pe ? t.namespaceURI === he ? "svg" === o : t.namespaceURI === ge ? "svg" === o && ("annotation-xml" === n || ke[n]) : Boolean(_e[o]) : e.namespaceURI === ge ? t.namespaceURI === he ? "math" === o : t.namespaceURI === pe ? "math" === o && Ce[n] : Boolean(Te[o]) : e.namespaceURI === he && !(t.namespaceURI === pe && !Ce[n]) && !(t.namespaceURI === ge && !ke[n]) && !Te[o] && (Oe[o] || !_e[o]);
          }(e) ? (Ee(e), !0) : "noscript" !== s && "noembed" !== s || !yN(/<\/no(script|embed)/i, e.innerHTML) ? (K && 3 === e.nodeType && (t = e.textContent, t = fN(t, F, " "), t = fN(t, I, " "), e.textContent !== t && (gN(o.removed, {
            element: e.cloneNode()
          }), e.textContent = t)), Fe("afterSanitizeElements", e, null), !1) : (Ee(e), !0);
        },
        Re = function Re(e, t, o) {
          if (ne && ("id" === t || "name" === t) && (o in s || o in xe)) return !1;
          if (X && !$[t] && yN(R, t)) ;else if (q && yN(N, t)) ;else if (!U[t] || $[t]) {
            if (!(Ne(e) && (j.tagNameCheck instanceof RegExp && yN(j.tagNameCheck, e) || j.tagNameCheck instanceof Function && j.tagNameCheck(e)) && (j.attributeNameCheck instanceof RegExp && yN(j.attributeNameCheck, t) || j.attributeNameCheck instanceof Function && j.attributeNameCheck(t)) || "is" === t && j.allowCustomizedBuiltInElements && (j.tagNameCheck instanceof RegExp && yN(j.tagNameCheck, o) || j.tagNameCheck instanceof Function && j.tagNameCheck(o)))) return !1;
          } else if (ue[t]) ;else if (yN(H, fN(o, z, ""))) ;else if ("src" !== t && "xlink:href" !== t && "href" !== t || "script" === e || 0 !== bN(o, "data:") || !ce[e]) if (Y && !yN(V, fN(o, z, ""))) ;else if (o) return !1;
          return !0;
        },
        Ne = function Ne(e) {
          return e.indexOf("-") > 0;
        },
        Ve = function Ve(e) {
          var t, o, n, s;
          Fe("beforeSanitizeAttributes", e, null);
          var r = e.attributes;
          if (r) {
            var a = {
              attrName: "",
              attrValue: "",
              keepAttr: !0,
              allowedAttributes: U
            };
            for (s = r.length; s--;) {
              var i = t = r[s],
                l = i.name,
                c = i.namespaceURI;
              o = "value" === l ? t.value : vN(t.value), n = B(l);
              var d = o;
              if (a.attrName = n, a.attrValue = o, a.keepAttr = !0, a.forceKeepAttr = void 0, Fe("uponSanitizeAttribute", e, a), o = a.attrValue, !a.forceKeepAttr) if (a.keepAttr) {
                if (yN(/\/>/i, o)) Ae(l, e);else {
                  K && (o = fN(o, F, " "), o = fN(o, I, " "));
                  var u = B(e.nodeName);
                  if (Re(u, n, o)) {
                    if (o !== d) try {
                      c ? e.setAttributeNS(c, l, o) : e.setAttribute(l, o);
                    } catch (t) {
                      Ae(l, e);
                    }
                  } else Ae(l, e);
                }
              } else Ae(l, e);
            }
            Fe("afterSanitizeAttributes", e, null);
          }
        },
        ze = function e(t) {
          var o,
            n = De(t);
          for (Fe("beforeSanitizeShadowDOM", t, null); o = n.nextNode();) Fe("uponSanitizeShadowNode", o, null), Ie(o) || (o.content instanceof r && e(o.content), Ve(o));
          Fe("afterSanitizeShadowDOM", t, null);
        };
      return o.sanitize = function (e, s) {
        var a, l, c, d, u;
        if ((be = !e) && (e = "\x3c!--\x3e"), "string" != typeof e && !Be(e)) {
          if ("function" != typeof e.toString) throw xN("toString is not a function");
          if ("string" != typeof (e = e.toString())) throw xN("dirty is not a string, aborting");
        }
        if (!o.isSupported) {
          if ("object" === XR(t.toStaticHTML) || "function" == typeof t.toStaticHTML) {
            if ("string" == typeof e) return t.toStaticHTML(e);
            if (Be(e)) return t.toStaticHTML(e.outerHTML);
          }
          return e;
        }
        if (Z || Se(s), o.removed = [], "string" == typeof e && (re = !1), re) {
          if (e.nodeName) {
            var m = B(e.nodeName);
            if (!L[m] || G[m]) throw xN("root node is forbidden and cannot be sanitized in-place");
          }
        } else if (e instanceof i) 1 === (l = (a = Me("\x3c!----\x3e")).ownerDocument.importNode(e, !0)).nodeType && "BODY" === l.nodeName || "HTML" === l.nodeName ? a = l : a.appendChild(l);else {
          if (!ee && !K && !J && -1 === e.indexOf("<")) return w && oe ? w.createHTML(e) : e;
          if (!(a = Me(e))) return ee ? null : oe ? S : "";
        }
        a && Q && Ee(a.firstChild);
        for (var g = De(re ? e : a); c = g.nextNode();) 3 === c.nodeType && c === d || Ie(c) || (c.content instanceof r && ze(c.content), Ve(c), d = c);
        if (d = null, re) return e;
        if (ee) {
          if (te) for (u = _.call(a.ownerDocument); a.firstChild;) u.appendChild(a.firstChild);else u = a;
          return U.shadowroot && (u = E.call(n, u, !0)), u;
        }
        var p = J ? a.outerHTML : a.innerHTML;
        return J && L["!doctype"] && a.ownerDocument && a.ownerDocument.doctype && a.ownerDocument.doctype.name && yN(WN, a.ownerDocument.doctype.name) && (p = "<!DOCTYPE " + a.ownerDocument.doctype.name + ">\n" + p), K && (p = fN(p, F, " "), p = fN(p, I, " ")), w && oe ? w.createHTML(p) : p;
      }, o.setConfig = function (e) {
        Se(e), Z = !0;
      }, o.clearConfig = function () {
        ye = null, Z = !1;
      }, o.isValidAttribute = function (e, t, o) {
        ye || Se({});
        var n = B(e),
          s = B(t);
        return Re(n, s, o);
      }, o.addHook = function (e, t) {
        "function" == typeof t && (M[e] = M[e] || [], gN(M[e], t));
      }, o.removeHook = function (e) {
        if (M[e]) return mN(M[e]);
      }, o.removeHooks = function (e) {
        M[e] && (M[e] = []);
      }, o.removeAllHooks = function () {
        M = {};
      }, o;
    }();
  var $N = function $N(e) {
      return GN().sanitize(e);
    },
    qN = lf.deviceType.isTouch(),
    XN = function XN(e, t) {
      return {
        dom: {
          tag: "div",
          styles: {
            display: "none"
          },
          classes: ["tox-dialog__header"]
        },
        components: [e, t]
      };
    },
    YN = function YN(e, t) {
      return LF.parts.close(Wh.sketch({
        dom: {
          tag: "button",
          classes: ["tox-button", "tox-button--icon", "tox-button--naked"],
          attributes: {
            type: "button",
            "aria-label": t.translate("Close")
          }
        },
        action: e,
        buttonBehaviours: kl([cS.config({})])
      }));
    },
    KN = function KN() {
      return LF.parts.title({
        dom: {
          tag: "div",
          classes: ["tox-dialog__title"],
          innerHtml: "",
          styles: {
            display: "none"
          }
        }
      });
    },
    JN = function JN(e, t) {
      return LF.parts.body({
        dom: {
          tag: "div",
          classes: ["tox-dialog__body"]
        },
        components: [{
          dom: {
            tag: "div",
            classes: ["tox-dialog__body-content"]
          },
          components: [{
            dom: _A("<p>".concat($N(t.translate(e)), "</p>"))
          }]
        }]
      });
    },
    ZN = function ZN(e) {
      return LF.parts.footer({
        dom: {
          tag: "div",
          classes: ["tox-dialog__footer"]
        },
        components: e
      });
    },
    QN = function QN(e, t) {
      return [oS.sketch({
        dom: {
          tag: "div",
          classes: ["tox-dialog__footer-start"]
        },
        components: e
      }), oS.sketch({
        dom: {
          tag: "div",
          classes: ["tox-dialog__footer-end"]
        },
        components: t
      })];
    },
    eV = function eV(e) {
      var _objectSpread9;
      var t = "tox-dialog",
        o = t + "-wrap",
        n = o + "__backdrop",
        s = t + "__disable-scroll";
      return LF.sketch({
        lazySink: e.lazySink,
        onEscape: function onEscape(t) {
          return e.onEscape(t), A.some(!0);
        },
        useTabstopAt: function useTabstopAt(e) {
          return !XC(e);
        },
        firstTabstop: e.firstTabstop,
        dom: {
          tag: "div",
          classes: [t].concat(e.extraClasses),
          styles: _objectSpread({
            position: "relative"
          }, e.extraStyles)
        },
        components: [e.header, e.body].concat(_toConsumableArray(e.footer.toArray())),
        parts: {
          blocker: {
            dom: _A("<div class=\"".concat(o, "\"></div>")),
            components: [{
              dom: {
                tag: "div",
                classes: qN ? [n, n + "--opaque"] : [n]
              }
            }]
          }
        },
        dragBlockClass: o,
        modalBehaviours: kl([oh.config({}), Jp("dialog-events", e.dialogEvents.concat([Yr(Xs(), function (e, t) {
          OA.isBlocked(e) || Pp.focusIn(e);
        }), Ur(_r(), function (e, t) {
          e.getSystem().broadcastOn([eO], {
            newFocus: t.event.newFocus
          });
        })])), Jp("scroll-lock", [Kr(function () {
          La(xt(), s);
        }), Jr(function () {
          Pa(xt(), s);
        })])].concat(_toConsumableArray(e.extraBehaviours))),
        eventOrder: _objectSpread((_objectSpread9 = {}, _defineProperty(_objectSpread9, ur(), ["dialog-events"]), _defineProperty(_objectSpread9, Sr(), ["scroll-lock", "dialog-events", "alloy.base.behaviour"]), _defineProperty(_objectSpread9, kr(), ["alloy.base.behaviour", "dialog-events", "scroll-lock"]), _objectSpread9), e.eventOrder)
      });
    },
    tV = function tV(e) {
      return Wh.sketch({
        dom: {
          tag: "button",
          classes: ["tox-button", "tox-button--icon", "tox-button--naked"],
          attributes: {
            type: "button",
            "aria-label": e.translate("Close"),
            title: e.translate("Close")
          }
        },
        buttonBehaviours: kl([cS.config({})]),
        components: [ef("close", {
          tag: "span",
          classes: ["tox-icon"]
        }, e.icons)],
        action: function action(e) {
          Fr(e, bS);
        }
      });
    },
    oV = function oV(e, t, o, n) {
      return {
        dom: {
          tag: "div",
          classes: ["tox-dialog__title"],
          attributes: _objectSpread({}, o.map(function (e) {
            return {
              id: e
            };
          }).getOr({}))
        },
        components: [],
        behaviours: kl([TR.config({
          channel: "".concat(KC, "-").concat(t),
          initialData: e,
          renderComponents: function renderComponents(e) {
            return [ti(n.translate(e.title))];
          }
        })])
      };
    },
    nV = function nV() {
      return {
        dom: _A('<div class="tox-dialog__draghandle"></div>')
      };
    },
    sV = function sV(e, t, o) {
      return function (e, t, o) {
        var n = LF.parts.title(oV(e, t, A.none(), o)),
          s = LF.parts.draghandle(nV()),
          r = LF.parts.close(tV(o)),
          a = [n].concat(e.draggable ? [s] : []).concat([r]);
        return oS.sketch({
          dom: _A('<div class="tox-dialog__header"></div>'),
          components: a
        });
      }({
        title: o.shared.providers.translate(e),
        draggable: o.dialog.isDraggableModal()
      }, t, o.shared.providers);
    },
    rV = function rV(e, t, o, n) {
      return {
        dom: {
          tag: "div",
          classes: ["tox-dialog__busy-spinner"],
          attributes: {
            "aria-label": o.translate(e)
          },
          styles: {
            left: "0px",
            right: "0px",
            bottom: "0px",
            top: "".concat(n.getOr(0), "px"),
            position: "absolute"
          }
        },
        behaviours: t,
        components: [{
          dom: _A('<div class="tox-spinner"><div></div><div></div><div></div></div>')
        }]
      };
    },
    aV = function aV(e, t, o) {
      return {
        onClose: function onClose() {
          return o.closeWindow();
        },
        onBlock: function onBlock(o) {
          var n = pi(e().element, ".tox-dialog__header").map(function (e) {
            return Wt(e);
          });
          LF.setBusy(e(), function (e, s) {
            return rV(o.message, s, t, n);
          });
        },
        onUnblock: function onUnblock() {
          LF.setIdle(e());
        }
      };
    },
    iV = function iV(e, t, o, n) {
      var _eventOrder9;
      return ri(eV(_objectSpread(_objectSpread({}, e), {}, {
        firstTabstop: 1,
        lazySink: n.shared.getSink,
        extraBehaviours: [TR.config({
          channel: "".concat(YC, "-").concat(e.id),
          updateState: function updateState(e, t) {
            return A.some(t);
          },
          initialData: t
        }), VC({})].concat(_toConsumableArray(e.extraBehaviours)),
        onEscape: function onEscape(e) {
          Fr(e, bS);
        },
        dialogEvents: o,
        eventOrder: (_eventOrder9 = {}, _defineProperty(_eventOrder9, dr(), [TR.name(), Al.name()]), _defineProperty(_eventOrder9, Sr(), ["scroll-lock", TR.name(), "messages", "dialog-events", "alloy.base.behaviour"]), _defineProperty(_eventOrder9, kr(), ["alloy.base.behaviour", "dialog-events", "messages", TR.name(), "scroll-lock"]), _eventOrder9)
      })));
    },
    lV = function lV(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      return H(e, function (e) {
        return "menu" === e.type ? function (e) {
          var o = H(e.items, function (e) {
            var o = be(t, e.name).getOr(Es(!1));
            return _objectSpread(_objectSpread({}, e), {}, {
              storage: o
            });
          });
          return _objectSpread(_objectSpread({}, e), {}, {
            items: o
          });
        }(e) : e;
      });
    },
    cV = function cV(e) {
      return j(e, function (e, t) {
        return "menu" === t.type ? j(t.items, function (e, t) {
          return e[t.name] = t.storage, e;
        }, e) : e;
      }, {});
    },
    dV = function dV(e, t) {
      return [$r(Xs(), qC), e(fS, function (e, o, n, s) {
        Il(ht(s.element)).fold(b, Bl), t.onClose(), o.onClose();
      }), e(bS, function (e, t, o, n) {
        t.onCancel(e), Fr(n, fS);
      }), Ur(wS, function (e, o) {
        return t.onUnblock();
      }), Ur(xS, function (e, o) {
        return t.onBlock(o.event);
      })];
    },
    uV = function uV(e, t, o) {
      var n = function n(t, o) {
          return Ur(t, function (t, n) {
            s(t, function (s, r) {
              o(e(), s, n.event, t);
            });
          });
        },
        s = function s(e, t) {
          TR.getState(e).get().each(function (o) {
            t(o.internalDialog, e);
          });
        };
      return [].concat(_toConsumableArray(dV(n, t)), [n(yS, function (e, t) {
        return t.onSubmit(e);
      }), n(hS, function (e, t, o) {
        t.onChange(e, {
          name: o.name
        });
      }), n(vS, function (e, t, n, s) {
        var r = function r() {
            return s.getSystem().isConnected() ? Pp.focusIn(s) : void 0;
          },
          a = function a(e) {
            return Tt(e, "disabled") || _t(e, "aria-disabled").exists(function (e) {
              return "true" === e;
            });
          },
          i = ht(s.element),
          l = Il(i);
        t.onAction(e, {
          name: n.name,
          value: n.value
        }), Il(i).fold(r, function (e) {
          a(e) || l.exists(function (t) {
            return Qe(e, t) && a(t);
          }) ? r() : o().toOptional().filter(function (t) {
            return !Qe(t.element, e);
          }).each(r);
        });
      }), n(SS, function (e, t, o) {
        t.onTabChange(e, {
          newTabName: o.name,
          oldTabName: o.oldName
        });
      }), Jr(function (t) {
        var o = e();
        pu.setValue(t, o.getData());
      })]);
    },
    mV = function mV(e, t) {
      var o = t.map(function (e) {
          return e.footerButtons;
        }).getOr([]),
        n = P(o, function (e) {
          return "start" === e.align;
        }),
        s = function s(e, t) {
          return oS.sketch({
            dom: {
              tag: "div",
              classes: ["tox-dialog__footer-".concat(e)]
            },
            components: H(t, function (e) {
              return e.memento.asSpec();
            })
          });
        };
      return [s("start", n.pass), s("end", n.fail)];
    },
    gV = function gV(e, t, o) {
      return {
        dom: _A('<div class="tox-dialog__footer"></div>'),
        components: [],
        behaviours: kl([TR.config({
          channel: "".concat(ZC, "-").concat(t),
          initialData: e,
          updateState: function updateState(e, t) {
            var n = H(t.buttons, function (e) {
              var t = jh(function (e, t) {
                return B_(e, e.type, t);
              }(e, o));
              return {
                name: e.name,
                align: e.align,
                memento: t
              };
            });
            return A.some({
              lookupByName: function lookupByName(t) {
                return function (e, t, o) {
                  return G(t, function (e) {
                    return e.name === o;
                  }).bind(function (t) {
                    return t.memento.getOpt(e);
                  });
                }(e, n, t);
              },
              footerButtons: n
            });
          },
          renderComponents: mV
        })])
      };
    },
    pV = function pV(e, t, o) {
      return LF.parts.footer(gV(e, t, o));
    },
    hV = function hV(e, t) {
      if (e.getRoot().getSystem().isConnected()) {
        var _o57 = wm.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());
        return CC.getField(_o57, t).orThunk(function () {
          var o = e.getFooter().bind(function (e) {
            return TR.getState(e).get();
          });
          return o.bind(function (e) {
            return e.lookupByName(t);
          });
        });
      }
      return A.none();
    },
    fV = function fV(e, t, o) {
      var n = function n(t) {
          var o = e.getRoot();
          o.getSystem().isConnected() && t(o);
        },
        s = {
          getData: function getData() {
            var t = e.getRoot(),
              n = t.getSystem().isConnected() ? e.getFormWrapper() : t;
            return _objectSpread(_objectSpread({}, pu.getValue(n)), ce(o, function (e) {
              return e.get();
            }));
          },
          setData: function setData(t) {
            n(function (n) {
              var r = s.getData(),
                a = fn(r, t),
                i = function (e, t) {
                  var o = e.getRoot();
                  return TR.getState(o).get().map(function (e) {
                    return Xn(qn("data", e.dataValidator, t));
                  }).getOr(t);
                }(e, a),
                l = e.getFormWrapper();
              pu.setValue(l, i), le(o, function (e, t) {
                ve(a, t) && e.set(a[t]);
              });
            });
          },
          setEnabled: function setEnabled(t, o) {
            hV(e, t).each(o ? Rm.enable : Rm.disable);
          },
          focus: function focus(t) {
            hV(e, t).each(oh.focus);
          },
          block: function block(e) {
            if (!r(e)) throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");
            n(function (t) {
              Ir(t, xS, {
                message: e
              });
            });
          },
          unblock: function unblock() {
            n(function (e) {
              Fr(e, wS);
            });
          },
          showTab: function showTab(t) {
            n(function (o) {
              var n = e.getBody();
              TR.getState(n).get().exists(function (e) {
                return e.isTabPanel();
              }) && wm.getCurrent(n).each(function (e) {
                LR.showTab(e, t);
              });
            });
          },
          redial: function redial(r) {
            n(function (n) {
              var a = e.getId(),
                i = t(r),
                l = lV(i.internalDialog.buttons, o);
              n.getSystem().broadcastOn(["".concat(YC, "-").concat(a)], i), n.getSystem().broadcastOn(["".concat(KC, "-").concat(a)], i.internalDialog), n.getSystem().broadcastOn(["".concat(JC, "-").concat(a)], i.internalDialog), n.getSystem().broadcastOn(["".concat(ZC, "-").concat(a)], _objectSpread(_objectSpread({}, i.internalDialog), {}, {
                buttons: l
              })), s.setData(i.initialData);
            });
          },
          close: function close() {
            n(function (e) {
              Fr(e, fS);
            });
          },
          toggleFullscreen: e.toggleFullscreen
        };
      return s;
    },
    bV = function bV(e, t, o) {
      var _eventOrder10;
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
      var s = la("dialog"),
        r = la("dialog-label"),
        a = la("dialog-content"),
        i = e.internalDialog,
        l = "medium" === i.size ? A.some("tox-dialog--width-md") : A.none(),
        c = jh(function (e, t, o, n) {
          return oS.sketch({
            dom: _A('<div class="tox-dialog__header"></div>'),
            components: [oV(e, t, A.some(o), n), nV(), tV(n)],
            containerBehaviours: kl([OF.config({
              mode: "mouse",
              blockerClass: "blocker",
              getTarget: function getTarget(e) {
                return hi(e, '[role="dialog"]').getOrDie();
              },
              snaps: {
                getSnapPoints: function getSnapPoints() {
                  return [];
                },
                leftAttr: "data-drag-left",
                topAttr: "data-drag-top"
              }
            })])
          });
        }({
          title: i.title,
          draggable: !0
        }, s, r, o.shared.providers)),
        d = jh(function (e, t, o, n, s) {
          return qR(e, t, A.some(o), n, s);
        }({
          body: i.body,
          initialData: i.initialData
        }, s, a, o, n)),
        u = lV(i.buttons),
        m = cV(u),
        g = Ce(0 !== u.length, jh(function (e, t, o) {
          return gV(e, t, o);
        }({
          buttons: u
        }, s, o))),
        p = uV(function () {
          return b;
        }, {
          onBlock: function onBlock(e) {
            OA.block(f, function (t, n) {
              var s = c.getOpt(f).map(function (e) {
                return Wt(e.element);
              });
              return rV(e.message, n, o.shared.providers, s);
            });
          },
          onUnblock: function onUnblock() {
            OA.unblock(f);
          },
          onClose: function onClose() {
            return t.closeWindow();
          }
        }, o.shared.getSink),
        h = "tox-dialog-inline",
        f = ri({
          dom: {
            tag: "div",
            classes: ["tox-dialog", h].concat(_toConsumableArray(l.toArray())),
            attributes: {
              role: "dialog",
              "aria-labelledby": r
            }
          },
          eventOrder: (_eventOrder10 = {}, _defineProperty(_eventOrder10, dr(), [TR.name(), Al.name()]), _defineProperty(_eventOrder10, ur(), ["execute-on-form"]), _defineProperty(_eventOrder10, Sr(), ["reflecting", "execute-on-form"]), _eventOrder10),
          behaviours: kl([Pp.config({
            mode: "cyclic",
            onEscape: function onEscape(e) {
              return Fr(e, fS), A.some(!0);
            },
            useTabstopAt: function useTabstopAt(e) {
              return !XC(e) && ("button" !== Ue(e) || "disabled" !== Ot(e, "disabled"));
            },
            firstTabstop: 1
          }), TR.config({
            channel: "".concat(YC, "-").concat(s),
            updateState: function updateState(e, t) {
              return A.some(t);
            },
            initialData: e
          }), oh.config({}), Jp("execute-on-form", p.concat([Yr(Xs(), function (e, t) {
            Pp.focusIn(e);
          }), Ur(_r(), function (e, t) {
            e.getSystem().broadcastOn([eO], {
              newFocus: t.event.newFocus
            });
          })])), OA.config({
            getRoot: function getRoot() {
              return A.some(f);
            }
          }), Kp.config({}), VC({})]),
          components: [c.asSpec(), d.asSpec()].concat(_toConsumableArray(g.map(function (e) {
            return e.asSpec();
          }).toArray()))
        }),
        b = fV({
          getId: x(s),
          getRoot: x(f),
          getFooter: function getFooter() {
            return g.map(function (e) {
              return e.get(f);
            });
          },
          getBody: function getBody() {
            return d.get(f);
          },
          getFormWrapper: function getFormWrapper() {
            var e = d.get(f);
            return wm.getCurrent(e).getOr(e);
          },
          toggleFullscreen: function toggleFullscreen() {
            var e = "tox-dialog--fullscreen",
              t = Ve(f.element.dom);
            Ga(t, [e]) ? (ja(t, [e]), Wa(t, [h])) : (ja(t, [h]), Wa(t, [e]));
          }
        }, t.redial, m);
      return {
        dialog: f,
        instanceApi: b
      };
    };
  var vV = tinymce.util.Tools.resolve("tinymce.util.URI");
  var yV = ["insertContent", "setContent", "execCommand", "close", "block", "unblock"],
    xV = function xV(e) {
      return a(e) && -1 !== yV.indexOf(e.mceAction);
    },
    wV = function wV(e, t, o, n) {
      var s = la("dialog"),
        i = sV(e.title, s, n),
        l = function (e) {
          var t = {
            dom: {
              tag: "div",
              classes: ["tox-dialog__content-js"]
            },
            components: [{
              dom: {
                tag: "div",
                classes: ["tox-dialog__body-iframe"]
              },
              components: [GC(A.none(), {
                dom: {
                  tag: "iframe",
                  attributes: {
                    src: e.url
                  }
                },
                behaviours: kl([cS.config({}), oh.config({})])
              })]
            }],
            behaviours: kl([Pp.config({
              mode: "acyclic",
              useTabstopAt: C(XC)
            })])
          };
          return LF.parts.body(t);
        }(e),
        c = e.buttons.bind(function (e) {
          return 0 === e.length ? A.none() : A.some(pV({
            buttons: e
          }, s, n));
        }),
        u = function (e, t) {
          var o = function o(e, t) {
              return Ur(e, function (e, o) {
                n(e, function (n, s) {
                  t(x, n, o.event, e);
                });
              });
            },
            n = function n(e, t) {
              TR.getState(e).get().each(function (o) {
                t(o, e);
              });
            };
          return [].concat(_toConsumableArray(dV(o, t)), [o(vS, function (e, t, o) {
            t.onAction(e, {
              name: o.name
            });
          })]);
        }(0, aV(function () {
          return y;
        }, n.shared.providers, t)),
        m = _objectSpread(_objectSpread({}, e.height.fold(function () {
          return {};
        }, function (e) {
          return {
            height: e + "px",
            "max-height": e + "px"
          };
        })), e.width.fold(function () {
          return {};
        }, function (e) {
          return {
            width: e + "px",
            "max-width": e + "px"
          };
        })),
        p = e.width.isNone() && e.height.isNone() ? ["tox-dialog--width-lg"] : [],
        h = new vV(e.url, {
          base_uri: new vV(window.location.href)
        }),
        f = "".concat(h.protocol, "://").concat(h.host).concat(h.port ? ":" + h.port : ""),
        b = Zl(),
        v = [Jp("messages", [Kr(function () {
          var t = tc(Ve(window), "message", function (t) {
            if (h.isSameOrigin(new vV(t.raw.origin))) {
              var _n47 = t.raw.data;
              xV(_n47) ? function (e, t, o) {
                switch (o.mceAction) {
                  case "insertContent":
                    e.insertContent(o.content);
                    break;
                  case "setContent":
                    e.setContent(o.content);
                    break;
                  case "execCommand":
                    var _n48 = !!d(o.ui) && o.ui;
                    e.execCommand(o.cmd, _n48, o.value);
                    break;
                  case "close":
                    t.close();
                    break;
                  case "block":
                    t.block(o.message);
                    break;
                  case "unblock":
                    t.unblock();
                }
              }(o, x, _n47) : function (e) {
                return !xV(e) && a(e) && ve(e, "mceAction");
              }(_n47) && e.onMessage(x, _n47);
            }
          });
          b.set(t);
        }), Jr(b.clear)]), Al.config({
          channels: _defineProperty({}, QC, {
            onReceive: function onReceive(e, t) {
              pi(e.element, "iframe").each(function (e) {
                var o = e.dom.contentWindow;
                g(o) && o.postMessage(t, f);
              });
            }
          })
        })],
        y = iV({
          id: s,
          header: i,
          body: l,
          footer: c,
          extraClasses: p,
          extraBehaviours: v,
          extraStyles: m
        }, e, u, n),
        x = function (e) {
          var t = function t(_t59) {
            e.getSystem().isConnected() && _t59(e);
          };
          return {
            block: function block(e) {
              if (!r(e)) throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");
              t(function (t) {
                Ir(t, xS, {
                  message: e
                });
              });
            },
            unblock: function unblock() {
              t(function (e) {
                Fr(e, wS);
              });
            },
            close: function close() {
              t(function (e) {
                Fr(e, fS);
              });
            },
            sendMessage: function sendMessage(e) {
              t(function (t) {
                t.getSystem().broadcastOn([QC], e);
              });
            }
          };
        }(y);
      return {
        dialog: y,
        instanceApi: x
      };
    },
    SV = function SV(e, t) {
      return Xn(qn("data", t, e));
    },
    kV = function kV(e) {
      return $w(e, ".tox-alert-dialog") || $w(e, ".tox-confirm-dialog");
    },
    CV = function CV(e, t, o) {
      return t && o ? [] : [$E.config({
        contextual: {
          lazyContext: function lazyContext() {
            return A.some(Jo(Ve(e.getContentAreaContainer())));
          },
          fadeInClass: "tox-dialog-dock-fadein",
          fadeOutClass: "tox-dialog-dock-fadeout",
          transitionClass: "tox-dialog-dock-transition"
        },
        modes: ["top"],
        lazyViewport: function lazyViewport(t) {
          return jw(e, t.element).map(function (e) {
            return {
              bounds: Gw(e),
              optScrollEnv: A.some({
                currentScrollTop: e.element.dom.scrollTop,
                scrollElmTop: Xt(e.element).top
              })
            };
          }).getOrThunk(function () {
            return {
              bounds: en(),
              optScrollEnv: A.none()
            };
          });
        }
      })];
    },
    OV = function OV(e) {
      var t = e.editor,
        o = ib(t),
        n = function (e) {
          var t = e.shared;
          return {
            open: function open(o, n) {
              var s = function s() {
                  LF.hide(l), n();
                },
                r = jh(B_({
                  name: "close-alert",
                  text: "OK",
                  primary: !0,
                  buttonType: A.some("primary"),
                  align: "end",
                  enabled: !0,
                  icon: A.none()
                }, "cancel", e)),
                a = KN(),
                i = YN(s, t.providers),
                l = ri(eV({
                  lazySink: function lazySink() {
                    return t.getSink();
                  },
                  header: XN(a, i),
                  body: JN(o, t.providers),
                  footer: A.some(ZN(QN([], [r.asSpec()]))),
                  onEscape: s,
                  extraClasses: ["tox-alert-dialog"],
                  extraBehaviours: [],
                  extraStyles: {},
                  dialogEvents: [Ur(bS, s)],
                  eventOrder: {}
                }));
              LF.show(l);
              var c = r.get(l);
              oh.focus(c);
            }
          };
        }(e.backstages.dialog),
        s = function (e) {
          var t = e.shared;
          return {
            open: function open(o, n) {
              var s = function s(e) {
                  LF.hide(c), n(e);
                },
                r = jh(B_({
                  name: "yes",
                  text: "Yes",
                  primary: !0,
                  buttonType: A.some("primary"),
                  align: "end",
                  enabled: !0,
                  icon: A.none()
                }, "submit", e)),
                a = B_({
                  name: "no",
                  text: "No",
                  primary: !1,
                  buttonType: A.some("secondary"),
                  align: "end",
                  enabled: !0,
                  icon: A.none()
                }, "cancel", e),
                i = KN(),
                l = YN(function () {
                  return s(!1);
                }, t.providers),
                c = ri(eV({
                  lazySink: function lazySink() {
                    return t.getSink();
                  },
                  header: XN(i, l),
                  body: JN(o, t.providers),
                  footer: A.some(ZN(QN([], [a, r.asSpec()]))),
                  onEscape: function onEscape() {
                    return s(!1);
                  },
                  extraClasses: ["tox-confirm-dialog"],
                  extraBehaviours: [],
                  extraStyles: {},
                  dialogEvents: [Ur(bS, function () {
                    return s(!1);
                  }), Ur(yS, function () {
                    return s(!0);
                  })],
                  eventOrder: {}
                }));
              LF.show(c);
              var d = r.get(c);
              oh.focus(d);
            }
          };
        }(e.backstages.dialog),
        r = function r(t, o) {
          return kR.open(function (t, n, s) {
            var r = n,
              a = function (e, t, o) {
                var n = la("dialog"),
                  s = e.internalDialog,
                  r = sV(s.title, n, o),
                  a = function (e, t, o) {
                    var n = qR(e, t, A.none(), o, !1);
                    return LF.parts.body(n);
                  }({
                    body: s.body,
                    initialData: s.initialData
                  }, n, o),
                  i = lV(s.buttons),
                  l = cV(i),
                  c = Ce(0 !== i.length, pV({
                    buttons: i
                  }, n, o)),
                  d = uV(function () {
                    return p;
                  }, aV(function () {
                    return m;
                  }, o.shared.providers, t), o.shared.getSink),
                  u = function (e) {
                    switch (e) {
                      case "large":
                        return ["tox-dialog--width-lg"];
                      case "medium":
                        return ["tox-dialog--width-md"];
                      default:
                        return [];
                    }
                  }(s.size),
                  m = iV({
                    id: n,
                    header: r,
                    body: a,
                    footer: c,
                    extraClasses: u,
                    extraBehaviours: [],
                    extraStyles: {}
                  }, e, d, o),
                  g = {
                    getId: x(n),
                    getRoot: x(m),
                    getBody: function getBody() {
                      return LF.getBody(m);
                    },
                    getFooter: function getFooter() {
                      return LF.getFooter(m);
                    },
                    getFormWrapper: function getFormWrapper() {
                      var e = LF.getBody(m);
                      return wm.getCurrent(e).getOr(e);
                    },
                    toggleFullscreen: function toggleFullscreen() {
                      var e = "tox-dialog--fullscreen",
                        t = Ve(m.element.dom);
                      Ua(t, e) ? (Pa(t, e), Wa(t, u)) : (ja(t, u), La(t, e));
                    }
                  },
                  p = fV(g, t.redial, l);
                return {
                  dialog: m,
                  instanceApi: p
                };
              }({
                dataValidator: s,
                initialData: r,
                internalDialog: t
              }, {
                redial: kR.redial,
                closeWindow: function closeWindow() {
                  LF.hide(a.dialog), o(a.instanceApi);
                }
              }, e.backstages.dialog);
            return LF.show(a.dialog), a.instanceApi.setData(r), a.instanceApi;
          }, t);
        },
        a = function a(n, s, r, _a12) {
          return kR.open(function (n, i, l) {
            var c = SV(i, l),
              d = Ql(),
              u = e.backstages.popup.shared.header.isPositionedAtTop(),
              m = function m() {
                return d.on(function (e) {
                  Ph.reposition(e), $E.refresh(e);
                });
              },
              g = bV({
                dataValidator: l,
                initialData: c,
                internalDialog: n
              }, {
                redial: kR.redial,
                closeWindow: function closeWindow() {
                  d.on(Ph.hide), t.off("ResizeEditor", m), d.clear(), r(g.instanceApi);
                }
              }, e.backstages.popup, _a12.ariaAttrs),
              p = ri(Ph.sketch(_objectSpread(_objectSpread({
                lazySink: e.backstages.popup.shared.getSink,
                dom: {
                  tag: "div",
                  classes: []
                },
                fireDismissalEventInstead: _a12.persistent ? {
                  event: "doNotDismissYet"
                } : {}
              }, u ? {} : {
                fireRepositionEventInstead: {}
              }), {}, {
                inlineBehaviours: kl([Jp("window-manager-inline-events", [Ur(Cr(), function (e, t) {
                  Fr(g.dialog, bS);
                })])].concat(_toConsumableArray(CV(t, o, u)))),
                isExtraPart: function isExtraPart(e, t) {
                  return kV(t);
                }
              })));
            return d.set(p), Ph.showWithinBounds(p, ai(g.dialog), {
              anchor: s
            }, function () {
              var e = t.inline ? xt() : Ve(t.getContainer()),
                o = Jo(e);
              return A.some(o);
            }), o && u || ($E.refresh(p), t.on("ResizeEditor", m)), g.instanceApi.setData(c), Pp.focusIn(g.dialog), g.instanceApi;
          }, n);
        },
        i = function i(o, n, s, r) {
          return kR.open(function (o, a, i) {
            var l = SV(a, i),
              c = Ql(),
              d = e.backstages.popup.shared.header.isPositionedAtTop(),
              u = function u() {
                return c.on(function (e) {
                  Ph.reposition(e), $E.refresh(e);
                });
              },
              m = bV({
                dataValidator: i,
                initialData: l,
                internalDialog: o
              }, {
                redial: kR.redial,
                closeWindow: function closeWindow() {
                  c.on(Ph.hide), t.off("ResizeEditor ScrollWindow ElementScroll", u), c.clear(), s(m.instanceApi);
                }
              }, e.backstages.popup, r.ariaAttrs),
              g = ri(Ph.sketch(_objectSpread(_objectSpread({
                lazySink: e.backstages.popup.shared.getSink,
                dom: {
                  tag: "div",
                  classes: []
                },
                fireDismissalEventInstead: r.persistent ? {
                  event: "doNotDismissYet"
                } : {}
              }, d ? {} : {
                fireRepositionEventInstead: {}
              }), {}, {
                inlineBehaviours: kl([Jp("window-manager-inline-events", [Ur(Cr(), function (e, t) {
                  Fr(m.dialog, bS);
                })]), $E.config({
                  contextual: {
                    lazyContext: function lazyContext() {
                      return A.some(Jo(Ve(t.getContentAreaContainer())));
                    },
                    fadeInClass: "tox-dialog-dock-fadein",
                    fadeOutClass: "tox-dialog-dock-fadeout",
                    transitionClass: "tox-dialog-dock-transition"
                  },
                  modes: ["top", "bottom"],
                  lazyViewport: function lazyViewport(e) {
                    return jw(t, e.element).map(function (e) {
                      return {
                        bounds: Gw(e),
                        optScrollEnv: A.some({
                          currentScrollTop: e.element.dom.scrollTop,
                          scrollElmTop: Xt(e.element).top
                        })
                      };
                    }).getOrThunk(function () {
                      return {
                        bounds: en(),
                        optScrollEnv: A.none()
                      };
                    });
                  }
                })]),
                isExtraPart: function isExtraPart(e, t) {
                  return kV(t);
                }
              })));
            return c.set(g), Ph.showWithinBounds(g, ai(m.dialog), {
              anchor: n
            }, function () {
              return e.backstages.popup.shared.getSink().toOptional().bind(function (e) {
                var o = jw(t, e.element).map(function (e) {
                    return Gw(e);
                  }).getOr(en()),
                  n = Jo(Ve(t.getContentAreaContainer())),
                  s = Qo(n, o);
                return A.some(Ko(s.x, s.y, s.width, s.height - 15));
              });
            }), $E.refresh(g), t.on("ResizeEditor ScrollWindow ElementScroll", u), m.instanceApi.setData(l), Pp.focusIn(m.dialog), m.instanceApi;
          }, o);
        };
      return {
        open: function open(t, o, n) {
          if (!u(o)) {
            if ("toolbar" === o.inline) return a(t, e.backstages.popup.shared.anchors.inlineDialog(), n, o);
            if ("bottom" === o.inline) return i(t, e.backstages.popup.shared.anchors.inlineBottomDialog(), n, o);
            if ("cursor" === o.inline) return a(t, e.backstages.popup.shared.anchors.cursor(), n, o);
          }
          return r(t, n);
        },
        openUrl: function openUrl(o, n) {
          return function (o, n) {
            return kR.openUrl(function (o) {
              var s = wV(o, {
                closeWindow: function closeWindow() {
                  LF.hide(s.dialog), n(s.instanceApi);
                }
              }, t, e.backstages.dialog);
              return LF.show(s.dialog), s.instanceApi;
            }, o);
          }(o, n);
        },
        alert: function alert(e, t) {
          n.open(e, t);
        },
        close: function close(e) {
          e.close();
        },
        confirm: function confirm(e, t) {
          s.open(e, t);
        }
      };
    };
  tn.add("silver", function (e) {
    (function (e) {
      uf(e), function (e) {
        var t = e.options.register,
          o = function o(e) {
            return f(e, r) ? {
              value: Bx(e),
              valid: !0
            } : {
              valid: !1,
              message: "Must be an array of strings."
            };
          },
          n = function n(e) {
            return h(e) && e > 0 ? {
              value: e,
              valid: !0
            } : {
              valid: !1,
              message: "Must be a positive number."
            };
          };
        t("color_map", {
          processor: o,
          "default": ["#BFEDD2", "Light Green", "#FBEEB8", "Light Yellow", "#F8CAC6", "Light Red", "#ECCAFA", "Light Purple", "#C2E0F4", "Light Blue", "#2DC26B", "Green", "#F1C40F", "Yellow", "#E03E2D", "Red", "#B96AD9", "Purple", "#3598DB", "Blue", "#169179", "Dark Turquoise", "#E67E23", "Orange", "#BA372A", "Dark Red", "#843FA1", "Dark Purple", "#236FA1", "Dark Blue", "#ECF0F1", "Light Gray", "#CED4D9", "Medium Gray", "#95A5A6", "Gray", "#7E8C8D", "Dark Gray", "#34495E", "Navy Blue", "#000000", "Black", "#ffffff", "White"]
        }), t("color_map_background", {
          processor: o
        }), t("color_map_foreground", {
          processor: o
        }), t("color_cols", {
          processor: n,
          "default": Nx(e)
        }), t("color_cols_foreground", {
          processor: n,
          "default": Vx(e, Mx)
        }), t("color_cols_background", {
          processor: n,
          "default": Vx(e, Dx)
        }), t("custom_colors", {
          processor: "boolean",
          "default": !0
        }), t("color_default_foreground", {
          processor: "string",
          "default": Ix
        }), t("color_default_background", {
          processor: "string",
          "default": Ix
        });
      }(e), function (e) {
        var t = e.options.register;
        t("contextmenu_avoid_overlap", {
          processor: "string",
          "default": ""
        }), t("contextmenu_never_use_native", {
          processor: "boolean",
          "default": !1
        }), t("contextmenu", {
          processor: function processor(e) {
            return !1 === e ? {
              value: [],
              valid: !0
            } : r(e) || f(e, r) ? {
              value: yB(e),
              valid: !0
            } : {
              valid: !1,
              message: "Must be false or a string."
            };
          },
          "default": "link linkchecker image editimage table spellchecker configurepermanentpen"
        });
      }(e);
    })(e);
    var t = function t() {
      return en();
    };
    var _NF = NF(e, {
        getPopupSinkBounds: function getPopupSinkBounds() {
          return t();
        }
      }),
      o = _NF.dialogs,
      n = _NF.popups,
      s = _NF.renderUI;
    Lw(e, n.backstage.shared);
    var a = OV({
      editor: e,
      backstages: {
        popup: n.backstage,
        dialog: o.backstage
      }
    });
    return {
      renderUI: function () {
        var _renderUI = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
          var o;
          return _regeneratorRuntime().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                _context3.next = 2;
                return s();
              case 2:
                o = _context3.sent;
                return _context3.abrupt("return", (jw(e, n.getMothership().element).each(function (e) {
                  t = function t() {
                    return Gw(e);
                  };
                }), o));
              case 4:
              case "end":
                return _context3.stop();
            }
          }, _callee3);
        }));
        function renderUI() {
          return _renderUI.apply(this, arguments);
        }
        return renderUI;
      }(),
      getWindowManagerImpl: x(a),
      getNotificationManagerImpl: function getNotificationManagerImpl() {
        return function (e, t, o) {
          var n = t.backstage.shared,
            s = function s() {
              var t = Jo(Ve(e.getContentAreaContainer())),
                o = en(),
                n = Yi(o.x, t.x, t.right),
                s = Yi(o.y, t.y, t.bottom),
                r = Math.max(t.right, o.right),
                a = Math.max(t.bottom, o.bottom);
              return A.some(Ko(n, s, r - n, a - s));
            };
          return {
            open: function open(t, r) {
              var a = function a() {
                  r(), Ph.hide(l);
                },
                i = ri(of.sketch({
                  text: t.text,
                  level: R(["success", "error", "warning", "warn", "info"], t.type) ? t.type : void 0,
                  progress: !0 === t.progressBar,
                  icon: t.icon,
                  closeButton: t.closeButton,
                  onAction: a,
                  iconProvider: n.providers.icons,
                  translationProvider: n.providers.translate
                })),
                l = ri(Ph.sketch(_objectSpread({
                  dom: {
                    tag: "div",
                    classes: ["tox-notifications-container"]
                  },
                  lazySink: n.getSink,
                  fireDismissalEventInstead: {}
                }, n.header.isPositionedAtTop() ? {} : {
                  fireRepositionEventInstead: {}
                })));
              o.add(l), h(t.timeout) && t.timeout > 0 && Uh.setEditorTimeout(e, function () {
                a();
              }, t.timeout);
              var c = {
                close: a,
                reposition: function reposition() {
                  var t = ai(i),
                    o = {
                      maxHeightFunction: cc()
                    },
                    r = e.notificationManager.getNotifications();
                  if (r[0] === c) {
                    var _e35 = _objectSpread(_objectSpread({}, n.anchors.banner()), {}, {
                      overrides: o
                    });
                    Ph.showWithinBounds(l, t, {
                      anchor: _e35
                    }, s);
                  } else I(r, c).each(function (e) {
                    var n = r[e - 1].getEl(),
                      a = {
                        type: "node",
                        root: xt(),
                        node: A.some(Ve(n)),
                        overrides: o,
                        layouts: {
                          onRtl: function onRtl() {
                            return [cl];
                          },
                          onLtr: function onLtr() {
                            return [cl];
                          }
                        }
                      };
                    Ph.showWithinBounds(l, t, {
                      anchor: a
                    }, s);
                  });
                },
                text: function text(e) {
                  of.updateText(i, e);
                },
                settings: t,
                getEl: function getEl() {
                  return i.element.dom;
                },
                progressBar: {
                  value: function value(e) {
                    of.updateProgress(i, e);
                  }
                }
              };
              return c;
            },
            close: function close(e) {
              e.close();
            },
            getArgs: function getArgs(e) {
              return e.settings;
            }
          };
        }(e, {
          backstage: n.backstage
        }, n.getMothership());
      }
    };
  });
}();

/***/ }),

/***/ "./bundle/Resources/public/tinymce/js/tinymce/tinymce.min.js":
/*!*******************************************************************!*\
  !*** ./bundle/Resources/public/tinymce/js/tinymce/tinymce.min.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/* module decorator */ module = __webpack_require__.nmd(module);
var _excluded = ["uid"];
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw new Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw new Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }
function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }
function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }
function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e172) { throw _e172; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e173) { didErr = true; err = _e173; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
/**
 * TinyMCE version 6.7.0 (2023-08-30)
 */
!function () {
  "use strict";

  var e = function e(_e2) {
      if (null === _e2) return "null";
      if (void 0 === _e2) return "undefined";
      var t = _typeof(_e2);
      return "object" === t && (Array.prototype.isPrototypeOf(_e2) || _e2.constructor && "Array" === _e2.constructor.name) ? "array" : "object" === t && (String.prototype.isPrototypeOf(_e2) || _e2.constructor && "String" === _e2.constructor.name) ? "string" : t;
    },
    t = function t(e) {
      return {
        eq: e
      };
    },
    n = t(function (e, t) {
      return e === t;
    }),
    o = function o(e) {
      return t(function (t, n) {
        if (t.length !== n.length) return !1;
        for (var o = t.length, r = 0; r < o; r++) if (!e.eq(t[r], n[r])) return !1;
        return !0;
      });
    },
    r = function r(e) {
      return t(function (r, s) {
        var a = Object.keys(r),
          i = Object.keys(s);
        if (!function (e, n) {
          return function (e, n) {
            return t(function (t, o) {
              return e.eq(n(t), n(o));
            });
          }(o(e), function (e) {
            return function (e, t) {
              return Array.prototype.slice.call(e).sort(t);
            }(e, n);
          });
        }(n).eq(a, i)) return !1;
        for (var l = a.length, d = 0; d < l; d++) {
          var c = a[d];
          if (!e.eq(r[c], s[c])) return !1;
        }
        return !0;
      });
    },
    s = t(function (t, n) {
      if (t === n) return !0;
      var a = e(t);
      return a === e(n) && (function (e) {
        return -1 !== ["undefined", "boolean", "number", "string", "function", "xml", "null"].indexOf(e);
      }(a) ? t === n : "array" === a ? o(s).eq(t, n) : "object" === a && r(s).eq(t, n));
    });
  var a = Object.getPrototypeOf,
    i = function i(e, t, n) {
      var o;
      return !!n(e, t.prototype) || (null === (o = e.constructor) || void 0 === o ? void 0 : o.name) === t.name;
    },
    l = function l(e) {
      return function (t) {
        return function (e) {
          var t = _typeof(e);
          return null === e ? "null" : "object" === t && Array.isArray(e) ? "array" : "object" === t && i(e, String, function (e, t) {
            return t.isPrototypeOf(e);
          }) ? "string" : t;
        }(t) === e;
      };
    },
    d = function d(e) {
      return function (t) {
        return _typeof(t) === e;
      };
    },
    c = function c(e) {
      return function (t) {
        return e === t;
      };
    },
    u = function u(e, t) {
      return f(e) && i(e, t, function (e, t) {
        return a(e) === t;
      });
    },
    m = l("string"),
    f = l("object"),
    g = function g(e) {
      return u(e, Object);
    },
    p = l("array"),
    h = c(null),
    b = d("boolean"),
    v = c(void 0),
    y = function y(e) {
      return null == e;
    },
    C = function C(e) {
      return !y(e);
    },
    w = d("function"),
    x = d("number"),
    k = function k(e, t) {
      if (p(e)) {
        for (var _n2 = 0, _o2 = e.length; _n2 < _o2; ++_n2) if (!t(e[_n2])) return !1;
        return !0;
      }
      return !1;
    },
    E = function E() {},
    S = function S(e, t) {
      return function () {
        for (var _len = arguments.length, n = new Array(_len), _key = 0; _key < _len; _key++) {
          n[_key] = arguments[_key];
        }
        return e(t.apply(null, n));
      };
    },
    _ = function _(e, t) {
      return function (n) {
        return e(t(n));
      };
    },
    N = function N(e) {
      return function () {
        return e;
      };
    },
    R = function R(e) {
      return e;
    },
    A = function A(e, t) {
      return e === t;
    };
  function O(e) {
    for (var _len2 = arguments.length, t = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      t[_key2 - 1] = arguments[_key2];
    }
    return function () {
      for (var _len3 = arguments.length, n = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        n[_key3] = arguments[_key3];
      }
      var o = t.concat(n);
      return e.apply(null, o);
    };
  }
  var T = function T(e) {
      return function (t) {
        return !e(t);
      };
    },
    B = function B(e) {
      return function () {
        throw new Error(e);
      };
    },
    D = function D(e) {
      return e();
    },
    P = function P(e) {
      e();
    },
    L = N(!1),
    M = N(!0);
  var I = /*#__PURE__*/function () {
    function I(e, t) {
      _classCallCheck(this, I);
      this.tag = e, this.value = t;
    }
    _createClass(I, [{
      key: "fold",
      value: function fold(e, t) {
        return this.tag ? t(this.value) : e();
      }
    }, {
      key: "isSome",
      value: function isSome() {
        return this.tag;
      }
    }, {
      key: "isNone",
      value: function isNone() {
        return !this.tag;
      }
    }, {
      key: "map",
      value: function map(e) {
        return this.tag ? I.some(e(this.value)) : I.none();
      }
    }, {
      key: "bind",
      value: function bind(e) {
        return this.tag ? e(this.value) : I.none();
      }
    }, {
      key: "exists",
      value: function exists(e) {
        return this.tag && e(this.value);
      }
    }, {
      key: "forall",
      value: function forall(e) {
        return !this.tag || e(this.value);
      }
    }, {
      key: "filter",
      value: function filter(e) {
        return !this.tag || e(this.value) ? this : I.none();
      }
    }, {
      key: "getOr",
      value: function getOr(e) {
        return this.tag ? this.value : e;
      }
    }, {
      key: "or",
      value: function or(e) {
        return this.tag ? this : e;
      }
    }, {
      key: "getOrThunk",
      value: function getOrThunk(e) {
        return this.tag ? this.value : e();
      }
    }, {
      key: "orThunk",
      value: function orThunk(e) {
        return this.tag ? this : e();
      }
    }, {
      key: "getOrDie",
      value: function getOrDie(e) {
        if (this.tag) return this.value;
        throw new Error(null != e ? e : "Called getOrDie on None");
      }
    }, {
      key: "getOrNull",
      value: function getOrNull() {
        return this.tag ? this.value : null;
      }
    }, {
      key: "getOrUndefined",
      value: function getOrUndefined() {
        return this.value;
      }
    }, {
      key: "each",
      value: function each(e) {
        this.tag && e(this.value);
      }
    }, {
      key: "toArray",
      value: function toArray() {
        return this.tag ? [this.value] : [];
      }
    }, {
      key: "toString",
      value: function toString() {
        return this.tag ? "some(".concat(this.value, ")") : "none()";
      }
    }], [{
      key: "some",
      value: function some(e) {
        return new I(!0, e);
      }
    }, {
      key: "none",
      value: function none() {
        return I.singletonNone;
      }
    }, {
      key: "from",
      value: function from(e) {
        return C(e) ? I.some(e) : I.none();
      }
    }]);
    return I;
  }();
  I.singletonNone = new I(!1);
  var F = Array.prototype.slice,
    U = Array.prototype.indexOf,
    z = Array.prototype.push,
    j = function j(e, t) {
      return U.call(e, t);
    },
    H = function H(e, t) {
      return j(e, t) > -1;
    },
    $ = function $(e, t) {
      for (var _n3 = 0, _o3 = e.length; _n3 < _o3; _n3++) if (t(e[_n3], _n3)) return !0;
      return !1;
    },
    V = function V(e, t) {
      var n = e.length,
        o = new Array(n);
      for (var _r2 = 0; _r2 < n; _r2++) {
        var _n4 = e[_r2];
        o[_r2] = t(_n4, _r2);
      }
      return o;
    },
    q = function q(e, t) {
      for (var _n5 = 0, _o4 = e.length; _n5 < _o4; _n5++) t(e[_n5], _n5);
    },
    W = function W(e, t) {
      for (var _n6 = e.length - 1; _n6 >= 0; _n6--) t(e[_n6], _n6);
    },
    K = function K(e, t) {
      var n = [],
        o = [];
      for (var _r3 = 0, _s2 = e.length; _r3 < _s2; _r3++) {
        var _s3 = e[_r3];
        (t(_s3, _r3) ? n : o).push(_s3);
      }
      return {
        pass: n,
        fail: o
      };
    },
    G = function G(e, t) {
      var n = [];
      for (var _o5 = 0, _r4 = e.length; _o5 < _r4; _o5++) {
        var _r5 = e[_o5];
        t(_r5, _o5) && n.push(_r5);
      }
      return n;
    },
    Y = function Y(e, t, n) {
      return W(e, function (e, o) {
        n = t(n, e, o);
      }), n;
    },
    X = function X(e, t, n) {
      return q(e, function (e, o) {
        n = t(n, e, o);
      }), n;
    },
    Q = function Q(e, t, n) {
      for (var _o6 = 0, _r6 = e.length; _o6 < _r6; _o6++) {
        var _r7 = e[_o6];
        if (t(_r7, _o6)) return I.some(_r7);
        if (n(_r7, _o6)) break;
      }
      return I.none();
    },
    J = function J(e, t) {
      return Q(e, t, L);
    },
    Z = function Z(e, t) {
      for (var _n7 = 0, _o7 = e.length; _n7 < _o7; _n7++) if (t(e[_n7], _n7)) return I.some(_n7);
      return I.none();
    },
    ee = function ee(e) {
      var t = [];
      for (var _n8 = 0, _o8 = e.length; _n8 < _o8; ++_n8) {
        if (!p(e[_n8])) throw new Error("Arr.flatten item " + _n8 + " was not an array, input: " + e);
        z.apply(t, e[_n8]);
      }
      return t;
    },
    te = function te(e, t) {
      return ee(V(e, t));
    },
    ne = function ne(e, t) {
      for (var _n9 = 0, _o9 = e.length; _n9 < _o9; ++_n9) if (!0 !== t(e[_n9], _n9)) return !1;
      return !0;
    },
    oe = function oe(e) {
      var t = F.call(e, 0);
      return t.reverse(), t;
    },
    re = function re(e, t) {
      return G(e, function (e) {
        return !H(t, e);
      });
    },
    se = function se(e, t) {
      var n = {};
      for (var _o10 = 0, _r8 = e.length; _o10 < _r8; _o10++) {
        var _r9 = e[_o10];
        n[String(_r9)] = t(_r9, _o10);
      }
      return n;
    },
    ae = function ae(e, t) {
      var n = F.call(e, 0);
      return n.sort(t), n;
    },
    ie = function ie(e, t) {
      return t >= 0 && t < e.length ? I.some(e[t]) : I.none();
    },
    le = function le(e) {
      return ie(e, 0);
    },
    de = function de(e) {
      return ie(e, e.length - 1);
    },
    ce = w(Array.from) ? Array.from : function (e) {
      return F.call(e);
    },
    ue = function ue(e, t) {
      for (var _n10 = 0; _n10 < e.length; _n10++) {
        var _o11 = t(e[_n10], _n10);
        if (_o11.isSome()) return _o11;
      }
      return I.none();
    },
    me = Object.keys,
    fe = Object.hasOwnProperty,
    ge = function ge(e, t) {
      var n = me(e);
      for (var _o12 = 0, _r10 = n.length; _o12 < _r10; _o12++) {
        var _r11 = n[_o12];
        t(e[_r11], _r11);
      }
    },
    pe = function pe(e, t) {
      return he(e, function (e, n) {
        return {
          k: n,
          v: t(e, n)
        };
      });
    },
    he = function he(e, t) {
      var n = {};
      return ge(e, function (e, o) {
        var r = t(e, o);
        n[r.k] = r.v;
      }), n;
    },
    be = function be(e) {
      return function (t, n) {
        e[n] = t;
      };
    },
    ve = function ve(e, t, n, o) {
      ge(e, function (e, r) {
        (t(e, r) ? n : o)(e, r);
      });
    },
    ye = function ye(e, t) {
      var n = {};
      return ve(e, t, be(n), E), n;
    },
    Ce = function Ce(e, t) {
      var n = [];
      return ge(e, function (e, o) {
        n.push(t(e, o));
      }), n;
    },
    we = function we(e) {
      return Ce(e, R);
    },
    xe = function xe(e, t) {
      return ke(e, t) ? I.from(e[t]) : I.none();
    },
    ke = function ke(e, t) {
      return fe.call(e, t);
    },
    Ee = function Ee(e, t) {
      return ke(e, t) && void 0 !== e[t] && null !== e[t];
    },
    Se = function Se(e) {
      var t = {};
      return q(e, function (e) {
        t[e] = {};
      }), me(t);
    },
    _e = function _e(e) {
      return void 0 !== e.length;
    },
    Ne = Array.isArray,
    Re = function Re(e, t, n) {
      if (!e) return !1;
      if (n = n || e, _e(e)) {
        for (var _o13 = 0, _r12 = e.length; _o13 < _r12; _o13++) if (!1 === t.call(n, e[_o13], _o13, e)) return !1;
      } else for (var _o14 in e) if (ke(e, _o14) && !1 === t.call(n, e[_o14], _o14, e)) return !1;
      return !0;
    },
    Ae = function Ae(e, t) {
      var n = [];
      return Re(e, function (o, r) {
        n.push(t(o, r, e));
      }), n;
    },
    Oe = function Oe(e, t) {
      var n = [];
      return Re(e, function (o, r) {
        t && !t(o, r, e) || n.push(o);
      }), n;
    },
    Te = function Te(e, t, n, o) {
      var r = v(n) ? e[0] : n;
      for (var _n11 = 0; _n11 < e.length; _n11++) r = t.call(o, r, e[_n11], _n11);
      return r;
    },
    Be = function Be(e, t, n) {
      for (var _o15 = 0, _r13 = e.length; _o15 < _r13; _o15++) if (t.call(n, e[_o15], _o15, e)) return _o15;
      return -1;
    },
    De = function De(e) {
      return e[e.length - 1];
    },
    Pe = function Pe(e) {
      var t,
        n = !1;
      return function () {
        for (var _len4 = arguments.length, o = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
          o[_key4] = arguments[_key4];
        }
        return n || (n = !0, t = e.apply(null, o)), t;
      };
    },
    Le = function Le() {
      return Me(0, 0);
    },
    Me = function Me(e, t) {
      return {
        major: e,
        minor: t
      };
    },
    Ie = {
      nu: Me,
      detect: function detect(e, t) {
        var n = String(t).toLowerCase();
        return 0 === e.length ? Le() : function (e, t) {
          var n = function (e, t) {
            for (var _n12 = 0; _n12 < e.length; _n12++) {
              var _o16 = e[_n12];
              if (_o16.test(t)) return _o16;
            }
          }(e, t);
          if (!n) return {
            major: 0,
            minor: 0
          };
          var o = function o(e) {
            return Number(t.replace(n, "$" + e));
          };
          return Me(o(1), o(2));
        }(e, n);
      },
      unknown: Le
    },
    Fe = function Fe(e, t) {
      var n = String(t).toLowerCase();
      return J(e, function (e) {
        return e.search(n);
      });
    },
    Ue = function Ue(e, t, n) {
      return "" === t || e.length >= t.length && e.substr(n, n + t.length) === t;
    },
    ze = function ze(e, t) {
      return He(e, t) ? function (e, t) {
        return e.substring(t);
      }(e, t.length) : e;
    },
    je = function je(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var o = arguments.length > 3 ? arguments[3] : undefined;
      var r = e.indexOf(t, n);
      return -1 !== r && (!!v(o) || r + t.length <= o);
    },
    He = function He(e, t) {
      return Ue(e, t, 0);
    },
    $e = function $e(e, t) {
      return Ue(e, t, e.length - t.length);
    },
    Ve = function Ve(e) {
      return function (t) {
        return t.replace(e, "");
      };
    },
    qe = Ve(/^\s+|\s+$/g),
    We = Ve(/^\s+/g),
    Ke = Ve(/\s+$/g),
    Ge = function Ge(e) {
      return e.length > 0;
    },
    Ye = function Ye(e) {
      return !Ge(e);
    },
    Xe = function Xe(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;
      var n = parseInt(e, t);
      return isNaN(n) ? I.none() : I.some(n);
    },
    Qe = /.*?version\/\ ?([0-9]+)\.([0-9]+).*/,
    Je = function Je(e) {
      return function (t) {
        return je(t, e);
      };
    },
    Ze = [{
      name: "Edge",
      versionRegexes: [/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],
      search: function search(e) {
        return je(e, "edge/") && je(e, "chrome") && je(e, "safari") && je(e, "applewebkit");
      }
    }, {
      name: "Chromium",
      brand: "Chromium",
      versionRegexes: [/.*?chrome\/([0-9]+)\.([0-9]+).*/, Qe],
      search: function search(e) {
        return je(e, "chrome") && !je(e, "chromeframe");
      }
    }, {
      name: "IE",
      versionRegexes: [/.*?msie\ ?([0-9]+)\.([0-9]+).*/, /.*?rv:([0-9]+)\.([0-9]+).*/],
      search: function search(e) {
        return je(e, "msie") || je(e, "trident");
      }
    }, {
      name: "Opera",
      versionRegexes: [Qe, /.*?opera\/([0-9]+)\.([0-9]+).*/],
      search: Je("opera")
    }, {
      name: "Firefox",
      versionRegexes: [/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],
      search: Je("firefox")
    }, {
      name: "Safari",
      versionRegexes: [Qe, /.*?cpu os ([0-9]+)_([0-9]+).*/],
      search: function search(e) {
        return (je(e, "safari") || je(e, "mobile/")) && je(e, "applewebkit");
      }
    }],
    et = [{
      name: "Windows",
      search: Je("win"),
      versionRegexes: [/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]
    }, {
      name: "iOS",
      search: function search(e) {
        return je(e, "iphone") || je(e, "ipad");
      },
      versionRegexes: [/.*?version\/\ ?([0-9]+)\.([0-9]+).*/, /.*cpu os ([0-9]+)_([0-9]+).*/, /.*cpu iphone os ([0-9]+)_([0-9]+).*/]
    }, {
      name: "Android",
      search: Je("android"),
      versionRegexes: [/.*?android\ ?([0-9]+)\.([0-9]+).*/]
    }, {
      name: "macOS",
      search: Je("mac os x"),
      versionRegexes: [/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]
    }, {
      name: "Linux",
      search: Je("linux"),
      versionRegexes: []
    }, {
      name: "Solaris",
      search: Je("sunos"),
      versionRegexes: []
    }, {
      name: "FreeBSD",
      search: Je("freebsd"),
      versionRegexes: []
    }, {
      name: "ChromeOS",
      search: Je("cros"),
      versionRegexes: [/.*?chrome\/([0-9]+)\.([0-9]+).*/]
    }],
    tt = {
      browsers: N(Ze),
      oses: N(et)
    },
    nt = "Edge",
    ot = "Chromium",
    rt = "Opera",
    st = "Firefox",
    at = "Safari",
    it = function it(e) {
      var t = e.current,
        n = e.version,
        o = function o(e) {
          return function () {
            return t === e;
          };
        };
      return {
        current: t,
        version: n,
        isEdge: o(nt),
        isChromium: o(ot),
        isIE: o("IE"),
        isOpera: o(rt),
        isFirefox: o(st),
        isSafari: o(at)
      };
    },
    lt = function lt() {
      return it({
        current: void 0,
        version: Ie.unknown()
      });
    },
    dt = it,
    ct = (N(nt), N(ot), N("IE"), N(rt), N(st), N(at), "Windows"),
    ut = "Android",
    mt = "Linux",
    ft = "macOS",
    gt = "Solaris",
    pt = "FreeBSD",
    ht = "ChromeOS",
    bt = function bt(e) {
      var t = e.current,
        n = e.version,
        o = function o(e) {
          return function () {
            return t === e;
          };
        };
      return {
        current: t,
        version: n,
        isWindows: o(ct),
        isiOS: o("iOS"),
        isAndroid: o(ut),
        isMacOS: o(ft),
        isLinux: o(mt),
        isSolaris: o(gt),
        isFreeBSD: o(pt),
        isChromeOS: o(ht)
      };
    },
    vt = function vt() {
      return bt({
        current: void 0,
        version: Ie.unknown()
      });
    },
    yt = bt,
    Ct = (N(ct), N("iOS"), N(ut), N(mt), N(ft), N(gt), N(pt), N(ht), function (e) {
      return window.matchMedia(e).matches;
    });
  var wt = Pe(function () {
    return function (e, t, n) {
      var o = tt.browsers(),
        r = tt.oses(),
        s = t.bind(function (e) {
          return function (e, t) {
            return ue(t.brands, function (t) {
              var n = t.brand.toLowerCase();
              return J(e, function (e) {
                var t;
                return n === (null === (t = e.brand) || void 0 === t ? void 0 : t.toLowerCase());
              }).map(function (e) {
                return {
                  current: e.name,
                  version: Ie.nu(parseInt(t.version, 10), 0)
                };
              });
            });
          }(o, e);
        }).orThunk(function () {
          return function (e, t) {
            return Fe(e, t).map(function (e) {
              var n = Ie.detect(e.versionRegexes, t);
              return {
                current: e.name,
                version: n
              };
            });
          }(o, e);
        }).fold(lt, dt),
        a = function (e, t) {
          return Fe(e, t).map(function (e) {
            var n = Ie.detect(e.versionRegexes, t);
            return {
              current: e.name,
              version: n
            };
          });
        }(r, e).fold(vt, yt),
        i = function (e, t, n, o) {
          var r = e.isiOS() && !0 === /ipad/i.test(n),
            s = e.isiOS() && !r,
            a = e.isiOS() || e.isAndroid(),
            i = a || o("(pointer:coarse)"),
            l = r || !s && a && o("(min-device-width:768px)"),
            d = s || a && !l,
            c = t.isSafari() && e.isiOS() && !1 === /safari/i.test(n),
            u = !d && !l && !c;
          return {
            isiPad: N(r),
            isiPhone: N(s),
            isTablet: N(l),
            isPhone: N(d),
            isTouch: N(i),
            isAndroid: e.isAndroid,
            isiOS: e.isiOS,
            isWebView: N(c),
            isDesktop: N(u)
          };
        }(a, s, e, n);
      return {
        browser: s,
        os: a,
        deviceType: i
      };
    }(navigator.userAgent, I.from(navigator.userAgentData), Ct);
  });
  var xt = function xt() {
      return wt();
    },
    kt = navigator.userAgent,
    Et = xt(),
    St = Et.browser,
    _t = Et.os,
    Nt = Et.deviceType,
    Rt = -1 !== kt.indexOf("Windows Phone"),
    At = {
      transparentSrc: "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
      documentMode: St.isIE() ? document.documentMode || 7 : 10,
      cacheSuffix: null,
      container: null,
      canHaveCSP: !St.isIE(),
      windowsPhone: Rt,
      browser: {
        current: St.current,
        version: St.version,
        isChromium: St.isChromium,
        isEdge: St.isEdge,
        isFirefox: St.isFirefox,
        isIE: St.isIE,
        isOpera: St.isOpera,
        isSafari: St.isSafari
      },
      os: {
        current: _t.current,
        version: _t.version,
        isAndroid: _t.isAndroid,
        isChromeOS: _t.isChromeOS,
        isFreeBSD: _t.isFreeBSD,
        isiOS: _t.isiOS,
        isLinux: _t.isLinux,
        isMacOS: _t.isMacOS,
        isSolaris: _t.isSolaris,
        isWindows: _t.isWindows
      },
      deviceType: {
        isDesktop: Nt.isDesktop,
        isiPad: Nt.isiPad,
        isiPhone: Nt.isiPhone,
        isPhone: Nt.isPhone,
        isTablet: Nt.isTablet,
        isTouch: Nt.isTouch,
        isWebView: Nt.isWebView
      }
    },
    Ot = /^\s*|\s*$/g,
    Tt = function Tt(e) {
      return y(e) ? "" : ("" + e).replace(Ot, "");
    },
    Bt = function Bt(e, t, n, o) {
      o = o || this, e && (n && (e = e[n]), Re(e, function (e, r) {
        return !1 !== t.call(o, e, r, n) && (Bt(e, t, n, o), !0);
      }));
    },
    Dt = {
      trim: Tt,
      isArray: Ne,
      is: function is(e, t) {
        return t ? !("array" !== t || !Ne(e)) || _typeof(e) === t : void 0 !== e;
      },
      toArray: function toArray(e) {
        if (Ne(e)) return e;
        {
          var _t2 = [];
          for (var _n13 = 0, _o17 = e.length; _n13 < _o17; _n13++) _t2[_n13] = e[_n13];
          return _t2;
        }
      },
      makeMap: function makeMap(e, t) {
        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
        var o = m(e) ? e.split(t || ",") : e || [];
        var r = o.length;
        for (; r--;) n[o[r]] = {};
        return n;
      },
      each: Re,
      map: Ae,
      grep: Oe,
      inArray: function inArray(e, t) {
        if (e) for (var _n14 = 0, _o18 = e.length; _n14 < _o18; _n14++) if (e[_n14] === t) return _n14;
        return -1;
      },
      hasOwn: ke,
      extend: function extend(e) {
        for (var _n15 = 0; _n15 < (arguments.length <= 1 ? 0 : arguments.length - 1); _n15++) {
          var _o19 = _n15 + 1 < 1 || arguments.length <= _n15 + 1 ? undefined : arguments[_n15 + 1];
          for (var _t3 in _o19) if (ke(_o19, _t3)) {
            var _n16 = _o19[_t3];
            void 0 !== _n16 && (e[_t3] = _n16);
          }
        }
        return e;
      },
      walk: Bt,
      resolve: function resolve(e) {
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;
        var n = e.split(".");
        for (var _e3 = 0, _o20 = n.length; _e3 < _o20 && (t = t[n[_e3]]); _e3++);
        return t;
      },
      explode: function explode(e, t) {
        return p(e) ? e : "" === e ? [] : Ae(e.split(t || ","), Tt);
      },
      _addCacheSuffix: function _addCacheSuffix(e) {
        var t = At.cacheSuffix;
        return t && (e += (-1 === e.indexOf("?") ? "?" : "&") + t), e;
      }
    },
    Pt = function Pt(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : A;
      return e.exists(function (e) {
        return n(e, t);
      });
    },
    Lt = function Lt(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : A;
      return Mt(e, t, n).getOr(e.isNone() && t.isNone());
    },
    Mt = function Mt(e, t, n) {
      return e.isSome() && t.isSome() ? I.some(n(e.getOrDie(), t.getOrDie())) : I.none();
    },
    It = function It(e, t) {
      return e ? I.some(t) : I.none();
    },
    Ft = "undefined" != typeof window ? window : Function("return this;")(),
    Ut = function Ut(e, t) {
      return function (e, t) {
        var n = null != t ? t : Ft;
        for (var _t4 = 0; _t4 < e.length && null != n; ++_t4) n = n[e[_t4]];
        return n;
      }(e.split("."), t);
    },
    zt = Object.getPrototypeOf,
    jt = function jt(e) {
      var t = Ut("ownerDocument.defaultView", e);
      return f(e) && (function (e) {
        return function (e, t) {
          var n = function (e, t) {
            return Ut(e, t);
          }(e, t);
          if (null == n) throw new Error(e + " not available on this browser");
          return n;
        }("HTMLElement", e);
      }(t).prototype.isPrototypeOf(e) || /^HTML\w*Element$/.test(zt(e).constructor.name));
    },
    Ht = function Ht(e) {
      return e.dom.nodeName.toLowerCase();
    },
    $t = function $t(e) {
      return e.dom.nodeType;
    },
    Vt = function Vt(e) {
      return function (t) {
        return $t(t) === e;
      };
    },
    qt = function qt(e) {
      return Wt(e) && jt(e.dom);
    },
    Wt = Vt(1),
    Kt = Vt(3),
    Gt = Vt(9),
    Yt = Vt(11),
    Xt = function Xt(e) {
      return function (t) {
        return Wt(t) && Ht(t) === e;
      };
    },
    Qt = function Qt(e, t, n) {
      if (!(m(n) || b(n) || x(n))) throw console.error("Invalid call to Attribute.set. Key ", t, ":: Value ", n, ":: Element ", e), new Error("Attribute value was not simple");
      e.setAttribute(t, n + "");
    },
    Jt = function Jt(e, t, n) {
      Qt(e.dom, t, n);
    },
    Zt = function Zt(e, t) {
      var n = e.dom;
      ge(t, function (e, t) {
        Qt(n, t, e);
      });
    },
    en = function en(e, t) {
      var n = e.dom.getAttribute(t);
      return null === n ? void 0 : n;
    },
    tn = function tn(e, t) {
      return I.from(en(e, t));
    },
    nn = function nn(e, t) {
      var n = e.dom;
      return !(!n || !n.hasAttribute) && n.hasAttribute(t);
    },
    on = function on(e, t) {
      e.dom.removeAttribute(t);
    },
    rn = function rn(e) {
      return X(e.dom.attributes, function (e, t) {
        return e[t.name] = t.value, e;
      }, {});
    },
    sn = function sn(e, t) {
      var n = en(e, t);
      return void 0 === n || "" === n ? [] : n.split(" ");
    },
    an = function an(e) {
      return void 0 !== e.dom.classList;
    },
    ln = function ln(e) {
      return sn(e, "class");
    },
    dn = function dn(e, t) {
      return function (e, t, n) {
        var o = sn(e, t).concat([n]);
        return Jt(e, t, o.join(" ")), !0;
      }(e, "class", t);
    },
    cn = function cn(e, t) {
      return function (e, t, n) {
        var o = G(sn(e, t), function (e) {
          return e !== n;
        });
        return o.length > 0 ? Jt(e, t, o.join(" ")) : on(e, t), !1;
      }(e, "class", t);
    },
    un = function un(e, t) {
      an(e) ? e.dom.classList.add(t) : dn(e, t);
    },
    mn = function mn(e) {
      0 === (an(e) ? e.dom.classList : ln(e)).length && on(e, "class");
    },
    fn = function fn(e, t) {
      an(e) ? e.dom.classList.remove(t) : cn(e, t), mn(e);
    },
    gn = function gn(e, t) {
      return an(e) && e.dom.classList.contains(t);
    },
    pn = function pn(e) {
      if (null == e) throw new Error("Node cannot be null or undefined");
      return {
        dom: e
      };
    },
    hn = function hn(e, t) {
      var n = (t || document).createElement("div");
      if (n.innerHTML = e, !n.hasChildNodes() || n.childNodes.length > 1) {
        var _t5 = "HTML does not have a single root node";
        throw console.error(_t5, e), new Error(_t5);
      }
      return pn(n.childNodes[0]);
    },
    bn = function bn(e, t) {
      var n = (t || document).createElement(e);
      return pn(n);
    },
    vn = function vn(e, t) {
      var n = (t || document).createTextNode(e);
      return pn(n);
    },
    yn = pn,
    Cn = function Cn(e, t, n) {
      return I.from(e.dom.elementFromPoint(t, n)).map(pn);
    },
    wn = function wn(e, t) {
      var n = [],
        o = function o(e) {
          return n.push(e), t(e);
        };
      var r = t(e);
      do {
        r = r.bind(o);
      } while (r.isSome());
      return n;
    },
    xn = function xn(e, t) {
      var n = e.dom;
      if (1 !== n.nodeType) return !1;
      {
        var _e4 = n;
        if (void 0 !== _e4.matches) return _e4.matches(t);
        if (void 0 !== _e4.msMatchesSelector) return _e4.msMatchesSelector(t);
        if (void 0 !== _e4.webkitMatchesSelector) return _e4.webkitMatchesSelector(t);
        if (void 0 !== _e4.mozMatchesSelector) return _e4.mozMatchesSelector(t);
        throw new Error("Browser lacks native selectors");
      }
    },
    kn = function kn(e) {
      return 1 !== e.nodeType && 9 !== e.nodeType && 11 !== e.nodeType || 0 === e.childElementCount;
    },
    En = function En(e, t) {
      return e.dom === t.dom;
    },
    Sn = function Sn(e, t) {
      var n = e.dom,
        o = t.dom;
      return n !== o && n.contains(o);
    },
    _n = function _n(e) {
      return yn(e.dom.ownerDocument);
    },
    Nn = function Nn(e) {
      return Gt(e) ? e : _n(e);
    },
    Rn = function Rn(e) {
      return yn(Nn(e).dom.defaultView);
    },
    An = function An(e) {
      return I.from(e.dom.parentNode).map(yn);
    },
    On = function On(e) {
      return I.from(e.dom.parentElement).map(yn);
    },
    Tn = function Tn(e, t) {
      var n = w(t) ? t : L;
      var o = e.dom;
      var r = [];
      for (; null !== o.parentNode && void 0 !== o.parentNode;) {
        var _e5 = o.parentNode,
          _t6 = yn(_e5);
        if (r.push(_t6), !0 === n(_t6)) break;
        o = _e5;
      }
      return r;
    },
    Bn = function Bn(e) {
      return I.from(e.dom.previousSibling).map(yn);
    },
    Dn = function Dn(e) {
      return I.from(e.dom.nextSibling).map(yn);
    },
    Pn = function Pn(e) {
      return oe(wn(e, Bn));
    },
    Ln = function Ln(e) {
      return wn(e, Dn);
    },
    Mn = function Mn(e) {
      return V(e.dom.childNodes, yn);
    },
    In = function In(e, t) {
      var n = e.dom.childNodes;
      return I.from(n[t]).map(yn);
    },
    Fn = function Fn(e) {
      return In(e, 0);
    },
    Un = function Un(e) {
      return In(e, e.dom.childNodes.length - 1);
    },
    zn = function zn(e) {
      return e.dom.childNodes.length;
    },
    jn = function jn(e) {
      return Yt(e) && C(e.dom.host);
    },
    Hn = w(Element.prototype.attachShadow) && w(Node.prototype.getRootNode),
    $n = N(Hn),
    Vn = Hn ? function (e) {
      return yn(e.dom.getRootNode());
    } : Nn,
    qn = function qn(e) {
      return jn(e) ? e : function (e) {
        var t = e.dom.head;
        if (null == t) throw new Error("Head is not available yet");
        return yn(t);
      }(Nn(e));
    },
    Wn = function Wn(e) {
      return yn(e.dom.host);
    },
    Kn = function Kn(e) {
      if ($n() && C(e.target)) {
        var _t7 = yn(e.target);
        if (Wt(_t7) && Gn(_t7) && e.composed && e.composedPath) {
          var _t8 = e.composedPath();
          if (_t8) return le(_t8);
        }
      }
      return I.from(e.target);
    },
    Gn = function Gn(e) {
      return C(e.dom.shadowRoot);
    },
    Yn = function Yn(e) {
      var t = Kt(e) ? e.dom.parentNode : e.dom;
      if (null == t || null === t.ownerDocument) return !1;
      var n = t.ownerDocument;
      return function (e) {
        var t = Vn(e);
        return jn(t) ? I.some(t) : I.none();
      }(yn(t)).fold(function () {
        return n.body.contains(t);
      }, _(Yn, Wn));
    };
  var Xn = function Xn(e, t, n, o, r) {
    return e(n, o) ? I.some(n) : w(r) && r(n) ? I.none() : t(n, o, r);
  };
  var Qn = function Qn(e, t, n) {
      var o = e.dom;
      var r = w(n) ? n : L;
      for (; o.parentNode;) {
        o = o.parentNode;
        var _e6 = yn(o);
        if (t(_e6)) return I.some(_e6);
        if (r(_e6)) break;
      }
      return I.none();
    },
    Jn = function Jn(e, t, n) {
      return Xn(function (e, t) {
        return t(e);
      }, Qn, e, t, n);
    },
    Zn = function Zn(e, t, n) {
      return Qn(e, function (e) {
        return xn(e, t);
      }, n);
    },
    eo = function eo(e, t) {
      return function (e, t) {
        var n = void 0 === t ? document : t.dom;
        return kn(n) ? I.none() : I.from(n.querySelector(e)).map(yn);
      }(t, e);
    },
    to = function to(e, t, n) {
      return Xn(function (e, t) {
        return xn(e, t);
      }, Zn, e, t, n);
    },
    no = function no(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
      return Yn(e) ? e.dom.isContentEditable : (n = e, to(n, "[contenteditable]")).fold(N(t), function (e) {
        return "true" === oo(e);
      });
      var n;
    },
    oo = function oo(e) {
      return e.dom.contentEditable;
    },
    ro = function ro(e) {
      return void 0 !== e.style && w(e.style.getPropertyValue);
    },
    so = function so(e, t, n) {
      if (!m(n)) throw console.error("Invalid call to CSS.set. Property ", t, ":: Value ", n, ":: Element ", e), new Error("CSS value must be a string: " + n);
      ro(e) && e.style.setProperty(t, n);
    },
    ao = function ao(e, t, n) {
      var o = e.dom;
      so(o, t, n);
    },
    io = function io(e, t) {
      var n = e.dom;
      ge(t, function (e, t) {
        so(n, t, e);
      });
    },
    lo = function lo(e, t) {
      var n = e.dom,
        o = window.getComputedStyle(n).getPropertyValue(t);
      return "" !== o || Yn(e) ? o : co(n, t);
    },
    co = function co(e, t) {
      return ro(e) ? e.style.getPropertyValue(t) : "";
    },
    uo = function uo(e, t) {
      var n = e.dom,
        o = co(n, t);
      return I.from(o).filter(function (e) {
        return e.length > 0;
      });
    },
    mo = function mo(e) {
      var t = {},
        n = e.dom;
      if (ro(n)) for (var _e7 = 0; _e7 < n.style.length; _e7++) {
        var _o21 = n.style.item(_e7);
        t[_o21] = n.style[_o21];
      }
      return t;
    },
    fo = function fo(e, t) {
      (function (e, t) {
        ro(e) && e.style.removeProperty(t);
      })(e.dom, t), Pt(tn(e, "style").map(qe), "") && on(e, "style");
    },
    go = function go(e, t) {
      An(e).each(function (n) {
        n.dom.insertBefore(t.dom, e.dom);
      });
    },
    po = function po(e, t) {
      Dn(e).fold(function () {
        An(e).each(function (e) {
          bo(e, t);
        });
      }, function (e) {
        go(e, t);
      });
    },
    ho = function ho(e, t) {
      Fn(e).fold(function () {
        bo(e, t);
      }, function (n) {
        e.dom.insertBefore(t.dom, n.dom);
      });
    },
    bo = function bo(e, t) {
      e.dom.appendChild(t.dom);
    },
    vo = function vo(e, t) {
      go(e, t), bo(t, e);
    },
    yo = function yo(e, t) {
      q(t, function (t) {
        bo(e, t);
      });
    },
    Co = function Co(e) {
      e.dom.textContent = "", q(Mn(e), function (e) {
        wo(e);
      });
    },
    wo = function wo(e) {
      var t = e.dom;
      null !== t.parentNode && t.parentNode.removeChild(t);
    },
    xo = function xo(e) {
      var t = Mn(e);
      var n, o;
      t.length > 0 && (n = e, q(o = t, function (e, t) {
        var r = 0 === t ? n : o[t - 1];
        po(r, e);
      })), wo(e);
    },
    ko = function ko(e) {
      return V(e, yn);
    },
    Eo = function Eo(e) {
      return e.dom.innerHTML;
    },
    So = function So(e, t) {
      var n = _n(e).dom,
        o = yn(n.createDocumentFragment()),
        r = function (e, t) {
          var n = (t || document).createElement("div");
          return n.innerHTML = e, Mn(yn(n));
        }(t, n);
      yo(o, r), Co(e), bo(e, o);
    },
    _o = function _o(e, t, n, o) {
      return function (e, t, n, o, r) {
        var s = function (e, t) {
          return function (n) {
            e(n) && t(function (e) {
              var t = yn(Kn(e).getOr(e.target)),
                n = function n() {
                  return e.stopPropagation();
                },
                o = function o() {
                  return e.preventDefault();
                },
                r = S(o, n);
              return function (e, t, n, o, r, s, a) {
                return {
                  target: e,
                  x: t,
                  y: n,
                  stop: o,
                  prevent: r,
                  kill: s,
                  raw: a
                };
              }(t, e.clientX, e.clientY, n, o, r, e);
            }(n));
          };
        }(n, o);
        return e.dom.addEventListener(t, s, false), {
          unbind: O(No, e, t, s, false)
        };
      }(e, t, n, o);
    },
    No = function No(e, t, n, o) {
      e.dom.removeEventListener(t, n, o);
    },
    Ro = function Ro(e, t) {
      return {
        left: e,
        top: t,
        translate: function translate(n, o) {
          return Ro(e + n, t + o);
        }
      };
    },
    Ao = Ro,
    Oo = function Oo(e, t) {
      return void 0 !== e ? e : void 0 !== t ? t : 0;
    },
    To = function To(e) {
      var t = e.dom,
        n = t.ownerDocument.body;
      return n === t ? Ao(n.offsetLeft, n.offsetTop) : Yn(e) ? function (e) {
        var t = e.getBoundingClientRect();
        return Ao(t.left, t.top);
      }(t) : Ao(0, 0);
    },
    Bo = function Bo(e) {
      var t = void 0 !== e ? e.dom : document,
        n = t.body.scrollLeft || t.documentElement.scrollLeft,
        o = t.body.scrollTop || t.documentElement.scrollTop;
      return Ao(n, o);
    },
    Do = function Do(e, t, n) {
      var o = (void 0 !== n ? n.dom : document).defaultView;
      o && o.scrollTo(e, t);
    },
    Po = function Po(e, t) {
      xt().browser.isSafari() && w(e.dom.scrollIntoViewIfNeeded) ? e.dom.scrollIntoViewIfNeeded(!1) : e.dom.scrollIntoView(t);
    },
    Lo = function Lo(e, t, n, o) {
      return {
        x: e,
        y: t,
        width: n,
        height: o,
        right: e + n,
        bottom: t + o
      };
    },
    Mo = function Mo(e) {
      var t = void 0 === e ? window : e,
        n = t.document,
        o = Bo(yn(n));
      return function (e) {
        var t = void 0 === e ? window : e;
        return xt().browser.isFirefox() ? I.none() : I.from(t.visualViewport);
      }(t).fold(function () {
        var e = t.document.documentElement,
          n = e.clientWidth,
          r = e.clientHeight;
        return Lo(o.left, o.top, n, r);
      }, function (e) {
        return Lo(Math.max(e.pageLeft, o.left), Math.max(e.pageTop, o.top), e.width, e.height);
      });
    },
    Io = function Io(e, t) {
      var n = [];
      return q(Mn(e), function (e) {
        t(e) && (n = n.concat([e])), n = n.concat(Io(e, t));
      }), n;
    },
    Fo = function Fo(e, t) {
      return function (e, t) {
        var n = void 0 === t ? document : t.dom;
        return kn(n) ? [] : V(n.querySelectorAll(e), yn);
      }(t, e);
    },
    Uo = function Uo(e, t, n) {
      return Zn(e, t, n).isSome();
    };
  var zo = /*#__PURE__*/function () {
    function zo(e, t) {
      _classCallCheck(this, zo);
      this.node = e, this.rootNode = t, this.current = this.current.bind(this), this.next = this.next.bind(this), this.prev = this.prev.bind(this), this.prev2 = this.prev2.bind(this);
    }
    _createClass(zo, [{
      key: "current",
      value: function current() {
        return this.node;
      }
    }, {
      key: "next",
      value: function next(e) {
        return this.node = this.findSibling(this.node, "firstChild", "nextSibling", e), this.node;
      }
    }, {
      key: "prev",
      value: function prev(e) {
        return this.node = this.findSibling(this.node, "lastChild", "previousSibling", e), this.node;
      }
    }, {
      key: "prev2",
      value: function prev2(e) {
        return this.node = this.findPreviousNode(this.node, e), this.node;
      }
    }, {
      key: "findSibling",
      value: function findSibling(e, t, n, o) {
        if (e) {
          if (!o && e[t]) return e[t];
          if (e !== this.rootNode) {
            var _t9 = e[n];
            if (_t9) return _t9;
            for (var _o22 = e.parentNode; _o22 && _o22 !== this.rootNode; _o22 = _o22.parentNode) if (_t9 = _o22[n], _t9) return _t9;
          }
        }
      }
    }, {
      key: "findPreviousNode",
      value: function findPreviousNode(e, t) {
        if (e) {
          var _n17 = e.previousSibling;
          if (this.rootNode && _n17 === this.rootNode) return;
          if (_n17) {
            if (!t) for (var _e8 = _n17.lastChild; _e8; _e8 = _e8.lastChild) if (!_e8.lastChild) return _e8;
            return _n17;
          }
          var _o23 = e.parentNode;
          if (_o23 && _o23 !== this.rootNode) return _o23;
        }
      }
    }]);
    return zo;
  }();
  var jo = function jo(e) {
      return function (t) {
        return !!t && t.nodeType === e;
      };
    },
    Ho = function Ho(e) {
      return !!e && !Object.getPrototypeOf(e);
    },
    $o = jo(1),
    Vo = function Vo(e) {
      var t = e.toLowerCase();
      return function (e) {
        return C(e) && e.nodeName.toLowerCase() === t;
      };
    },
    qo = function qo(e) {
      var t = e.map(function (e) {
        return e.toLowerCase();
      });
      return function (e) {
        if (e && e.nodeName) {
          var _n18 = e.nodeName.toLowerCase();
          return H(t, _n18);
        }
        return !1;
      };
    },
    Wo = function Wo(e, t) {
      var n = t.toLowerCase().split(" ");
      return function (t) {
        if ($o(t)) {
          var _o24 = t.ownerDocument.defaultView;
          if (_o24) for (var _r14 = 0; _r14 < n.length; _r14++) {
            var _s4 = _o24.getComputedStyle(t, null);
            if ((_s4 ? _s4.getPropertyValue(e) : null) === n[_r14]) return !0;
          }
        }
        return !1;
      };
    },
    Ko = function Ko(e) {
      return function (t) {
        return $o(t) && t.hasAttribute(e);
      };
    },
    Go = function Go(e) {
      return $o(e) && e.hasAttribute("data-mce-bogus");
    },
    Yo = function Yo(e) {
      return $o(e) && "TABLE" === e.tagName;
    },
    Xo = function Xo(e) {
      return function (t) {
        if ($o(t)) {
          if (t.contentEditable === e) return !0;
          if (t.getAttribute("data-mce-contenteditable") === e) return !0;
        }
        return !1;
      };
    },
    Qo = qo(["textarea", "input"]),
    Jo = jo(3),
    Zo = jo(4),
    er = jo(7),
    tr = jo(8),
    nr = jo(9),
    or = jo(11),
    rr = Vo("br"),
    sr = Vo("img"),
    ar = Xo("true"),
    ir = Xo("false"),
    lr = qo(["td", "th"]),
    dr = qo(["td", "th", "caption"]),
    cr = qo(["video", "audio", "object", "embed"]),
    ur = Vo("li"),
    mr = Vo("details"),
    fr = Vo("summary"),
    gr = "\uFEFF",
    pr = "\xa0",
    hr = function hr(e) {
      return e === gr;
    },
    br = function (e, t) {
      var n = function n(t) {
        return e(t) ? I.from(t.dom.nodeValue) : I.none();
      };
      return {
        get: function get(t) {
          if (!e(t)) throw new Error("Can only get text value of a text node");
          return n(t).getOr("");
        },
        getOption: n,
        set: function set(t, n) {
          if (!e(t)) throw new Error("Can only set raw text value of a text node");
          t.dom.nodeValue = n;
        }
      };
    }(Kt),
    vr = function vr(e) {
      return br.get(e);
    },
    yr = function yr(e) {
      return br.getOption(e);
    },
    Cr = ["pre"].concat(["h1", "h2", "h3", "h4", "h5", "h6"]),
    wr = function wr(e) {
      var t;
      return function (n) {
        return t = t || se(e, M), ke(t, Ht(n));
      };
    },
    xr = wr(["article", "aside", "details", "div", "dt", "figcaption", "footer", "form", "fieldset", "header", "hgroup", "html", "main", "nav", "section", "summary", "body", "p", "dl", "multicol", "dd", "figure", "address", "center", "blockquote", "h1", "h2", "h3", "h4", "h5", "h6", "listing", "xmp", "pre", "plaintext", "menu", "dir", "ul", "ol", "li", "hr", "table", "tbody", "thead", "tfoot", "th", "tr", "td", "caption"]),
    kr = function kr(e) {
      return Wt(e) && !xr(e);
    },
    Er = function Er(e) {
      return Wt(e) && "br" === Ht(e);
    },
    Sr = wr(["h1", "h2", "h3", "h4", "h5", "h6", "p", "div", "address", "pre", "form", "blockquote", "center", "dir", "fieldset", "header", "footer", "article", "section", "hgroup", "aside", "nav", "figure"]),
    _r = wr(["ul", "ol", "dl"]),
    Nr = wr(["li", "dd", "dt"]),
    Rr = wr(["thead", "tbody", "tfoot"]),
    Ar = wr(["td", "th"]),
    Or = wr(["pre", "script", "textarea", "style"]),
    Tr = wr(Cr),
    Br = function Br(e) {
      return Tr(e) || kr(e);
    },
    Dr = function Dr() {
      var e = bn("br");
      return Jt(e, "data-mce-bogus", "1"), e;
    },
    Pr = function Pr(e) {
      Co(e), bo(e, Dr());
    },
    Lr = function Lr(e) {
      Un(e).each(function (t) {
        Bn(t).each(function (n) {
          xr(e) && Er(t) && xr(n) && wo(t);
        });
      });
    },
    Mr = gr,
    Ir = hr,
    Fr = function Fr(e) {
      return e.replace(/\uFEFF/g, "");
    },
    Ur = $o,
    zr = Jo,
    jr = function jr(e) {
      return zr(e) && (e = e.parentNode), Ur(e) && e.hasAttribute("data-mce-caret");
    },
    Hr = function Hr(e) {
      return zr(e) && Ir(e.data);
    },
    $r = function $r(e) {
      return jr(e) || Hr(e);
    },
    Vr = function Vr(e) {
      return e.firstChild !== e.lastChild || !rr(e.firstChild);
    },
    qr = function qr(e) {
      var t = e.container();
      return !!Jo(t) && (t.data.charAt(e.offset()) === Mr || e.isAtStart() && Hr(t.previousSibling));
    },
    Wr = function Wr(e) {
      var t = e.container();
      return !!Jo(t) && (t.data.charAt(e.offset() - 1) === Mr || e.isAtEnd() && Hr(t.nextSibling));
    },
    Kr = function Kr(e) {
      return zr(e) && e.data[0] === Mr;
    },
    Gr = function Gr(e) {
      return zr(e) && e.data[e.data.length - 1] === Mr;
    },
    Yr = function Yr(e) {
      return e && e.hasAttribute("data-mce-caret") ? (function (e) {
        var t;
        var n = e.getElementsByTagName("br"),
          o = n[n.length - 1];
        Go(o) && (null === (t = o.parentNode) || void 0 === t || t.removeChild(o));
      }(e), e.removeAttribute("data-mce-caret"), e.removeAttribute("data-mce-bogus"), e.removeAttribute("style"), e.removeAttribute("data-mce-style"), e.removeAttribute("_moz_abspos"), e) : null;
    },
    Xr = function Xr(e) {
      return jr(e.startContainer);
    },
    Qr = ar,
    Jr = ir,
    Zr = rr,
    es = Jo,
    ts = qo(["script", "style", "textarea"]),
    ns = qo(["img", "input", "textarea", "hr", "iframe", "video", "audio", "object", "embed"]),
    os = qo(["table"]),
    rs = $r,
    ss = function ss(e) {
      return !rs(e) && (es(e) ? !ts(e.parentNode) : ns(e) || Zr(e) || os(e) || as(e));
    },
    as = function as(e) {
      return !function (e) {
        return $o(e) && "true" === e.getAttribute("unselectable");
      }(e) && Jr(e);
    },
    is = function is(e, t) {
      return ss(e) && function (e, t) {
        for (var _n19 = e.parentNode; _n19 && _n19 !== t; _n19 = _n19.parentNode) {
          if (as(_n19)) return !1;
          if (Qr(_n19)) return !0;
        }
        return !0;
      }(e, t);
    },
    ls = /^[ \t\r\n]*$/,
    ds = function ds(e) {
      return ls.test(e);
    },
    cs = function cs(e) {
      var _iterator = _createForOfIteratorHelper(e),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var _t10 = _step.value;
          if (!hr(_t10)) return !1;
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return !0;
    },
    us = function us(e) {
      return "\n" === e || "\r" === e;
    },
    ms = function ms(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 4;
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
      var r = function (e, t) {
          return t <= 0 ? "" : new Array(t + 1).join(" ");
        }(0, t),
        s = e.replace(/\t/g, r),
        a = X(s, function (e, t) {
          return function (e) {
            return -1 !== " \f\t\v".indexOf(e);
          }(t) || t === pr ? e.pcIsSpace || "" === e.str && n || e.str.length === s.length - 1 && o || function (e, t) {
            return t < e.length && t >= 0 && us(e[t]);
          }(s, e.str.length + 1) ? {
            pcIsSpace: !1,
            str: e.str + pr
          } : {
            pcIsSpace: !0,
            str: e.str + " "
          } : {
            pcIsSpace: us(t),
            str: e.str + t
          };
        }, {
          pcIsSpace: !1,
          str: ""
        });
      return a.str;
    },
    fs = function fs(e, t) {
      return ss(e) && !function (e, t) {
        return Jo(e) && ds(e.data) && !function (e, t) {
          var n = yn(t),
            o = yn(e);
          return Uo(o, "pre,code", O(En, n));
        }(e, t);
      }(e, t) || function (e) {
        return $o(e) && "A" === e.nodeName && !e.hasAttribute("href") && (e.hasAttribute("name") || e.hasAttribute("id"));
      }(e) || gs(e);
    },
    gs = Ko("data-mce-bookmark"),
    ps = Ko("data-mce-bogus"),
    hs = ("data-mce-bogus", "all", function (e) {
      return $o(e) && "all" === e.getAttribute("data-mce-bogus");
    });
  var bs = function bs(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
      return function (e, t) {
        var n = 0;
        if (fs(e, e)) return !1;
        {
          var _o25 = e.firstChild;
          if (!_o25) return !0;
          var _r15 = new zo(_o25, e);
          do {
            if (t) {
              if (hs(_o25)) {
                _o25 = _r15.next(!0);
                continue;
              }
              if (ps(_o25)) {
                _o25 = _r15.next();
                continue;
              }
            }
            if (rr(_o25)) n++, _o25 = _r15.next();else {
              if (fs(_o25, e)) return !1;
              _o25 = _r15.next();
            }
          } while (_o25);
          return n <= 1;
        }
      }(e.dom, t);
    },
    vs = "data-mce-block",
    ys = function ys(e) {
      return function (e) {
        return G(me(e), function (e) {
          return !/[A-Z]/.test(e);
        });
      }(e).join(",");
    },
    Cs = function Cs(e, t) {
      return C(t.querySelector(e)) ? (t.setAttribute(vs, "true"), "inline-boundary" === t.getAttribute("data-mce-selected") && t.removeAttribute("data-mce-selected"), !0) : (t.removeAttribute(vs), !1);
    },
    ws = function ws(e, t) {
      var n = ys(e.getTransparentElements()),
        o = ys(e.getBlockElements());
      return G(t.querySelectorAll(n), function (e) {
        return Cs(o, e);
      });
    },
    xs = function xs(e, t) {
      var n;
      var o = t ? "lastChild" : "firstChild";
      for (var _t11 = e[o]; _t11; _t11 = _t11[o]) if (bs(yn(_t11))) return void (null === (n = _t11.parentNode) || void 0 === n || n.removeChild(_t11));
    },
    ks = function ks(e, t, n) {
      var o = e.getBlockElements(),
        r = yn(t),
        s = function s(e) {
          return Ht(e) in o;
        },
        a = function a(e) {
          return En(e, r);
        };
      q(ko(n), function (t) {
        Qn(t, s, a).each(function (n) {
          var o = function (t, o) {
            return G(Mn(t), function (t) {
              return s(t) && !e.isValidChild(Ht(n), Ht(t));
            });
          }(t);
          if (o.length > 0) {
            var _t12 = On(n);
            q(o, function (e) {
              Qn(e, s, a).each(function (t) {
                (function (e, t) {
                  var n = document.createRange(),
                    o = e.parentNode;
                  if (o) {
                    n.setStartBefore(e), n.setEndBefore(t);
                    var _r16 = n.extractContents();
                    xs(_r16, !0), n.setStartAfter(t), n.setEndAfter(e);
                    var _s5 = n.extractContents();
                    xs(_s5, !1), bs(yn(_r16)) || o.insertBefore(_r16, e), bs(yn(t)) || o.insertBefore(t, e), bs(yn(_s5)) || o.insertBefore(_s5, e), o.removeChild(e);
                  }
                })(t.dom, e.dom);
              });
            }), _t12.each(function (t) {
              return ws(e, t.dom);
            });
          }
        });
      });
    },
    Es = function Es(e, t) {
      var n = ws(e, t);
      ks(e, t, n), function (e, t, n) {
        q([].concat(_toConsumableArray(n), _toConsumableArray(As(e, t) ? [t] : [])), function (t) {
          return q(Fo(yn(t), t.nodeName.toLowerCase()), function (t) {
            Os(e, t.dom) && xo(t);
          });
        });
      }(e, t, n);
    },
    Ss = function Ss(e, t) {
      if (Rs(e, t)) {
        var _n20 = ys(e.getBlockElements());
        Cs(_n20, t);
      }
    },
    _s = function _s(e) {
      return e.hasAttribute(vs);
    },
    Ns = function Ns(e, t) {
      return ke(e.getTransparentElements(), t);
    },
    Rs = function Rs(e, t) {
      return $o(t) && Ns(e, t.nodeName);
    },
    As = function As(e, t) {
      return Rs(e, t) && _s(t);
    },
    Os = function Os(e, t) {
      return Rs(e, t) && !_s(t);
    },
    Ts = function Ts(e, t) {
      return 1 === t.type && Ns(e, t.name) && m(t.attr(vs));
    },
    Bs = xt().browser,
    Ds = function Ds(e) {
      return J(e, Wt);
    },
    Ps = function Ps(e, t) {
      return e.children && H(e.children, t);
    },
    Ls = function Ls(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var n = 0;
      var o = {},
        r = yn(e),
        s = Nn(r),
        a = function a(e) {
          return new Promise(function (a, i) {
            var l;
            var d = Dt._addCacheSuffix(e),
              c = function (e) {
                return xe(o, e).getOrThunk(function () {
                  return {
                    id: "mce-u" + n++,
                    passed: [],
                    failed: [],
                    count: 0
                  };
                });
              }(d);
            o[d] = c, c.count++;
            var u = function u(e, t) {
                q(e, P), c.status = t, c.passed = [], c.failed = [], l && (l.onload = null, l.onerror = null, l = null);
              },
              m = function m() {
                return u(c.passed, 2);
              },
              f = function f() {
                return u(c.failed, 3);
              };
            if (a && c.passed.push(a), i && c.failed.push(i), 1 === c.status) return;
            if (2 === c.status) return void m();
            if (3 === c.status) return void f();
            c.status = 1;
            var g = bn("link", s.dom);
            var p;
            Zt(g, {
              rel: "stylesheet",
              type: "text/css",
              id: c.id
            }), t.contentCssCors && Jt(g, "crossOrigin", "anonymous"), t.referrerPolicy && Jt(g, "referrerpolicy", t.referrerPolicy), l = g.dom, l.onload = m, l.onerror = f, p = g, bo(qn(r), p), Jt(g, "href", d);
          });
        },
        i = function i(e) {
          var t = Dt._addCacheSuffix(e);
          xe(o, t).each(function (e) {
            0 == --e.count && (delete o[t], function (e) {
              var t = qn(r);
              eo(t, "#" + e).each(wo);
            }(e.id));
          });
        };
      return {
        load: a,
        loadAll: function loadAll(e) {
          return Promise.allSettled(V(e, function (e) {
            return a(e).then(N(e));
          })).then(function (e) {
            var t = K(e, function (e) {
              return "fulfilled" === e.status;
            });
            return t.fail.length > 0 ? Promise.reject(V(t.fail, function (e) {
              return e.reason;
            })) : V(t.pass, function (e) {
              return e.value;
            });
          });
        },
        unload: i,
        unloadAll: function unloadAll(e) {
          q(e, function (e) {
            i(e);
          });
        },
        _setReferrerPolicy: function _setReferrerPolicy(e) {
          t.referrerPolicy = e;
        },
        _setContentCssCors: function _setContentCssCors(e) {
          t.contentCssCors = e;
        }
      };
    },
    Ms = function () {
      var e = new WeakMap();
      return {
        forElement: function forElement(t, n) {
          var o = Vn(t).dom;
          return I.from(e.get(o)).getOrThunk(function () {
            var t = Ls(o, n);
            return e.set(o, t), t;
          });
        }
      };
    }(),
    Is = function Is(e, t) {
      return C(e) && (fs(e, t) || kr(yn(e)));
    },
    Fs = function Fs(e) {
      return function (e) {
        return "span" === e.nodeName.toLowerCase();
      }(e) && "bookmark" === e.getAttribute("data-mce-type");
    },
    Us = function Us(e, t, n) {
      var o;
      var r = n || t;
      if ($o(t) && Fs(t)) return t;
      var s = t.childNodes;
      for (var _t13 = s.length - 1; _t13 >= 0; _t13--) Us(e, s[_t13], r);
      if ($o(t)) {
        var _e9 = t.childNodes;
        1 === _e9.length && Fs(_e9[0]) && (null === (o = t.parentNode) || void 0 === o || o.insertBefore(_e9[0], t));
      }
      return function (e) {
        return or(e) || nr(e);
      }(t) || fs(t, r) || function (e) {
        return !!$o(e) && e.childNodes.length > 0;
      }(t) || function (e, t) {
        return Jo(e) && e.data.length > 0 && function (e, t) {
          var n = new zo(e, t).prev(!1),
            o = new zo(e, t).next(!1),
            r = v(n) || Is(n, t),
            s = v(o) || Is(o, t);
          return r && s;
        }(e, t);
      }(t, r) || e.remove(t), t;
    },
    zs = Dt.makeMap,
    js = /[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
    Hs = /[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
    $s = /[<>&\"\']/g,
    Vs = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi,
    qs = {
      128: "\u20AC",
      130: "\u201A",
      131: "\u0192",
      132: "\u201E",
      133: "\u2026",
      134: "\u2020",
      135: "\u2021",
      136: "\u02C6",
      137: "\u2030",
      138: "\u0160",
      139: "\u2039",
      140: "\u0152",
      142: "\u017D",
      145: "\u2018",
      146: "\u2019",
      147: "\u201C",
      148: "\u201D",
      149: "\u2022",
      150: "\u2013",
      151: "\u2014",
      152: "\u02DC",
      153: "\u2122",
      154: "\u0161",
      155: "\u203A",
      156: "\u0153",
      158: "\u017E",
      159: "\u0178"
    },
    Ws = {
      '"': "&quot;",
      "'": "&#39;",
      "<": "&lt;",
      ">": "&gt;",
      "&": "&amp;",
      "`": "&#96;"
    },
    Ks = {
      "&lt;": "<",
      "&gt;": ">",
      "&amp;": "&",
      "&quot;": '"',
      "&apos;": "'"
    },
    Gs = function Gs(e, t) {
      var n = {};
      if (e) {
        var _o26 = e.split(",");
        t = t || 10;
        for (var _e10 = 0; _e10 < _o26.length; _e10 += 2) {
          var _r17 = String.fromCharCode(parseInt(_o26[_e10], t));
          if (!Ws[_r17]) {
            var _t14 = "&" + _o26[_e10 + 1] + ";";
            n[_r17] = _t14, n[_t14] = _r17;
          }
        }
        return n;
      }
    },
    Ys = Gs("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro", 32),
    Xs = function Xs(e, t) {
      return e.replace(t ? js : Hs, function (e) {
        return Ws[e] || e;
      });
    },
    Qs = function Qs(e, t) {
      return e.replace(t ? js : Hs, function (e) {
        return e.length > 1 ? "&#" + (1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320) + 65536) + ";" : Ws[e] || "&#" + e.charCodeAt(0) + ";";
      });
    },
    Js = function Js(e, t, n) {
      var o = n || Ys;
      return e.replace(t ? js : Hs, function (e) {
        return Ws[e] || o[e] || e;
      });
    },
    Zs = {
      encodeRaw: Xs,
      encodeAllRaw: function encodeAllRaw(e) {
        return ("" + e).replace($s, function (e) {
          return Ws[e] || e;
        });
      },
      encodeNumeric: Qs,
      encodeNamed: Js,
      getEncodeFunc: function getEncodeFunc(e, t) {
        var n = Gs(t) || Ys,
          o = zs(e.replace(/\+/g, ","));
        return o.named && o.numeric ? function (e, t) {
          return e.replace(t ? js : Hs, function (e) {
            return void 0 !== Ws[e] ? Ws[e] : void 0 !== n[e] ? n[e] : e.length > 1 ? "&#" + (1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320) + 65536) + ";" : "&#" + e.charCodeAt(0) + ";";
          });
        } : o.named ? t ? function (e, t) {
          return Js(e, t, n);
        } : Js : o.numeric ? Qs : Xs;
      },
      decode: function decode(e) {
        return e.replace(Vs, function (e, t) {
          return t ? (t = "x" === t.charAt(0).toLowerCase() ? parseInt(t.substr(1), 16) : parseInt(t, 10)) > 65535 ? (t -= 65536, String.fromCharCode(55296 + (t >> 10), 56320 + (1023 & t))) : qs[t] || String.fromCharCode(t) : Ks[e] || Ys[e] || function (e) {
            var t = bn("div").dom;
            return t.innerHTML = e, t.textContent || t.innerText || e;
          }(e);
        });
      }
    },
    ea = function ea(e, t) {
      return (e = Dt.trim(e)) ? e.split(t || " ") : [];
    },
    ta = function ta(e) {
      return new RegExp("^" + e.replace(/([?+*])/g, ".$1") + "$");
    },
    na = {},
    oa = Dt.makeMap,
    ra = Dt.each,
    sa = Dt.extend,
    aa = Dt.explode,
    ia = function ia(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var n = oa(e, " ", oa(e.toUpperCase(), " "));
      return sa(n, t);
    },
    la = function la(e) {
      return ia("td th li dt dd figcaption caption details summary", e.getTextBlockElements());
    },
    da = function da(e, t) {
      if (e) {
        var _n21 = {};
        return m(e) && (e = {
          "*": e
        }), ra(e, function (e, o) {
          _n21[o] = _n21[o.toUpperCase()] = "map" === t ? oa(e, /[, ]/) : aa(e, /[, ]/);
        }), _n21;
      }
    },
    ca = function ca() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var t;
      var n = {},
        o = {};
      var r = [];
      var s = {},
        a = {},
        i = function i(t, n, o) {
          var r = e[t];
          if (r) return oa(r, /[, ]/, oa(r.toUpperCase(), /[, ]/));
          {
            var _e11 = na[t];
            return _e11 || (_e11 = ia(n, o), na[t] = _e11), _e11;
          }
        },
        l = null !== (t = e.schema) && void 0 !== t ? t : "html5",
        d = function (e) {
          var _ref = function (e) {
              var t, n, o, r;
              return t = "id accesskey class dir lang style tabindex title role", n = "address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul", o = "a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment", "html4" !== e && (t += " contenteditable contextmenu draggable dropzone hidden spellcheck translate", n += " article aside details dialog figure main header footer hgroup section nav a ins del canvas map", o += " audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"), "html5-strict" !== e && (t += " xml:lang", o = [o, "acronym applet basefont big font strike tt"].join(" "), n = [n, "center dir isindex noframes"].join(" "), r = [n, o].join(" ")), r = r || [n, o].join(" "), {
                globalAttributes: t,
                blockContent: n,
                phrasingContent: o,
                flowContent: r
              };
            }(e),
            t = _ref.globalAttributes,
            n = _ref.phrasingContent,
            o = _ref.flowContent,
            r = {},
            s = function s(e) {
              var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
              var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
              var s = ea(o),
                a = ea(e);
              var i = a.length;
              for (; i--;) {
                var _e12 = ea([t, n].join(" "));
                r[a[i]] = {
                  attributes: se(_e12, N({})),
                  attributesOrder: _e12,
                  children: se(s, N({}))
                };
              }
            },
            a = function a(e, t) {
              var n = ea(e),
                o = ea(t);
              var s = n.length;
              for (; s--;) {
                var _e13 = r[n[s]];
                for (var _t15 = 0, _n22 = o.length; _t15 < _n22; _t15++) _e13.attributes[o[_t15]] = {}, _e13.attributesOrder.push(o[_t15]);
              }
            };
          return "html5-strict" !== e && (q(ea("acronym applet basefont big font strike tt"), function (e) {
            s(e, "", n);
          }), q(ea("center dir isindex noframes"), function (e) {
            s(e, "", o);
          })), s("html", "manifest", "head body"), s("head", "", "base command link meta noscript script style title"), s("title hr noscript br"), s("base", "href target"), s("link", "href rel media hreflang type sizes hreflang"), s("meta", "name http-equiv content charset"), s("style", "media type scoped"), s("script", "src async defer type charset"), s("body", "onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload", o), s("dd div", "", o), s("address dt caption", "", "html4" === e ? n : o), s("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn", "", n), s("blockquote", "cite", o), s("ol", "reversed start type", "li"), s("ul", "", "li"), s("li", "value", o), s("dl", "", "dt dd"), s("a", "href target rel media hreflang type", "html4" === e ? n : o), s("q", "cite", n), s("ins del", "cite datetime", o), s("img", "src sizes srcset alt usemap ismap width height"), s("iframe", "src name width height", o), s("embed", "src type width height"), s("object", "data type typemustmatch name usemap form width height", [o, "param"].join(" ")), s("param", "name value"), s("map", "name", [o, "area"].join(" ")), s("area", "alt coords shape href target rel media hreflang type"), s("table", "border", "caption colgroup thead tfoot tbody tr" + ("html4" === e ? " col" : "")), s("colgroup", "span", "col"), s("col", "span"), s("tbody thead tfoot", "", "tr"), s("tr", "", "td th"), s("td", "colspan rowspan headers", o), s("th", "colspan rowspan headers scope abbr", o), s("form", "accept-charset action autocomplete enctype method name novalidate target", o), s("fieldset", "disabled form name", [o, "legend"].join(" ")), s("label", "form for", n), s("input", "accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"), s("button", "disabled form formaction formenctype formmethod formnovalidate formtarget name type value", "html4" === e ? o : n), s("select", "disabled form multiple name required size", "option optgroup"), s("optgroup", "disabled label", "option"), s("option", "disabled label selected value"), s("textarea", "cols dirname disabled form maxlength name readonly required rows wrap"), s("menu", "type label", [o, "li"].join(" ")), s("noscript", "", o), "html4" !== e && (s("wbr"), s("ruby", "", [n, "rt rp"].join(" ")), s("figcaption", "", o), s("mark rt rp summary bdi", "", n), s("canvas", "width height", o), s("video", "src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered", [o, "track source"].join(" ")), s("audio", "src crossorigin preload autoplay mediagroup loop muted controls buffered volume", [o, "track source"].join(" ")), s("picture", "", "img source"), s("source", "src srcset type media sizes"), s("track", "kind src srclang label default"), s("datalist", "", [n, "option"].join(" ")), s("article section nav aside main header footer", "", o), s("hgroup", "", "h1 h2 h3 h4 h5 h6"), s("figure", "", [o, "figcaption"].join(" ")), s("time", "datetime", n), s("dialog", "open", o), s("command", "type label icon disabled checked radiogroup command"), s("output", "for form name", n), s("progress", "value max", n), s("meter", "value min max low high optimum", n), s("details", "open", [o, "summary"].join(" ")), s("keygen", "autofocus challenge disabled form keytype name")), "html5-strict" !== e && (a("script", "language xml:space"), a("style", "xml:space"), a("object", "declare classid code codebase codetype archive standby align border hspace vspace"), a("embed", "align name hspace vspace"), a("param", "valuetype type"), a("a", "charset name rev shape coords"), a("br", "clear"), a("applet", "codebase archive code object alt name width height align hspace vspace"), a("img", "name longdesc align border hspace vspace"), a("iframe", "longdesc frameborder marginwidth marginheight scrolling align"), a("font basefont", "size color face"), a("input", "usemap align"), a("select"), a("textarea"), a("h1 h2 h3 h4 h5 h6 div p legend caption", "align"), a("ul", "type compact"), a("li", "type"), a("ol dl menu dir", "compact"), a("pre", "width xml:space"), a("hr", "align noshade size width"), a("isindex", "prompt"), a("table", "summary width frame rules cellspacing cellpadding align bgcolor"), a("col", "width align char charoff valign"), a("colgroup", "width align char charoff valign"), a("thead", "align char charoff valign"), a("tr", "align char charoff valign bgcolor"), a("th", "axis align char charoff valign nowrap bgcolor width height"), a("form", "accept"), a("td", "abbr axis scope align char charoff valign nowrap bgcolor width height"), a("tfoot", "align char charoff valign"), a("tbody", "align char charoff valign"), a("area", "nohref"), a("body", "background bgcolor text link vlink alink")), "html4" !== e && (a("input button select textarea", "autofocus"), a("input textarea", "placeholder"), a("a", "download"), a("link script img", "crossorigin"), a("img", "loading"), a("iframe", "sandbox seamless allow allowfullscreen loading")), "html4" !== e && q([r.video, r.audio], function (e) {
            delete e.children.audio, delete e.children.video;
          }), q(ea("a form meter progress dfn"), function (e) {
            r[e] && delete r[e].children[e];
          }), delete r.caption.children.table, delete r.script, r;
        }(l);
      !1 === e.verify_html && (e.valid_elements = "*[*]");
      var c = da(e.valid_styles),
        u = da(e.invalid_styles, "map"),
        m = da(e.valid_classes, "map"),
        f = i("whitespace_elements", "pre script noscript style textarea video audio iframe object code"),
        g = i("self_closing_elements", "colgroup dd dt li option p td tfoot th thead tr"),
        p = i("void_elements", "area base basefont br col frame hr img input isindex link meta param embed source wbr track"),
        h = i("boolean_attributes", "checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),
        b = "td th iframe video audio object script code",
        v = i("non_empty_elements", b + " pre", p),
        y = i("move_caret_before_on_enter_elements", b + " table", p),
        C = i("text_block_elements", "h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),
        w = i("block_elements", "hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary", C),
        x = i("text_inline_elements", "span strong b em i font s strike u var cite dfn code mark q sup sub samp"),
        k = i("transparent_elements", "a ins del canvas map");
      ra("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "), function (e) {
        a[e] = new RegExp("</" + e + "[^>]*>", "gi");
      });
      var E = function E(e) {
          var t = I.from(n["@"]),
            o = /[*?+]/;
          q(function (e, t) {
            var n = /^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;
            return te(ea(t, ","), function (t) {
              var o = n.exec(t);
              if (o) {
                var _t16 = o[1],
                  _n23 = o[2],
                  _r18 = o[3],
                  _s6 = o[4],
                  _a2 = o[5],
                  _i2 = {
                    attributes: {},
                    attributesOrder: []
                  };
                if (e.each(function (e) {
                  return function (e, t, _t$attributesOrder) {
                    ge(e.attributes, function (e, n) {
                      t.attributes[n] = e;
                    }), (_t$attributesOrder = t.attributesOrder).push.apply(_t$attributesOrder, _toConsumableArray(e.attributesOrder));
                  }(e, _i2);
                }), "#" === _t16 ? _i2.paddEmpty = !0 : "-" === _t16 && (_i2.removeEmpty = !0), "!" === _s6 && (_i2.removeEmptyAttrs = !0), _a2 && function (e, t) {
                  var n = /^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,
                    o = /[*?+]/,
                    r = t.attributes,
                    s = t.attributesOrder;
                  q(ea(e, "|"), function (e) {
                    var a = n.exec(e);
                    if (a) {
                      var _e14 = {},
                        _n24 = a[1],
                        _i3 = a[2].replace(/[\\:]:/g, ":"),
                        _l2 = a[3],
                        _d2 = a[4];
                      if ("!" === _n24 && (t.attributesRequired = t.attributesRequired || [], t.attributesRequired.push(_i3), _e14.required = !0), "-" === _n24) return delete r[_i3], void s.splice(Dt.inArray(s, _i3), 1);
                      if (_l2 && ("=" === _l2 ? (t.attributesDefault = t.attributesDefault || [], t.attributesDefault.push({
                        name: _i3,
                        value: _d2
                      }), _e14.defaultValue = _d2) : "~" === _l2 ? (t.attributesForced = t.attributesForced || [], t.attributesForced.push({
                        name: _i3,
                        value: _d2
                      }), _e14.forcedValue = _d2) : "<" === _l2 && (_e14.validValues = Dt.makeMap(_d2, "?"))), o.test(_i3)) {
                        var _n25 = _e14;
                        t.attributePatterns = t.attributePatterns || [], _n25.pattern = ta(_i3), t.attributePatterns.push(_n25);
                      } else r[_i3] || s.push(_i3), r[_i3] = _e14;
                    }
                  });
                }(_a2, _i2), _r18 && (_i2.outputName = _n23), "@" === _n23) {
                  if (!e.isNone()) return [];
                  e = I.some(_i2);
                }
                return [_r18 ? {
                  name: _n23,
                  element: _i2,
                  aliasName: _r18
                } : {
                  name: _n23,
                  element: _i2
                }];
              }
              return [];
            });
          }(t, null != e ? e : ""), function (_ref2) {
            var e = _ref2.name,
              t = _ref2.element,
              s = _ref2.aliasName;
            if (s && (n[s] = t), o.test(e)) {
              var _n26 = t;
              _n26.pattern = ta(e), r.push(_n26);
            } else n[e] = t;
          });
        },
        S = function S(e) {
          r = [], q(me(n), function (e) {
            delete n[e];
          }), E(e);
        },
        _ = function _(e) {
          delete na.text_block_elements, delete na.block_elements, q(function (e) {
            var t = /^(~)?(.+)$/;
            return te(ea(e, ","), function (e) {
              var n = t.exec(e);
              if (n) {
                var _e15 = "~" === n[1];
                return [{
                  inline: _e15,
                  cloneName: _e15 ? "span" : "div",
                  name: n[2]
                }];
              }
              return [];
            });
          }(null != e ? e : ""), function (_ref3) {
            var e = _ref3.inline,
              t = _ref3.name,
              r = _ref3.cloneName;
            if (o[t] = o[r], s[t] = r, v[t.toUpperCase()] = {}, v[t] = {}, e || (w[t.toUpperCase()] = {}, w[t] = {}), !n[t]) {
              var _e16 = n[r];
              _e16 = sa({}, _e16), delete _e16.removeEmptyAttrs, delete _e16.removeEmpty, n[t] = _e16;
            }
            ge(o, function (e, n) {
              e[r] && (o[n] = e = sa({}, o[n]), e[t] = e[r]);
            });
          });
        },
        R = function R(e) {
          q(function (e) {
            var t = /^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;
            return te(ea(e, ","), function (e) {
              var n = t.exec(e);
              if (n) {
                var _e17 = n[1],
                  _t17 = _e17 ? function (e) {
                    return "-" === e ? "remove" : "add";
                  }(_e17) : "replace";
                return [{
                  operation: _t17,
                  name: n[2],
                  validChildren: ea(n[3], "|")
                }];
              }
              return [];
            });
          }(null != e ? e : ""), function (_ref4) {
            var e = _ref4.operation,
              t = _ref4.name,
              n = _ref4.validChildren;
            var r = "replace" === e ? {
              "#comment": {}
            } : o[t];
            q(n, function (t) {
              "remove" === e ? delete r[t] : r[t] = {};
            }), o[t] = r;
          });
        },
        A = function A(e) {
          var t = n[e];
          if (t) return t;
          var o = r.length;
          for (; o--;) {
            var _t18 = r[o];
            if (_t18.pattern.test(e)) return _t18;
          }
        };
      e.valid_elements ? (S(e.valid_elements), ra(d, function (e, t) {
        o[t] = e.children;
      })) : (ra(d, function (e, t) {
        n[t] = {
          attributes: e.attributes,
          attributesOrder: e.attributesOrder
        }, o[t] = e.children;
      }), ra(ea("strong/b em/i"), function (e) {
        var t = ea(e, "/");
        n[t[1]].outputName = t[0];
      }), ra(x, function (t, o) {
        n[o] && (e.padd_empty_block_inline_children && (n[o].paddInEmptyBlock = !0), n[o].removeEmpty = !0);
      }), ra(ea("ol ul blockquote a table tbody"), function (e) {
        n[e] && (n[e].removeEmpty = !0);
      }), ra(ea("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"), function (e) {
        n[e] && (n[e].paddEmpty = !0);
      }), ra(ea("span"), function (e) {
        n[e].removeEmptyAttrs = !0;
      })), _(e.custom_elements), R(e.valid_children), E(e.extended_valid_elements), R("+ol[ul|ol],+ul[ul|ol]"), ra({
        dd: "dl",
        dt: "dl",
        li: "ul ol",
        td: "tr",
        th: "tr",
        tr: "tbody thead tfoot",
        tbody: "table",
        thead: "table",
        tfoot: "table",
        legend: "fieldset",
        area: "map",
        param: "video audio object"
      }, function (e, t) {
        n[t] && (n[t].parentsRequired = ea(e));
      }), e.invalid_elements && ra(aa(e.invalid_elements), function (e) {
        n[e] && delete n[e];
      }), A("span") || E("span[!data-mce-type|*]");
      var O = N(c),
        T = N(u),
        B = N(m),
        D = N(h),
        P = N(w),
        L = N(C),
        M = N(x),
        F = N(Object.seal(p)),
        U = N(g),
        z = N(v),
        j = N(y),
        H = N(f),
        $ = N(k),
        V = N(Object.seal(a)),
        W = N(s);
      return {
        type: l,
        children: o,
        elements: n,
        getValidStyles: O,
        getValidClasses: B,
        getBlockElements: P,
        getInvalidStyles: T,
        getVoidElements: F,
        getTextBlockElements: L,
        getTextInlineElements: M,
        getBoolAttrs: D,
        getElementRule: A,
        getSelfClosingElements: U,
        getNonEmptyElements: z,
        getMoveCaretBeforeOnEnterElements: j,
        getWhitespaceElements: H,
        getTransparentElements: $,
        getSpecialElements: V,
        isValidChild: function isValidChild(e, t) {
          var n = o[e.toLowerCase()];
          return !(!n || !n[t.toLowerCase()]);
        },
        isValid: function isValid(e, t) {
          var n = A(e);
          if (n) {
            if (!t) return !0;
            {
              if (n.attributes[t]) return !0;
              var _e18 = n.attributePatterns;
              if (_e18) {
                var _n27 = _e18.length;
                for (; _n27--;) if (_e18[_n27].pattern.test(t)) return !0;
              }
            }
          }
          return !1;
        },
        getCustomElements: W,
        addValidElements: E,
        setValidElements: S,
        addCustomElements: _,
        addValidChildren: R
      };
    },
    ua = function ua() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var t = arguments.length > 1 ? arguments[1] : undefined;
      var n = /(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,
        o = /\s*([^:]+):\s*([^;]+);?/g,
        r = /\s+$/,
        s = {};
      var a, i;
      var l = gr;
      t && (a = t.getValidStyles(), i = t.getInvalidStyles());
      var d = "\\\" \\' \\; \\: ; : \uFEFF".split(" ");
      for (var _e19 = 0; _e19 < d.length; _e19++) s[d[_e19]] = l + _e19, s[l + _e19] = d[_e19];
      var c = {
        parse: function parse(t) {
          var a = {};
          var i = !1;
          var d = e.url_converter,
            u = e.url_converter_scope || c,
            m = function m(e, t, n) {
              var o = a[e + "-top" + t];
              if (!o) return;
              var r = a[e + "-right" + t];
              if (!r) return;
              var s = a[e + "-bottom" + t];
              if (!s) return;
              var i = a[e + "-left" + t];
              if (!i) return;
              var l = [o, r, s, i];
              var d = l.length - 1;
              for (; d-- && l[d] === l[d + 1];);
              d > -1 && n || (a[e + t] = -1 === d ? l[0] : l.join(" "), delete a[e + "-top" + t], delete a[e + "-right" + t], delete a[e + "-bottom" + t], delete a[e + "-left" + t]);
            },
            f = function f(e) {
              var t = a[e];
              if (!t) return;
              var n = t.indexOf(",") > -1 ? [t] : t.split(" ");
              var o = n.length;
              for (; o--;) if (n[o] !== n[0]) return !1;
              return a[e] = n[0], !0;
            },
            g = function g(e) {
              return i = !0, s[e];
            },
            p = function p(e, t) {
              return i && (e = e.replace(/\uFEFF[0-9]/g, function (e) {
                return s[e];
              })), t || (e = e.replace(/\\([\'\";:])/g, "$1")), e;
            },
            h = function h(e) {
              return String.fromCharCode(parseInt(e.slice(1), 16));
            },
            b = function b(e) {
              return e.replace(/\\[0-9a-f]+/gi, h);
            },
            v = function v(t, n, o, r, s, a) {
              if (s = s || a) return "'" + (s = p(s)).replace(/\'/g, "\\'") + "'";
              if (n = p(n || o || r || ""), !e.allow_script_urls) {
                var _t19 = n.replace(/[\s\r\n]+/g, "");
                if (/(java|vb)script:/i.test(_t19)) return "";
                if (!e.allow_svg_data_urls && /^data:image\/svg/i.test(_t19)) return "";
              }
              return d && (n = d.call(u, n, "style")), "url('" + n.replace(/\'/g, "\\'") + "')";
            };
          if (t) {
            var _s7;
            for (t = (t = t.replace(/[\u0000-\u001F]/g, "")).replace(/\\[\"\';:\uFEFF]/g, g).replace(/\"[^\"]+\"|\'[^\']+\'/g, function (e) {
              return e.replace(/[;:]/g, g);
            }); _s7 = o.exec(t);) {
              o.lastIndex = _s7.index + _s7[0].length;
              var _t20 = _s7[1].replace(r, "").toLowerCase(),
                _d3 = _s7[2].replace(r, "");
              if (_t20 && _d3) {
                if (_t20 = b(_t20), _d3 = b(_d3), -1 !== _t20.indexOf(l) || -1 !== _t20.indexOf('"')) continue;
                if (!e.allow_script_urls && ("behavior" === _t20 || /expression\s*\(|\/\*|\*\//.test(_d3))) continue;
                "font-weight" === _t20 && "700" === _d3 ? _d3 = "bold" : "color" !== _t20 && "background-color" !== _t20 || (_d3 = _d3.toLowerCase()), _d3 = _d3.replace(n, v), a[_t20] = i ? p(_d3, !0) : _d3;
              }
            }
            m("border", "", !0), m("border", "-width"), m("border", "-color"), m("border", "-style"), m("padding", ""), m("margin", ""), "border", C = "border-style", w = "border-color", f(y = "border-width") && f(C) && f(w) && (a.border = a[y] + " " + a[C] + " " + a[w], delete a[y], delete a[C], delete a[w]), "medium none" === a.border && delete a.border, "none" === a["border-image"] && delete a["border-image"];
          }
          var y, C, w;
          return a;
        },
        serialize: function serialize(e, t) {
          var n = "";
          var o = function o(t, _o29) {
            var r = _o29[t];
            if (r) for (var _t21 = 0, _o27 = r.length; _t21 < _o27; _t21++) {
              var _o28 = r[_t21],
                _s8 = e[_o28];
              _s8 && (n += (n.length > 0 ? " " : "") + _o28 + ": " + _s8 + ";");
            }
          };
          return t && a ? (o("*", a), o(t, a)) : ge(e, function (e, o) {
            e && function (e, t) {
              if (!i || !t) return !0;
              var n = i["*"];
              return !(n && n[e] || (n = i[t], n && n[e]));
            }(o, t) && (n += (n.length > 0 ? " " : "") + o + ": " + e + ";");
          }), n;
        }
      };
      return c;
    },
    ma = {
      keyLocation: !0,
      layerX: !0,
      layerY: !0,
      returnValue: !0,
      webkitMovementX: !0,
      webkitMovementY: !0,
      keyIdentifier: !0,
      mozPressure: !0
    },
    fa = function fa(e, t) {
      var n = null != t ? t : {};
      for (var _t22 in e) ke(ma, _t22) || (n[_t22] = e[_t22]);
      return C(e.composedPath) && (n.composedPath = function () {
        return e.composedPath();
      }), n;
    },
    ga = function ga(e, t, n, o) {
      var r;
      var s = fa(t, o);
      return s.type = e, y(s.target) && (s.target = null !== (r = s.srcElement) && void 0 !== r ? r : n), function (e) {
        return y(e.preventDefault) || function (e) {
          return e instanceof Event || w(e.initEvent);
        }(e);
      }(t) && (s.preventDefault = function () {
        s.defaultPrevented = !0, s.isDefaultPrevented = M, w(t.preventDefault) && t.preventDefault();
      }, s.stopPropagation = function () {
        s.cancelBubble = !0, s.isPropagationStopped = M, w(t.stopPropagation) && t.stopPropagation();
      }, s.stopImmediatePropagation = function () {
        s.isImmediatePropagationStopped = M, s.stopPropagation();
      }, function (e) {
        return e.isDefaultPrevented === M || e.isDefaultPrevented === L;
      }(s) || (s.isDefaultPrevented = !0 === s.defaultPrevented ? M : L, s.isPropagationStopped = !0 === s.cancelBubble ? M : L, s.isImmediatePropagationStopped = L)), s;
    },
    pa = /^(?:mouse|contextmenu)|click/,
    ha = function ha(e, t, n, o) {
      e.addEventListener(t, n, o || !1);
    },
    ba = function ba(e, t, n, o) {
      e.removeEventListener(t, n, o || !1);
    },
    va = function va(e, t) {
      var n = ga(e.type, e, document, t);
      if (function (e) {
        return C(e) && pa.test(e.type);
      }(e) && v(e.pageX) && !v(e.clientX)) {
        var _t23 = n.target.ownerDocument || document,
          _o30 = _t23.documentElement,
          _r19 = _t23.body,
          _s9 = n;
        _s9.pageX = e.clientX + (_o30 && _o30.scrollLeft || _r19 && _r19.scrollLeft || 0) - (_o30 && _o30.clientLeft || _r19 && _r19.clientLeft || 0), _s9.pageY = e.clientY + (_o30 && _o30.scrollTop || _r19 && _r19.scrollTop || 0) - (_o30 && _o30.clientTop || _r19 && _r19.clientTop || 0);
      }
      return n;
    },
    ya = function ya(e, t, n) {
      var o = e.document,
        r = {
          type: "ready"
        };
      if (n.domLoaded) return void t(r);
      var s = function s() {
        ba(e, "DOMContentLoaded", s), ba(e, "load", s), n.domLoaded || (n.domLoaded = !0, t(r)), e = null;
      };
      "complete" === o.readyState || "interactive" === o.readyState && o.body ? s() : ha(e, "DOMContentLoaded", s), n.domLoaded || ha(e, "load", s);
    };
  var Ca = /*#__PURE__*/function () {
    function Ca() {
      _classCallCheck(this, Ca);
      this.domLoaded = !1, this.events = {}, this.count = 1, this.expando = "mce-data-" + (+new Date()).toString(32), this.hasFocusIn = "onfocusin" in document.documentElement, this.count = 1;
    }
    _createClass(Ca, [{
      key: "bind",
      value: function bind(e, t, n, o) {
        var r = this;
        var s;
        var a = window,
          i = function i(e) {
            r.executeHandlers(va(e || a.event), l);
          };
        if (!e || Jo(e) || tr(e)) return n;
        var l;
        e[r.expando] ? l = e[r.expando] : (l = r.count++, e[r.expando] = l, r.events[l] = {}), o = o || e;
        var d = t.split(" ");
        var c = d.length;
        for (; c--;) {
          var _t24 = d[c],
            _u2 = i,
            _m2 = !1,
            _f2 = !1;
          "DOMContentLoaded" === _t24 && (_t24 = "ready"), r.domLoaded && "ready" === _t24 && "complete" === e.readyState ? n.call(o, va({
            type: _t24
          })) : (r.hasFocusIn || "focusin" !== _t24 && "focusout" !== _t24 || (_m2 = !0, _f2 = "focusin" === _t24 ? "focus" : "blur", _u2 = function _u2(e) {
            var t = va(e || a.event);
            t.type = "focus" === t.type ? "focusin" : "focusout", r.executeHandlers(t, l);
          }), s = r.events[l][_t24], s ? "ready" === _t24 && r.domLoaded ? n(va({
            type: _t24
          })) : s.push({
            func: n,
            scope: o
          }) : (r.events[l][_t24] = s = [{
            func: n,
            scope: o
          }], s.fakeName = _f2, s.capture = _m2, s.nativeHandler = _u2, "ready" === _t24 ? ya(e, _u2, r) : ha(e, _f2 || _t24, _u2, _m2)));
        }
        return e = s = null, n;
      }
    }, {
      key: "unbind",
      value: function unbind(e, t, n) {
        if (!e || Jo(e) || tr(e)) return this;
        var o = e[this.expando];
        if (o) {
          var _r20 = this.events[o];
          if (t) {
            var _o31 = t.split(" ");
            var _s10 = _o31.length;
            for (; _s10--;) {
              var _t25 = _o31[_s10],
                _a3 = _r20[_t25];
              if (_a3) {
                if (n) {
                  var _e20 = _a3.length;
                  for (; _e20--;) if (_a3[_e20].func === n) {
                    var _n28 = _a3.nativeHandler,
                      _o32 = _a3.fakeName,
                      _s11 = _a3.capture,
                      _i4 = _a3.slice(0, _e20).concat(_a3.slice(_e20 + 1));
                    _i4.nativeHandler = _n28, _i4.fakeName = _o32, _i4.capture = _s11, _r20[_t25] = _i4;
                  }
                }
                n && 0 !== _a3.length || (delete _r20[_t25], ba(e, _a3.fakeName || _t25, _a3.nativeHandler, _a3.capture));
              }
            }
          } else ge(_r20, function (t, n) {
            ba(e, t.fakeName || n, t.nativeHandler, t.capture);
          }), _r20 = {};
          for (var _e21 in _r20) if (ke(_r20, _e21)) return this;
          delete this.events[o];
          try {
            delete e[this.expando];
          } catch (t) {
            e[this.expando] = null;
          }
        }
        return this;
      }
    }, {
      key: "fire",
      value: function fire(e, t, n) {
        return this.dispatch(e, t, n);
      }
    }, {
      key: "dispatch",
      value: function dispatch(e, t, n) {
        if (!e || Jo(e) || tr(e)) return this;
        var o = va({
          type: t,
          target: e
        }, n);
        do {
          var _t26 = e[this.expando];
          _t26 && this.executeHandlers(o, _t26), e = e.parentNode || e.ownerDocument || e.defaultView || e.parentWindow;
        } while (e && !o.isPropagationStopped());
        return this;
      }
    }, {
      key: "clean",
      value: function clean(e) {
        if (!e || Jo(e) || tr(e)) return this;
        if (e[this.expando] && this.unbind(e), e.getElementsByTagName || (e = e.document), e && e.getElementsByTagName) {
          this.unbind(e);
          var _t27 = e.getElementsByTagName("*");
          var _n29 = _t27.length;
          for (; _n29--;) (e = _t27[_n29])[this.expando] && this.unbind(e);
        }
        return this;
      }
    }, {
      key: "destroy",
      value: function destroy() {
        this.events = {};
      }
    }, {
      key: "cancel",
      value: function cancel(e) {
        return e && (e.preventDefault(), e.stopImmediatePropagation()), !1;
      }
    }, {
      key: "executeHandlers",
      value: function executeHandlers(e, t) {
        var n = this.events[t],
          o = n && n[e.type];
        if (o) for (var _t28 = 0, _n30 = o.length; _t28 < _n30; _t28++) {
          var _n31 = o[_t28];
          if (_n31 && !1 === _n31.func.call(_n31.scope, e) && e.preventDefault(), e.isImmediatePropagationStopped()) return;
        }
      }
    }]);
    return Ca;
  }();
  Ca.Event = new Ca();
  var wa = Dt.each,
    xa = Dt.grep,
    ka = "data-mce-style",
    Ea = Dt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom", " "),
    Sa = function Sa(e, t, n) {
      y(n) || "" === n ? on(e, t) : Jt(e, t, n);
    },
    _a = function _a(e) {
      return e.replace(/[A-Z]/g, function (e) {
        return "-" + e.toLowerCase();
      });
    },
    Na = function Na(e, t) {
      var n = 0;
      if (e) for (var _o33 = e.nodeType, _r21 = e.previousSibling; _r21; _r21 = _r21.previousSibling) {
        var _e22 = _r21.nodeType;
        (!t || !Jo(_r21) || _e22 !== _o33 && _r21.data.length) && (n++, _o33 = _e22);
      }
      return n;
    },
    Ra = function Ra(e, t) {
      var n = en(t, "style"),
        o = e.serialize(e.parse(n), Ht(t));
      Sa(t, ka, o);
    },
    Aa = function Aa(e, t, n) {
      var o = _a(t);
      y(n) || "" === n ? fo(e, o) : ao(e, o, function (e, t) {
        return x(e) ? ke(Ea, t) ? e + "" : e + "px" : e;
      }(n, o));
    },
    Oa = function Oa(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var n = {},
        o = window,
        r = {};
      var s = 0;
      var a = Ms.forElement(yn(e), {
          contentCssCors: t.contentCssCors,
          referrerPolicy: t.referrerPolicy
        }),
        i = [],
        l = t.schema ? t.schema : ca({}),
        d = ua({
          url_converter: t.url_converter,
          url_converter_scope: t.url_converter_scope
        }, t.schema),
        c = t.ownEvents ? new Ca() : Ca.Event,
        u = l.getBlockElements(),
        f = function f(t) {
          return t && e && m(t) ? e.getElementById(t) : t;
        },
        g = function g(e) {
          var t = f(e);
          return C(t) ? yn(t) : null;
        },
        h = function h(e, t) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
          var o;
          var r = g(e);
          if (C(r) && Wt(r)) {
            var _e23 = Y[t];
            o = _e23 && _e23.get ? _e23.get(r.dom, t) : en(r, t);
          }
          return C(o) ? o : n;
        },
        b = function b(e) {
          var t = f(e);
          return y(t) ? [] : t.attributes;
        },
        v = function v(e, n, o) {
          T(e, function (e) {
            if ($o(e)) {
              var _r22 = yn(e),
                _s12 = "" === o ? null : o,
                _a4 = en(_r22, n),
                _i5 = Y[n];
              _i5 && _i5.set ? _i5.set(_r22.dom, _s12, n) : Sa(_r22, n, _s12), _a4 !== _s12 && t.onSetAttrib && t.onSetAttrib({
                attrElm: _r22.dom,
                attrName: n,
                attrValue: _s12
              });
            }
          });
        },
        x = function x() {
          return t.root_element || e.body;
        },
        k = function k(t, n) {
          return function (e, t, n) {
            var o = 0,
              r = 0;
            var s = e.ownerDocument;
            if (n = n || e, t) {
              if (n === e && t.getBoundingClientRect && "static" === lo(yn(e), "position")) {
                var _n32 = t.getBoundingClientRect();
                return o = _n32.left + (s.documentElement.scrollLeft || e.scrollLeft) - s.documentElement.clientLeft, r = _n32.top + (s.documentElement.scrollTop || e.scrollTop) - s.documentElement.clientTop, {
                  x: o,
                  y: r
                };
              }
              var _a5 = t;
              for (; _a5 && _a5 !== n && _a5.nodeType && !Ps(_a5, n);) {
                var _e24 = _a5;
                o += _e24.offsetLeft || 0, r += _e24.offsetTop || 0, _a5 = _e24.offsetParent;
              }
              for (_a5 = t.parentNode; _a5 && _a5 !== n && _a5.nodeType && !Ps(_a5, n);) o -= _a5.scrollLeft || 0, r -= _a5.scrollTop || 0, _a5 = _a5.parentNode;
              r += function (e) {
                return Bs.isFirefox() && "table" === Ht(e) ? Ds(Mn(e)).filter(function (e) {
                  return "caption" === Ht(e);
                }).bind(function (e) {
                  return Ds(Ln(e)).map(function (t) {
                    var n = t.dom.offsetTop,
                      o = e.dom.offsetTop,
                      r = e.dom.offsetHeight;
                    return n <= o ? -r : 0;
                  });
                }).getOr(0) : 0;
              }(yn(t));
            }
            return {
              x: o,
              y: r
            };
          }(e.body, f(t), n);
        },
        S = function S(e, t, n) {
          var o = f(e);
          if (!y(o) && $o(o)) return n ? lo(yn(o), _a(t)) : ("float" === (t = t.replace(/-(\D)/g, function (e, t) {
            return t.toUpperCase();
          })) && (t = "cssFloat"), o.style ? o.style[t] : void 0);
        },
        _ = function _(e) {
          var t = f(e);
          if (!t) return {
            w: 0,
            h: 0
          };
          var n = S(t, "width"),
            o = S(t, "height");
          return n && -1 !== n.indexOf("px") || (n = "0"), o && -1 !== o.indexOf("px") || (o = "0"), {
            w: parseInt(n, 10) || t.offsetWidth || t.clientWidth,
            h: parseInt(o, 10) || t.offsetHeight || t.clientHeight
          };
        },
        R = function R(e, t) {
          if (!e) return !1;
          var n = p(e) ? e : [e];
          return $(n, function (e) {
            return xn(yn(e), t);
          });
        },
        A = function A(e, t, n, o) {
          var r = [];
          var s = f(e);
          o = void 0 === o;
          var a = n || ("BODY" !== x().nodeName ? x().parentNode : null);
          if (m(t)) if ("*" === t) t = $o;else {
            var _e25 = t;
            t = function t(_t29) {
              return R(_t29, _e25);
            };
          }
          for (; s && !(s === a || y(s.nodeType) || nr(s) || or(s));) {
            if (!t || t(s)) {
              if (!o) return [s];
              r.push(s);
            }
            s = s.parentNode;
          }
          return o ? r : null;
        },
        O = function O(e, t, n) {
          var o = t;
          if (e) {
            m(t) && (o = function o(e) {
              return R(e, t);
            });
            for (var _t30 = e[n]; _t30; _t30 = _t30[n]) if (w(o) && o(_t30)) return _t30;
          }
          return null;
        },
        T = function T(e, t, n) {
          var o = null != n ? n : this;
          if (p(e)) {
            var _n33 = [];
            return wa(e, function (e, r) {
              var s = f(e);
              s && _n33.push(t.call(o, s, r));
            }), _n33;
          }
          {
            var _n34 = f(e);
            return !!_n34 && t.call(o, _n34);
          }
        },
        B = function B(e, t) {
          T(e, function (e) {
            ge(t, function (t, n) {
              v(e, n, t);
            });
          });
        },
        D = function D(e, t) {
          T(e, function (e) {
            var n = yn(e);
            So(n, t);
          });
        },
        P = function P(t, n, o, r, s) {
          return T(t, function (t) {
            var a = m(n) ? e.createElement(n) : n;
            return C(o) && B(a, o), r && (!m(r) && r.nodeType ? a.appendChild(r) : m(r) && D(a, r)), s ? a : t.appendChild(a);
          });
        },
        L = function L(t, n, o) {
          return P(e.createElement(t), t, n, o, !0);
        },
        M = Zs.encodeAllRaw,
        I = function I(e, t) {
          return T(e, function (e) {
            var n = yn(e);
            return t && q(Mn(n), function (e) {
              Kt(e) && 0 === e.dom.length ? wo(e) : go(n, e);
            }), wo(n), n.dom;
          });
        },
        F = function F(e, t, n) {
          T(e, function (e) {
            if ($o(e)) {
              var _o34 = yn(e),
                _r23 = t.split(" ");
              q(_r23, function (e) {
                C(n) ? (n ? un : fn)(_o34, e) : function (e, t) {
                  var n = an(e) ? e.dom.classList.toggle(t) : function (e, t) {
                    return H(ln(e), t) ? cn(e, t) : dn(e, t);
                  }(e, t);
                  mn(e);
                }(_o34, e);
              });
            }
          });
        },
        U = function U(e, t, n) {
          return T(t, function (o) {
            var r;
            var s = p(t) ? e.cloneNode(!0) : e;
            return n && wa(xa(o.childNodes), function (e) {
              s.appendChild(e);
            }), null === (r = o.parentNode) || void 0 === r || r.replaceChild(s, o), o;
          });
        },
        z = function z(e) {
          if ($o(e)) {
            var _t31 = "a" === e.nodeName.toLowerCase() && !h(e, "href") && h(e, "id");
            if (h(e, "name") || h(e, "data-mce-bookmark") || _t31) return !0;
          }
          return !1;
        },
        j = function j() {
          return e.createRange();
        },
        V = function V(n, r, s, a) {
          if (p(n)) {
            var _e26 = n.length;
            var _t32 = [];
            for (; _e26--;) _t32[_e26] = V(n[_e26], r, s, a);
            return _t32;
          }
          return !t.collect || n !== e && n !== o || i.push([n, r, s, a]), c.bind(n, r, s, a || G);
        },
        W = function W(t, n, r) {
          if (p(t)) {
            var _e27 = t.length;
            var _o35 = [];
            for (; _e27--;) _o35[_e27] = W(t[_e27], n, r);
            return _o35;
          }
          if (i.length > 0 && (t === e || t === o)) {
            var _e28 = i.length;
            for (; _e28--;) {
              var _i$_e = _slicedToArray(i[_e28], 3),
                _o36 = _i$_e[0],
                _s13 = _i$_e[1],
                _a6 = _i$_e[2];
              t !== _o36 || n && n !== _s13 || r && r !== _a6 || c.unbind(_o36, _s13, _a6);
            }
          }
          return c.unbind(t, n, r);
        },
        K = function K(e) {
          if (e && $o(e)) {
            var _t33 = e.getAttribute("data-mce-contenteditable");
            return _t33 && "inherit" !== _t33 ? _t33 : "inherit" !== e.contentEditable ? e.contentEditable : null;
          }
          return null;
        },
        G = {
          doc: e,
          settings: t,
          win: o,
          files: r,
          stdMode: !0,
          boxModel: !0,
          styleSheetLoader: a,
          boundEvents: i,
          styles: d,
          schema: l,
          events: c,
          isBlock: function isBlock(e) {
            return m(e) ? ke(u, e) : $o(e) && (ke(u, e.nodeName) || As(l, e));
          },
          root: null,
          clone: function clone(e, t) {
            return e.cloneNode(t);
          },
          getRoot: x,
          getViewPort: function getViewPort(e) {
            var t = Mo(e);
            return {
              x: t.x,
              y: t.y,
              w: t.width,
              h: t.height
            };
          },
          getRect: function getRect(e) {
            var t = f(e),
              n = k(t),
              o = _(t);
            return {
              x: n.x,
              y: n.y,
              w: o.w,
              h: o.h
            };
          },
          getSize: _,
          getParent: function getParent(e, t, n) {
            var o = A(e, t, n, !1);
            return o && o.length > 0 ? o[0] : null;
          },
          getParents: A,
          get: f,
          getNext: function getNext(e, t) {
            return O(e, t, "nextSibling");
          },
          getPrev: function getPrev(e, t) {
            return O(e, t, "previousSibling");
          },
          select: function select(n, o) {
            var r, s;
            var a = null !== (s = null !== (r = f(o)) && void 0 !== r ? r : t.root_element) && void 0 !== s ? s : e;
            return w(a.querySelectorAll) ? ce(a.querySelectorAll(n)) : [];
          },
          is: R,
          add: P,
          create: L,
          createHTML: function createHTML(e, t) {
            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
            var o = "<" + e;
            for (var _e29 in t) Ee(t, _e29) && (o += " " + _e29 + '="' + M(t[_e29]) + '"');
            return Ye(n) && ke(l.getVoidElements(), e) ? o + " />" : o + ">" + n + "</" + e + ">";
          },
          createFragment: function createFragment(t) {
            var n = e.createElement("div"),
              o = e.createDocumentFragment();
            var r;
            for (o.appendChild(n), t && (n.innerHTML = t); r = n.firstChild;) o.appendChild(r);
            return o.removeChild(n), o;
          },
          remove: I,
          setStyle: function setStyle(e, n, o) {
            T(e, function (e) {
              var r = yn(e);
              Aa(r, n, o), t.update_styles && Ra(d, r);
            });
          },
          getStyle: S,
          setStyles: function setStyles(e, n) {
            T(e, function (e) {
              var o = yn(e);
              ge(n, function (e, t) {
                Aa(o, t, e);
              }), t.update_styles && Ra(d, o);
            });
          },
          removeAllAttribs: function removeAllAttribs(e) {
            return T(e, function (e) {
              var t = e.attributes;
              for (var _n35 = t.length - 1; _n35 >= 0; _n35--) e.removeAttributeNode(t.item(_n35));
            });
          },
          setAttrib: v,
          setAttribs: B,
          getAttrib: h,
          getPos: k,
          parseStyle: function parseStyle(e) {
            return d.parse(e);
          },
          serializeStyle: function serializeStyle(e, t) {
            return d.serialize(e, t);
          },
          addStyle: function addStyle(t) {
            if (G !== Oa.DOM && e === document) {
              if (n[t]) return;
              n[t] = !0;
            }
            var o = e.getElementById("mceDefaultStyles");
            if (!o) {
              o = e.createElement("style"), o.id = "mceDefaultStyles", o.type = "text/css";
              var _t34 = e.head;
              _t34.firstChild ? _t34.insertBefore(o, _t34.firstChild) : _t34.appendChild(o);
            }
            o.styleSheet ? o.styleSheet.cssText += t : o.appendChild(e.createTextNode(t));
          },
          loadCSS: function loadCSS(e) {
            e || (e = ""), q(e.split(","), function (e) {
              r[e] = !0, a.load(e)["catch"](E);
            });
          },
          addClass: function addClass(e, t) {
            F(e, t, !0);
          },
          removeClass: function removeClass(e, t) {
            F(e, t, !1);
          },
          hasClass: function hasClass(e, t) {
            var n = g(e),
              o = t.split(" ");
            return C(n) && ne(o, function (e) {
              return gn(n, e);
            });
          },
          toggleClass: F,
          show: function show(e) {
            T(e, function (e) {
              return fo(yn(e), "display");
            });
          },
          hide: function hide(e) {
            T(e, function (e) {
              return ao(yn(e), "display", "none");
            });
          },
          isHidden: function isHidden(e) {
            var t = g(e);
            return C(t) && Pt(uo(t, "display"), "none");
          },
          uniqueId: function uniqueId(e) {
            return (e || "mce_") + s++;
          },
          setHTML: D,
          getOuterHTML: function getOuterHTML(e) {
            var t = g(e);
            return C(t) ? $o(t.dom) ? t.dom.outerHTML : function (e) {
              var t = bn("div"),
                n = yn(e.dom.cloneNode(!0));
              return bo(t, n), Eo(t);
            }(t) : "";
          },
          setOuterHTML: function setOuterHTML(e, t) {
            T(e, function (e) {
              $o(e) && (e.outerHTML = t);
            });
          },
          decode: Zs.decode,
          encode: M,
          insertAfter: function insertAfter(e, t) {
            var n = f(t);
            return T(e, function (e) {
              var t = null == n ? void 0 : n.parentNode,
                o = null == n ? void 0 : n.nextSibling;
              return t && (o ? t.insertBefore(e, o) : t.appendChild(e)), e;
            });
          },
          replace: U,
          rename: function rename(e, t) {
            if (e.nodeName !== t.toUpperCase()) {
              var _n36 = L(t);
              return wa(b(e), function (t) {
                v(_n36, t.nodeName, h(e, t.nodeName));
              }), U(_n36, e, !0), _n36;
            }
            return e;
          },
          findCommonAncestor: function findCommonAncestor(e, t) {
            var n = e;
            for (; n;) {
              var _e30 = t;
              for (; _e30 && n !== _e30;) _e30 = _e30.parentNode;
              if (n === _e30) break;
              n = n.parentNode;
            }
            return !n && e.ownerDocument ? e.ownerDocument.documentElement : n;
          },
          run: T,
          getAttribs: b,
          isEmpty: function isEmpty(e, t, n) {
            var o = 0;
            if (z(e)) return !1;
            var r = e.firstChild;
            if (r) {
              var _s14 = new zo(r, e),
                _a7 = l ? l.getWhitespaceElements() : {},
                _i6 = t || (l ? l.getNonEmptyElements() : null);
              var _d4 = r;
              do {
                if ($o(_d4)) {
                  var _e31 = _d4.getAttribute("data-mce-bogus");
                  if (_e31) {
                    _d4 = _s14.next("all" === _e31);
                    continue;
                  }
                  var _t35 = _d4.nodeName.toLowerCase();
                  if (_i6 && _i6[_t35]) {
                    if ("br" === _t35) {
                      o++, _d4 = _s14.next();
                      continue;
                    }
                    return !1;
                  }
                  if (z(_d4)) return !1;
                }
                if (tr(_d4)) return !1;
                if (Jo(_d4) && !ds(_d4.data) && (!(null == n ? void 0 : n.includeZwsp) || !cs(_d4.data))) return !1;
                if (Jo(_d4) && _d4.parentNode && _a7[_d4.parentNode.nodeName] && ds(_d4.data)) return !1;
                _d4 = _s14.next();
              } while (_d4);
            }
            return o <= 1;
          },
          createRng: j,
          nodeIndex: Na,
          split: function split(e, t, n) {
            var o,
              r,
              s = j();
            if (e && t && e.parentNode && t.parentNode) {
              var _a8 = e.parentNode;
              return s.setStart(_a8, Na(e)), s.setEnd(t.parentNode, Na(t)), o = s.extractContents(), s = j(), s.setStart(t.parentNode, Na(t) + 1), s.setEnd(_a8, Na(e) + 1), r = s.extractContents(), _a8.insertBefore(Us(G, o), e), n ? _a8.insertBefore(n, e) : _a8.insertBefore(t, e), _a8.insertBefore(Us(G, r), e), I(e), n || t;
            }
          },
          bind: V,
          unbind: W,
          fire: function fire(e, t, n) {
            return c.dispatch(e, t, n);
          },
          dispatch: function dispatch(e, t, n) {
            return c.dispatch(e, t, n);
          },
          getContentEditable: K,
          getContentEditableParent: function getContentEditableParent(e) {
            var t = x();
            var n = null;
            for (var _o37 = e; _o37 && _o37 !== t && (n = K(_o37), null === n); _o37 = _o37.parentNode);
            return n;
          },
          isEditable: function isEditable(e) {
            if (C(e)) {
              var _t36 = $o(e) ? e : e.parentElement;
              return C(_t36) && no(yn(_t36));
            }
            return !1;
          },
          destroy: function destroy() {
            if (i.length > 0) {
              var _e32 = i.length;
              for (; _e32--;) {
                var _i$_e2 = _slicedToArray(i[_e32], 3),
                  _t37 = _i$_e2[0],
                  _n37 = _i$_e2[1],
                  _o38 = _i$_e2[2];
                c.unbind(_t37, _n37, _o38);
              }
            }
            ge(r, function (e, t) {
              a.unload(t), delete r[t];
            });
          },
          isChildOf: function isChildOf(e, t) {
            return e === t || t.contains(e);
          },
          dumpRng: function dumpRng(e) {
            return "startContainer: " + e.startContainer.nodeName + ", startOffset: " + e.startOffset + ", endContainer: " + e.endContainer.nodeName + ", endOffset: " + e.endOffset;
          }
        },
        Y = function (e, t, n) {
          var o = t.keep_values,
            r = {
              set: function set(e, o, r) {
                var s = yn(e);
                w(t.url_converter) && C(o) && (o = t.url_converter.call(t.url_converter_scope || n(), String(o), r, e)), Sa(s, "data-mce-" + r, o), Sa(s, r, o);
              },
              get: function get(e, t) {
                var n = yn(e);
                return en(n, "data-mce-" + t) || en(n, t);
              }
            },
            s = {
              style: {
                set: function set(t, n) {
                  var r = yn(t);
                  o && Sa(r, ka, n), on(r, "style"), m(n) && io(r, e.parse(n));
                },
                get: function get(t) {
                  var n = yn(t),
                    o = en(n, ka) || en(n, "style");
                  return e.serialize(e.parse(o), Ht(n));
                }
              }
            };
          return o && (s.href = s.src = r), s;
        }(d, t, N(G));
      return G;
    };
  Oa.DOM = Oa(document), Oa.nodeIndex = Na;
  var Ta = Oa.DOM;
  var Ba = /*#__PURE__*/function () {
    function Ba() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      _classCallCheck(this, Ba);
      this.states = {}, this.queue = [], this.scriptLoadedCallbacks = {}, this.queueLoadedCallbacks = [], this.loading = !1, this.settings = e;
    }
    _createClass(Ba, [{
      key: "_setReferrerPolicy",
      value: function _setReferrerPolicy(e) {
        this.settings.referrerPolicy = e;
      }
    }, {
      key: "loadScript",
      value: function loadScript(e) {
        var _this = this;
        return new Promise(function (t, n) {
          var o = Ta;
          var r;
          var s = function s() {
              o.remove(a), r && (r.onerror = r.onload = r = null);
            },
            a = o.uniqueId();
          r = document.createElement("script"), r.id = a, r.type = "text/javascript", r.src = Dt._addCacheSuffix(e), _this.settings.referrerPolicy && o.setAttrib(r, "referrerpolicy", _this.settings.referrerPolicy), r.onload = function () {
            s(), t();
          }, r.onerror = function () {
            s(), n("Failed to load script: " + e);
          }, (document.getElementsByTagName("head")[0] || document.body).appendChild(r);
        });
      }
    }, {
      key: "isDone",
      value: function isDone(e) {
        return 2 === this.states[e];
      }
    }, {
      key: "markDone",
      value: function markDone(e) {
        this.states[e] = 2;
      }
    }, {
      key: "add",
      value: function add(e) {
        var t = this;
        return t.queue.push(e), void 0 === t.states[e] && (t.states[e] = 0), new Promise(function (n, o) {
          t.scriptLoadedCallbacks[e] || (t.scriptLoadedCallbacks[e] = []), t.scriptLoadedCallbacks[e].push({
            resolve: n,
            reject: o
          });
        });
      }
    }, {
      key: "load",
      value: function load(e) {
        return this.add(e);
      }
    }, {
      key: "remove",
      value: function remove(e) {
        delete this.states[e], delete this.scriptLoadedCallbacks[e];
      }
    }, {
      key: "loadQueue",
      value: function loadQueue() {
        var e = this.queue;
        return this.queue = [], this.loadScripts(e);
      }
    }, {
      key: "loadScripts",
      value: function loadScripts(e) {
        var t = this,
          n = function n(e, _n38) {
            xe(t.scriptLoadedCallbacks, _n38).each(function (t) {
              q(t, function (t) {
                return t[e](_n38);
              });
            }), delete t.scriptLoadedCallbacks[_n38];
          },
          o = function o(e) {
            var t = G(e, function (e) {
              return "rejected" === e.status;
            });
            return t.length > 0 ? Promise.reject(te(t, function (_ref5) {
              var e = _ref5.reason;
              return p(e) ? e : [e];
            })) : Promise.resolve();
          },
          r = function r(e) {
            return Promise.allSettled(V(e, function (e) {
              return 2 === t.states[e] ? (n("resolve", e), Promise.resolve()) : 3 === t.states[e] ? (n("reject", e), Promise.reject(e)) : (t.states[e] = 1, t.loadScript(e).then(function () {
                t.states[e] = 2, n("resolve", e);
                var s = t.queue;
                return s.length > 0 ? (t.queue = [], r(s).then(o)) : Promise.resolve();
              }, function () {
                return t.states[e] = 3, n("reject", e), Promise.reject(e);
              }));
            }));
          },
          s = function s(e) {
            return t.loading = !0, r(e).then(function (e) {
              t.loading = !1;
              var n = t.queueLoadedCallbacks.shift();
              return I.from(n).each(P), o(e);
            });
          },
          a = Se(e);
        return t.loading ? new Promise(function (e, n) {
          t.queueLoadedCallbacks.push(function () {
            s(a).then(e, n);
          });
        }) : s(a);
      }
    }]);
    return Ba;
  }();
  Ba.ScriptLoader = new Ba();
  var Da = function Da(e) {
      var t = e;
      return {
        get: function get() {
          return t;
        },
        set: function set(e) {
          t = e;
        }
      };
    },
    Pa = {},
    La = Da("en"),
    Ma = function Ma() {
      return xe(Pa, La.get());
    },
    Ia = {
      getData: function getData() {
        return pe(Pa, function (e) {
          return _objectSpread({}, e);
        });
      },
      setCode: function setCode(e) {
        e && La.set(e);
      },
      getCode: function getCode() {
        return La.get();
      },
      add: function add(e, t) {
        var n = Pa[e];
        n || (Pa[e] = n = {});
        var o = V(me(t), function (e) {
          return e.toLowerCase();
        });
        ge(t, function (e, r) {
          var s = r.toLowerCase();
          s !== r && function (e, t) {
            var n = e.indexOf(t);
            return -1 !== n && e.indexOf(t, n + 1) > n;
          }(o, s) ? (ke(t, s) || (n[s] = e), n[r] = e) : n[s] = e;
        });
      },
      translate: function translate(e) {
        var t = Ma().getOr({}),
          n = function n(e) {
            return w(e) ? Object.prototype.toString.call(e) : o(e) ? "" : "" + e;
          },
          o = function o(e) {
            return "" === e || null == e;
          },
          r = function r(e) {
            var o = n(e);
            return ke(t, o) ? n(t[o]) : xe(t, o.toLowerCase()).map(n).getOr(o);
          },
          s = function s(e) {
            return e.replace(/{context:\w+}$/, "");
          };
        if (o(e)) return "";
        if (f(a = e) && ke(a, "raw")) return n(e.raw);
        var a;
        if (function (e) {
          return p(e) && e.length > 1;
        }(e)) {
          var _t38 = e.slice(1);
          return s(r(e[0]).replace(/\{([0-9]+)\}/g, function (e, o) {
            return ke(_t38, o) ? n(_t38[o]) : e;
          }));
        }
        return s(r(e));
      },
      isRtl: function isRtl() {
        return Ma().bind(function (e) {
          return xe(e, "_dir");
        }).exists(function (e) {
          return "rtl" === e;
        });
      },
      hasCode: function hasCode(e) {
        return ke(Pa, e);
      }
    },
    Fa = function Fa() {
      var e = [],
        t = {},
        n = {},
        o = [],
        r = function r(e, t) {
          var n = G(o, function (n) {
            return n.name === e && n.state === t;
          });
          q(n, function (e) {
            return e.resolve();
          });
        },
        s = function s(e) {
          return ke(t, e);
        },
        a = function a(e, n) {
          var o = Ia.getCode();
          !o || n && -1 === ("," + (n || "") + ",").indexOf("," + o + ",") || Ba.ScriptLoader.add(t[e] + "/langs/" + o + ".js");
        },
        i = function i(e) {
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "added";
          return "added" === t && function (e) {
            return ke(n, e);
          }(e) || "loaded" === t && s(e) ? Promise.resolve() : new Promise(function (n) {
            o.push({
              name: e,
              state: t,
              resolve: n
            });
          });
        };
      return {
        items: e,
        urls: t,
        lookup: n,
        get: function get(e) {
          if (n[e]) return n[e].instance;
        },
        requireLangPack: function requireLangPack(e, t) {
          !1 !== Fa.languageLoad && (s(e) ? a(e, t) : i(e, "loaded").then(function () {
            return a(e, t);
          }));
        },
        add: function add(t, o) {
          return e.push(o), n[t] = {
            instance: o
          }, r(t, "added"), o;
        },
        remove: function remove(e) {
          delete t[e], delete n[e];
        },
        createUrl: function createUrl(e, t) {
          return m(t) ? m(e) ? {
            prefix: "",
            resource: t,
            suffix: ""
          } : {
            prefix: e.prefix,
            resource: t,
            suffix: e.suffix
          } : t;
        },
        load: function load(e, o) {
          if (t[e]) return Promise.resolve();
          var s = m(o) ? o : o.prefix + o.resource + o.suffix;
          0 !== s.indexOf("/") && -1 === s.indexOf("://") && (s = Fa.baseURL + "/" + s), t[e] = s.substring(0, s.lastIndexOf("/"));
          var a = function a() {
            return r(e, "loaded"), Promise.resolve();
          };
          return n[e] ? a() : Ba.ScriptLoader.add(s).then(a);
        },
        waitFor: i
      };
    };
  Fa.languageLoad = !0, Fa.baseURL = "", Fa.PluginManager = Fa(), Fa.ThemeManager = Fa(), Fa.ModelManager = Fa();
  var Ua = function Ua(e) {
      var t = Da(I.none()),
        n = function n() {
          return t.get().each(function (e) {
            return clearInterval(e);
          });
        };
      return {
        clear: function clear() {
          n(), t.set(I.none());
        },
        isSet: function isSet() {
          return t.get().isSome();
        },
        get: function get() {
          return t.get();
        },
        set: function set(o) {
          n(), t.set(I.some(setInterval(o, e)));
        }
      };
    },
    za = function za() {
      var e = function (e) {
        var t = Da(I.none()),
          n = function n() {
            return t.get().each(e);
          };
        return {
          clear: function clear() {
            n(), t.set(I.none());
          },
          isSet: function isSet() {
            return t.get().isSome();
          },
          get: function get() {
            return t.get();
          },
          set: function set(e) {
            n(), t.set(I.some(e));
          }
        };
      }(E);
      return _objectSpread(_objectSpread({}, e), {}, {
        on: function on(t) {
          return e.get().each(t);
        }
      });
    },
    ja = function ja(e, t) {
      var n = null;
      return {
        cancel: function cancel() {
          h(n) || (clearTimeout(n), n = null);
        },
        throttle: function throttle() {
          for (var _len5 = arguments.length, o = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
            o[_key5] = arguments[_key5];
          }
          h(n) && (n = setTimeout(function () {
            n = null, e.apply(null, o);
          }, t));
        }
      };
    },
    Ha = function Ha(e, t) {
      var n = null;
      var o = function o() {
        h(n) || (clearTimeout(n), n = null);
      };
      return {
        cancel: o,
        throttle: function throttle() {
          for (var _len6 = arguments.length, r = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
            r[_key6] = arguments[_key6];
          }
          o(), n = setTimeout(function () {
            n = null, e.apply(null, r);
          }, t);
        }
      };
    },
    $a = N("mce-annotation"),
    Va = N("data-mce-annotation"),
    qa = N("data-mce-annotation-uid"),
    Wa = N("data-mce-annotation-active"),
    Ka = N("data-mce-annotation-classes"),
    Ga = N("data-mce-annotation-attrs"),
    Ya = function Ya(e) {
      return function (t) {
        return En(t, e);
      };
    },
    Xa = function Xa(e, t) {
      var n = e.selection.getRng(),
        o = yn(n.startContainer),
        r = yn(e.getBody()),
        s = t.fold(function () {
          return "." + $a();
        }, function (e) {
          return "[".concat(Va(), "=\"").concat(e, "\"]");
        }),
        a = In(o, n.startOffset).getOr(o);
      return to(a, s, Ya(r)).bind(function (t) {
        return tn(t, "".concat(qa())).bind(function (n) {
          return tn(t, "".concat(Va())).map(function (t) {
            var o = Ja(e, n);
            return {
              uid: n,
              name: t,
              elements: o
            };
          });
        });
      });
    },
    Qa = function Qa(e, t) {
      return nn(e, "data-mce-bogus") || Uo(e, '[data-mce-bogus="all"]', Ya(t));
    },
    Ja = function Ja(e, t) {
      var n = yn(e.getBody()),
        o = Fo(n, "[".concat(qa(), "=\"").concat(t, "\"]"));
      return G(o, function (e) {
        return !Qa(e, n);
      });
    },
    Za = function Za(e, t) {
      var n = yn(e.getBody()),
        o = Fo(n, "[".concat(Va(), "=\"").concat(t, "\"]")),
        r = {};
      return q(o, function (e) {
        if (!Qa(e, n)) {
          var _t39 = en(e, qa()),
            _n39 = xe(r, _t39).getOr([]);
          r[_t39] = _n39.concat([e]);
        }
      }), r;
    };
  var ei = 0;
  var ti = function ti(e) {
      var t = new Date().getTime(),
        n = Math.floor(1e9 * Math.random());
      return ei++, e + "_" + n + ei + String(t);
    },
    ni = function ni(e, t) {
      return yn(e.dom.cloneNode(t));
    },
    oi = function oi(e) {
      return ni(e, !1);
    },
    ri = function ri(e) {
      return ni(e, !0);
    },
    si = function si(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : L;
      var o = new zo(e, t),
        r = function r(e) {
          var t;
          do {
            t = o[e]();
          } while (t && !Jo(t) && !n(t));
          return I.from(t).filter(Jo);
        };
      return {
        current: function current() {
          return I.from(o.current()).filter(Jo);
        },
        next: function next() {
          return r("next");
        },
        prev: function prev() {
          return r("prev");
        },
        prev2: function prev2() {
          return r("prev2");
        }
      };
    },
    ai = function ai(e, t) {
      var n = t || function (t) {
          return e.isBlock(t) || rr(t) || ir(t);
        },
        o = function o(e, t, n, r) {
          if (Jo(e)) {
            var _n40 = r(e, t, e.data);
            if (-1 !== _n40) return I.some({
              container: e,
              offset: _n40
            });
          }
          return n().bind(function (e) {
            return o(e.container, e.offset, n, r);
          });
        };
      return {
        backwards: function backwards(t, r, s, a) {
          var i = si(t, null != a ? a : e.getRoot(), n);
          return o(t, r, function () {
            return i.prev().map(function (e) {
              return {
                container: e,
                offset: e.length
              };
            });
          }, s).getOrNull();
        },
        forwards: function forwards(t, r, s, a) {
          var i = si(t, null != a ? a : e.getRoot(), n);
          return o(t, r, function () {
            return i.next().map(function (e) {
              return {
                container: e,
                offset: 0
              };
            });
          }, s).getOrNull();
        }
      };
    },
    ii = Math.round,
    li = function li(e) {
      return e ? {
        left: ii(e.left),
        top: ii(e.top),
        bottom: ii(e.bottom),
        right: ii(e.right),
        width: ii(e.width),
        height: ii(e.height)
      } : {
        left: 0,
        top: 0,
        bottom: 0,
        right: 0,
        width: 0,
        height: 0
      };
    },
    di = function di(e, t) {
      return e = li(e), t || (e.left = e.left + e.width), e.right = e.left, e.width = 0, e;
    },
    ci = function ci(e, t, n) {
      return e >= 0 && e <= Math.min(t.height, n.height) / 2;
    },
    ui = function ui(e, t) {
      var n = Math.min(t.height / 2, e.height / 2);
      return e.bottom - n < t.top || !(e.top > t.bottom) && ci(t.top - e.bottom, e, t);
    },
    mi = function mi(e, t) {
      return e.top > t.bottom || !(e.bottom < t.top) && ci(t.bottom - e.top, e, t);
    },
    fi = function fi(e, t, n) {
      var o = Math.max(Math.min(t, e.left + e.width), e.left),
        r = Math.max(Math.min(n, e.top + e.height), e.top);
      return Math.sqrt((t - o) * (t - o) + (n - r) * (n - r));
    },
    gi = function gi(e) {
      var t = e.startContainer,
        n = e.startOffset;
      return t === e.endContainer && t.hasChildNodes() && e.endOffset === n + 1 ? t.childNodes[n] : null;
    },
    pi = function pi(e, t) {
      if ($o(e) && e.hasChildNodes()) {
        var _n41 = e.childNodes,
          _o39 = function (e, t, n) {
            return Math.min(Math.max(e, 0), n);
          }(t, 0, _n41.length - 1);
        return _n41[_o39];
      }
      return e;
    },
    hi = new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),
    bi = function bi(e) {
      return m(e) && e.charCodeAt(0) >= 768 && hi.test(e);
    },
    vi = $o,
    yi = ss,
    Ci = Wo("display", "block table"),
    wi = Wo("float", "left right"),
    xi = function () {
      for (var _len7 = arguments.length, e = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
        e[_key7] = arguments[_key7];
      }
      return function (t) {
        for (var _n42 = 0; _n42 < e.length; _n42++) if (!e[_n42](t)) return !1;
        return !0;
      };
    }(vi, yi, T(wi)),
    ki = T(Wo("white-space", "pre pre-line pre-wrap")),
    Ei = Jo,
    Si = rr,
    _i = Oa.nodeIndex,
    Ni = function Ni(e, t) {
      return t < 0 && $o(e) && e.hasChildNodes() ? void 0 : pi(e, t);
    },
    Ri = function Ri(e) {
      return e ? e.createRange() : Oa.DOM.createRng();
    },
    Ai = function Ai(e) {
      return m(e) && /[\r\n\t ]/.test(e);
    },
    Oi = function Oi(e) {
      return !!e.setStart && !!e.setEnd;
    },
    Ti = function Ti(e) {
      var t = e.startContainer,
        n = e.startOffset;
      if (Ai(e.toString()) && ki(t.parentNode) && Jo(t)) {
        var _e33 = t.data;
        if (Ai(_e33[n - 1]) || Ai(_e33[n + 1])) return !0;
      }
      return !1;
    },
    Bi = function Bi(e) {
      return 0 === e.left && 0 === e.right && 0 === e.top && 0 === e.bottom;
    },
    Di = function Di(e) {
      var t;
      var n;
      var o = e.getClientRects();
      return n = o.length > 0 ? li(o[0]) : li(e.getBoundingClientRect()), !Oi(e) && Si(e) && Bi(n) ? function (e) {
        var t = e.ownerDocument,
          n = Ri(t),
          o = t.createTextNode(pr),
          r = e.parentNode;
        r.insertBefore(o, e), n.setStart(o, 0), n.setEnd(o, 1);
        var s = li(n.getBoundingClientRect());
        return r.removeChild(o), s;
      }(e) : Bi(n) && Oi(e) && null !== (t = function (e) {
        var t = e.startContainer,
          n = e.endContainer,
          o = e.startOffset,
          r = e.endOffset;
        if (t === n && Jo(n) && 0 === o && 1 === r) {
          var _t40 = e.cloneRange();
          return _t40.setEndAfter(n), Di(_t40);
        }
        return null;
      }(e)) && void 0 !== t ? t : n;
    },
    Pi = function Pi(e, t) {
      var n = di(e, t);
      return n.width = 1, n.right = n.left + 1, n;
    },
    Li = function Li(e, t, n) {
      var o = function o() {
        return n || (n = function (e) {
          var t = [],
            n = function n(e) {
              var n, o;
              0 !== e.height && (t.length > 0 && (n = e, o = t[t.length - 1], n.left === o.left && n.top === o.top && n.bottom === o.bottom && n.right === o.right) || t.push(e));
            },
            o = function o(e, t) {
              var o = Ri(e.ownerDocument);
              if (t < e.data.length) {
                if (bi(e.data[t])) return;
                if (bi(e.data[t - 1]) && (o.setStart(e, t), o.setEnd(e, t + 1), !Ti(o))) return void n(Pi(Di(o), !1));
              }
              t > 0 && (o.setStart(e, t - 1), o.setEnd(e, t), Ti(o) || n(Pi(Di(o), !1))), t < e.data.length && (o.setStart(e, t), o.setEnd(e, t + 1), Ti(o) || n(Pi(Di(o), !0)));
            },
            r = e.container(),
            s = e.offset();
          if (Ei(r)) return o(r, s), t;
          if (vi(r)) if (e.isAtEnd()) {
            var _e34 = Ni(r, s);
            Ei(_e34) && o(_e34, _e34.data.length), xi(_e34) && !Si(_e34) && n(Pi(Di(_e34), !1));
          } else {
            var _a9 = Ni(r, s);
            if (Ei(_a9) && o(_a9, 0), xi(_a9) && e.isAtEnd()) return n(Pi(Di(_a9), !1)), t;
            var _i7 = Ni(e.container(), e.offset() - 1);
            xi(_i7) && !Si(_i7) && (Ci(_i7) || Ci(_a9) || !xi(_a9)) && n(Pi(Di(_i7), !1)), xi(_a9) && n(Pi(Di(_a9), !0));
          }
          return t;
        }(Li(e, t))), n;
      };
      return {
        container: N(e),
        offset: N(t),
        toRange: function toRange() {
          var n = Ri(e.ownerDocument);
          return n.setStart(e, t), n.setEnd(e, t), n;
        },
        getClientRects: o,
        isVisible: function isVisible() {
          return o().length > 0;
        },
        isAtStart: function isAtStart() {
          return Ei(e), 0 === t;
        },
        isAtEnd: function isAtEnd() {
          return Ei(e) ? t >= e.data.length : t >= e.childNodes.length;
        },
        isEqual: function isEqual(n) {
          return n && e === n.container() && t === n.offset();
        },
        getNode: function getNode(n) {
          return Ni(e, n ? t - 1 : t);
        }
      };
    };
  Li.fromRangeStart = function (e) {
    return Li(e.startContainer, e.startOffset);
  }, Li.fromRangeEnd = function (e) {
    return Li(e.endContainer, e.endOffset);
  }, Li.after = function (e) {
    return Li(e.parentNode, _i(e) + 1);
  }, Li.before = function (e) {
    return Li(e.parentNode, _i(e));
  }, Li.isAbove = function (e, t) {
    return Mt(le(t.getClientRects()), de(e.getClientRects()), ui).getOr(!1);
  }, Li.isBelow = function (e, t) {
    return Mt(de(t.getClientRects()), le(e.getClientRects()), mi).getOr(!1);
  }, Li.isAtStart = function (e) {
    return !!e && e.isAtStart();
  }, Li.isAtEnd = function (e) {
    return !!e && e.isAtEnd();
  }, Li.isTextPosition = function (e) {
    return !!e && Jo(e.container());
  }, Li.isElementPosition = function (e) {
    return !Li.isTextPosition(e);
  };
  var Mi = function Mi(e, t) {
      Jo(t) && 0 === t.data.length && e.remove(t);
    },
    Ii = function Ii(e, t, n) {
      or(n) ? function (e, t, n) {
        var o = I.from(n.firstChild),
          r = I.from(n.lastChild);
        t.insertNode(n), o.each(function (t) {
          return Mi(e, t.previousSibling);
        }), r.each(function (t) {
          return Mi(e, t.nextSibling);
        });
      }(e, t, n) : function (e, t, n) {
        t.insertNode(n), Mi(e, n.previousSibling), Mi(e, n.nextSibling);
      }(e, t, n);
    },
    Fi = Jo,
    Ui = Go,
    zi = Oa.nodeIndex,
    ji = function ji(e) {
      var t = e.parentNode;
      return Ui(t) ? ji(t) : t;
    },
    Hi = function Hi(e) {
      return e ? Te(e.childNodes, function (e, t) {
        return Ui(t) && "BR" !== t.nodeName ? e = e.concat(Hi(t)) : e.push(t), e;
      }, []) : [];
    },
    $i = function $i(e) {
      return function (t) {
        return e === t;
      };
    },
    Vi = function Vi(e) {
      return (Fi(e) ? "text()" : e.nodeName.toLowerCase()) + "[" + function (e) {
        var t, n;
        t = Hi(ji(e)), n = Be(t, $i(e), e), t = t.slice(0, n + 1);
        var o = Te(t, function (e, n, o) {
          return Fi(n) && Fi(t[o - 1]) && e++, e;
        }, 0);
        return t = Oe(t, qo([e.nodeName])), n = Be(t, $i(e), e), n - o;
      }(e) + "]";
    },
    qi = function qi(e, t) {
      var n,
        o = [],
        r = t.container(),
        s = t.offset();
      if (Fi(r)) n = function (e, t) {
        var n = e;
        for (; (n = n.previousSibling) && Fi(n);) t += n.data.length;
        return t;
      }(r, s);else {
        var _e35 = r.childNodes;
        s >= _e35.length ? (n = "after", s = _e35.length - 1) : n = "before", r = _e35[s];
      }
      o.push(Vi(r));
      var a = function (e, t, n) {
        var o = [];
        for (var _n43 = t.parentNode; _n43 && _n43 !== e; _n43 = _n43.parentNode) o.push(_n43);
        return o;
      }(e, r);
      return a = Oe(a, T(Go)), o = o.concat(Ae(a, function (e) {
        return Vi(e);
      })), o.reverse().join("/") + "," + n;
    },
    Wi = function Wi(e, t) {
      if (!t) return null;
      var n = t.split(","),
        o = n[0].split("/"),
        r = n.length > 1 ? n[1] : "before",
        s = Te(o, function (e, t) {
          var n = /([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);
          return n ? ("text()" === n[1] && (n[1] = "#text"), function (e, t, n) {
            var o = Hi(e);
            return o = Oe(o, function (e, t) {
              return !Fi(e) || !Fi(o[t - 1]);
            }), o = Oe(o, qo([t])), o[n];
          }(e, n[1], parseInt(n[2], 10))) : null;
        }, e);
      if (!s) return null;
      if (!Fi(s) && s.parentNode) {
        var _e36;
        return _e36 = "after" === r ? zi(s) + 1 : zi(s), Li(s.parentNode, _e36);
      }
      return function (e, t) {
        var n = e,
          o = 0;
        for (; Fi(n);) {
          var _r24 = n.data.length;
          if (t >= o && t <= o + _r24) {
            e = n, t -= o;
            break;
          }
          if (!Fi(n.nextSibling)) {
            e = n, t = _r24;
            break;
          }
          o += _r24, n = n.nextSibling;
        }
        return Fi(e) && t > e.data.length && (t = e.data.length), Li(e, t);
      }(s, parseInt(r, 10));
    },
    Ki = ir,
    Gi = function Gi(e, t, n, o, r) {
      var s = r ? o.startContainer : o.endContainer;
      var a = r ? o.startOffset : o.endOffset;
      var i = [],
        l = e.getRoot();
      if (Jo(s)) i.push(n ? function (e, t, n) {
        var o = e(t.data.slice(0, n)).length;
        for (var _n44 = t.previousSibling; _n44 && Jo(_n44); _n44 = _n44.previousSibling) o += e(_n44.data).length;
        return o;
      }(t, s, a) : a);else {
        var _t41 = 0;
        var _o40 = s.childNodes;
        a >= _o40.length && _o40.length && (_t41 = 1, a = Math.max(0, _o40.length - 1)), i.push(e.nodeIndex(_o40[a], n) + _t41);
      }
      for (var _t42 = s; _t42 && _t42 !== l; _t42 = _t42.parentNode) i.push(e.nodeIndex(_t42, n));
      return i;
    },
    Yi = function Yi(e, t, n) {
      var o = 0;
      return Dt.each(e.select(t), function (e) {
        return "all" === e.getAttribute("data-mce-bogus") ? void 0 : e !== n && void o++;
      }), o;
    },
    Xi = function Xi(e, t) {
      var n = t ? e.startContainer : e.endContainer,
        o = t ? e.startOffset : e.endOffset;
      if ($o(n) && "TR" === n.nodeName) {
        var _r25 = n.childNodes;
        n = _r25[Math.min(t ? o : o - 1, _r25.length - 1)], n && (o = t ? 0 : n.childNodes.length, t ? e.setStart(n, o) : e.setEnd(n, o));
      }
    },
    Qi = function Qi(e) {
      return Xi(e, !0), Xi(e, !1), e;
    },
    Ji = function Ji(e, t) {
      if ($o(e) && (e = pi(e, t), Ki(e))) return e;
      if ($r(e)) {
        Jo(e) && jr(e) && (e = e.parentNode);
        var _t43 = e.previousSibling;
        if (Ki(_t43)) return _t43;
        if (_t43 = e.nextSibling, Ki(_t43)) return _t43;
      }
    },
    Zi = function Zi(e, t, n) {
      var o = n.getNode(),
        r = n.getRng();
      if ("IMG" === o.nodeName || Ki(o)) {
        var _e37 = o.nodeName;
        return {
          name: _e37,
          index: Yi(n.dom, _e37, o)
        };
      }
      var s = function (e) {
        return Ji(e.startContainer, e.startOffset) || Ji(e.endContainer, e.endOffset);
      }(r);
      if (s) {
        var _e38 = s.tagName;
        return {
          name: _e38,
          index: Yi(n.dom, _e38, s)
        };
      }
      return function (e, t, n, o) {
        var r = t.dom,
          s = Gi(r, e, n, o, !0),
          a = t.isForward(),
          i = Xr(o) ? {
            isFakeCaret: !0
          } : {};
        return t.isCollapsed() ? _objectSpread({
          start: s,
          forward: a
        }, i) : _objectSpread({
          start: s,
          end: Gi(r, e, n, o, !1),
          forward: a
        }, i);
      }(e, n, t, r);
    },
    el = function el(e, t, n) {
      var o = {
        "data-mce-type": "bookmark",
        id: t,
        style: "overflow:hidden;line-height:0px"
      };
      return n ? e.create("span", o, "&#xFEFF;") : e.create("span", o);
    },
    tl = function tl(e, t) {
      var n = e.dom;
      var o = e.getRng();
      var r = n.uniqueId(),
        s = e.isCollapsed(),
        a = e.getNode(),
        i = a.nodeName,
        l = e.isForward();
      if ("IMG" === i) return {
        name: i,
        index: Yi(n, i, a)
      };
      var d = Qi(o.cloneRange());
      if (!s) {
        d.collapse(!1);
        var _e39 = el(n, r + "_end", t);
        Ii(n, d, _e39);
      }
      o = Qi(o), o.collapse(!0);
      var c = el(n, r + "_start", t);
      return Ii(n, o, c), e.moveToBookmark({
        id: r,
        keep: !0,
        forward: l
      }), {
        id: r,
        forward: l
      };
    },
    nl = O(Zi, R, !0),
    ol = function ol(e) {
      var t = function t(_t44) {
          return _t44(e);
        },
        n = N(e),
        o = function o() {
          return r;
        },
        r = {
          tag: !0,
          inner: e,
          fold: function fold(t, n) {
            return n(e);
          },
          isValue: M,
          isError: L,
          map: function map(t) {
            return sl.value(t(e));
          },
          mapError: o,
          bind: t,
          exists: t,
          forall: t,
          getOr: n,
          or: o,
          getOrThunk: n,
          orThunk: o,
          getOrDie: n,
          each: function each(t) {
            t(e);
          },
          toOptional: function toOptional() {
            return I.some(e);
          }
        };
      return r;
    },
    rl = function rl(e) {
      var t = function t() {
          return n;
        },
        n = {
          tag: !1,
          inner: e,
          fold: function fold(t, n) {
            return t(e);
          },
          isValue: L,
          isError: M,
          map: t,
          mapError: function mapError(t) {
            return sl.error(t(e));
          },
          bind: t,
          exists: L,
          forall: M,
          getOr: R,
          or: R,
          getOrThunk: D,
          orThunk: D,
          getOrDie: B(String(e)),
          each: E,
          toOptional: I.none
        };
      return n;
    },
    sl = {
      value: ol,
      error: rl,
      fromOption: function fromOption(e, t) {
        return e.fold(function () {
          return rl(t);
        }, ol);
      }
    },
    al = function al(e) {
      if (!p(e)) throw new Error("cases must be an array");
      if (0 === e.length) throw new Error("there must be at least one case");
      var t = [],
        n = {};
      return q(e, function (o, r) {
        var s = me(o);
        if (1 !== s.length) throw new Error("one and only one name per case");
        var a = s[0],
          i = o[a];
        if (void 0 !== n[a]) throw new Error("duplicate key detected:" + a);
        if ("cata" === a) throw new Error("cannot have a case named cata (sorry)");
        if (!p(i)) throw new Error("case arguments must be an array");
        t.push(a), n[a] = function () {
          for (var _len8 = arguments.length, n = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
            n[_key8] = arguments[_key8];
          }
          var o = n.length;
          if (o !== i.length) throw new Error("Wrong number of arguments to case " + a + ". Expected " + i.length + " (" + i + "), got " + o);
          return {
            fold: function fold() {
              for (var _len9 = arguments.length, t = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
                t[_key9] = arguments[_key9];
              }
              if (t.length !== e.length) throw new Error("Wrong number of arguments to fold. Expected " + e.length + ", got " + t.length);
              return t[r].apply(null, n);
            },
            match: function match(e) {
              var o = me(e);
              if (t.length !== o.length) throw new Error("Wrong number of arguments to match. Expected: " + t.join(",") + "\nActual: " + o.join(","));
              if (!ne(t, function (e) {
                return H(o, e);
              })) throw new Error("Not all branches were specified when using match. Specified: " + o.join(", ") + "\nRequired: " + t.join(", "));
              return e[a].apply(null, n);
            },
            log: function log(e) {
              console.log(e, {
                constructors: t,
                constructor: a,
                params: n
              });
            }
          };
        };
      }), n;
    };
  al([{
    bothErrors: ["error1", "error2"]
  }, {
    firstError: ["error1", "value2"]
  }, {
    secondError: ["value1", "error2"]
  }, {
    bothValues: ["value1", "value2"]
  }]);
  var il = function il(e) {
      return "inline-command" === e.type || "inline-format" === e.type;
    },
    ll = function ll(e) {
      return "block-command" === e.type || "block-format" === e.type;
    },
    dl = function dl(e) {
      var t = function t(_t45) {
          return sl.error({
            message: _t45,
            pattern: e
          });
        },
        n = function n(_n45, o, r) {
          if (void 0 !== e.format) {
            var _r26;
            if (p(e.format)) {
              if (!ne(e.format, m)) return t(_n45 + " pattern has non-string items in the `format` array");
              _r26 = e.format;
            } else {
              if (!m(e.format)) return t(_n45 + " pattern has non-string `format` parameter");
              _r26 = [e.format];
            }
            return sl.value(o(_r26));
          }
          return void 0 !== e.cmd ? m(e.cmd) ? sl.value(r(e.cmd, e.value)) : t(_n45 + " pattern has non-string `cmd` parameter") : t(_n45 + " pattern is missing both `format` and `cmd` parameters");
        };
      if (!f(e)) return t("Raw pattern is not an object");
      if (!m(e.start)) return t("Raw pattern is missing `start` parameter");
      if (void 0 !== e.end) {
        if (!m(e.end)) return t("Inline pattern has non-string `end` parameter");
        if (0 === e.start.length && 0 === e.end.length) return t("Inline pattern has empty `start` and `end` parameters");
        var _o41 = e.start,
          _r27 = e.end;
        return 0 === _r27.length && (_r27 = _o41, _o41 = ""), n("Inline", function (e) {
          return {
            type: "inline-format",
            start: _o41,
            end: _r27,
            format: e
          };
        }, function (e, t) {
          return {
            type: "inline-command",
            start: _o41,
            end: _r27,
            cmd: e,
            value: t
          };
        });
      }
      return void 0 !== e.replacement ? m(e.replacement) ? 0 === e.start.length ? t("Replacement pattern has empty `start` parameter") : sl.value({
        type: "inline-command",
        start: "",
        end: e.start,
        cmd: "mceInsertContent",
        value: e.replacement
      }) : t("Replacement pattern has non-string `replacement` parameter") : 0 === e.start.length ? t("Block pattern has empty `start` parameter") : n("Block", function (t) {
        return {
          type: "block-format",
          start: e.start,
          format: t[0]
        };
      }, function (t, n) {
        return {
          type: "block-command",
          start: e.start,
          cmd: t,
          value: n
        };
      });
    },
    cl = function cl(e) {
      return G(e, ll);
    },
    ul = function ul(e) {
      return G(e, il);
    },
    ml = function ml(e) {
      var t = function (e) {
        var t = [],
          n = [];
        return q(e, function (e) {
          e.fold(function (e) {
            t.push(e);
          }, function (e) {
            n.push(e);
          });
        }), {
          errors: t,
          values: n
        };
      }(V(e, dl));
      return q(t.errors, function (e) {
        return console.error(e.message, e.pattern);
      }), t.values;
    },
    fl = xt().deviceType,
    gl = fl.isTouch(),
    pl = Oa.DOM,
    hl = function hl(e) {
      return u(e, RegExp);
    },
    bl = function bl(e) {
      return function (t) {
        return t.options.get(e);
      };
    },
    vl = function vl(e) {
      return m(e) || f(e);
    },
    yl = function yl(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      return function (n) {
        var o = m(n);
        if (o) {
          if (-1 !== n.indexOf("=")) {
            var _r28 = function (e) {
              var t = e.indexOf("=") > 0 ? e.split(/[;,](?![^=;,]*(?:[;,]|$))/) : e.split(",");
              return X(t, function (e, t) {
                var n = t.split("="),
                  o = n[0],
                  r = n.length > 1 ? n[1] : o;
                return e[qe(o)] = qe(r), e;
              }, {});
            }(n);
            return {
              value: xe(_r28, e.id).getOr(t),
              valid: o
            };
          }
          return {
            value: n,
            valid: o
          };
        }
        return {
          valid: !1,
          message: "Must be a string."
        };
      };
    },
    Cl = bl("iframe_attrs"),
    wl = bl("doctype"),
    xl = bl("document_base_url"),
    kl = bl("body_id"),
    El = bl("body_class"),
    Sl = bl("content_security_policy"),
    _l = bl("br_in_pre"),
    Nl = bl("forced_root_block"),
    Rl = bl("forced_root_block_attrs"),
    Al = bl("newline_behavior"),
    Ol = bl("br_newline_selector"),
    Tl = bl("no_newline_selector"),
    Bl = bl("keep_styles"),
    Dl = bl("end_container_on_empty_block"),
    Pl = bl("automatic_uploads"),
    Ll = bl("images_reuse_filename"),
    Ml = bl("images_replace_blob_uris"),
    Il = bl("icons"),
    Fl = bl("icons_url"),
    Ul = bl("images_upload_url"),
    zl = bl("images_upload_base_path"),
    jl = bl("images_upload_credentials"),
    Hl = bl("images_upload_handler"),
    $l = bl("content_css_cors"),
    Vl = bl("referrer_policy"),
    ql = bl("language"),
    Wl = bl("language_url"),
    Kl = bl("indent_use_margin"),
    Gl = bl("indentation"),
    Yl = bl("content_css"),
    Xl = bl("content_style"),
    Ql = bl("font_css"),
    Jl = bl("directionality"),
    Zl = bl("inline_boundaries_selector"),
    ed = bl("object_resizing"),
    td = bl("resize_img_proportional"),
    nd = bl("placeholder"),
    od = bl("event_root"),
    rd = bl("service_message"),
    sd = bl("theme"),
    ad = bl("theme_url"),
    id = bl("model"),
    ld = bl("model_url"),
    dd = bl("inline_boundaries"),
    cd = bl("formats"),
    ud = bl("preview_styles"),
    md = bl("format_empty_lines"),
    fd = bl("format_noneditable_selector"),
    gd = bl("custom_ui_selector"),
    pd = bl("inline"),
    hd = bl("hidden_input"),
    bd = bl("submit_patch"),
    vd = bl("add_form_submit_trigger"),
    yd = bl("add_unload_trigger"),
    Cd = bl("custom_undo_redo_levels"),
    wd = bl("disable_nodechange"),
    xd = bl("readonly"),
    kd = bl("editable_root"),
    Ed = bl("content_css_cors"),
    Sd = bl("plugins"),
    _d = bl("external_plugins"),
    Nd = bl("block_unsupported_drop"),
    Rd = bl("visual"),
    Ad = bl("visual_table_class"),
    Od = bl("visual_anchor_class"),
    Td = bl("iframe_aria_text"),
    Bd = bl("setup"),
    Dd = bl("init_instance_callback"),
    Pd = bl("urlconverter_callback"),
    Ld = bl("auto_focus"),
    Md = bl("browser_spellcheck"),
    Id = bl("protect"),
    Fd = bl("paste_block_drop"),
    Ud = bl("paste_data_images"),
    zd = bl("paste_preprocess"),
    jd = bl("paste_postprocess"),
    Hd = bl("newdocument_content"),
    $d = bl("paste_webkit_styles"),
    Vd = bl("paste_remove_styles_if_webkit"),
    qd = bl("paste_merge_formats"),
    Wd = bl("smart_paste"),
    Kd = bl("paste_as_text"),
    Gd = bl("paste_tab_spaces"),
    Yd = bl("allow_html_data_urls"),
    Xd = bl("text_patterns"),
    Qd = bl("text_patterns_lookup"),
    Jd = bl("noneditable_class"),
    Zd = bl("editable_class"),
    ec = bl("noneditable_regexp"),
    tc = bl("preserve_cdata"),
    nc = bl("highlight_on_focus"),
    oc = bl("xss_sanitization"),
    rc = bl("init_content_sync"),
    sc = function sc(e) {
      return Dt.explode(e.options.get("images_file_types"));
    },
    ac = bl("table_tab_navigation"),
    ic = bl("details_initial_state"),
    lc = bl("details_serialized_state"),
    dc = $o,
    cc = Jo,
    uc = function uc(e) {
      var t = e.parentNode;
      t && t.removeChild(e);
    },
    mc = function mc(e) {
      var t = Fr(e);
      return {
        count: e.length - t.length,
        text: t
      };
    },
    fc = function fc(e) {
      var t;
      for (; -1 !== (t = e.data.lastIndexOf(Mr));) e.deleteData(t, 1);
    },
    gc = function gc(e, t) {
      return hc(e), t;
    },
    pc = function pc(e, t) {
      return Li.isTextPosition(t) ? function (e, t) {
        return cc(e) && t.container() === e ? function (e, t) {
          var n = mc(e.data.substr(0, t.offset())),
            o = mc(e.data.substr(t.offset()));
          return (n.text + o.text).length > 0 ? (fc(e), Li(e, t.offset() - n.count)) : t;
        }(e, t) : gc(e, t);
      }(e, t) : function (e, t) {
        return t.container() === e.parentNode ? function (e, t) {
          var n = t.container(),
            o = function (e, t) {
              var n = j(e, t);
              return -1 === n ? I.none() : I.some(n);
            }(ce(n.childNodes), e).map(function (e) {
              return e < t.offset() ? Li(n, t.offset() - 1) : t;
            }).getOr(t);
          return hc(e), o;
        }(e, t) : gc(e, t);
      }(e, t);
    },
    hc = function hc(e) {
      dc(e) && $r(e) && (Vr(e) ? e.removeAttribute("data-mce-caret") : uc(e)), cc(e) && (fc(e), 0 === e.data.length && uc(e));
    },
    bc = ir,
    vc = cr,
    yc = lr,
    Cc = function Cc(e, t, n) {
      var o = di(t.getBoundingClientRect(), n);
      var r, s;
      if ("BODY" === e.tagName) {
        var _t46 = e.ownerDocument.documentElement;
        r = e.scrollLeft || _t46.scrollLeft, s = e.scrollTop || _t46.scrollTop;
      } else {
        var _t47 = e.getBoundingClientRect();
        r = e.scrollLeft - _t47.left, s = e.scrollTop - _t47.top;
      }
      o.left += r, o.right += r, o.top += s, o.bottom += s, o.width = 1;
      var a = t.offsetWidth - t.clientWidth;
      return a > 0 && (n && (a *= -1), o.left += a, o.right += a), o;
    },
    wc = function wc(e, t, n, o) {
      var r = za();
      var s, a;
      var i = Nl(e),
        l = e.dom,
        d = function d() {
          (function (e) {
            var t, n;
            var o = Fo(yn(e), "*[contentEditable=false],video,audio,embed,object");
            for (var _e40 = 0; _e40 < o.length; _e40++) {
              var _r29 = o[_e40].dom;
              var _s15 = _r29.previousSibling;
              if (Gr(_s15)) {
                var _e41 = _s15.data;
                1 === _e41.length ? null === (t = _s15.parentNode) || void 0 === t || t.removeChild(_s15) : _s15.deleteData(_e41.length - 1, 1);
              }
              _s15 = _r29.nextSibling, Kr(_s15) && (1 === _s15.data.length ? null === (n = _s15.parentNode) || void 0 === n || n.removeChild(_s15) : _s15.deleteData(0, 1));
            }
          })(t), a && (hc(a), a = null), r.on(function (e) {
            l.remove(e.caret), r.clear();
          }), s && (clearInterval(s), s = void 0);
        };
      return {
        show: function show(e, c) {
          var u;
          if (d(), yc(c)) return null;
          if (!n(c)) return a = function (e, t) {
            var n;
            var o = (null !== (n = e.ownerDocument) && void 0 !== n ? n : document).createTextNode(Mr),
              r = e.parentNode;
            if (t) {
              var _t48 = e.previousSibling;
              if (zr(_t48)) {
                if ($r(_t48)) return _t48;
                if (Gr(_t48)) return _t48.splitText(_t48.data.length - 1);
              }
              null == r || r.insertBefore(o, e);
            } else {
              var _t49 = e.nextSibling;
              if (zr(_t49)) {
                if ($r(_t49)) return _t49;
                if (Kr(_t49)) return _t49.splitText(1), _t49;
              }
              e.nextSibling ? null == r || r.insertBefore(o, e.nextSibling) : null == r || r.appendChild(o);
            }
            return o;
          }(c, e), u = c.ownerDocument.createRange(), kc(a.nextSibling) ? (u.setStart(a, 0), u.setEnd(a, 0)) : (u.setStart(a, 1), u.setEnd(a, 1)), u;
          {
            var _n46 = function (e, t, n) {
                var o;
                var r = (null !== (o = t.ownerDocument) && void 0 !== o ? o : document).createElement(e);
                r.setAttribute("data-mce-caret", n ? "before" : "after"), r.setAttribute("data-mce-bogus", "all"), r.appendChild(Dr().dom);
                var s = t.parentNode;
                return n ? null == s || s.insertBefore(r, t) : t.nextSibling ? null == s || s.insertBefore(r, t.nextSibling) : null == s || s.appendChild(r), r;
              }(i, c, e),
              _d5 = Cc(t, c, e);
            l.setStyle(_n46, "top", _d5.top), a = _n46;
            var _m3 = l.create("div", {
              "class": "mce-visual-caret",
              "data-mce-bogus": "all"
            });
            l.setStyles(_m3, _objectSpread({}, _d5)), l.add(t, _m3), r.set({
              caret: _m3,
              element: c,
              before: e
            }), e && l.addClass(_m3, "mce-visual-caret-before"), s = setInterval(function () {
              r.on(function (e) {
                o() ? l.toggleClass(e.caret, "mce-visual-caret-hidden") : l.addClass(e.caret, "mce-visual-caret-hidden");
              });
            }, 500), u = c.ownerDocument.createRange(), u.setStart(_n46, 0), u.setEnd(_n46, 0);
          }
          return u;
        },
        hide: d,
        getCss: function getCss() {
          return ".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";
        },
        reposition: function reposition() {
          r.on(function (e) {
            var n = Cc(t, e.element, e.before);
            l.setStyles(e.caret, _objectSpread({}, n));
          });
        },
        destroy: function destroy() {
          return clearInterval(s);
        }
      };
    },
    xc = function xc() {
      return At.browser.isFirefox();
    },
    kc = function kc(e) {
      return bc(e) || vc(e);
    },
    Ec = function Ec(e) {
      return (kc(e) || Yo(e) && xc()) && On(yn(e)).exists(no);
    },
    Sc = ar,
    _c = ir,
    Nc = cr,
    Rc = Wo("display", "block table table-cell table-caption list-item"),
    Ac = $r,
    Oc = jr,
    Tc = $o,
    Bc = Jo,
    Dc = ss,
    Pc = function Pc(e) {
      return e > 0;
    },
    Lc = function Lc(e) {
      return e < 0;
    },
    Mc = function Mc(e, t) {
      var n;
      for (; n = e(t);) if (!Oc(n)) return n;
      return null;
    },
    Ic = function Ic(e, t, n, o, r) {
      var s = new zo(e, o),
        a = _c(e) || Oc(e);
      var i;
      if (Lc(t)) {
        if (a && (i = Mc(s.prev.bind(s), !0), n(i))) return i;
        for (; i = Mc(s.prev.bind(s), r);) if (n(i)) return i;
      }
      if (Pc(t)) {
        if (a && (i = Mc(s.next.bind(s), !0), n(i))) return i;
        for (; i = Mc(s.next.bind(s), r);) if (n(i)) return i;
      }
      return null;
    },
    Fc = function Fc(e, t) {
      for (; e && e !== t;) {
        if (Rc(e)) return e;
        e = e.parentNode;
      }
      return null;
    },
    Uc = function Uc(e, t, n) {
      return Fc(e.container(), n) === Fc(t.container(), n);
    },
    zc = function zc(e, t) {
      if (!t) return I.none();
      var n = t.container(),
        o = t.offset();
      return Tc(n) ? I.from(n.childNodes[o + e]) : I.none();
    },
    jc = function jc(e, t) {
      var n;
      var o = (null !== (n = t.ownerDocument) && void 0 !== n ? n : document).createRange();
      return e ? (o.setStartBefore(t), o.setEndBefore(t)) : (o.setStartAfter(t), o.setEndAfter(t)), o;
    },
    Hc = function Hc(e, t, n) {
      return Fc(t, e) === Fc(n, e);
    },
    $c = function $c(e, t, n) {
      var o = e ? "previousSibling" : "nextSibling";
      var r = n;
      for (; r && r !== t;) {
        var _e42 = r[o];
        if (_e42 && Ac(_e42) && (_e42 = _e42[o]), _c(_e42) || Nc(_e42)) {
          if (Hc(t, _e42, r)) return _e42;
          break;
        }
        if (Dc(_e42)) break;
        r = r.parentNode;
      }
      return null;
    },
    Vc = O(jc, !0),
    qc = O(jc, !1),
    Wc = function Wc(e, t, n) {
      var o;
      var r = O($c, !0, t),
        s = O($c, !1, t),
        a = n.startContainer,
        i = n.startOffset;
      if (jr(a)) {
        var _e43 = Bc(a) ? a.parentNode : a,
          _t50 = _e43.getAttribute("data-mce-caret");
        if ("before" === _t50 && (o = _e43.nextSibling, Ec(o))) return Vc(o);
        if ("after" === _t50 && (o = _e43.previousSibling, Ec(o))) return qc(o);
      }
      if (!n.collapsed) return n;
      if (Jo(a)) {
        if (Ac(a)) {
          if (1 === e) {
            if (o = s(a), o) return Vc(o);
            if (o = r(a), o) return qc(o);
          }
          if (-1 === e) {
            if (o = r(a), o) return qc(o);
            if (o = s(a), o) return Vc(o);
          }
          return n;
        }
        if (Gr(a) && i >= a.data.length - 1) return 1 === e && (o = s(a), o) ? Vc(o) : n;
        if (Kr(a) && i <= 1) return -1 === e && (o = r(a), o) ? qc(o) : n;
        if (i === a.data.length) return o = s(a), o ? Vc(o) : n;
        if (0 === i) return o = r(a), o ? qc(o) : n;
      }
      return n;
    },
    Kc = function Kc(e, t) {
      return zc(e ? 0 : -1, t).filter(_c);
    },
    Gc = function Gc(e, t, n) {
      var o = Wc(e, t, n);
      return -1 === e ? Li.fromRangeStart(o) : Li.fromRangeEnd(o);
    },
    Yc = function Yc(e) {
      return I.from(e.getNode()).map(yn);
    },
    Xc = function Xc(e, t) {
      var n = t;
      for (; n = e(n);) if (n.isVisible()) return n;
      return n;
    },
    Qc = function Qc(e, t) {
      var n = Uc(e, t);
      return !(n || !rr(e.getNode())) || n;
    };
  var Jc;
  !function (e) {
    e[e.Backwards = -1] = "Backwards", e[e.Forwards = 1] = "Forwards";
  }(Jc || (Jc = {}));
  var Zc = ir,
    eu = Jo,
    tu = $o,
    nu = rr,
    ou = ss,
    ru = function ru(e) {
      return ns(e) || function (e) {
        return !!as(e) && !X(ce(e.getElementsByTagName("*")), function (e, t) {
          return e || Qr(t);
        }, !1);
      }(e);
    },
    su = is,
    au = function au(e, t) {
      return e.hasChildNodes() && t < e.childNodes.length ? e.childNodes[t] : null;
    },
    iu = function iu(e, t) {
      if (Pc(e)) {
        if (ou(t.previousSibling) && !eu(t.previousSibling)) return Li.before(t);
        if (eu(t)) return Li(t, 0);
      }
      if (Lc(e)) {
        if (ou(t.nextSibling) && !eu(t.nextSibling)) return Li.after(t);
        if (eu(t)) return Li(t, t.data.length);
      }
      return Lc(e) ? nu(t) ? Li.before(t) : Li.after(t) : Li.before(t);
    },
    lu = function lu(e, t, n) {
      var o, r, s, a;
      if (!tu(n) || !t) return null;
      if (t.isEqual(Li.after(n)) && n.lastChild) {
        if (a = Li.after(n.lastChild), Lc(e) && ou(n.lastChild) && tu(n.lastChild)) return nu(n.lastChild) ? Li.before(n.lastChild) : a;
      } else a = t;
      var i = a.container();
      var l = a.offset();
      if (eu(i)) {
        if (Lc(e) && l > 0) return Li(i, --l);
        if (Pc(e) && l < i.length) return Li(i, ++l);
        o = i;
      } else {
        if (Lc(e) && l > 0 && (r = au(i, l - 1), ou(r))) return !ru(r) && (s = Ic(r, e, su, r), s) ? eu(s) ? Li(s, s.data.length) : Li.after(s) : eu(r) ? Li(r, r.data.length) : Li.before(r);
        if (Pc(e) && l < i.childNodes.length && (r = au(i, l), ou(r))) return nu(r) ? function (e, t) {
          var n = t.nextSibling;
          return n && ou(n) ? eu(n) ? Li(n, 0) : Li.before(n) : lu(Jc.Forwards, Li.after(t), e);
        }(n, r) : !ru(r) && (s = Ic(r, e, su, r), s) ? eu(s) ? Li(s, 0) : Li.before(s) : eu(r) ? Li(r, 0) : Li.after(r);
        o = r || a.getNode();
      }
      if (o && (Pc(e) && a.isAtEnd() || Lc(e) && a.isAtStart()) && (o = Ic(o, e, M, n, !0), su(o, n))) return iu(e, o);
      r = o ? Ic(o, e, su, n) : o;
      var d = De(G(function (e, t) {
        var n = [];
        var o = e;
        for (; o && o !== t;) n.push(o), o = o.parentNode;
        return n;
      }(i, n), Zc));
      return !d || r && d.contains(r) ? r ? iu(e, r) : null : (a = Pc(e) ? Li.after(d) : Li.before(d), a);
    },
    du = function du(e) {
      return {
        next: function next(t) {
          return lu(Jc.Forwards, t, e);
        },
        prev: function prev(t) {
          return lu(Jc.Backwards, t, e);
        }
      };
    },
    cu = function cu(e) {
      return Li.isTextPosition(e) ? 0 === e.offset() : ss(e.getNode());
    },
    uu = function uu(e) {
      if (Li.isTextPosition(e)) {
        var _t51 = e.container();
        return e.offset() === _t51.data.length;
      }
      return ss(e.getNode(!0));
    },
    mu = function mu(e, t) {
      return !Li.isTextPosition(e) && !Li.isTextPosition(t) && e.getNode() === t.getNode(!0);
    },
    fu = function fu(e, t, n) {
      var o = du(t);
      return I.from(e ? o.next(n) : o.prev(n));
    },
    gu = function gu(e, t, n) {
      return fu(e, t, n).bind(function (o) {
        return Uc(n, o, t) && function (e, t, n) {
          return e ? !mu(t, n) && (o = t, !(!Li.isTextPosition(o) && rr(o.getNode()))) && uu(t) && cu(n) : !mu(n, t) && cu(t) && uu(n);
          var o;
        }(e, n, o) ? fu(e, t, o) : I.some(o);
      });
    },
    pu = function pu(e, t, n, o) {
      return gu(e, t, n).bind(function (n) {
        return o(n) ? pu(e, t, n, o) : I.some(n);
      });
    },
    hu = function hu(e, t) {
      var n = e ? t.firstChild : t.lastChild;
      return Jo(n) ? I.some(Li(n, e ? 0 : n.data.length)) : n ? ss(n) ? I.some(e ? Li.before(n) : rr(o = n) ? Li.before(o) : Li.after(o)) : function (e, t, n) {
        var o = e ? Li.before(n) : Li.after(n);
        return fu(e, t, o);
      }(e, t, n) : I.none();
      var o;
    },
    bu = O(fu, !0),
    vu = O(fu, !1),
    yu = O(hu, !0),
    Cu = O(hu, !1),
    wu = "_mce_caret",
    xu = function xu(e) {
      return $o(e) && e.id === wu;
    },
    ku = function ku(e, t) {
      var n = t;
      for (; n && n !== e;) {
        if (xu(n)) return n;
        n = n.parentNode;
      }
      return null;
    },
    Eu = function Eu(e) {
      return ke(e, "name");
    },
    Su = function Su(e) {
      return Dt.isArray(e.start);
    },
    _u = function _u(e) {
      return !(!Eu(e) && b(e.forward)) || e.forward;
    },
    Nu = function Nu(e, t) {
      return $o(t) && e.isBlock(t) && !t.innerHTML && (t.innerHTML = '<br data-mce-bogus="1" />'), t;
    },
    Ru = function Ru(e, t) {
      return Cu(e).fold(L, function (e) {
        return t.setStart(e.container(), e.offset()), t.setEnd(e.container(), e.offset()), !0;
      });
    },
    Au = function Au(e, t, n) {
      return !(!function (e) {
        return !e.hasChildNodes();
      }(t) || !ku(e, t) || (function (e, t) {
        var n;
        var o = (null !== (n = e.ownerDocument) && void 0 !== n ? n : document).createTextNode(Mr);
        e.appendChild(o), t.setStart(o, 0), t.setEnd(o, 0);
      }(t, n), 0));
    },
    Ou = function Ou(e, t, n, o) {
      var r = n[t ? "start" : "end"],
        s = e.getRoot();
      if (r) {
        var _e44 = s,
          _n47 = r[0];
        for (var _t52 = r.length - 1; _e44 && _t52 >= 1; _t52--) {
          var _n48 = _e44.childNodes;
          if (Au(s, _e44, o)) return !0;
          if (r[_t52] > _n48.length - 1) return !!Au(s, _e44, o) || Ru(_e44, o);
          _e44 = _n48[r[_t52]];
        }
        Jo(_e44) && (_n47 = Math.min(r[0], _e44.data.length)), $o(_e44) && (_n47 = Math.min(r[0], _e44.childNodes.length)), t ? o.setStart(_e44, _n47) : o.setEnd(_e44, _n47);
      }
      return !0;
    },
    Tu = function Tu(e) {
      return Jo(e) && e.data.length > 0;
    },
    Bu = function Bu(e, t, n) {
      var o = e.get(n.id + "_" + t),
        r = null == o ? void 0 : o.parentNode,
        s = n.keep;
      if (o && r) {
        var _a10, _i8;
        if ("start" === t ? s ? o.hasChildNodes() ? (_a10 = o.firstChild, _i8 = 1) : Tu(o.nextSibling) ? (_a10 = o.nextSibling, _i8 = 0) : Tu(o.previousSibling) ? (_a10 = o.previousSibling, _i8 = o.previousSibling.data.length) : (_a10 = r, _i8 = e.nodeIndex(o) + 1) : (_a10 = r, _i8 = e.nodeIndex(o)) : s ? o.hasChildNodes() ? (_a10 = o.firstChild, _i8 = 1) : Tu(o.previousSibling) ? (_a10 = o.previousSibling, _i8 = o.previousSibling.data.length) : (_a10 = r, _i8 = e.nodeIndex(o)) : (_a10 = r, _i8 = e.nodeIndex(o)), !s) {
          var _r30 = o.previousSibling,
            _s16 = o.nextSibling;
          var _l3;
          for (Dt.each(Dt.grep(o.childNodes), function (e) {
            Jo(e) && (e.data = e.data.replace(/\uFEFF/g, ""));
          }); _l3 = e.get(n.id + "_" + t);) e.remove(_l3, !0);
          if (Jo(_s16) && Jo(_r30) && !At.browser.isOpera()) {
            var _t53 = _r30.data.length;
            _r30.appendData(_s16.data), e.remove(_s16), _a10 = _r30, _i8 = _t53;
          }
        }
        return I.some(Li(_a10, _i8));
      }
      return I.none();
    },
    Du = function Du(e, t, n) {
      return function (e, t) {
        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
        return 2 === t ? Zi(Fr, n, e) : 3 === t ? function (e) {
          var t = e.getRng();
          return {
            start: qi(e.dom.getRoot(), Li.fromRangeStart(t)),
            end: qi(e.dom.getRoot(), Li.fromRangeEnd(t)),
            forward: e.isForward()
          };
        }(e) : t ? function (e) {
          return {
            rng: e.getRng(),
            forward: e.isForward()
          };
        }(e) : tl(e, !1);
      }(e, t, n);
    },
    Pu = function Pu(e, t) {
      (function (e, t) {
        var n = e.dom;
        if (t) {
          if (Su(t)) return function (e, t) {
            var n = e.createRng();
            return Ou(e, !0, t, n) && Ou(e, !1, t, n) ? I.some({
              range: n,
              forward: _u(t)
            }) : I.none();
          }(n, t);
          if (function (e) {
            return m(e.start);
          }(t)) return function (e, t) {
            var n = I.from(Wi(e.getRoot(), t.start)),
              o = I.from(Wi(e.getRoot(), t.end));
            return Mt(n, o, function (n, o) {
              var r = e.createRng();
              return r.setStart(n.container(), n.offset()), r.setEnd(o.container(), o.offset()), {
                range: r,
                forward: _u(t)
              };
            });
          }(n, t);
          if (function (e) {
            return ke(e, "id");
          }(t)) return function (e, t) {
            var n = Bu(e, "start", t),
              o = Bu(e, "end", t);
            return Mt(n, o.or(n), function (n, o) {
              var r = e.createRng();
              return r.setStart(Nu(e, n.container()), n.offset()), r.setEnd(Nu(e, o.container()), o.offset()), {
                range: r,
                forward: _u(t)
              };
            });
          }(n, t);
          if (Eu(t)) return function (e, t) {
            return I.from(e.select(t.name)[t.index]).map(function (t) {
              var n = e.createRng();
              return n.selectNode(t), {
                range: n,
                forward: !0
              };
            });
          }(n, t);
          if (function (e) {
            return ke(e, "rng");
          }(t)) return I.some({
            range: t.rng,
            forward: _u(t)
          });
        }
        return I.none();
      })(e, t).each(function (_ref6) {
        var t = _ref6.range,
          n = _ref6.forward;
        e.setRng(t, n);
      });
    },
    Lu = function Lu(e) {
      return $o(e) && "SPAN" === e.tagName && "bookmark" === e.getAttribute("data-mce-type");
    },
    Mu = (Iu = pr, function (e) {
      return Iu === e;
    });
  var Iu;
  var Fu = function Fu(e) {
      return "" !== e && -1 !== " \f\n\r\t\v".indexOf(e);
    },
    Uu = function Uu(e) {
      return !Fu(e) && !Mu(e) && !hr(e);
    },
    zu = function zu(e) {
      var t = e.toString(16);
      return (1 === t.length ? "0" + t : t).toUpperCase();
    },
    ju = function ju(e) {
      return function (e) {
        return {
          value: (t = e, ze(t, "#").toUpperCase())
        };
        var t;
      }(zu(e.red) + zu(e.green) + zu(e.blue));
    },
    Hu = /^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,
    $u = /^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,
    Vu = function Vu(e, t, n, o) {
      return {
        red: e,
        green: t,
        blue: n,
        alpha: o
      };
    },
    qu = function qu(e, t, n, o) {
      var r = parseInt(e, 10),
        s = parseInt(t, 10),
        a = parseInt(n, 10),
        i = parseFloat(o);
      return Vu(r, s, a, i);
    },
    Wu = function Wu(e) {
      return function (e) {
        if ("transparent" === e) return I.some(Vu(0, 0, 0, 0));
        var t = Hu.exec(e);
        if (null !== t) return I.some(qu(t[1], t[2], t[3], "1"));
        var n = $u.exec(e);
        return null !== n ? I.some(qu(n[1], n[2], n[3], n[4])) : I.none();
      }(e).map(ju).map(function (e) {
        return "#" + e.value;
      }).getOr(e);
    },
    Ku = function Ku(e) {
      var t = [];
      if (e) for (var _n49 = 0; _n49 < e.rangeCount; _n49++) t.push(e.getRangeAt(_n49));
      return t;
    },
    Gu = function Gu(e, t) {
      var n = Fo(t, "td[data-mce-selected],th[data-mce-selected]");
      return n.length > 0 ? n : function (e) {
        return G(function (e) {
          return te(e, function (e) {
            var t = gi(e);
            return t ? [yn(t)] : [];
          });
        }(e), Ar);
      }(e);
    },
    Yu = function Yu(e) {
      return Gu(Ku(e.selection.getSel()), yn(e.getBody()));
    },
    Xu = function Xu(e, t) {
      return Zn(e, "table", t);
    },
    Qu = function Qu(e) {
      return Fn(e).fold(N([e]), function (t) {
        return [e].concat(Qu(t));
      });
    },
    Ju = function Ju(e) {
      return Un(e).fold(N([e]), function (t) {
        return "br" === Ht(t) ? Bn(t).map(function (t) {
          return [e].concat(Ju(t));
        }).getOr([]) : [e].concat(Ju(t));
      });
    },
    Zu = function Zu(e, t) {
      return Mt(function (e) {
        var t = e.startContainer,
          n = e.startOffset;
        return Jo(t) ? 0 === n ? I.some(yn(t)) : I.none() : I.from(t.childNodes[n]).map(yn);
      }(t), function (e) {
        var t = e.endContainer,
          n = e.endOffset;
        return Jo(t) ? n === t.data.length ? I.some(yn(t)) : I.none() : I.from(t.childNodes[n - 1]).map(yn);
      }(t), function (t, n) {
        var o = J(Qu(e), O(En, t)),
          r = J(Ju(e), O(En, n));
        return o.isSome() && r.isSome();
      }).getOr(!1);
    },
    em = function em(e, t, n, o) {
      var r = n,
        s = new zo(n, r),
        a = ye(e.schema.getMoveCaretBeforeOnEnterElements(), function (e, t) {
          return !H(["td", "th", "table"], t.toLowerCase());
        });
      var i = n;
      do {
        if (Jo(i) && 0 !== Dt.trim(i.data).length) return void (o ? t.setStart(i, 0) : t.setEnd(i, i.data.length));
        if (a[i.nodeName]) return void (o ? t.setStartBefore(i) : "BR" === i.nodeName ? t.setEndBefore(i) : t.setEndAfter(i));
      } while (i = o ? s.next() : s.prev());
      "BODY" === r.nodeName && (o ? t.setStart(r, 0) : t.setEnd(r, r.childNodes.length));
    },
    tm = function tm(e) {
      var t = e.selection.getSel();
      return C(t) && t.rangeCount > 0;
    },
    nm = function nm(e, t) {
      var n = Yu(e);
      n.length > 0 ? q(n, function (n) {
        var o = n.dom,
          r = e.dom.createRng();
        r.setStartBefore(o), r.setEndAfter(o), t(r, !0);
      }) : t(e.selection.getRng(), !1);
    },
    om = function om(e, t, n) {
      var o = tl(e, t);
      n(o), e.moveToBookmark(o);
    },
    rm = function rm(e) {
      return x(null == e ? void 0 : e.nodeType);
    },
    sm = function sm(e) {
      return $o(e) && !Lu(e) && !xu(e) && !Go(e);
    },
    am = function am(e) {
      return !0 === e.isContentEditable;
    },
    im = function im(e, t, n) {
      var o = e.selection,
        r = e.dom,
        s = o.getNode(),
        a = ir(s);
      om(o, !0, function () {
        t();
      }), a && ir(s) && r.isChildOf(s, e.getBody()) ? e.selection.select(s) : n(o.getStart()) && lm(r, o);
    },
    lm = function lm(e, t) {
      var n, o;
      var r = t.getRng(),
        s = r.startContainer,
        a = r.startOffset;
      if (!function (e, t) {
        if (sm(t) && !/^(TD|TH)$/.test(t.nodeName)) {
          var _n50 = e.getAttrib(t, "data-mce-selected"),
            _o42 = parseInt(_n50, 10);
          return !isNaN(_o42) && _o42 > 0;
        }
        return !1;
      }(e, t.getNode()) && $o(s)) {
        var _i9 = s.childNodes,
          _l4 = e.getRoot();
        var _d6;
        if (a < _i9.length) {
          var _t54 = _i9[a];
          _d6 = new zo(_t54, null !== (n = e.getParent(_t54, e.isBlock)) && void 0 !== n ? n : _l4);
        } else {
          var _t55 = _i9[_i9.length - 1];
          _d6 = new zo(_t55, null !== (o = e.getParent(_t55, e.isBlock)) && void 0 !== o ? o : _l4), _d6.next(!0);
        }
        for (var _n51 = _d6.current(); _n51; _n51 = _d6.next()) {
          if ("false" === e.getContentEditable(_n51)) return;
          if (Jo(_n51) && !mm(_n51)) return r.setStart(_n51, 0), void t.setRng(r);
        }
      }
    },
    dm = function dm(e, t, n) {
      if (e) {
        var _o43 = t ? "nextSibling" : "previousSibling";
        for (e = n ? e : e[_o43]; e; e = e[_o43]) if ($o(e) || !mm(e)) return e;
      }
    },
    cm = function cm(e, t) {
      return !!e.getTextBlockElements()[t.nodeName.toLowerCase()] || As(e, t);
    },
    um = function um(e, t, n) {
      return e.schema.isValidChild(t, n);
    },
    mm = function mm(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
      if (C(e) && Jo(e)) {
        var _n52 = t ? e.data.replace(/ /g, "\xa0") : e.data;
        return ds(_n52);
      }
      return !1;
    },
    fm = function fm(e, t) {
      var n = e.dom;
      return sm(t) && "false" === n.getContentEditable(t) && function (e, t) {
        var n = "[data-mce-cef-wrappable]",
          o = fd(e),
          r = Ye(o) ? n : "".concat(n, ",").concat(o);
        return xn(yn(t), r);
      }(e, t) && 0 === n.select('[contenteditable="true"]', t).length;
    },
    gm = function gm(e, t) {
      return w(e) ? e(t) : (C(t) && (e = e.replace(/%(\w+)/g, function (e, n) {
        return t[n] || e;
      })), e);
    },
    pm = function pm(e, t) {
      return t = t || "", e = "" + ((e = e || "").nodeName || e), t = "" + (t.nodeName || t), e.toLowerCase() === t.toLowerCase();
    },
    hm = function hm(e, t) {
      if (y(e)) return null;
      {
        var _n53 = String(e);
        return "color" !== t && "backgroundColor" !== t || (_n53 = Wu(_n53)), "fontWeight" === t && 700 === e && (_n53 = "bold"), "fontFamily" === t && (_n53 = _n53.replace(/[\'\"]/g, "").replace(/,\s+/g, ",")), _n53;
      }
    },
    bm = function bm(e, t, n) {
      var o = e.getStyle(t, n);
      return hm(o, n);
    },
    vm = function vm(e, t) {
      var n;
      return e.getParent(t, function (t) {
        return !!$o(t) && (n = e.getStyle(t, "text-decoration"), !!n && "none" !== n);
      }), n;
    },
    ym = function ym(e, t, n) {
      return e.getParents(t, n, e.getRoot());
    },
    Cm = function Cm(e, t, n) {
      var o = e.formatter.get(t);
      return C(o) && $(o, n);
    },
    wm = function wm(e) {
      return Ee(e, "block");
    },
    xm = function xm(e) {
      return Ee(e, "selector");
    },
    km = function km(e) {
      return Ee(e, "inline");
    },
    Em = function Em(e) {
      return xm(e) && !1 !== e.expand && !km(e);
    },
    Sm = Lu,
    _m = ym,
    Nm = mm,
    Rm = cm,
    Am = function Am(e, t) {
      var n = t;
      for (; n;) {
        if ($o(n) && e.getContentEditable(n)) return "false" === e.getContentEditable(n) ? n : t;
        n = n.parentNode;
      }
      return t;
    },
    Om = function Om(e, t, n, o) {
      var r = t.data;
      if (e) {
        for (var _e45 = n; _e45 > 0; _e45--) if (o(r.charAt(_e45 - 1))) return _e45;
      } else for (var _e46 = n; _e46 < r.length; _e46++) if (o(r.charAt(_e46))) return _e46;
      return -1;
    },
    Tm = function Tm(e, t, n) {
      return Om(e, t, n, function (e) {
        return Mu(e) || Fu(e);
      });
    },
    Bm = function Bm(e, t, n) {
      return Om(e, t, n, Uu);
    },
    Dm = function Dm(e, t, n, o, r, s) {
      var a;
      var i = e.getParent(n, e.isBlock) || t,
        l = function l(t, n, o) {
          var s = ai(e),
            l = r ? s.backwards : s.forwards;
          return I.from(l(t, n, function (e, t) {
            return Sm(e.parentNode) ? -1 : (a = e, o(r, e, t));
          }, i));
        };
      return l(n, o, Tm).bind(function (e) {
        return s ? l(e.container, e.offset + (r ? -1 : 0), Bm) : I.some(e);
      }).orThunk(function () {
        return a ? I.some({
          container: a,
          offset: r ? 0 : a.length
        }) : I.none();
      });
    },
    Pm = function Pm(e, t, n, o, r) {
      var s = o[r];
      Jo(o) && Ye(o.data) && s && (o = s);
      var a = _m(e, o);
      for (var _o44 = 0; _o44 < a.length; _o44++) for (var _r31 = 0; _r31 < t.length; _r31++) {
        var _s17 = t[_r31];
        if ((!C(_s17.collapsed) || _s17.collapsed === n.collapsed) && xm(_s17) && e.is(a[_o44], _s17.selector)) return a[_o44];
      }
      return o;
    },
    Lm = function Lm(e, t, n, o) {
      var r;
      var s = n;
      var a = e.getRoot(),
        i = t[0];
      if (wm(i) && (s = i.wrapper ? null : e.getParent(n, i.block, a)), !s) {
        var _t56 = null !== (r = e.getParent(n, "LI,TD,TH")) && void 0 !== r ? r : a;
        s = e.getParent(Jo(n) ? n.parentNode : n, function (t) {
          return t !== a && Rm(e.schema, t);
        }, _t56);
      }
      if (s && wm(i) && i.wrapper && (s = _m(e, s, "ul,ol").reverse()[0] || s), !s) for (s = n; s && s[o] && !e.isBlock(s[o]) && (s = s[o], !pm(s, "br")););
      return s || n;
    },
    Mm = function Mm(e, t, n, o) {
      var r = n.parentNode;
      return !C(n[o]) && (!(r !== t && !y(r) && !e.isBlock(r)) || Mm(e, t, r, o));
    },
    Im = function Im(e, t, n, o, r) {
      var s = n;
      var a = r ? "previousSibling" : "nextSibling",
        i = e.getRoot();
      if (Jo(n) && !Nm(n) && (r ? o > 0 : o < n.data.length)) return n;
      for (; s;) {
        if (!t[0].block_expand && e.isBlock(s)) return s;
        for (var _t57 = s[a]; _t57; _t57 = _t57[a]) {
          var _n54 = Jo(_t57) && !Mm(e, i, _t57, a);
          if (!Sm(_t57) && (!rr(l = _t57) || !l.getAttribute("data-mce-bogus") || l.nextSibling) && !Nm(_t57, _n54)) return s;
        }
        if (s === i || s.parentNode === i) {
          n = s;
          break;
        }
        s = s.parentNode;
      }
      var l;
      return n;
    },
    Fm = function Fm(e) {
      return Sm(e.parentNode) || Sm(e);
    },
    Um = function Um(e, t, n) {
      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
      var r = t.startContainer,
        s = t.startOffset,
        a = t.endContainer,
        i = t.endOffset;
      var l = n[0];
      return $o(r) && r.hasChildNodes() && (r = pi(r, s), Jo(r) && (s = 0)), $o(a) && a.hasChildNodes() && (a = pi(a, t.collapsed ? i : i - 1), Jo(a) && (i = a.data.length)), r = Am(e, r), a = Am(e, a), Fm(r) && (r = Sm(r) ? r : r.parentNode, r = t.collapsed ? r.previousSibling || r : r.nextSibling || r, Jo(r) && (s = t.collapsed ? r.length : 0)), Fm(a) && (a = Sm(a) ? a : a.parentNode, a = t.collapsed ? a.nextSibling || a : a.previousSibling || a, Jo(a) && (i = t.collapsed ? 0 : a.length)), t.collapsed && (Dm(e, e.getRoot(), r, s, !0, o).each(function (_ref7) {
        var e = _ref7.container,
          t = _ref7.offset;
        r = e, s = t;
      }), Dm(e, e.getRoot(), a, i, !1, o).each(function (_ref8) {
        var e = _ref8.container,
          t = _ref8.offset;
        a = e, i = t;
      })), (km(l) || l.block_expand) && (km(l) && Jo(r) && 0 !== s || (r = Im(e, n, r, s, !0)), km(l) && Jo(a) && i !== a.data.length || (a = Im(e, n, a, i, !1))), Em(l) && (r = Pm(e, n, t, r, "previousSibling"), a = Pm(e, n, t, a, "nextSibling")), (wm(l) || xm(l)) && (r = Lm(e, n, r, "previousSibling"), a = Lm(e, n, a, "nextSibling"), wm(l) && (e.isBlock(r) || (r = Im(e, n, r, s, !0)), e.isBlock(a) || (a = Im(e, n, a, i, !1)))), $o(r) && r.parentNode && (s = e.nodeIndex(r), r = r.parentNode), $o(a) && a.parentNode && (i = e.nodeIndex(a) + 1, a = a.parentNode), {
        startContainer: r,
        startOffset: s,
        endContainer: a,
        endOffset: i
      };
    },
    zm = function zm(e, t, n) {
      var o;
      var r = t.startOffset,
        s = pi(t.startContainer, r),
        a = t.endOffset,
        i = pi(t.endContainer, a - 1),
        l = function l(e) {
          var t = e[0];
          Jo(t) && t === s && r >= t.data.length && e.splice(0, 1);
          var n = e[e.length - 1];
          return 0 === a && e.length > 0 && n === i && Jo(n) && e.splice(e.length - 1, 1), e;
        },
        d = function d(e, t, n) {
          var o = [];
          for (; e && e !== n; e = e[t]) o.push(e);
          return o;
        },
        c = function c(t, n) {
          return e.getParent(t, function (e) {
            return e.parentNode === n;
          }, n);
        },
        u = function u(e, t, o) {
          var r = o ? "nextSibling" : "previousSibling";
          for (var _s18 = e, _a11 = _s18.parentNode; _s18 && _s18 !== t; _s18 = _a11) {
            _a11 = _s18.parentNode;
            var _t58 = d(_s18 === e ? _s18 : _s18[r], r);
            _t58.length && (o || _t58.reverse(), n(l(_t58)));
          }
        };
      if (s === i) return n(l([s]));
      var m = null !== (o = e.findCommonAncestor(s, i)) && void 0 !== o ? o : e.getRoot();
      if (e.isChildOf(s, i)) return u(s, m, !0);
      if (e.isChildOf(i, s)) return u(i, m);
      var f = c(s, m) || s,
        g = c(i, m) || i;
      u(s, f, !0);
      var p = d(f === s ? f : f.nextSibling, "nextSibling", g === i ? g.nextSibling : g);
      p.length && n(l(p)), u(i, g);
    },
    jm = ['pre[class*=language-][contenteditable="false"]', "figure.image", "div[data-ephox-embed-iri]", "div.tiny-pageembed", "div.mce-toc", "div[data-mce-toc]"],
    Hm = function Hm(e, t, n, o, r, s) {
      var _n$uid = n.uid,
        a = _n$uid === void 0 ? t : _n$uid,
        i = _objectWithoutProperties(n, _excluded);
      un(e, $a()), Jt(e, "".concat(qa()), a), Jt(e, "".concat(Va()), o);
      var _r32 = r(a, i),
        _r32$attributes = _r32.attributes,
        l = _r32$attributes === void 0 ? {} : _r32$attributes,
        _r32$classes = _r32.classes,
        d = _r32$classes === void 0 ? [] : _r32$classes;
      if (Zt(e, l), function (e, t) {
        q(t, function (t) {
          un(e, t);
        });
      }(e, d), s) {
        d.length > 0 && Jt(e, "".concat(Ka()), d.join(","));
        var _t59 = me(l);
        _t59.length > 0 && Jt(e, "".concat(Ga()), _t59.join(","));
      }
    },
    $m = function $m(e, t, n, o, r) {
      var s = bn("span", e);
      return Hm(s, t, n, o, r, !1), s;
    },
    Vm = function Vm(e, t, n, o, r, s) {
      var a = [],
        i = $m(e.getDoc(), n, s, o, r),
        l = za(),
        d = function d() {
          l.clear();
        },
        c = function c(e) {
          q(e, u);
        },
        u = function u(t) {
          switch (function (e, t, n, o) {
            return An(t).fold(function () {
              return "skipping";
            }, function (r) {
              return "br" === o || function (e) {
                return Kt(e) && vr(e) === Mr;
              }(t) ? "valid" : function (e) {
                return Wt(e) && gn(e, $a());
              }(t) ? "existing" : xu(t.dom) ? "caret" : $(jm, function (e) {
                return xn(t, e);
              }) ? "valid-block" : um(e, n, o) && um(e, Ht(r), n) ? "valid" : "invalid-child";
            });
          }(e, t, "span", Ht(t))) {
            case "invalid-child":
              {
                d();
                var _e47 = Mn(t);
                c(_e47), d();
                break;
              }
            case "valid-block":
              d(), Hm(t, n, s, o, r, !0);
              break;
            case "valid":
              {
                var _e48 = l.get().getOrThunk(function () {
                  var e = oi(i);
                  return a.push(e), l.set(e), e;
                });
                vo(t, _e48);
                break;
              }
          }
        };
      return zm(e.dom, t, function (e) {
        d(), function (e) {
          var t = V(e, yn);
          c(t);
        }(e);
      }), a;
    },
    qm = function qm(e) {
      var t = function () {
        var e = {};
        return {
          register: function register(t, n) {
            e[t] = {
              name: t,
              settings: n
            };
          },
          lookup: function lookup(t) {
            return xe(e, t).map(function (e) {
              return e.settings;
            });
          },
          getNames: function getNames() {
            return me(e);
          }
        };
      }();
      (function (e, t) {
        var n = Va(),
          o = function o(e) {
            return I.from(e.attr(n)).bind(t.lookup);
          },
          r = function r(e) {
            var t, n;
            e.attr(qa(), null), e.attr(Va(), null), e.attr(Wa(), null);
            var o = I.from(e.attr(Ga())).map(function (e) {
                return e.split(",");
              }).getOr([]),
              r = I.from(e.attr(Ka())).map(function (e) {
                return e.split(",");
              }).getOr([]);
            q(o, function (t) {
              return e.attr(t, null);
            });
            var s = null !== (n = null === (t = e.attr("class")) || void 0 === t ? void 0 : t.split(" ")) && void 0 !== n ? n : [],
              a = re(s, [$a()].concat(r));
            e.attr("class", a.length > 0 ? a.join(" ") : null), e.attr(Ka(), null), e.attr(Ga(), null);
          };
        e.serializer.addTempAttr(Wa()), e.serializer.addAttributeFilter(n, function (e) {
          var _iterator2 = _createForOfIteratorHelper(e),
            _step2;
          try {
            var _loop = function _loop() {
              var t = _step2.value;
              o(t).each(function (e) {
                !1 === e.persistent && ("span" === t.name ? t.unwrap() : r(t));
              });
            };
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              _loop();
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }
        });
      })(e, t);
      var n = function (e, t) {
          var n = Da({}),
            o = function o() {
              return {
                listeners: [],
                previous: za()
              };
            },
            r = function r(e, t) {
              s(e, function (e) {
                return t(e), e;
              });
            },
            s = function s(e, t) {
              var r = n.get(),
                s = t(xe(r, e).getOrThunk(o));
              r[e] = s, n.set(r);
            },
            a = function a(t, n) {
              q(Ja(e, t), function (e) {
                n ? Jt(e, Wa(), "true") : on(e, Wa());
              });
            },
            i = Ha(function () {
              var n = ae(t.getNames());
              q(n, function (t) {
                s(t, function (n) {
                  var o = n.previous.get();
                  return Xa(e, I.some(t)).fold(function () {
                    o.each(function (e) {
                      (function (e) {
                        r(e, function (t) {
                          q(t.listeners, function (t) {
                            return t(!1, e);
                          });
                        });
                      })(t), n.previous.clear(), a(e, !1);
                    });
                  }, function (_ref9) {
                    var e = _ref9.uid,
                      t = _ref9.name,
                      s = _ref9.elements;
                    Pt(o, e) || (o.each(function (e) {
                      return a(e, !1);
                    }), function (e, t, n) {
                      r(e, function (o) {
                        q(o.listeners, function (o) {
                          return o(!0, e, {
                            uid: t,
                            nodes: V(n, function (e) {
                              return e.dom;
                            })
                          });
                        });
                      });
                    }(t, e, s), n.previous.set(e), a(e, !0));
                  }), {
                    previous: n.previous,
                    listeners: n.listeners
                  };
                });
              });
            }, 30);
          return e.on("remove", function () {
            i.cancel();
          }), e.on("NodeChange", function () {
            i.throttle();
          }), {
            addListener: function addListener(e, t) {
              s(e, function (e) {
                return {
                  previous: e.previous,
                  listeners: e.listeners.concat([t])
                };
              });
            }
          };
        }(e, t),
        o = Xt("span"),
        r = function r(e) {
          q(e, function (e) {
            o(e) ? xo(e) : function (e) {
              fn(e, $a()), on(e, "".concat(qa())), on(e, "".concat(Va())), on(e, "".concat(Wa()));
              var t = tn(e, "".concat(Ga())).map(function (e) {
                  return e.split(",");
                }).getOr([]),
                n = tn(e, "".concat(Ka())).map(function (e) {
                  return e.split(",");
                }).getOr([]);
              var o;
              q(t, function (t) {
                return on(e, t);
              }), o = e, q(n, function (e) {
                fn(o, e);
              }), on(e, "".concat(Ka())), on(e, "".concat(Ga()));
            }(e);
          });
        };
      return {
        register: function register(e, n) {
          t.register(e, n);
        },
        annotate: function annotate(n, o) {
          t.lookup(n).each(function (t) {
            (function (e, t, n, o) {
              e.undoManager.transact(function () {
                var r = e.selection,
                  s = r.getRng(),
                  a = Yu(e).length > 0,
                  i = ti("mce-annotation");
                if (s.collapsed && !a && function (e, t) {
                  var n = Um(e.dom, t, [{
                    inline: "span"
                  }]);
                  t.setStart(n.startContainer, n.startOffset), t.setEnd(n.endContainer, n.endOffset), e.selection.setRng(t);
                }(e, s), r.getRng().collapsed && !a) {
                  var _s19 = $m(e.getDoc(), i, o, t, n.decorate);
                  So(_s19, pr), r.getRng().insertNode(_s19.dom), r.select(_s19.dom);
                } else om(r, !1, function () {
                  nm(e, function (r) {
                    Vm(e, r, i, t, n.decorate, o);
                  });
                });
              });
            })(e, n, t, o);
          });
        },
        annotationChanged: function annotationChanged(e, t) {
          n.addListener(e, t);
        },
        remove: function remove(t) {
          Xa(e, I.some(t)).each(function (_ref10) {
            var t = _ref10.elements;
            var n = e.selection.getBookmark();
            r(t), e.selection.moveToBookmark(n);
          });
        },
        removeAll: function removeAll(t) {
          var n = e.selection.getBookmark();
          ge(Za(e, t), function (e, t) {
            r(e);
          }), e.selection.moveToBookmark(n);
        },
        getAll: function getAll(t) {
          var n = Za(e, t);
          return pe(n, function (e) {
            return V(e, function (e) {
              return e.dom;
            });
          });
        }
      };
    },
    Wm = function Wm(e) {
      return {
        getBookmark: O(Du, e),
        moveToBookmark: O(Pu, e)
      };
    };
  Wm.isBookmarkNode = Lu;
  var Km = function Km(e, t, n) {
      return !n.collapsed && $(n.getClientRects(), function (n) {
        return function (e, t, n) {
          return t >= e.left && t <= e.right && n >= e.top && n <= e.bottom;
        }(n, e, t);
      });
    },
    Gm = function Gm(e, t, n) {
      e.dispatch(t, n);
    },
    Ym = function Ym(e, t, n, o) {
      e.dispatch("FormatApply", {
        format: t,
        node: n,
        vars: o
      });
    },
    Xm = function Xm(e, t, n, o) {
      e.dispatch("FormatRemove", {
        format: t,
        node: n,
        vars: o
      });
    },
    Qm = function Qm(e, t) {
      return e.dispatch("SetContent", t);
    },
    Jm = function Jm(e, t) {
      return e.dispatch("GetContent", t);
    },
    Zm = function Zm(e, t) {
      return e.dispatch("PastePlainTextToggle", {
        state: t
      });
    },
    ef = {
      BACKSPACE: 8,
      DELETE: 46,
      DOWN: 40,
      ENTER: 13,
      ESC: 27,
      LEFT: 37,
      RIGHT: 39,
      SPACEBAR: 32,
      TAB: 9,
      UP: 38,
      PAGE_UP: 33,
      PAGE_DOWN: 34,
      END: 35,
      HOME: 36,
      modifierPressed: function modifierPressed(e) {
        return e.shiftKey || e.ctrlKey || e.altKey || ef.metaKeyPressed(e);
      },
      metaKeyPressed: function metaKeyPressed(e) {
        return At.os.isMacOS() || At.os.isiOS() ? e.metaKey : e.ctrlKey && !e.altKey;
      }
    },
    tf = "data-mce-selected",
    nf = Math.abs,
    of = Math.round,
    rf = {
      nw: [0, 0, -1, -1],
      ne: [1, 0, 1, -1],
      se: [1, 1, 1, 1],
      sw: [0, 1, -1, 1]
    },
    sf = function sf(e, t) {
      var n = t.dom,
        o = t.getDoc(),
        r = document,
        s = t.getBody();
      var a, i, l, d, c, u, m, f, g, p, h, b, v, y, w;
      var x = function x(e) {
          return C(e) && (sr(e) || n.is(e, "figure.image"));
        },
        k = function k(e) {
          return cr(e) || n.hasClass(e, "mce-preview-object");
        },
        E = function E(e) {
          var n = e.target;
          (function (e, t) {
            if (function (e) {
              return "longpress" === e.type || 0 === e.type.indexOf("touch");
            }(e)) {
              var _n55 = e.touches[0];
              return x(e.target) && !Km(_n55.clientX, _n55.clientY, t);
            }
            return x(e.target) && !Km(e.clientX, e.clientY, t);
          })(e, t.selection.getRng()) && !e.isDefaultPrevented() && t.selection.select(n);
        },
        S = function S(e) {
          return n.hasClass(e, "mce-preview-object") && C(e.firstElementChild) ? [e, e.firstElementChild] : n.is(e, "figure.image") ? [e.querySelector("img")] : [e];
        },
        _ = function _(e) {
          var o = ed(t);
          return !!o && "false" !== e.getAttribute("data-mce-resize") && e !== t.getBody() && (n.hasClass(e, "mce-preview-object") && C(e.firstElementChild) ? xn(yn(e.firstElementChild), o) : xn(yn(e), o));
        },
        N = function N(e, o, r) {
          if (C(r)) {
            var _s20 = S(e);
            q(_s20, function (e) {
              e.style[o] || !t.schema.isValid(e.nodeName.toLowerCase(), o) ? n.setStyle(e, o, r) : n.setAttrib(e, o, "" + r);
            });
          }
        },
        R = function R(e, t, n) {
          N(e, "width", t), N(e, "height", n);
        },
        A = function A(e) {
          var o, r, c, C, E;
          o = e.screenX - u, r = e.screenY - m, b = o * d[2] + f, v = r * d[3] + g, b = b < 5 ? 5 : b, v = v < 5 ? 5 : v, c = (x(a) || k(a)) && !1 !== td(t) ? !ef.modifierPressed(e) : ef.modifierPressed(e), c && (nf(o) > nf(r) ? (v = of(b * p), b = of(v / p)) : (b = of(v / p), v = of(b * p))), R(i, b, v), C = d.startPos.x + o, E = d.startPos.y + r, C = C > 0 ? C : 0, E = E > 0 ? E : 0, n.setStyles(l, {
            left: C,
            top: E,
            display: "block"
          }), l.innerHTML = b + " &times; " + v, d[2] < 0 && i.clientWidth <= b && n.setStyle(i, "left", void 0 + (f - b)), d[3] < 0 && i.clientHeight <= v && n.setStyle(i, "top", void 0 + (g - v)), o = s.scrollWidth - y, r = s.scrollHeight - w, o + r !== 0 && n.setStyles(l, {
            left: C - o,
            top: E - r
          }), h || (function (e, t, n, o, r) {
            e.dispatch("ObjectResizeStart", {
              target: t,
              width: n,
              height: o,
              origin: r
            });
          }(t, a, f, g, "corner-" + d.name), h = !0);
        },
        O = function O() {
          var e = h;
          h = !1, e && (N(a, "width", b), N(a, "height", v)), n.unbind(o, "mousemove", A), n.unbind(o, "mouseup", O), r !== o && (n.unbind(r, "mousemove", A), n.unbind(r, "mouseup", O)), n.remove(i), n.remove(l), n.remove(c), T(a), e && (function (e, t, n, o, r) {
            e.dispatch("ObjectResized", {
              target: t,
              width: n,
              height: o,
              origin: r
            });
          }(t, a, b, v, "corner-" + d.name), n.setAttrib(a, "style", n.getAttrib(a, "style"))), t.nodeChanged();
        },
        T = function T(e) {
          M();
          var h = n.getPos(e, s),
            C = h.x,
            x = h.y,
            E = e.getBoundingClientRect(),
            N = E.width || E.right - E.left,
            T = E.height || E.bottom - E.top;
          a !== e && (D(), a = e, b = v = 0);
          var B = t.dispatch("ObjectSelected", {
            target: e
          });
          _(e) && !B.isDefaultPrevented() ? ge(rf, function (e, t) {
            var h = n.get("mceResizeHandle" + t);
            h && n.remove(h), h = n.add(s, "div", {
              id: "mceResizeHandle" + t,
              "data-mce-bogus": "all",
              "class": "mce-resizehandle",
              unselectable: !0,
              style: "cursor:" + t + "-resize; margin:0; padding:0"
            }), n.bind(h, "mousedown", function (h) {
              h.stopImmediatePropagation(), h.preventDefault(), function (h) {
                var b = S(a)[0];
                var v;
                u = h.screenX, m = h.screenY, f = b.clientWidth, g = b.clientHeight, p = g / f, d = e, d.name = t, d.startPos = {
                  x: N * e[0] + C,
                  y: T * e[1] + x
                }, y = s.scrollWidth, w = s.scrollHeight, c = n.add(s, "div", {
                  "class": "mce-resize-backdrop",
                  "data-mce-bogus": "all"
                }), n.setStyles(c, {
                  position: "fixed",
                  left: "0",
                  top: "0",
                  width: "100%",
                  height: "100%"
                }), i = k(v = a) ? n.create("img", {
                  src: At.transparentSrc
                }) : v.cloneNode(!0), n.addClass(i, "mce-clonedresizable"), n.setAttrib(i, "data-mce-bogus", "all"), i.contentEditable = "false", n.setStyles(i, {
                  left: C,
                  top: x,
                  margin: 0
                }), R(i, N, T), i.removeAttribute(tf), s.appendChild(i), n.bind(o, "mousemove", A), n.bind(o, "mouseup", O), r !== o && (n.bind(r, "mousemove", A), n.bind(r, "mouseup", O)), l = n.add(s, "div", {
                  "class": "mce-resize-helper",
                  "data-mce-bogus": "all"
                }, f + " &times; " + g);
              }(h);
            }), e.elm = h, n.setStyles(h, {
              left: N * e[0] + C - h.offsetWidth / 2,
              top: T * e[1] + x - h.offsetHeight / 2
            });
          }) : D(!1);
        },
        B = ja(T, 0),
        D = function D() {
          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;
          B.cancel(), M(), a && e && a.removeAttribute(tf), ge(rf, function (e, t) {
            var o = n.get("mceResizeHandle" + t);
            o && (n.unbind(o), n.remove(o));
          });
        },
        P = function P(e, t) {
          return n.isChildOf(e, t);
        },
        L = function L(o) {
          if (h || t.removed || t.composing) return;
          var r = "mousedown" === o.type ? o.target : e.getNode(),
            a = to(yn(r), "table,img,figure.image,hr,video,span.mce-preview-object,details").map(function (e) {
              return e.dom;
            }).filter(function (e) {
              return n.isEditable(e.parentElement);
            }).getOrUndefined(),
            i = C(a) ? n.getAttrib(a, tf, "1") : "1";
          if (q(n.select("img[".concat(tf, "],hr[").concat(tf, "]")), function (e) {
            e.removeAttribute(tf);
          }), C(a) && P(a, s) && t.hasFocus()) {
            I();
            var _t60 = e.getStart(!0);
            if (P(_t60, a) && P(e.getEnd(!0), a)) return n.setAttrib(a, tf, i), void B.throttle(a);
          }
          D();
        },
        M = function M() {
          ge(rf, function (e) {
            e.elm && (n.unbind(e.elm), delete e.elm);
          });
        },
        I = function I() {
          try {
            t.getDoc().execCommand("enableObjectResizing", !1, "false");
          } catch (e) {}
        };
      return t.on("init", function () {
        I(), t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop", L), t.on("keyup compositionend", function (e) {
          a && "TABLE" === a.nodeName && L(e);
        }), t.on("hide blur", D), t.on("contextmenu longpress", E, !0);
      }), t.on("remove", M), {
        isResizable: _,
        showResizeRect: T,
        hideResizeRect: D,
        updateResizeRect: L,
        destroy: function destroy() {
          B.cancel(), a = i = c = null;
        }
      };
    },
    af = function af(e, t, n) {
      var o = e.document.createRange();
      var r;
      return r = o, t.fold(function (e) {
        r.setStartBefore(e.dom);
      }, function (e, t) {
        r.setStart(e.dom, t);
      }, function (e) {
        r.setStartAfter(e.dom);
      }), function (e, t) {
        t.fold(function (t) {
          e.setEndBefore(t.dom);
        }, function (t, n) {
          e.setEnd(t.dom, n);
        }, function (t) {
          e.setEndAfter(t.dom);
        });
      }(o, n), o;
    },
    lf = function lf(e, t, n, o, r) {
      var s = e.document.createRange();
      return s.setStart(t.dom, n), s.setEnd(o.dom, r), s;
    },
    df = al([{
      ltr: ["start", "soffset", "finish", "foffset"]
    }, {
      rtl: ["start", "soffset", "finish", "foffset"]
    }]),
    cf = function cf(e, t, n) {
      return t(yn(n.startContainer), n.startOffset, yn(n.endContainer), n.endOffset);
    };
  df.ltr, df.rtl;
  var uf = function uf(e, t, n, o) {
      return {
        start: e,
        soffset: t,
        finish: n,
        foffset: o
      };
    },
    mf = document.caretPositionFromPoint ? function (e, t, n) {
      var o, r;
      return I.from(null === (r = (o = e.dom).caretPositionFromPoint) || void 0 === r ? void 0 : r.call(o, t, n)).bind(function (t) {
        if (null === t.offsetNode) return I.none();
        var n = e.dom.createRange();
        return n.setStart(t.offsetNode, t.offset), n.collapse(), I.some(n);
      });
    } : document.caretRangeFromPoint ? function (e, t, n) {
      var o, r;
      return I.from(null === (r = (o = e.dom).caretRangeFromPoint) || void 0 === r ? void 0 : r.call(o, t, n));
    } : I.none,
    ff = al([{
      before: ["element"]
    }, {
      on: ["element", "offset"]
    }, {
      after: ["element"]
    }]),
    gf = {
      before: ff.before,
      on: ff.on,
      after: ff.after,
      cata: function cata(e, t, n, o) {
        return e.fold(t, n, o);
      },
      getStart: function getStart(e) {
        return e.fold(R, R, R);
      }
    },
    pf = al([{
      domRange: ["rng"]
    }, {
      relative: ["startSitu", "finishSitu"]
    }, {
      exact: ["start", "soffset", "finish", "foffset"]
    }]),
    hf = {
      domRange: pf.domRange,
      relative: pf.relative,
      exact: pf.exact,
      exactFromRange: function exactFromRange(e) {
        return pf.exact(e.start, e.soffset, e.finish, e.foffset);
      },
      getWin: function getWin(e) {
        var t = function (e) {
          return e.match({
            domRange: function domRange(e) {
              return yn(e.startContainer);
            },
            relative: function relative(e, t) {
              return gf.getStart(e);
            },
            exact: function exact(e, t, n, o) {
              return e;
            }
          });
        }(e);
        return Rn(t);
      },
      range: uf
    },
    bf = function bf(e, t) {
      var n = Ht(e);
      return "input" === n ? gf.after(e) : H(["br", "img"], n) ? 0 === t ? gf.before(e) : gf.after(e) : gf.on(e, t);
    },
    vf = function vf(e, t) {
      var n = e.fold(gf.before, bf, gf.after),
        o = t.fold(gf.before, bf, gf.after);
      return hf.relative(n, o);
    },
    yf = function yf(e, t, n, o) {
      var r = bf(e, t),
        s = bf(n, o);
      return hf.relative(r, s);
    },
    Cf = function Cf(e, t) {
      var n = (t || document).createDocumentFragment();
      return q(e, function (e) {
        n.appendChild(e.dom);
      }), yn(n);
    },
    wf = function wf(e) {
      var t = hf.getWin(e).dom,
        n = function n(e, _n56, o, r) {
          return lf(t, e, _n56, o, r);
        },
        o = function (e) {
          return e.match({
            domRange: function domRange(e) {
              var t = yn(e.startContainer),
                n = yn(e.endContainer);
              return yf(t, e.startOffset, n, e.endOffset);
            },
            relative: vf,
            exact: yf
          });
        }(e);
      return function (e, t) {
        var n = function (e, t) {
          return t.match({
            domRange: function domRange(e) {
              return {
                ltr: N(e),
                rtl: I.none
              };
            },
            relative: function relative(t, n) {
              return {
                ltr: Pe(function () {
                  return af(e, t, n);
                }),
                rtl: Pe(function () {
                  return I.some(af(e, n, t));
                })
              };
            },
            exact: function exact(t, n, o, r) {
              return {
                ltr: Pe(function () {
                  return lf(e, t, n, o, r);
                }),
                rtl: Pe(function () {
                  return I.some(lf(e, o, r, t, n));
                })
              };
            }
          });
        }(e, t);
        return function (e, t) {
          var n = t.ltr();
          return n.collapsed ? t.rtl().filter(function (e) {
            return !1 === e.collapsed;
          }).map(function (e) {
            return df.rtl(yn(e.endContainer), e.endOffset, yn(e.startContainer), e.startOffset);
          }).getOrThunk(function () {
            return cf(0, df.ltr, n);
          }) : cf(0, df.ltr, n);
        }(0, n);
      }(t, o).match({
        ltr: n,
        rtl: n
      });
    },
    xf = function xf(e, t, n) {
      return function (e, t, n) {
        return function (e, t, n) {
          var o = yn(e.document);
          return mf(o, t, n).map(function (e) {
            return uf(yn(e.startContainer), e.startOffset, yn(e.endContainer), e.endOffset);
          });
        }(e, t, n);
      }(Rn(yn(n)).dom, e, t).map(function (e) {
        var t = n.createRange();
        return t.setStart(e.start.dom, e.soffset), t.setEnd(e.finish.dom, e.foffset), t;
      }).getOrUndefined();
    },
    kf = function kf(e, t) {
      return C(e) && C(t) && e.startContainer === t.startContainer && e.startOffset === t.startOffset && e.endContainer === t.endContainer && e.endOffset === t.endOffset;
    },
    Ef = function Ef(e, t, n) {
      return null !== function (e, t, n) {
        var o = e;
        for (; o && o !== t;) {
          if (n(o)) return o;
          o = o.parentNode;
        }
        return null;
      }(e, t, n);
    },
    Sf = function Sf(e, t, n) {
      return Ef(e, t, function (e) {
        return e.nodeName === n;
      });
    },
    _f = function _f(e, t) {
      return $r(e) && !Ef(e, t, xu);
    },
    Nf = function Nf(e, t, n) {
      var o = t.parentNode;
      if (o) {
        var _r33 = new zo(t, e.getParent(o, e.isBlock) || e.getRoot());
        var _s21;
        for (; _s21 = _r33[n ? "prev" : "next"]();) if (rr(_s21)) return !0;
      }
      return !1;
    },
    Rf = function Rf(e, t, n, o, r) {
      var s = e.getRoot(),
        a = e.schema.getNonEmptyElements(),
        i = r.parentNode;
      var l, d;
      if (!i) return I.none();
      var c = e.getParent(i, e.isBlock) || s;
      if (o && rr(r) && t && e.isEmpty(c)) return I.some(Li(i, e.nodeIndex(r)));
      var u = new zo(r, c);
      for (; d = u[o ? "prev" : "next"]();) {
        if ("false" === e.getContentEditableParent(d) || _f(d, s)) return I.none();
        if (Jo(d) && d.data.length > 0) return Sf(d, s, "A") ? I.none() : I.some(Li(d, o ? d.data.length : 0));
        if (e.isBlock(d) || a[d.nodeName.toLowerCase()]) return I.none();
        l = d;
      }
      return tr(l) ? I.none() : n && l ? I.some(Li(l, 0)) : I.none();
    },
    Af = function Af(e, t, n, o) {
      var r = e.getRoot();
      var s,
        a = !1,
        i = n ? o.startContainer : o.endContainer,
        l = n ? o.startOffset : o.endOffset;
      var d = $o(i) && l === i.childNodes.length,
        c = e.schema.getNonEmptyElements();
      var u = n;
      if ($r(i)) return I.none();
      if ($o(i) && l > i.childNodes.length - 1 && (u = !1), nr(i) && (i = r, l = 0), i === r) {
        if (u && (s = i.childNodes[l > 0 ? l - 1 : 0], s)) {
          if ($r(s)) return I.none();
          if (c[s.nodeName] || Yo(s)) return I.none();
        }
        if (i.hasChildNodes()) {
          if (l = Math.min(!u && l > 0 ? l - 1 : l, i.childNodes.length - 1), i = i.childNodes[l], l = Jo(i) && d ? i.data.length : 0, !t && i === r.lastChild && Yo(i)) return I.none();
          if (function (e, t) {
            var n = t;
            for (; n && n !== e;) {
              if (ir(n)) return !0;
              n = n.parentNode;
            }
            return !1;
          }(r, i) || $r(i)) return I.none();
          if (i.hasChildNodes() && !Yo(i)) {
            s = i;
            var _t61 = new zo(i, r);
            do {
              if (ir(s) || $r(s)) {
                a = !1;
                break;
              }
              if (Jo(s) && s.data.length > 0) {
                l = u ? 0 : s.data.length, i = s, a = !0;
                break;
              }
              if (c[s.nodeName.toLowerCase()] && !dr(s)) {
                l = e.nodeIndex(s), i = s.parentNode, u || l++, a = !0;
                break;
              }
            } while (s = u ? _t61.next() : _t61.prev());
          }
        }
      }
      return t && (Jo(i) && 0 === l && Rf(e, d, t, !0, i).each(function (e) {
        i = e.container(), l = e.offset(), a = !0;
      }), $o(i) && (s = i.childNodes[l], s || (s = i.childNodes[l - 1]), !s || !rr(s) || function (e, t) {
        var n;
        return "A" === (null === (n = e.previousSibling) || void 0 === n ? void 0 : n.nodeName);
      }(s) || Nf(e, s, !1) || Nf(e, s, !0) || Rf(e, d, t, !0, s).each(function (e) {
        i = e.container(), l = e.offset(), a = !0;
      }))), u && !t && Jo(i) && l === i.data.length && Rf(e, d, t, !1, i).each(function (e) {
        i = e.container(), l = e.offset(), a = !0;
      }), a && i ? I.some(Li(i, l)) : I.none();
    },
    Of = function Of(e, t) {
      var n = t.collapsed,
        o = t.cloneRange(),
        r = Li.fromRangeStart(t);
      return Af(e, n, !0, o).each(function (e) {
        n && Li.isAbove(r, e) || o.setStart(e.container(), e.offset());
      }), n || Af(e, n, !1, o).each(function (e) {
        o.setEnd(e.container(), e.offset());
      }), n && o.collapse(!0), kf(t, o) ? I.none() : I.some(o);
    },
    Tf = function Tf(e, t) {
      return e.splitText(t);
    },
    Bf = function Bf(e) {
      var t = e.startContainer,
        n = e.startOffset,
        o = e.endContainer,
        r = e.endOffset;
      if (t === o && Jo(t)) {
        if (n > 0 && n < t.data.length) if (o = Tf(t, n), t = o.previousSibling, r > n) {
          r -= n;
          var _e49 = Tf(o, r).previousSibling;
          t = o = _e49, r = _e49.data.length, n = 0;
        } else r = 0;
      } else if (Jo(t) && n > 0 && n < t.data.length && (t = Tf(t, n), n = 0), Jo(o) && r > 0 && r < o.data.length) {
        var _e50 = Tf(o, r).previousSibling;
        o = _e50, r = _e50.data.length;
      }
      return {
        startContainer: t,
        startOffset: n,
        endContainer: o,
        endOffset: r
      };
    },
    Df = function Df(e) {
      return {
        walk: function walk(t, n) {
          return zm(e, t, n);
        },
        split: Bf,
        expand: function expand(t) {
          var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
            type: "word"
          };
          if ("word" === n.type) {
            var _n57 = Um(e, t, [{
                inline: "span"
              }]),
              _o45 = e.createRng();
            return _o45.setStart(_n57.startContainer, _n57.startOffset), _o45.setEnd(_n57.endContainer, _n57.endOffset), _o45;
          }
          return t;
        },
        normalize: function normalize(t) {
          return Of(e, t).fold(L, function (e) {
            return t.setStart(e.startContainer, e.startOffset), t.setEnd(e.endContainer, e.endOffset), !0;
          });
        }
      };
    };
  Df.compareRanges = kf, Df.getCaretRangeFromPoint = xf, Df.getSelectedNode = gi, Df.getNode = pi;
  var Pf = function (e, t) {
      var n = function n(t) {
          var n = function (e) {
            var t = e.dom;
            return Yn(e) ? t.getBoundingClientRect().height : t.offsetHeight;
          }(t);
          if (n <= 0 || null === n) {
            var _n58 = lo(t, e);
            return parseFloat(_n58) || 0;
          }
          return n;
        },
        o = function o(e, t) {
          return X(t, function (t, n) {
            var o = lo(e, n),
              r = void 0 === o ? 0 : parseInt(o, 10);
            return isNaN(r) ? t : t + r;
          }, 0);
        };
      return {
        set: function set(t, n) {
          if (!x(n) && !n.match(/^[0-9]+$/)) throw new Error(e + ".set accepts only positive integer values. Value was " + n);
          var o = t.dom;
          ro(o) && (o.style[e] = n + "px");
        },
        get: n,
        getOuter: n,
        aggregate: o,
        max: function max(e, t, n) {
          var r = o(e, n);
          return t > r ? t - r : 0;
        }
      };
    }("height"),
    Lf = function Lf() {
      return yn(document);
    },
    Mf = function Mf(e, t) {
      return e.view(t).fold(N([]), function (t) {
        var n = e.owner(t),
          o = Mf(e, n);
        return [t].concat(o);
      });
    };
  var If = Object.freeze({
    __proto__: null,
    view: function view(e) {
      var t;
      return (e.dom === document ? I.none() : I.from(null === (t = e.dom.defaultView) || void 0 === t ? void 0 : t.frameElement)).map(yn);
    },
    owner: function owner(e) {
      return Nn(e);
    }
  });
  var Ff = function Ff(e) {
      return "textarea" === Ht(e);
    },
    Uf = function Uf(e, t) {
      var n = function (e) {
          var t = e.dom.ownerDocument,
            n = t.body,
            o = t.defaultView,
            r = t.documentElement;
          if (n === e.dom) return Ao(n.offsetLeft, n.offsetTop);
          var s = Oo(null == o ? void 0 : o.pageYOffset, r.scrollTop),
            a = Oo(null == o ? void 0 : o.pageXOffset, r.scrollLeft),
            i = Oo(r.clientTop, n.clientTop),
            l = Oo(r.clientLeft, n.clientLeft);
          return To(e).translate(a - l, s - i);
        }(e),
        o = function (e) {
          return Pf.get(e);
        }(e);
      return {
        element: e,
        bottom: n.top + o,
        height: o,
        pos: n,
        cleanup: t
      };
    },
    zf = function zf(e, t, n, o) {
      Vf(e, function (r, s) {
        return Hf(e, t, n, o);
      }, n);
    },
    jf = function jf(e, t, n, o, r) {
      var s = {
        elm: o.element.dom,
        alignToTop: r
      };
      (function (e, t) {
        return e.dispatch("ScrollIntoView", t).isDefaultPrevented();
      })(e, s) || (n(e, t, Bo(t).top, o, r), function (e, t) {
        e.dispatch("AfterScrollIntoView", t);
      }(e, s));
    },
    Hf = function Hf(e, t, n, o) {
      var r = yn(e.getBody()),
        s = yn(e.getDoc());
      r.dom.offsetWidth;
      var a = function (e, t) {
        var n = function (e, t) {
            var n = Mn(e);
            if (0 === n.length || Ff(e)) return {
              element: e,
              offset: t
            };
            if (t < n.length && !Ff(n[t])) return {
              element: n[t],
              offset: 0
            };
            {
              var _o46 = n[n.length - 1];
              return Ff(_o46) ? {
                element: e,
                offset: t
              } : "img" === Ht(_o46) ? {
                element: _o46,
                offset: 1
              } : Kt(_o46) ? {
                element: _o46,
                offset: vr(_o46).length
              } : {
                element: _o46,
                offset: Mn(_o46).length
              };
            }
          }(e, t),
          o = hn("<span data-mce-bogus=\"all\" style=\"display: inline-block;\">\uFEFF</span>");
        return go(n.element, o), Uf(o, function () {
          return wo(o);
        });
      }(yn(n.startContainer), n.startOffset);
      jf(e, s, t, a, o), a.cleanup();
    },
    $f = function $f(e, t, n, o) {
      var r = yn(e.getDoc());
      jf(e, r, n, function (e) {
        return Uf(yn(e), E);
      }(t), o);
    },
    Vf = function Vf(e, t, n) {
      var o = n.startContainer,
        r = n.startOffset,
        s = n.endContainer,
        a = n.endOffset;
      t(yn(o), yn(s));
      var i = e.dom.createRng();
      i.setStart(o, r), i.setEnd(s, a), e.selection.setRng(n);
    },
    qf = function qf(e, t, n, o, r) {
      var s = t.pos;
      if (o) Do(s.left, s.top, r);else {
        var _o47 = s.top - n + t.height;
        Do(-e.getBody().getBoundingClientRect().left, _o47, r);
      }
    },
    Wf = function Wf(e, t, n, o, r, s) {
      var a = o + n,
        i = r.pos.top,
        l = r.bottom,
        d = l - i >= o;
      i < n ? qf(e, r, o, !1 !== s, t) : i > a ? qf(e, r, o, d ? !1 !== s : !0 === s, t) : l > a && !d && qf(e, r, o, !0 === s, t);
    },
    Kf = function Kf(e, t, n, o, r) {
      var s = Rn(t).dom.innerHeight;
      Wf(e, t, n, s, o, r);
    },
    Gf = function Gf(e, t, n, o, r) {
      var s = Rn(t).dom.innerHeight;
      Wf(e, t, n, s, o, r);
      var a = function (e) {
          var t = Lf(),
            n = Bo(t),
            o = function (e, t) {
              var n = t.owner(e);
              return Mf(t, n);
            }(e, If),
            r = To(e),
            s = Y(o, function (e, t) {
              var n = To(t);
              return {
                left: e.left + n.left,
                top: e.top + n.top
              };
            }, {
              left: 0,
              top: 0
            });
          return Ao(s.left + r.left + n.left, s.top + r.top + n.top);
        }(o.element),
        i = Mo(window);
      a.top < i.y ? Po(o.element, !1 !== r) : a.top > i.bottom && Po(o.element, !0 === r);
    },
    Yf = function Yf(e, t, n) {
      return zf(e, Kf, t, n);
    },
    Xf = function Xf(e, t, n) {
      return $f(e, t, Kf, n);
    },
    Qf = function Qf(e, t, n) {
      return zf(e, Gf, t, n);
    },
    Jf = function Jf(e, t, n) {
      return $f(e, t, Gf, n);
    },
    Zf = function Zf(e, t, n) {
      (e.inline ? Yf : Qf)(e, t, n);
    },
    eg = function eg(e) {
      return e.dom.focus();
    },
    tg = function tg(e) {
      var t = Vn(e).dom;
      return e.dom === t.activeElement;
    },
    ng = function ng() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Lf();
      return I.from(e.dom.activeElement).map(yn);
    },
    og = function og(e, t) {
      var n = Kt(t) ? vr(t).length : Mn(t).length + 1;
      return e > n ? n : e < 0 ? 0 : e;
    },
    rg = function rg(e) {
      return hf.range(e.start, og(e.soffset, e.start), e.finish, og(e.foffset, e.finish));
    },
    sg = function sg(e, t) {
      return !Ho(t.dom) && (Sn(e, t) || En(e, t));
    },
    ag = function ag(e) {
      return function (t) {
        return sg(e, t.start) && sg(e, t.finish);
      };
    },
    ig = function ig(e) {
      return hf.range(yn(e.startContainer), e.startOffset, yn(e.endContainer), e.endOffset);
    },
    lg = function lg(e) {
      var t = document.createRange();
      try {
        return t.setStart(e.start.dom, e.soffset), t.setEnd(e.finish.dom, e.foffset), I.some(t);
      } catch (e) {
        return I.none();
      }
    },
    dg = function dg(e) {
      var t = function (e) {
        return e.inline || At.browser.isFirefox();
      }(e) ? (n = yn(e.getBody()), function (e) {
        var t = e.getSelection();
        return (t && 0 !== t.rangeCount ? I.from(t.getRangeAt(0)) : I.none()).map(ig);
      }(Rn(n).dom).filter(ag(n))) : I.none();
      var n;
      e.bookmark = t.isSome() ? t : e.bookmark;
    },
    cg = function cg(e) {
      return (e.bookmark ? e.bookmark : I.none()).bind(function (t) {
        return n = yn(e.getBody()), o = t, I.from(o).filter(ag(n)).map(rg);
        var n, o;
      }).bind(lg);
    },
    ug = {
      isEditorUIElement: function isEditorUIElement(e) {
        var t = e.className.toString();
        return -1 !== t.indexOf("tox-") || -1 !== t.indexOf("mce-");
      }
    },
    mg = {
      setEditorTimeout: function setEditorTimeout(e, t, n) {
        return function (e, t) {
          return x(t) || (t = 0), setTimeout(e, t);
        }(function () {
          e.removed || t();
        }, n);
      },
      setEditorInterval: function setEditorInterval(e, t, n) {
        var o = function (e, t) {
          return x(t) || (t = 0), setInterval(e, t);
        }(function () {
          e.removed ? clearInterval(o) : t();
        }, n);
        return o;
      }
    };
  var fg;
  var gg = Oa.DOM,
    pg = function pg(e) {
      var t = e.classList;
      return void 0 !== t && (t.contains("tox-edit-area") || t.contains("tox-edit-area__iframe") || t.contains("mce-content-body"));
    },
    hg = function hg(e, t) {
      var n = gd(e),
        o = gg.getParent(t, function (t) {
          return function (e) {
            return $o(e) && ug.isEditorUIElement(e);
          }(t) || !!n && e.dom.is(t, n);
        });
      return null !== o;
    },
    bg = function bg(e) {
      try {
        var _t62 = Vn(yn(e.getElement()));
        return ng(_t62).fold(function () {
          return document.body;
        }, function (e) {
          return e.dom;
        });
      } catch (e) {
        return document.body;
      }
    },
    vg = function vg(e, t) {
      var n = t.editor;
      (function (e) {
        var t = ja(function () {
          dg(e);
        }, 0);
        e.on("init", function () {
          e.inline && function (e, t) {
            var n = function n() {
              t.throttle();
            };
            Oa.DOM.bind(document, "mouseup", n), e.on("remove", function () {
              Oa.DOM.unbind(document, "mouseup", n);
            });
          }(e, t), function (e, t) {
            (function (e, t) {
              e.on("mouseup touchend", function (e) {
                t.throttle();
              });
            })(e, t), e.on("keyup NodeChange AfterSetSelectionRange", function (t) {
              (function (e) {
                return "nodechange" === e.type && e.selectionChange;
              })(t) || dg(e);
            });
          }(e, t);
        }), e.on("remove", function () {
          t.cancel();
        });
      })(n);
      var o = function o(e, t) {
        nc(e) && !0 !== e.inline && t(yn(e.getContainer()), "tox-edit-focus");
      };
      n.on("focusin", function () {
        var t = e.focusedEditor;
        pg(bg(n)) && o(n, un), t !== n && (t && t.dispatch("blur", {
          focusedEditor: n
        }), e.setActive(n), e.focusedEditor = n, n.dispatch("focus", {
          blurredEditor: t
        }), n.focus(!0));
      }), n.on("focusout", function () {
        mg.setEditorTimeout(n, function () {
          var t = e.focusedEditor;
          pg(bg(n)) && t === n || o(n, fn), hg(n, bg(n)) || t !== n || (n.dispatch("blur", {
            focusedEditor: null
          }), e.focusedEditor = null);
        });
      }), fg || (fg = function fg(t) {
        var n = e.activeEditor;
        n && Kn(t).each(function (t) {
          var o = t;
          o.ownerDocument === document && (o === document.body || hg(n, o) || e.focusedEditor !== n || (n.dispatch("blur", {
            focusedEditor: null
          }), e.focusedEditor = null));
        });
      }, gg.bind(document, "focusin", fg));
    },
    yg = function yg(e, t) {
      e.focusedEditor === t.editor && (e.focusedEditor = null), !e.activeEditor && fg && (gg.unbind(document, "focusin", fg), fg = null);
    },
    Cg = function Cg(e, t) {
      (function (e, t) {
        return function (e) {
          return e.collapsed ? I.from(pi(e.startContainer, e.startOffset)).map(yn) : I.none();
        }(t).bind(function (t) {
          return Rr(t) ? I.some(t) : Sn(e, t) ? I.none() : I.some(e);
        });
      })(yn(e.getBody()), t).bind(function (e) {
        return yu(e.dom);
      }).fold(function () {
        e.selection.normalize();
      }, function (t) {
        return e.selection.setRng(t.toRange());
      });
    },
    wg = function wg(e) {
      if (e.setActive) try {
        e.setActive();
      } catch (t) {
        e.focus();
      } else e.focus();
    },
    xg = function xg(e) {
      return e.inline ? function (e) {
        var t = e.getBody();
        return t && (n = yn(t), tg(n) || (o = n, ng(Vn(o)).filter(function (e) {
          return o.dom.contains(e.dom);
        })).isSome());
        var n, o;
      }(e) : function (e) {
        return C(e.iframeElement) && tg(yn(e.iframeElement));
      }(e);
    },
    kg = function kg(e) {
      return e.editorManager.setActive(e);
    },
    Eg = function Eg(e, t, n, o, r) {
      var s = n ? t.startContainer : t.endContainer,
        a = n ? t.startOffset : t.endOffset;
      return I.from(s).map(yn).map(function (e) {
        return o && t.collapsed ? e : In(e, r(e, a)).getOr(e);
      }).bind(function (e) {
        return Wt(e) ? I.some(e) : An(e).filter(Wt);
      }).map(function (e) {
        return e.dom;
      }).getOr(e);
    },
    Sg = function Sg(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
      return Eg(e, t, !0, n, function (e, t) {
        return Math.min(zn(e), t);
      });
    },
    _g = function _g(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
      return Eg(e, t, !1, n, function (e, t) {
        return t > 0 ? t - 1 : t;
      });
    },
    Ng = function Ng(e, t) {
      var n = e;
      for (; e && Jo(e) && 0 === e.length;) e = t ? e.nextSibling : e.previousSibling;
      return e || n;
    },
    Rg = function Rg(e, t) {
      return V(t, function (t) {
        var n = e.dispatch("GetSelectionRange", {
          range: t
        });
        return n.range !== t ? n.range : t;
      });
    },
    Ag = ["img", "br"],
    Og = function Og(e) {
      var t = yr(e).filter(function (e) {
        return 0 !== e.trim().length || e.indexOf(pr) > -1;
      }).isSome();
      return t || H(Ag, Ht(e)) || function (e) {
        return qt(e) && "false" === en(e, "contenteditable");
      }(e);
    },
    Tg = "[data-mce-autocompleter]",
    Bg = function Bg(e, t) {
      if (Dg(yn(e.getBody())).isNone()) {
        var _o48 = hn('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>', e.getDoc());
        bo(_o48, yn(t.extractContents())), t.insertNode(_o48.dom), An(_o48).each(function (e) {
          return e.dom.normalize();
        }), (n = _o48, function (e, t) {
          var n = function n(e) {
            var o = Mn(e);
            for (var _e51 = o.length - 1; _e51 >= 0; _e51--) {
              var _r34 = o[_e51];
              if (t(_r34)) return I.some(_r34);
              var _s22 = n(_r34);
              if (_s22.isSome()) return _s22;
            }
            return I.none();
          };
          return n(e);
        }(n, Og)).map(function (t) {
          e.selection.setCursorLocation(t.dom, function (e) {
            return "img" === Ht(e) ? 1 : yr(e).fold(function () {
              return Mn(e).length;
            }, function (e) {
              return e.length;
            });
          }(t));
        });
      }
      var n;
    },
    Dg = function Dg(e) {
      return eo(e, Tg);
    },
    Pg = {
      "#text": 3,
      "#comment": 8,
      "#cdata": 4,
      "#pi": 7,
      "#doctype": 10,
      "#document-fragment": 11
    },
    Lg = function Lg(e, t, n) {
      var o = n ? "lastChild" : "firstChild",
        r = n ? "prev" : "next";
      if (e[o]) return e[o];
      if (e !== t) {
        var _n59 = e[r];
        if (_n59) return _n59;
        for (var _o49 = e.parent; _o49 && _o49 !== t; _o49 = _o49.parent) if (_n59 = _o49[r], _n59) return _n59;
      }
    },
    Mg = function Mg(e) {
      var t;
      var n = null !== (t = e.value) && void 0 !== t ? t : "";
      if (!ds(n)) return !1;
      var o = e.parent;
      return !o || "span" === o.name && !o.attr("style") || !/^[ ]+$/.test(n);
    },
    Ig = function Ig(e) {
      var t = "a" === e.name && !e.attr("href") && e.attr("id");
      return e.attr("name") || e.attr("id") && !e.firstChild || e.attr("data-mce-bookmark") || t;
    };
  var Fg = /*#__PURE__*/function () {
    function Fg(e, t) {
      _classCallCheck(this, Fg);
      this.name = e, this.type = t, 1 === t && (this.attributes = [], this.attributes.map = {});
    }
    _createClass(Fg, [{
      key: "replace",
      value: function replace(e) {
        var t = this;
        return e.parent && e.remove(), t.insert(e, t), t.remove(), t;
      }
    }, {
      key: "attr",
      value: function attr(e, t) {
        var n = this;
        if (!m(e)) return C(e) && ge(e, function (e, t) {
          n.attr(t, e);
        }), n;
        var o = n.attributes;
        if (o) {
          if (void 0 !== t) {
            if (null === t) {
              if (e in o.map) {
                delete o.map[e];
                var _t63 = o.length;
                for (; _t63--;) if (o[_t63].name === e) return o.splice(_t63, 1), n;
              }
              return n;
            }
            if (e in o.map) {
              var _n60 = o.length;
              for (; _n60--;) if (o[_n60].name === e) {
                o[_n60].value = t;
                break;
              }
            } else o.push({
              name: e,
              value: t
            });
            return o.map[e] = t, n;
          }
          return o.map[e];
        }
      }
    }, {
      key: "clone",
      value: function clone() {
        var e = this,
          t = new Fg(e.name, e.type),
          n = e.attributes;
        if (n) {
          var _e52 = [];
          _e52.map = {};
          for (var _t64 = 0, _o50 = n.length; _t64 < _o50; _t64++) {
            var _o51 = n[_t64];
            "id" !== _o51.name && (_e52[_e52.length] = {
              name: _o51.name,
              value: _o51.value
            }, _e52.map[_o51.name] = _o51.value);
          }
          t.attributes = _e52;
        }
        return t.value = e.value, t;
      }
    }, {
      key: "wrap",
      value: function wrap(e) {
        var t = this;
        return t.parent && (t.parent.insert(e, t), e.append(t)), t;
      }
    }, {
      key: "unwrap",
      value: function unwrap() {
        var e = this;
        for (var _t65 = e.firstChild; _t65;) {
          var _n61 = _t65.next;
          e.insert(_t65, e, !0), _t65 = _n61;
        }
        e.remove();
      }
    }, {
      key: "remove",
      value: function remove() {
        var e = this,
          t = e.parent,
          n = e.next,
          o = e.prev;
        return t && (t.firstChild === e ? (t.firstChild = n, n && (n.prev = null)) : o && (o.next = n), t.lastChild === e ? (t.lastChild = o, o && (o.next = null)) : n && (n.prev = o), e.parent = e.next = e.prev = null), e;
      }
    }, {
      key: "append",
      value: function append(e) {
        var t = this;
        e.parent && e.remove();
        var n = t.lastChild;
        return n ? (n.next = e, e.prev = n, t.lastChild = e) : t.lastChild = t.firstChild = e, e.parent = t, e;
      }
    }, {
      key: "insert",
      value: function insert(e, t, n) {
        e.parent && e.remove();
        var o = t.parent || this;
        return n ? (t === o.firstChild ? o.firstChild = e : t.prev && (t.prev.next = e), e.prev = t.prev, e.next = t, t.prev = e) : (t === o.lastChild ? o.lastChild = e : t.next && (t.next.prev = e), e.next = t.next, e.prev = t, t.next = e), e.parent = o, e;
      }
    }, {
      key: "getAll",
      value: function getAll(e) {
        var t = this,
          n = [];
        for (var _o52 = t.firstChild; _o52; _o52 = Lg(_o52, t)) _o52.name === e && n.push(_o52);
        return n;
      }
    }, {
      key: "children",
      value: function children() {
        var e = [];
        for (var _t66 = this.firstChild; _t66; _t66 = _t66.next) e.push(_t66);
        return e;
      }
    }, {
      key: "empty",
      value: function empty() {
        var e = this;
        if (e.firstChild) {
          var _t67 = [];
          for (var _n62 = e.firstChild; _n62; _n62 = Lg(_n62, e)) _t67.push(_n62);
          var _n63 = _t67.length;
          for (; _n63--;) {
            var _e53 = _t67[_n63];
            _e53.parent = _e53.firstChild = _e53.lastChild = _e53.next = _e53.prev = null;
          }
        }
        return e.firstChild = e.lastChild = null, e;
      }
    }, {
      key: "isEmpty",
      value: function isEmpty(e) {
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var n = arguments.length > 2 ? arguments[2] : undefined;
        var o;
        var r = this;
        var s = r.firstChild;
        if (Ig(r)) return !1;
        if (s) do {
          if (1 === s.type) {
            if (s.attr("data-mce-bogus")) continue;
            if (e[s.name]) return !1;
            if (Ig(s)) return !1;
          }
          if (8 === s.type) return !1;
          if (3 === s.type && !Mg(s)) return !1;
          if (3 === s.type && s.parent && t[s.parent.name] && ds(null !== (o = s.value) && void 0 !== o ? o : "")) return !1;
          if (n && n(s)) return !1;
        } while (s = Lg(s, r));
        return !0;
      }
    }, {
      key: "walk",
      value: function walk(e) {
        return Lg(this, null, e);
      }
    }], [{
      key: "create",
      value: function create(e, t) {
        var n = new Fg(e, Pg[e] || 1);
        return t && ge(t, function (e, t) {
          n.attr(t, e);
        }), n;
      }
    }]);
    return Fg;
  }();
  var Ug = function Ug(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var o = e.toLowerCase();
      if (-1 !== o.indexOf("[if ", n) && function (e, t) {
        return /^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t));
      }(o, n)) {
        var _e54 = o.indexOf("[endif]", n);
        return o.indexOf(">", _e54);
      }
      if (t) {
        var _e55 = o.indexOf(">", n);
        return -1 !== _e55 ? _e55 : o.length;
      }
      {
        var _t68 = /--!?>/g;
        _t68.lastIndex = n;
        var _r35 = _t68.exec(e);
        return _r35 ? _r35.index + _r35[0].length : o.length;
      }
    },
    zg = function zg(e, t, n) {
      var o = /<([!?\/])?([A-Za-z0-9\-_:.]+)/g,
        r = /(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,
        s = e.getVoidElements();
      var a = 1,
        i = n;
      for (; 0 !== a;) for (o.lastIndex = i;;) {
        var _e56 = o.exec(t);
        if (null === _e56) return i;
        if ("!" === _e56[1]) {
          i = He(_e56[2], "--") ? Ug(t, !1, _e56.index + 3) : Ug(t, !0, _e56.index + 1);
          break;
        }
        {
          r.lastIndex = o.lastIndex;
          var _n64 = r.exec(t);
          if (h(_n64) || _n64.index !== o.lastIndex) continue;
          "/" === _e56[1] ? a -= 1 : ke(s, _e56[2]) || (a += 1), i = o.lastIndex + _n64[0].length;
          break;
        }
      }
      return i;
    },
    jg = function jg(e, t) {
      var n = /<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,
        o = e.schema;
      var r = function (e, t) {
        var n = new RegExp(["\\s?(" + e.join("|") + ')="[^"]+"'].join("|"), "gi");
        return t.replace(n, "");
      }(e.getTempAttrs(), t);
      var s = o.getVoidElements();
      var a;
      for (; a = n.exec(r);) {
        var _e57 = n.lastIndex,
          _t69 = a[0].length;
        var _i10 = void 0;
        _i10 = s[a[1]] ? _e57 : zg(o, r, _e57), r = r.substring(0, _e57 - _t69) + r.substring(_i10), n.lastIndex = _e57 - _t69;
      }
      return Fr(r);
    },
    Hg = jg,
    $g = function $g(e) {
      var t = Fo(e, "[data-mce-bogus]");
      q(t, function (e) {
        "all" === en(e, "data-mce-bogus") ? wo(e) : Er(e) ? (go(e, vn(gr)), wo(e)) : xo(e);
      });
    },
    Vg = function Vg(e) {
      var t = Fo(e, "input");
      q(t, function (e) {
        on(e, "name");
      });
    },
    qg = function qg(e, t, n) {
      var o;
      return o = "raw" === t.format ? Dt.trim(Hg(e.serializer, n.innerHTML)) : "text" === t.format ? function (e, t) {
        var n = e.getDoc(),
          o = Vn(yn(e.getBody())),
          r = bn("div", n);
        Jt(r, "data-mce-bogus", "all"), io(r, {
          position: "fixed",
          left: "-9999999px",
          top: "0"
        }), So(r, t.innerHTML), $g(r), Vg(r);
        var s = function (e) {
          return jn(e) ? e : yn(Nn(e).dom.body);
        }(o);
        bo(s, r);
        var a = Fr(r.dom.innerText);
        return wo(r), a;
      }(e, n) : "tree" === t.format ? e.serializer.serialize(n, t) : function (e, t) {
        var n = Nl(e),
          o = new RegExp("^(<".concat(n, "[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/").concat(n, ">[\r\n]*|<br \\/>[\r\n]*)$"));
        return t.replace(o, "");
      }(e, e.serializer.serialize(n, t)), "text" !== t.format && !Or(yn(n)) && m(o) ? Dt.trim(o) : o;
    },
    Wg = Dt.makeMap,
    Kg = function Kg(e) {
      var t = [],
        n = (e = e || {}).indent,
        o = Wg(e.indent_before || ""),
        r = Wg(e.indent_after || ""),
        s = Zs.getEncodeFunc(e.entity_encoding || "raw", e.entities),
        a = "xhtml" !== e.element_format;
      return {
        start: function start(e, i, l) {
          if (n && o[e] && t.length > 0) {
            var _e58 = t[t.length - 1];
            _e58.length > 0 && "\n" !== _e58 && t.push("\n");
          }
          if (t.push("<", e), i) for (var _e59 = 0, _n65 = i.length; _e59 < _n65; _e59++) {
            var _n66 = i[_e59];
            t.push(" ", _n66.name, '="', s(_n66.value, !0), '"');
          }
          if (t[t.length] = !l || a ? ">" : " />", l && n && r[e] && t.length > 0) {
            var _e60 = t[t.length - 1];
            _e60.length > 0 && "\n" !== _e60 && t.push("\n");
          }
        },
        end: function end(e) {
          var o;
          t.push("</", e, ">"), n && r[e] && t.length > 0 && (o = t[t.length - 1], o.length > 0 && "\n" !== o && t.push("\n"));
        },
        text: function text(e, n) {
          e.length > 0 && (t[t.length] = n ? e : s(e));
        },
        cdata: function cdata(e) {
          t.push("<![CDATA[", e, "]]>");
        },
        comment: function comment(e) {
          t.push("\x3c!--", e, "--\x3e");
        },
        pi: function pi(e, o) {
          o ? t.push("<?", e, " ", s(o), "?>") : t.push("<?", e, "?>"), n && t.push("\n");
        },
        doctype: function doctype(e) {
          t.push("<!DOCTYPE", e, ">", n ? "\n" : "");
        },
        reset: function reset() {
          t.length = 0;
        },
        getContent: function getContent() {
          return t.join("").replace(/\n$/, "");
        }
      };
    },
    Gg = function Gg() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ca();
      var n = Kg(e);
      return e.validate = !("validate" in e) || e.validate, {
        serialize: function serialize(o) {
          var r = e.validate,
            s = {
              3: function _(e) {
                var t;
                n.text(null !== (t = e.value) && void 0 !== t ? t : "", e.raw);
              },
              8: function _(e) {
                var t;
                n.comment(null !== (t = e.value) && void 0 !== t ? t : "");
              },
              7: function _(e) {
                n.pi(e.name, e.value);
              },
              10: function _(e) {
                var t;
                n.doctype(null !== (t = e.value) && void 0 !== t ? t : "");
              },
              4: function _(e) {
                var t;
                n.cdata(null !== (t = e.value) && void 0 !== t ? t : "");
              },
              11: function _(e) {
                var t = e;
                if (t = t.firstChild) do {
                  a(t);
                } while (t = t.next);
              }
            };
          n.reset();
          var a = function a(e) {
            var o;
            var i = s[e.type];
            if (i) i(e);else {
              var _s23 = e.name,
                _i11 = (_s23 in t.getVoidElements());
              var _l5 = e.attributes;
              if (r && _l5 && _l5.length > 1) {
                var _n67 = [];
                _n67.map = {};
                var _o53 = t.getElementRule(e.name);
                if (_o53) {
                  for (var _e61 = 0, _t70 = _o53.attributesOrder.length; _e61 < _t70; _e61++) {
                    var _t71 = _o53.attributesOrder[_e61];
                    if (_t71 in _l5.map) {
                      var _e62 = _l5.map[_t71];
                      _n67.map[_t71] = _e62, _n67.push({
                        name: _t71,
                        value: _e62
                      });
                    }
                  }
                  for (var _e63 = 0, _t72 = _l5.length; _e63 < _t72; _e63++) {
                    var _t73 = _l5[_e63].name;
                    if (!(_t73 in _n67.map)) {
                      var _e64 = _l5.map[_t73];
                      _n67.map[_t73] = _e64, _n67.push({
                        name: _t73,
                        value: _e64
                      });
                    }
                  }
                  _l5 = _n67;
                }
              }
              if (n.start(_s23, _l5, _i11), !_i11) {
                var _t74 = e.firstChild;
                if (_t74) {
                  "pre" !== _s23 && "textarea" !== _s23 || 3 !== _t74.type || "\n" !== (null === (o = _t74.value) || void 0 === o ? void 0 : o[0]) || n.text("\n", !0);
                  do {
                    a(_t74);
                  } while (_t74 = _t74.next);
                }
                n.end(_s23);
              }
            }
          };
          return 1 !== o.type || e.inner ? 3 === o.type ? s[3](o) : s[11](o) : a(o), n.getContent();
        }
      };
    },
    Yg = new Set();
  q(["margin", "margin-left", "margin-right", "margin-top", "margin-bottom", "padding", "padding-left", "padding-right", "padding-top", "padding-bottom", "border", "border-width", "border-style", "border-color", "background", "background-attachment", "background-clip", "background-color", "background-image", "background-origin", "background-position", "background-repeat", "background-size", "float", "position", "left", "right", "top", "bottom", "z-index", "display", "transform", "width", "max-width", "min-width", "height", "max-height", "min-height", "overflow", "overflow-x", "overflow-y", "text-overflow", "vertical-align", "transition", "transition-delay", "transition-duration", "transition-property", "transition-timing-function"], function (e) {
    Yg.add(e);
  });
  var Xg = ["font", "text-decoration", "text-emphasis"],
    Qg = function Qg(e, t) {
      return me(e.parseStyle(e.getAttrib(t, "style")));
    },
    Jg = function Jg(e, t, n) {
      var o = Qg(e, t),
        r = Qg(e, n),
        s = function s(o) {
          var r, s;
          var a = null !== (r = e.getStyle(t, o)) && void 0 !== r ? r : "",
            i = null !== (s = e.getStyle(n, o)) && void 0 !== s ? s : "";
          return Ge(a) && Ge(i) && a !== i;
        };
      return $(o, function (e) {
        var t = function t(_t75) {
          return $(_t75, function (t) {
            return t === e;
          });
        };
        if (!t(r) && t(Xg)) {
          var _e65 = G(r, function (e) {
            return $(Xg, function (t) {
              return He(e, t);
            });
          });
          return $(_e65, s);
        }
        return s(e);
      });
    },
    Zg = function Zg(e, t, n) {
      return I.from(n.container()).filter(Jo).exists(function (o) {
        var r = e ? 0 : -1;
        return t(o.data.charAt(n.offset() + r));
      });
    },
    ep = O(Zg, !0, Fu),
    tp = O(Zg, !1, Fu),
    np = function np(e) {
      var t = e.container();
      return Jo(t) && (0 === t.data.length || Ir(t.data) && Wm.isBookmarkNode(t.parentNode));
    },
    op = function op(e, t) {
      return function (n) {
        return zc(e ? 0 : -1, n).filter(t).isSome();
      };
    },
    rp = function rp(e) {
      return sr(e) && "block" === lo(yn(e), "display");
    },
    sp = function sp(e) {
      return ir(e) && !function (e) {
        return $o(e) && "all" === e.getAttribute("data-mce-bogus");
      }(e);
    },
    ap = op(!0, rp),
    ip = op(!1, rp),
    lp = op(!0, cr),
    dp = op(!1, cr),
    cp = op(!0, Yo),
    up = op(!1, Yo),
    mp = op(!0, sp),
    fp = op(!1, sp),
    gp = function gp(e, t) {
      return function (e, t, n) {
        return Sn(t, e) ? Tn(e, function (e) {
          return n(e) || En(e, t);
        }).slice(0, -1) : [];
      }(e, t, L);
    },
    pp = function pp(e, t) {
      return [e].concat(gp(e, t));
    },
    hp = function hp(e, t, n) {
      return pu(e, t, n, np);
    },
    bp = function bp(e, t) {
      return J(pp(yn(t.container()), e), xr);
    },
    vp = function vp(e, t, n) {
      return hp(e, t.dom, n).forall(function (e) {
        return bp(t, n).fold(function () {
          return !Uc(e, n, t.dom);
        }, function (o) {
          return !Uc(e, n, t.dom) && Sn(o, yn(e.container()));
        });
      });
    },
    yp = function yp(e, t, n) {
      return bp(t, n).fold(function () {
        return hp(e, t.dom, n).forall(function (e) {
          return !Uc(e, n, t.dom);
        });
      }, function (t) {
        return hp(e, t.dom, n).isNone();
      });
    },
    Cp = O(yp, !1),
    wp = O(yp, !0),
    xp = O(vp, !1),
    kp = O(vp, !0),
    Ep = function Ep(e) {
      return Yc(e).exists(Er);
    },
    Sp = function Sp(e, t, n) {
      var o = G(pp(yn(n.container()), t), xr),
        r = le(o).getOr(t);
      return fu(e, r.dom, n).filter(Ep);
    },
    _p = function _p(e, t) {
      return Yc(t).exists(Er) || Sp(!0, e, t).isSome();
    },
    Np = function Np(e, t) {
      return function (e) {
        return I.from(e.getNode(!0)).map(yn);
      }(t).exists(Er) || Sp(!1, e, t).isSome();
    },
    Rp = O(Sp, !1),
    Ap = O(Sp, !0),
    Op = function Op(e) {
      return Li.isTextPosition(e) && !e.isAtStart() && !e.isAtEnd();
    },
    Tp = function Tp(e, t) {
      var n = G(pp(yn(t.container()), e), xr);
      return le(n).getOr(e);
    },
    Bp = function Bp(e, t) {
      return Op(t) ? tp(t) : tp(t) || vu(Tp(e, t).dom, t).exists(tp);
    },
    Dp = function Dp(e, t) {
      return Op(t) ? ep(t) : ep(t) || bu(Tp(e, t).dom, t).exists(ep);
    },
    Pp = function Pp(e) {
      return Yc(e).bind(function (e) {
        return Jn(e, Wt);
      }).exists(function (e) {
        return function (e) {
          return H(["pre", "pre-wrap"], e);
        }(lo(e, "white-space"));
      });
    },
    Lp = function Lp(e, t) {
      return function (n) {
        return o = new zo(n, e)[t](), C(o) && ir(o) && Rc(o);
        var o;
      };
    },
    Mp = function Mp(e, t) {
      return !Pp(t) && (function (e, t) {
        return function (e, t) {
          return vu(e.dom, t).isNone();
        }(e, t) || function (e, t) {
          return bu(e.dom, t).isNone();
        }(e, t) || Cp(e, t) || wp(e, t) || Np(e, t) || _p(e, t);
      }(e, t) || Bp(e, t) || Dp(e, t));
    },
    Ip = function Ip(e, t) {
      return !Pp(t) && (Cp(e, t) || xp(e, t) || Np(e, t) || Bp(e, t) || function (e, t) {
        var n = vu(e.dom, t).getOr(t),
          o = Lp(e.dom, "prev");
        return t.isAtStart() && (o(t.container()) || o(n.container()));
      }(e, t));
    },
    Fp = function Fp(e, t) {
      return !Pp(t) && (wp(e, t) || kp(e, t) || _p(e, t) || Dp(e, t) || function (e, t) {
        var n = bu(e.dom, t).getOr(t),
          o = Lp(e.dom, "next");
        return t.isAtEnd() && (o(t.container()) || o(n.container()));
      }(e, t));
    },
    Up = function Up(e, t) {
      return Ip(e, t) || Fp(e, function (e) {
        var t = e.container(),
          n = e.offset();
        return Jo(t) && n < t.data.length ? Li(t, n + 1) : e;
      }(t));
    },
    zp = function zp(e, t) {
      return Mu(e.charAt(t));
    },
    jp = function jp(e, t) {
      return Fu(e.charAt(t));
    },
    Hp = function Hp(e, t, n) {
      var o = t.data,
        r = Li(t, 0);
      return n || !zp(o, 0) || Up(e, r) ? !!(n && jp(o, 0) && Ip(e, r)) && (t.data = pr + o.slice(1), !0) : (t.data = " " + o.slice(1), !0);
    },
    $p = function $p(e, t, n) {
      var o = t.data,
        r = Li(t, o.length - 1);
      return n || !zp(o, o.length - 1) || Up(e, r) ? !!(n && jp(o, o.length - 1) && Fp(e, r)) && (t.data = o.slice(0, -1) + pr, !0) : (t.data = o.slice(0, -1) + " ", !0);
    },
    Vp = function Vp(e, t) {
      var n = t.container();
      if (!Jo(n)) return I.none();
      if (function (e) {
        var t = e.container();
        return Jo(t) && je(t.data, pr);
      }(t)) {
        var _o54 = Hp(e, n, !1) || function (e) {
          var t = e.data,
            n = function (e) {
              var t = e.split("");
              return V(t, function (e, n) {
                return Mu(e) && n > 0 && n < t.length - 1 && Uu(t[n - 1]) && Uu(t[n + 1]) ? " " : e;
              }).join("");
            }(t);
          return n !== t && (e.data = n, !0);
        }(n) || $p(e, n, !1);
        return It(_o54, t);
      }
      if (Up(e, t)) {
        var _o55 = Hp(e, n, !0) || $p(e, n, !0);
        return It(_o55, t);
      }
      return I.none();
    },
    qp = function qp(e, t, n) {
      if (0 === n) return;
      var o = yn(e),
        r = Qn(o, xr).getOr(o),
        s = e.data.slice(t, t + n),
        a = t + n >= e.data.length && Fp(r, Li(e, e.data.length)),
        i = 0 === t && Ip(r, Li(e, 0));
      e.replaceData(t, n, ms(s, 4, i, a));
    },
    Wp = function Wp(e, t) {
      var n = e.data.slice(t),
        o = n.length - We(n).length;
      qp(e, t, o);
    },
    Kp = function Kp(e, t) {
      var n = e.data.slice(0, t),
        o = n.length - Ke(n).length;
      qp(e, t - o, o);
    },
    Gp = function Gp(e, t, n) {
      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
      var r = Ke(e.data).length,
        s = o ? e : t,
        a = o ? t : e;
      return o ? s.appendData(a.data) : s.insertData(0, a.data), wo(yn(a)), n && Wp(s, r), s;
    },
    Yp = function Yp(e, t) {
      return function (e, t) {
        var n = e.container(),
          o = e.offset();
        return !Li.isTextPosition(e) && n === t.parentNode && o > Li.before(t).offset();
      }(t, e) ? Li(t.container(), t.offset() - 1) : t;
    },
    Xp = function Xp(e) {
      return ss(e.previousSibling) ? I.some((t = e.previousSibling, Jo(t) ? Li(t, t.data.length) : Li.after(t))) : e.previousSibling ? Cu(e.previousSibling) : I.none();
      var t;
    },
    Qp = function Qp(e) {
      return ss(e.nextSibling) ? I.some((t = e.nextSibling, Jo(t) ? Li(t, 0) : Li.before(t))) : e.nextSibling ? yu(e.nextSibling) : I.none();
      var t;
    },
    Jp = function Jp(e, t, n) {
      return function (e, t, n) {
        return e ? function (e, t) {
          return Qp(t).orThunk(function () {
            return Xp(t);
          }).orThunk(function () {
            return function (e, t) {
              return bu(e, Li.after(t)).orThunk(function () {
                return vu(e, Li.before(t));
              });
            }(e, t);
          });
        }(t, n) : function (e, t) {
          return Xp(t).orThunk(function () {
            return Qp(t);
          }).orThunk(function () {
            return function (e, t) {
              return I.from(t.previousSibling ? t.previousSibling : t.parentNode).bind(function (t) {
                return vu(e, Li.before(t));
              }).orThunk(function () {
                return bu(e, Li.after(t));
              });
            }(e, t);
          });
        }(t, n);
      }(e, t, n).map(O(Yp, n));
    },
    Zp = function Zp(e, t, n) {
      n.fold(function () {
        e.focus();
      }, function (n) {
        e.selection.setRng(n.toRange(), t);
      });
    },
    eh = function eh(e, t) {
      return t && ke(e.schema.getBlockElements(), Ht(t));
    },
    th = function th(e) {
      if (bs(e)) {
        var _t76 = hn('<br data-mce-bogus="1">');
        return Co(e), bo(e, _t76), I.some(Li.before(_t76.dom));
      }
      return I.none();
    },
    nh = function nh(e, t, n) {
      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
      var r = Jp(t, e.getBody(), n.dom),
        s = Qn(n, O(eh, e), (a = e.getBody(), function (e) {
          return e.dom === a;
        }));
      var a;
      var i = function (e, t, n) {
        var o = Bn(e).filter(Kt),
          r = Dn(e).filter(Kt);
        return wo(e), (s = o, a = r, i = t, l = function l(e, t, o) {
          var r = e.dom,
            s = t.dom,
            a = r.data.length;
          return Gp(r, s, n), o.container() === s ? Li(r, a) : o;
        }, s.isSome() && a.isSome() && i.isSome() ? I.some(l(s.getOrDie(), a.getOrDie(), i.getOrDie())) : I.none()).orThunk(function () {
          return n && (o.each(function (e) {
            return Kp(e.dom, e.dom.length);
          }), r.each(function (e) {
            return Wp(e.dom, 0);
          })), t;
        });
        var s, a, i, l;
      }(n, r, function (e, t) {
        return ke(e.schema.getTextInlineElements(), Ht(t));
      }(e, n));
      e.dom.isEmpty(e.getBody()) ? (e.setContent(""), e.selection.setCursorLocation()) : s.bind(th).fold(function () {
        o && Zp(e, t, i);
      }, function (n) {
        o && Zp(e, t, I.some(n));
      });
    },
    oh = /[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,
    rh = function rh(e, t) {
      return xn(yn(t), Zl(e)) && !As(e.schema, t) && e.dom.isEditable(t);
    },
    sh = function sh(e) {
      var t;
      return "rtl" === Oa.DOM.getStyle(e, "direction", !0) || function (e) {
        return oh.test(e);
      }(null !== (t = e.textContent) && void 0 !== t ? t : "");
    },
    ah = function ah(e, t, n) {
      var o = function (e, t, n) {
        return G(Oa.DOM.getParents(n.container(), "*", t), e);
      }(e, t, n);
      return I.from(o[o.length - 1]);
    },
    ih = function ih(e, t) {
      var n = t.container(),
        o = t.offset();
      return e ? Hr(n) ? Jo(n.nextSibling) ? Li(n.nextSibling, 0) : Li.after(n) : qr(t) ? Li(n, o + 1) : t : Hr(n) ? Jo(n.previousSibling) ? Li(n.previousSibling, n.previousSibling.data.length) : Li.before(n) : Wr(t) ? Li(n, o - 1) : t;
    },
    lh = O(ih, !0),
    dh = O(ih, !1),
    ch = function ch(e, t) {
      var n = function n(e) {
        return e.stopImmediatePropagation();
      };
      e.on("beforeinput input", n, !0), e.getDoc().execCommand(t), e.off("beforeinput input", n);
    },
    uh = function uh(e) {
      return ch(e, "Delete");
    },
    mh = function mh(e) {
      return Sr(e) || Nr(e);
    },
    fh = function fh(e, t) {
      return Sn(e, t) ? Jn(t, mh, function (e) {
        return function (t) {
          return Pt(An(t), e, En);
        };
      }(e)) : I.none();
    },
    gh = function gh(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
      e.dom.isEmpty(e.getBody()) && e.setContent("", {
        no_selection: !t
      });
    },
    ph = function ph(e, t, n) {
      return Mt(yu(n), Cu(n), function (o, r) {
        var s = ih(!0, o),
          a = ih(!1, r),
          i = ih(!1, t);
        return e ? bu(n, i).exists(function (e) {
          return e.isEqual(a) && t.isEqual(s);
        }) : vu(n, i).exists(function (e) {
          return e.isEqual(s) && t.isEqual(a);
        });
      }).getOr(!0);
    },
    hh = function hh(e) {
      var t;
      return (8 === $t(t = e) || "#comment" === Ht(t) ? Bn(e) : Un(e)).bind(hh).orThunk(function () {
        return I.some(e);
      });
    },
    bh = function bh(e, t, n) {
      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
      var r;
      t.deleteContents();
      var s = hh(n).getOr(n),
        a = yn(null !== (r = e.dom.getParent(s.dom, e.dom.isBlock)) && void 0 !== r ? r : n.dom);
      if (a.dom === e.getBody() ? gh(e, o) : bs(a) && (Pr(a), o && e.selection.setCursorLocation(a.dom, 0)), !En(n, a)) {
        var _e66 = Pt(An(a), n) ? [] : An(i = a).map(Mn).map(function (e) {
          return G(e, function (e) {
            return !En(i, e);
          });
        }).getOr([]);
        q(_e66.concat(Mn(n)), function (e) {
          En(e, a) || Sn(e, a) || !bs(e) || wo(e);
        });
      }
      var i;
    },
    vh = function vh(e) {
      return Fo(e, "td,th");
    },
    yh = function yh(e, t) {
      return {
        start: e,
        end: t
      };
    },
    Ch = al([{
      singleCellTable: ["rng", "cell"]
    }, {
      fullTable: ["table"]
    }, {
      partialTable: ["cells", "outsideDetails"]
    }, {
      multiTable: ["startTableCells", "endTableCells", "betweenRng"]
    }]),
    wh = function wh(e, t) {
      return to(yn(e), "td,th", t);
    },
    xh = function xh(e) {
      return !En(e.start, e.end);
    },
    kh = function kh(e, t) {
      return Xu(e.start, t).bind(function (n) {
        return Xu(e.end, t).bind(function (e) {
          return It(En(n, e), n);
        });
      });
    },
    Eh = function Eh(e) {
      return function (t) {
        return kh(t, e).map(function (e) {
          return function (e, t, n) {
            return {
              rng: e,
              table: t,
              cells: n
            };
          }(t, e, vh(e));
        });
      };
    },
    Sh = function Sh(e, t, n, o) {
      if (n.collapsed || !e.forall(xh)) return I.none();
      if (t.isSameTable) {
        var _t77 = e.bind(Eh(o));
        return I.some({
          start: _t77,
          end: _t77
        });
      }
      {
        var _e67 = wh(n.startContainer, o),
          _t78 = wh(n.endContainer, o),
          _r36 = _e67.bind(function (e) {
            return function (t) {
              return Xu(t, e).bind(function (e) {
                return de(vh(e)).map(function (e) {
                  return yh(t, e);
                });
              });
            };
          }(o)).bind(Eh(o)),
          _s24 = _t78.bind(function (e) {
            return function (t) {
              return Xu(t, e).bind(function (e) {
                return le(vh(e)).map(function (e) {
                  return yh(e, t);
                });
              });
            };
          }(o)).bind(Eh(o));
        return I.some({
          start: _r36,
          end: _s24
        });
      }
    },
    _h = function _h(e, t) {
      return Z(e, function (e) {
        return En(e, t);
      });
    },
    Nh = function Nh(e) {
      return Mt(_h(e.cells, e.rng.start), _h(e.cells, e.rng.end), function (t, n) {
        return e.cells.slice(t, n + 1);
      });
    },
    Rh = function Rh(e, t) {
      var n = t.startTable,
        o = t.endTable,
        r = e.cloneRange();
      return n.each(function (e) {
        return r.setStartAfter(e.dom);
      }), o.each(function (e) {
        return r.setEndBefore(e.dom);
      }), r;
    },
    Ah = function Ah(e, t) {
      var n = function (e) {
          return function (t) {
            return En(e, t);
          };
        }(e),
        o = function (e, t) {
          var n = wh(e.startContainer, t),
            o = wh(e.endContainer, t);
          return Mt(n, o, yh);
        }(t, n),
        r = function (e, t) {
          var n = function n(e) {
              return Xu(yn(e), t);
            },
            o = n(e.startContainer),
            r = n(e.endContainer),
            s = o.isSome(),
            a = r.isSome(),
            i = Mt(o, r, En).getOr(!1);
          return {
            startTable: o,
            endTable: r,
            isStartInTable: s,
            isEndInTable: a,
            isSameTable: i,
            isMultiTable: !i && s && a
          };
        }(t, n);
      return function (e, t, n) {
        return e.exists(function (e) {
          return function (e, t) {
            return !xh(e) && kh(e, t).exists(function (e) {
              var t = e.dom.rows;
              return 1 === t.length && 1 === t[0].cells.length;
            });
          }(e, n) && Zu(e.start, t);
        });
      }(o, t, n) ? o.map(function (e) {
        return Ch.singleCellTable(t, e.start);
      }) : r.isMultiTable ? function (e, t, n, o) {
        return Sh(e, t, n, o).bind(function (_ref11) {
          var e = _ref11.start,
            o = _ref11.end;
          var r = e.bind(Nh).getOr([]),
            s = o.bind(Nh).getOr([]);
          if (r.length > 0 && s.length > 0) {
            var _e68 = Rh(n, t);
            return I.some(Ch.multiTable(r, s, _e68));
          }
          return I.none();
        });
      }(o, r, t, n) : function (e, t, n, o) {
        return Sh(e, t, n, o).bind(function (_ref12) {
          var e = _ref12.start,
            t = _ref12.end;
          return e.or(t);
        }).bind(function (e) {
          var o = t.isSameTable,
            r = Nh(e).getOr([]);
          if (o && e.cells.length === r.length) return I.some(Ch.fullTable(e.table));
          if (r.length > 0) {
            if (o) return I.some(Ch.partialTable(r, I.none()));
            {
              var _e69 = Rh(n, t);
              return I.some(Ch.partialTable(r, I.some(_objectSpread(_objectSpread({}, t), {}, {
                rng: _e69
              }))));
            }
          }
          return I.none();
        });
      }(o, r, t, n);
    },
    Oh = function Oh(e) {
      return q(e, function (e) {
        on(e, "contenteditable"), Pr(e);
      });
    },
    Th = function Th(e, t, n, o) {
      var r = n.cloneRange();
      o ? (r.setStart(n.startContainer, n.startOffset), r.setEndAfter(t.dom.lastChild)) : (r.setStartBefore(t.dom.firstChild), r.setEnd(n.endContainer, n.endOffset)), Lh(e, r, t, !1).each(function (e) {
        return e();
      });
    },
    Bh = function Bh(e) {
      var t = Yu(e),
        n = yn(e.selection.getNode());
      lr(n.dom) && bs(n) ? e.selection.setCursorLocation(n.dom, 0) : e.selection.collapse(!0), t.length > 1 && $(t, function (e) {
        return En(e, n);
      }) && Jt(n, "data-mce-selected", "1");
    },
    Dh = function Dh(e, t, n) {
      return I.some(function () {
        var o = e.selection.getRng(),
          r = n.bind(function (_ref13) {
            var n = _ref13.rng,
              r = _ref13.isStartInTable;
            var s = function (e, t) {
              return I.from(e.dom.getParent(t, e.dom.isBlock)).map(yn);
            }(e, r ? n.endContainer : n.startContainer);
            n.deleteContents(), function (e, t, n) {
              n.each(function (n) {
                t ? wo(n) : (Pr(n), e.selection.setCursorLocation(n.dom, 0));
              });
            }(e, r, s.filter(bs));
            var a = r ? t[0] : t[t.length - 1];
            return Th(e, a, o, r), bs(a) ? I.none() : I.some(r ? t.slice(1) : t.slice(0, -1));
          }).getOr(t);
        Oh(r), Bh(e);
      });
    },
    Ph = function Ph(e, t, n, o) {
      return I.some(function () {
        var r = e.selection.getRng(),
          s = t[0],
          a = n[n.length - 1];
        Th(e, s, r, !0), Th(e, a, r, !1);
        var i = bs(s) ? t : t.slice(1),
          l = bs(a) ? n : n.slice(0, -1);
        Oh(i.concat(l)), o.deleteContents(), Bh(e);
      });
    },
    Lh = function Lh(e, t, n) {
      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
      return I.some(function () {
        bh(e, t, n, o);
      });
    },
    Mh = function Mh(e, t) {
      return I.some(function () {
        return nh(e, !1, t);
      });
    },
    Ih = function Ih(e, t) {
      return J(pp(t, e), Ar);
    },
    Fh = function Fh(e, t) {
      return J(pp(t, e), Xt("caption"));
    },
    Uh = function Uh(e, t) {
      return I.some(function () {
        Pr(t), e.selection.setCursorLocation(t.dom, 0);
      });
    },
    zh = function zh(e, t) {
      return e ? cp(t) : up(t);
    },
    jh = function jh(e, t, n) {
      var o = yn(e.getBody());
      return Fh(o, n).fold(function () {
        return function (e, t, n, o) {
          var r = Li.fromRangeStart(e.selection.getRng());
          return Ih(n, o).bind(function (o) {
            return bs(o) ? Uh(e, o) : function (e, t, n, o, r) {
              return gu(n, e.getBody(), r).bind(function (e) {
                return Ih(t, yn(e.getNode())).bind(function (e) {
                  return En(e, o) ? I.none() : I.some(E);
                });
              });
            }(e, n, t, o, r);
          });
        }(e, t, o, n).orThunk(function () {
          return It(function (e, t) {
            var n = Li.fromRangeStart(e.selection.getRng());
            return zh(t, n) || fu(t, e.getBody(), n).exists(function (e) {
              return zh(t, e);
            });
          }(e, t), E);
        });
      }, function (n) {
        return function (e, t, n, o) {
          var r = Li.fromRangeStart(e.selection.getRng());
          return bs(o) ? Uh(e, o) : function (e, t, n, o, r) {
            return gu(n, e.getBody(), r).fold(function () {
              return I.some(E);
            }, function (s) {
              return function (e, t, n, o) {
                return yu(e.dom).bind(function (r) {
                  return Cu(e.dom).map(function (e) {
                    return t ? n.isEqual(r) && o.isEqual(e) : n.isEqual(e) && o.isEqual(r);
                  });
                }).getOr(!0);
              }(o, n, r, s) ? function (e, t) {
                return Uh(e, t);
              }(e, o) : function (e, t, n) {
                return Fh(e, yn(n.getNode())).fold(function () {
                  return I.some(E);
                }, function (e) {
                  return It(!En(e, t), E);
                });
              }(t, o, s);
            });
          }(e, n, t, o, r);
        }(e, t, o, n);
      });
    },
    Hh = function Hh(e, t) {
      var n = yn(e.selection.getStart(!0)),
        o = Yu(e);
      return e.selection.isCollapsed() && 0 === o.length ? jh(e, t, n) : function (e, t, n) {
        var o = yn(e.getBody()),
          r = e.selection.getRng();
        return 0 !== n.length ? Dh(e, n, I.none()) : function (e, t, n, o) {
          return Fh(t, o).fold(function () {
            return function (e, t, n) {
              return Ah(t, n).bind(function (t) {
                return t.fold(O(Lh, e), O(Mh, e), O(Dh, e), O(Ph, e));
              });
            }(e, t, n);
          }, function (t) {
            return function (e, t) {
              return Uh(e, t);
            }(e, t);
          });
        }(e, o, r, t);
      }(e, n, o);
    },
    $h = function $h(e, t) {
      var n = t;
      for (; n && n !== e;) {
        if (ar(n) || ir(n)) return n;
        n = n.parentNode;
      }
      return null;
    },
    Vh = ["data-ephox-", "data-mce-", "data-alloy-", "data-snooker-", "_"],
    qh = Dt.each,
    Wh = function Wh(e) {
      var t = e.dom,
        n = new Set(e.serializer.getTempAttrs()),
        o = function o(e) {
          return $(Vh, function (t) {
            return He(e, t);
          }) || n.has(e);
        };
      return {
        compare: function compare(e, n) {
          if (e.nodeName !== n.nodeName || e.nodeType !== n.nodeType) return !1;
          var r = function r(e) {
              var n = {};
              return qh(t.getAttribs(e), function (r) {
                var s = r.nodeName.toLowerCase();
                "style" === s || o(s) || (n[s] = t.getAttrib(e, s));
              }), n;
            },
            s = function s(e, t) {
              for (var _n68 in e) if (ke(e, _n68)) {
                var _o56 = t[_n68];
                if (v(_o56)) return !1;
                if (e[_n68] !== _o56) return !1;
                delete t[_n68];
              }
              for (var _e70 in t) if (ke(t, _e70)) return !1;
              return !0;
            };
          if ($o(e) && $o(n)) {
            if (!s(r(e), r(n))) return !1;
            if (!s(t.parseStyle(t.getAttrib(e, "style")), t.parseStyle(t.getAttrib(n, "style")))) return !1;
          }
          return !Lu(e) && !Lu(n);
        },
        isAttributeInternal: o
      };
    },
    Kh = function Kh(e, t, n, o) {
      var r = n.name;
      for (var _t79 = 0, _s25 = e.length; _t79 < _s25; _t79++) {
        var _s26 = e[_t79];
        if (_s26.name === r) {
          var _e71 = o.nodes[r];
          _e71 ? _e71.nodes.push(n) : o.nodes[r] = {
            filter: _s26,
            nodes: [n]
          };
        }
      }
      if (n.attributes) for (var _e72 = 0, _r37 = t.length; _e72 < _r37; _e72++) {
        var _r38 = t[_e72],
          _s27 = _r38.name;
        if (_s27 in n.attributes.map) {
          var _e73 = o.attributes[_s27];
          _e73 ? _e73.nodes.push(n) : o.attributes[_s27] = {
            filter: _r38,
            nodes: [n]
          };
        }
      }
    },
    Gh = function Gh(e, t) {
      var n = function n(e, _n69) {
        ge(e, function (e) {
          var o = ce(e.nodes);
          q(e.filter.callbacks, function (r) {
            for (var _t80 = o.length - 1; _t80 >= 0; _t80--) {
              var _r39 = o[_t80];
              (_n69 ? void 0 !== _r39.attr(e.filter.name) : _r39.name === e.filter.name) && !y(_r39.parent) || o.splice(_t80, 1);
            }
            o.length > 0 && r(o, e.filter.name, t);
          });
        });
      };
      n(e.nodes, !1), n(e.attributes, !0);
    },
    Yh = function Yh(e, t, n) {
      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      var r = function (e, t, n) {
        var o = {
          nodes: {},
          attributes: {}
        };
        return n.firstChild && function (n, r) {
          var s = n;
          for (; s = s.walk();) Kh(e, t, s, o);
        }(n), o;
      }(e, t, n);
      Gh(r, o);
    },
    Xh = function Xh(e, t, n, o) {
      if ((e.pad_empty_with_br || t.insert) && n(o)) {
        var _e74 = new Fg("br", 1);
        t.insert && _e74.attr("data-mce-bogus", "1"), o.empty().append(_e74);
      } else o.empty().append(new Fg("#text", 3)).value = pr;
    },
    Qh = function Qh(e, t) {
      var n = null == e ? void 0 : e.firstChild;
      return C(n) && n === e.lastChild && n.name === t;
    },
    Jh = function Jh(e, t, n, o) {
      return o.isEmpty(t, n, function (t) {
        return function (e, t) {
          var n = e.getElementRule(t.name);
          return !0 === (null == n ? void 0 : n.paddEmpty);
        }(e, t);
      });
    },
    Zh = function Zh(e) {
      var t;
      for (var _n70 = e; _n70; _n70 = _n70.parent) {
        var _e75 = _n70.attr("contenteditable");
        if ("false" === _e75) break;
        "true" === _e75 && (t = _n70);
      }
      return I.from(t);
    },
    eb = function eb(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : e.parent;
      if (t.getSpecialElements()[e.name]) e.empty().remove();else {
        var _o57 = e.children();
        var _iterator3 = _createForOfIteratorHelper(_o57),
          _step3;
        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var _e76 = _step3.value;
            n && !t.isValidChild(n.name, _e76.name) && eb(_e76, t, n);
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
        e.unwrap();
      }
    },
    tb = function tb(e, t, n) {
      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : E;
      var r = t.getTextBlockElements(),
        s = t.getNonEmptyElements(),
        a = t.getWhitespaceElements(),
        i = Dt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),
        l = new Set(),
        d = function d(e) {
          return e !== n && !i[e.name];
        };
      for (var _n71 = 0; _n71 < e.length; _n71++) {
        var _i12 = e[_n71];
        var _c2 = void 0,
          _u3 = void 0,
          _m4 = void 0;
        if (!_i12.parent || l.has(_i12)) continue;
        if (r[_i12.name] && "li" === _i12.parent.name) {
          var _e77 = _i12.next;
          for (; _e77 && r[_e77.name];) _e77.name = "li", l.add(_e77), _i12.parent.insert(_e77, _i12.parent), _e77 = _e77.next;
          _i12.unwrap();
          continue;
        }
        var _f3 = [_i12];
        for (_c2 = _i12.parent; _c2 && !t.isValidChild(_c2.name, _i12.name) && d(_c2); _c2 = _c2.parent) _f3.push(_c2);
        if (_c2 && _f3.length > 1) {
          if (t.isValidChild(_c2.name, _i12.name)) {
            _f3.reverse(), _u3 = _f3[0].clone(), o(_u3);
            var _e78 = _u3;
            for (var _n72 = 0; _n72 < _f3.length - 1; _n72++) {
              t.isValidChild(_e78.name, _f3[_n72].name) && _n72 > 0 ? (_m4 = _f3[_n72].clone(), o(_m4), _e78.append(_m4)) : _m4 = _e78;
              for (var _e79 = _f3[_n72].firstChild; _e79 && _e79 !== _f3[_n72 + 1];) {
                var _t81 = _e79.next;
                _m4.append(_e79), _e79 = _t81;
              }
              _e78 = _m4;
            }
            Jh(t, s, a, _u3) ? _c2.insert(_i12, _f3[0], !0) : (_c2.insert(_u3, _f3[0], !0), _c2.insert(_i12, _u3)), _c2 = _f3[0], (Jh(t, s, a, _c2) || Qh(_c2, "br")) && _c2.empty().remove();
          } else eb(_i12, t);
        } else if (_i12.parent) {
          if ("li" === _i12.name) {
            var _e80 = _i12.prev;
            if (_e80 && ("ul" === _e80.name || "ol" === _e80.name)) {
              _e80.append(_i12);
              continue;
            }
            if (_e80 = _i12.next, _e80 && ("ul" === _e80.name || "ol" === _e80.name) && _e80.firstChild) {
              _e80.insert(_i12, _e80.firstChild, !0);
              continue;
            }
            var _t82 = new Fg("ul", 1);
            o(_t82), _i12.wrap(_t82);
            continue;
          }
          if (t.isValidChild(_i12.parent.name, "div") && t.isValidChild("div", _i12.name)) {
            var _e81 = new Fg("div", 1);
            o(_e81), _i12.wrap(_e81);
          } else eb(_i12, t);
        }
      }
    },
    nb = function nb(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : t.parent;
      return !(!n || !e.children[t.name] || e.isValidChild(n.name, t.name)) || !(!n || "a" !== t.name || !function (e, t) {
        var n = e;
        for (; n;) {
          if ("a" === n.name) return !0;
          n = n.parent;
        }
        return !1;
      }(n));
    },
    ob = function ob(e) {
      return e.collapsed ? e : function (e) {
        var t = Li.fromRangeStart(e),
          n = Li.fromRangeEnd(e),
          o = e.commonAncestorContainer;
        return fu(!1, o, n).map(function (r) {
          return !Uc(t, n, o) && Uc(t, r, o) ? function (e, t, n, o) {
            var r = document.createRange();
            return r.setStart(e, t), r.setEnd(n, o), r;
          }(t.container(), t.offset(), r.container(), r.offset()) : e;
        }).getOr(e);
      }(e);
    },
    rb = function rb(e, t) {
      var n = t.firstChild,
        o = t.lastChild;
      return n && "meta" === n.name && (n = n.next), o && "mce_marker" === o.attr("id") && (o = o.prev), function (e, t) {
        var n = e.getNonEmptyElements();
        return C(t) && (t.isEmpty(n) || function (e, t) {
          return e.getBlockElements()[t.name] && function (e) {
            return C(e.firstChild) && e.firstChild === e.lastChild;
          }(t) && function (e) {
            return "br" === e.name || e.value === pr;
          }(t.firstChild);
        }(e, t));
      }(e, o) && (o = null == o ? void 0 : o.prev), !(!n || n !== o || "ul" !== n.name && "ol" !== n.name);
    },
    sb = function sb(e) {
      return e.length > 0 && (!(n = e[e.length - 1]).firstChild || C(null == (t = n) ? void 0 : t.firstChild) && t.firstChild === t.lastChild && function (e) {
        return e.data === pr || rr(e);
      }(t.firstChild)) ? e.slice(0, -1) : e;
      var t, n;
    },
    ab = function ab(e, t) {
      var n = e.getParent(t, e.isBlock);
      return n && "LI" === n.nodeName ? n : null;
    },
    ib = function ib(e, t) {
      var n = Li.after(e),
        o = du(t).prev(n);
      return o ? o.toRange() : null;
    },
    lb = function lb(e, t, n, o) {
      var r = function (e, t, n) {
          var o = t.serialize(n);
          return function (e) {
            var t, n;
            var o = e.firstChild,
              r = e.lastChild;
            return o && "META" === o.nodeName && (null === (t = o.parentNode) || void 0 === t || t.removeChild(o)), r && "mce_marker" === r.id && (null === (n = r.parentNode) || void 0 === n || n.removeChild(r)), e;
          }(e.createFragment(o));
        }(t, e, o),
        s = ab(t, n.startContainer),
        a = sb((i = r.firstChild, G(null !== (l = null == i ? void 0 : i.childNodes) && void 0 !== l ? l : [], function (e) {
          return "LI" === e.nodeName;
        })));
      var i, l;
      var d = t.getRoot(),
        c = function c(e) {
          var o = Li.fromRangeStart(n),
            r = du(t.getRoot()),
            a = 1 === e ? r.prev(o) : r.next(o),
            i = null == a ? void 0 : a.getNode();
          return !i || ab(t, i) !== s;
        };
      return s ? c(1) ? function (e, t, n) {
        var o = e.parentNode;
        return o && Dt.each(t, function (t) {
          o.insertBefore(t, e);
        }), function (e, t) {
          var n = Li.before(e),
            o = du(t).next(n);
          return o ? o.toRange() : null;
        }(e, n);
      }(s, a, d) : c(2) ? function (e, t, n, o) {
        return o.insertAfter(t.reverse(), e), ib(t[0], n);
      }(s, a, d, t) : function (e, t, n, o) {
        var r = function (e, t) {
            var n = t.cloneRange(),
              o = t.cloneRange();
            return n.setStartBefore(e), o.setEndAfter(e), [n.cloneContents(), o.cloneContents()];
          }(e, o),
          s = e.parentNode;
        return s && (s.insertBefore(r[0], e), Dt.each(t, function (t) {
          s.insertBefore(t, e);
        }), s.insertBefore(r[1], e), s.removeChild(e)), ib(t[t.length - 1], n);
      }(s, a, d, n) : null;
    },
    db = ["pre"],
    cb = lr,
    ub = function ub(e, t, n) {
      var o, r;
      var s = e.selection,
        a = e.dom,
        i = e.parser,
        l = n.merge,
        d = Gg({
          validate: !0
        }, e.schema),
        c = '<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';
      -1 === t.indexOf("{$caret}") && (t += "{$caret}"), t = t.replace(/\{\$caret\}/, c);
      var u = s.getRng();
      var m = u.startContainer,
        f = e.getBody();
      m === f && s.isCollapsed() && a.isBlock(f.firstChild) && function (e, t) {
        return C(t) && !e.schema.getVoidElements()[t.nodeName];
      }(e, f.firstChild) && a.isEmpty(f.firstChild) && (u = a.createRng(), u.setStart(f.firstChild, 0), u.setEnd(f.firstChild, 0), s.setRng(u)), s.isCollapsed() || function (e) {
        var t = e.dom,
          n = ob(e.selection.getRng());
        e.selection.setRng(n);
        var o = t.getParent(n.startContainer, cb);
        (function (e, t, n) {
          return !!C(n) && n === e.getParent(t.endContainer, cb) && Zu(yn(n), t);
        })(t, n, o) ? Lh(e, n, yn(o)) : n.startContainer === n.endContainer && n.endOffset - n.startOffset == 1 && Jo(n.startContainer.childNodes[n.startOffset]) ? n.deleteContents() : e.getDoc().execCommand("Delete", !1);
      }(e);
      var g = s.getNode(),
        p = {
          context: g.nodeName.toLowerCase(),
          data: n.data,
          insert: !0
        },
        h = i.parse(t, p);
      if (!0 === n.paste && rb(e.schema, h) && function (e, t) {
        return !!ab(e, t);
      }(a, g)) return u = lb(d, a, s.getRng(), h), u && s.setRng(u), t;
      !0 === n.paste && function (e, t, n, o) {
        var r;
        var s = t.firstChild,
          a = t.lastChild,
          i = s === ("bookmark" === a.attr("data-mce-type") ? a.prev : a),
          l = H(db, s.name);
        if (i && l) {
          var _t83 = "false" !== s.attr("contenteditable"),
            _a12 = (null === (r = e.getParent(n, e.isBlock)) || void 0 === r ? void 0 : r.nodeName.toLowerCase()) === s.name,
            _i13 = I.from($h(o, n)).forall(ar);
          return _t83 && _a12 && _i13;
        }
        return !1;
      }(a, h, g, e.getBody()) && (null === (o = h.firstChild) || void 0 === o || o.unwrap()), function (e) {
        var t = e;
        for (; t = t.walk();) 1 === t.type && t.attr("data-mce-fragment", "1");
      }(h);
      var b = h.lastChild;
      if (b && "mce_marker" === b.attr("id")) {
        var _t84 = b;
        for (b = b.prev; b; b = b.walk(!0)) if (3 === b.type || !a.isBlock(b.name)) {
          b.parent && e.schema.isValidChild(b.parent.name, "span") && b.parent.insert(_t84, b, "br" === b.name);
          break;
        }
      }
      if (e._selectionOverrides.showBlockCaretContainer(g), p.invalid) {
        e.selection.setContent(c);
        var _n73,
          _o58 = s.getNode();
        var _l6 = e.getBody();
        for (nr(_o58) ? _o58 = _n73 = _l6 : _n73 = _o58; _n73 && _n73 !== _l6;) _o58 = _n73, _n73 = _n73.parentNode;
        t = _o58 === _l6 ? _l6.innerHTML : a.getOuterHTML(_o58);
        var _u4 = i.parse(t),
          _m5 = function (e) {
            for (var _t85 = e; _t85; _t85 = _t85.walk()) if ("mce_marker" === _t85.attr("id")) return I.some(_t85);
            return I.none();
          }(_u4),
          _f4 = _m5.bind(Zh).getOr(_u4);
        _m5.each(function (e) {
          return e.replace(h);
        });
        var _g2 = h.children(),
          _p2 = null !== (r = h.parent) && void 0 !== r ? r : _u4;
        h.unwrap();
        var _b2 = G(_g2, function (t) {
          return nb(e.schema, t, _p2);
        });
        tb(_b2, e.schema, _f4), Yh(i.getNodeFilters(), i.getAttributeFilters(), _u4), t = d.serialize(_u4), _o58 === _l6 ? a.setHTML(_l6, t) : a.setOuterHTML(_o58, t);
      } else t = d.serialize(h), function (e, t, n) {
        var o;
        if ("all" === n.getAttribute("data-mce-bogus")) null === (o = n.parentNode) || void 0 === o || o.insertBefore(e.dom.createFragment(t), n);else {
          var _o59 = n.firstChild,
            _r40 = n.lastChild;
          !_o59 || _o59 === _r40 && "BR" === _o59.nodeName ? e.dom.setHTML(n, t) : e.selection.setContent(t, {
            no_events: !0
          });
        }
      }(e, t, g);
      var v;
      return function (e, t) {
        var n = e.schema.getTextInlineElements(),
          o = e.dom;
        if (t) {
          var _t86 = e.getBody(),
            _r41 = Wh(e);
          Dt.each(o.select("*[data-mce-fragment]"), function (e) {
            if (C(n[e.nodeName.toLowerCase()]) && function (e, t) {
              return ne(Qg(e, t), function (e) {
                return !function (e) {
                  return Yg.has(e);
                }(e);
              });
            }(o, e)) for (var _n74 = e.parentElement; C(_n74) && _n74 !== _t86 && !Jg(o, e, _n74); _n74 = _n74.parentElement) if (_r41.compare(_n74, e)) {
              o.remove(e, !0);
              break;
            }
          });
        }
      }(e, l), function (e, t) {
        var n, o, r;
        var s;
        var a = e.dom,
          i = e.selection;
        if (!t) return;
        i.scrollIntoView(t);
        var l = $h(e.getBody(), t);
        if (l && "false" === a.getContentEditable(l)) return a.remove(t), void i.select(l);
        var d = a.createRng();
        var c = t.previousSibling;
        if (Jo(c)) {
          d.setStart(c, null !== (o = null === (n = c.nodeValue) || void 0 === n ? void 0 : n.length) && void 0 !== o ? o : 0);
          var _e82 = t.nextSibling;
          Jo(_e82) && (c.appendData(_e82.data), null === (r = _e82.parentNode) || void 0 === r || r.removeChild(_e82));
        } else d.setStartBefore(t), d.setEndBefore(t);
        var u = a.getParent(t, a.isBlock);
        if (a.remove(t), u && a.isEmpty(u)) {
          var _t87 = cb(u);
          Co(yn(u)), d.setStart(u, 0), d.setEnd(u, 0), _t87 || function (e) {
            return !!e.getAttribute("data-mce-fragment");
          }(u) || !(s = function (t) {
            var n = Li.fromRangeStart(t);
            return n = du(e.getBody()).next(n), null == n ? void 0 : n.toRange();
          }(d)) ? a.add(u, a.create("br", _t87 ? {} : {
            "data-mce-bogus": "1"
          })) : (d = s, a.remove(u));
        }
        i.setRng(d);
      }(e, a.get("mce_marker")), v = e.getBody(), Dt.each(v.getElementsByTagName("*"), function (e) {
        e.removeAttribute("data-mce-fragment");
      }), function (e, t) {
        I.from(e.getParent(t, "td,th")).map(yn).each(Lr);
      }(a, s.getStart()), function (e, t, n) {
        var o = Tn(yn(n), function (e) {
          return En(e, yn(t));
        });
        ie(o, o.length - 2).filter(Wt).fold(function () {
          return Es(e, t);
        }, function (t) {
          return Es(e, t.dom);
        });
      }(e.schema, e.getBody(), s.getStart()), t;
    },
    mb = function mb(e) {
      return e instanceof Fg;
    },
    fb = function fb(e, t, n) {
      e.dom.setHTML(e.getBody(), t), !0 !== n && function (e) {
        xg(e) && yu(e.getBody()).each(function (t) {
          var n = t.getNode(),
            o = Yo(n) ? yu(n).getOr(t) : t;
          e.selection.setRng(o.toRange());
        });
      }(e);
    },
    gb = function gb(e, t) {
      return function (e, t) {
        var n = e.dom;
        return n.parentNode ? function (e, t) {
          return J(e.dom.childNodes, function (e) {
            return t(yn(e));
          }).map(yn);
        }(yn(n.parentNode), function (n) {
          return !En(e, n) && t(n);
        }) : I.none();
      }(e, t).isSome();
    },
    pb = function pb(e) {
      return w(e) ? e : L;
    },
    hb = function hb(e, t, n) {
      var o = t(e),
        r = pb(n);
      return o.orThunk(function () {
        return r(e) ? I.none() : function (e, t, n) {
          var o = e.dom;
          var r = pb(n);
          for (; o.parentNode;) {
            o = o.parentNode;
            var _e83 = yn(o),
              _n75 = t(_e83);
            if (_n75.isSome()) return _n75;
            if (r(_e83)) break;
          }
          return I.none();
        }(e, t, r);
      });
    },
    bb = pm,
    vb = function vb(e, t, n) {
      var o = e.formatter.get(n);
      if (o) for (var _n76 = 0; _n76 < o.length; _n76++) {
        var _r42 = o[_n76];
        if (xm(_r42) && !1 === _r42.inherit && e.dom.is(t, _r42.selector)) return !0;
      }
      return !1;
    },
    yb = function yb(e, t, n, o, r) {
      var s = e.dom.getRoot();
      if (t === s) return !1;
      var a = e.dom.getParent(t, function (t) {
        return !!vb(e, t, n) || t.parentNode === s || !!xb(e, t, n, o, !0);
      });
      return !!xb(e, a, n, o, r);
    },
    Cb = function Cb(e, t, n) {
      return !(!km(n) || !bb(t, n.inline)) || !(!wm(n) || !bb(t, n.block)) || !!xm(n) && $o(t) && e.is(t, n.selector);
    },
    wb = function wb(e, t, n, o, r, s) {
      var a = n[o],
        i = "attributes" === o;
      if (w(n.onmatch)) return n.onmatch(t, n, o);
      if (a) if (_e(a)) {
        for (var _n77 = 0; _n77 < a.length; _n77++) if (i ? e.getAttrib(t, a[_n77]) : bm(e, t, a[_n77])) return !0;
      } else for (var _o60 in a) if (ke(a, _o60)) {
        var _l7 = i ? e.getAttrib(t, _o60) : bm(e, t, _o60),
          _d7 = gm(a[_o60], s),
          _c3 = y(_l7) || Ye(_l7);
        if (_c3 && y(_d7)) continue;
        if (r && _c3 && !n.exact) return !1;
        if ((!r || n.exact) && !bb(_l7, hm(_d7, _o60))) return !1;
      }
      return !0;
    },
    xb = function xb(e, t, n, o, r) {
      var s = e.formatter.get(n),
        a = e.dom;
      if (s && $o(t)) for (var _n78 = 0; _n78 < s.length; _n78++) {
        var _i14 = s[_n78];
        if (Cb(e.dom, t, _i14) && wb(a, t, _i14, "attributes", r, o) && wb(a, t, _i14, "styles", r, o)) {
          var _n79 = _i14.classes;
          if (_n79) for (var _r43 = 0; _r43 < _n79.length; _r43++) if (!e.dom.hasClass(t, gm(_n79[_r43], o))) return;
          return _i14;
        }
      }
    },
    kb = function kb(e, t, n, o, r) {
      if (o) return yb(e, o, t, n, r);
      if (o = e.selection.getNode(), yb(e, o, t, n, r)) return !0;
      var s = e.selection.getStart();
      return !(s === o || !yb(e, s, t, n, r));
    },
    Eb = Mr,
    Sb = function Sb(e) {
      return function (e) {
        var t = [];
        var n = e;
        for (; n;) {
          if (Jo(n) && n.data !== Eb || n.childNodes.length > 1) return [];
          $o(n) && t.push(n), n = n.firstChild;
        }
        return t;
      }(e).length > 0;
    },
    _b = function _b(e) {
      if (e) {
        var _t88 = new zo(e, e);
        for (var _e84 = _t88.current(); _e84; _e84 = _t88.next()) if (Jo(_e84)) return _e84;
      }
      return null;
    },
    Nb = function Nb(e) {
      var t = bn("span");
      return Zt(t, {
        id: wu,
        "data-mce-bogus": "1",
        "data-mce-type": "format-caret"
      }), e && bo(t, vn(Eb)), t;
    },
    Rb = function Rb(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
      var o = e.dom,
        r = e.selection;
      if (Sb(t)) nh(e, !1, yn(t), n);else {
        var _e85 = r.getRng(),
          _n80 = o.getParent(t, o.isBlock),
          _s28 = _e85.startContainer,
          _a13 = _e85.startOffset,
          _i15 = _e85.endContainer,
          _l8 = _e85.endOffset,
          _d8 = function (e) {
            var t = _b(e);
            return t && t.data.charAt(0) === Eb && t.deleteData(0, 1), t;
          }(t);
        o.remove(t, !0), _s28 === _d8 && _a13 > 0 && _e85.setStart(_d8, _a13 - 1), _i15 === _d8 && _l8 > 0 && _e85.setEnd(_d8, _l8 - 1), _n80 && o.isEmpty(_n80) && Pr(yn(_n80)), r.setRng(_e85);
      }
    },
    Ab = function Ab(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
      var o = e.dom,
        r = e.selection;
      if (t) Rb(e, t, n);else if (!(t = ku(e.getBody(), r.getStart()))) for (; t = o.get(wu);) Rb(e, t, n);
    },
    Ob = function Ob(e, t) {
      return e.appendChild(t), t;
    },
    Tb = function Tb(e, t) {
      var n;
      var o = Y(e, function (e, t) {
          return Ob(e, t.cloneNode(!1));
        }, t),
        r = null !== (n = o.ownerDocument) && void 0 !== n ? n : document;
      return Ob(o, r.createTextNode(Eb));
    },
    Bb = function Bb(e, t, n, o) {
      var a = e.dom,
        i = e.selection;
      var l = !1;
      var d = e.formatter.get(t);
      if (!d) return;
      var c = i.getRng(),
        u = c.startContainer,
        m = c.startOffset;
      var f = u;
      Jo(u) && (m !== u.data.length && (l = !0), f = f.parentNode);
      var g = [];
      var h;
      for (; f;) {
        if (xb(e, f, t, n, o)) {
          h = f;
          break;
        }
        f.nextSibling && (l = !0), g.push(f), f = f.parentNode;
      }
      if (h) if (l) {
        var _r44 = i.getBookmark();
        c.collapse(!0);
        var _s29 = Um(a, c, d, !0);
        _s29 = Bf(_s29), e.formatter.remove(t, n, _s29, o), i.moveToBookmark(_r44);
      } else {
        var _l9 = ku(e.getBody(), h),
          _d9 = Nb(!1).dom;
        (function (e, t, n) {
          var o, r;
          var s = e.dom,
            a = s.getParent(n, O(cm, e.schema));
          a && s.isEmpty(a) ? null === (o = n.parentNode) || void 0 === o || o.replaceChild(t, n) : (function (e) {
            var t = Fo(e, "br"),
              n = G(function (e) {
                var t = [];
                var n = e.dom;
                for (; n;) t.push(yn(n)), n = n.lastChild;
                return t;
              }(e).slice(-1), Er);
            t.length === n.length && q(n, wo);
          }(yn(n)), s.isEmpty(n) ? null === (r = n.parentNode) || void 0 === r || r.replaceChild(t, n) : s.insertAfter(t, n));
        })(e, _d9, null != _l9 ? _l9 : h);
        var _c4 = function (e, t, n, o, a, i) {
            var l = e.formatter,
              d = e.dom,
              c = G(me(l.get()), function (e) {
                return e !== o && !je(e, "removeformat");
              }),
              u = function (e, t, n) {
                return X(n, function (n, o) {
                  var r = function (e, t) {
                    return Cm(e, t, function (e) {
                      var t = function t(e) {
                        return w(e) || e.length > 1 && "%" === e.charAt(0);
                      };
                      return $(["styles", "attributes"], function (n) {
                        return xe(e, n).exists(function (e) {
                          var n = p(e) ? e : we(e);
                          return $(n, t);
                        });
                      });
                    });
                  }(e, o);
                  return e.formatter.matchNode(t, o, {}, r) ? n.concat([o]) : n;
                }, []);
              }(e, n, c);
            if (G(u, function (t) {
              return !function (e, t, n) {
                var o = ["inline", "block", "selector", "attributes", "styles", "classes"],
                  a = function a(e) {
                    return ye(e, function (e, t) {
                      return $(o, function (e) {
                        return e === t;
                      });
                    });
                  };
                return Cm(e, t, function (t) {
                  var o = a(t);
                  return Cm(e, n, function (e) {
                    var t = a(e);
                    return function (e, t) {
                      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : s;
                      return r(n).eq(e, t);
                    }(o, t);
                  });
                });
              }(e, t, o);
            }).length > 0) {
              var _e86 = n.cloneNode(!1);
              return d.add(t, _e86), l.remove(o, a, _e86, i), d.remove(_e86), I.some(_e86);
            }
            return I.none();
          }(e, _d9, h, t, n, o),
          _u5 = Tb(g.concat(_c4.toArray()), _d9);
        _l9 && Rb(e, _l9, !1), i.setCursorLocation(_u5, 1), a.isEmpty(h) && a.remove(h);
      }
    },
    Db = function Db(e) {
      var t = Nb(!1),
        n = Tb(e, t.dom);
      return {
        caretContainer: t,
        caretPosition: Li(n, 0)
      };
    },
    Pb = function Pb(e, t) {
      var _Db = Db(t),
        n = _Db.caretContainer,
        o = _Db.caretPosition;
      return go(yn(e), n), wo(yn(e)), o;
    },
    Lb = function Lb(e, t) {
      var n = e.schema.getTextInlineElements();
      return ke(n, Ht(t)) && !xu(t.dom) && !Go(t.dom);
    },
    Mb = function Mb(e) {
      return xu(e.dom) && Sb(e.dom);
    },
    Ib = {},
    Fb = qo(["pre"]);
  (function (e, t) {
    Ib[e] || (Ib[e] = []), Ib[e].push(function (e) {
      if (!e.selection.getRng().collapsed) {
        var _t89 = e.selection.getSelectedBlocks(),
          _n81 = G(G(_t89, Fb), function (e) {
            return function (t) {
              var n = t.previousSibling;
              return Fb(n) && H(e, n);
            };
          }(_t89));
        q(_n81, function (e) {
          (function (e, t) {
            var n = yn(t),
              o = Nn(n).dom;
            wo(n), yo(yn(e), [bn("br", o), bn("br", o)].concat(_toConsumableArray(Mn(n))));
          })(e.previousSibling, e);
        });
      }
    });
  })("pre");
  var Ub = ["fontWeight", "fontStyle", "color", "fontSize", "fontFamily"],
    zb = function zb(e, t) {
      var n = e.get(t);
      return p(n) ? J(n, function (e) {
        return km(e) && "span" === e.inline && function (e) {
          return f(e.styles) && $(me(e.styles), function (e) {
            return H(Ub, e);
          });
        }(e);
      }) : I.none();
    },
    jb = function jb(e, t) {
      return vu(t, Li.fromRangeStart(e)).isNone();
    },
    Hb = function Hb(e, t) {
      return !1 === bu(t, Li.fromRangeEnd(e)).exists(function (e) {
        return !rr(e.getNode()) || bu(t, e).isSome();
      });
    },
    $b = function $b(e) {
      return function (t) {
        return ur(t) && e.isEditable(t);
      };
    },
    Vb = function Vb(e) {
      return G(e.getSelectedBlocks(), $b(e.dom));
    },
    qb = Dt.each,
    Wb = function Wb(e) {
      return $o(e) && !Lu(e) && !xu(e) && !Go(e);
    },
    Kb = function Kb(e, t) {
      for (var _n82 = e; _n82; _n82 = _n82[t]) {
        if (Jo(_n82) && Ge(_n82.data)) return e;
        if ($o(_n82) && !Lu(_n82)) return _n82;
      }
      return e;
    },
    Gb = function Gb(e, t, n) {
      var o = Wh(e),
        r = $o(t) && am(t),
        s = $o(n) && am(n);
      if (r && s) {
        var _r45 = Kb(t, "previousSibling"),
          _s30 = Kb(n, "nextSibling");
        if (o.compare(_r45, _s30)) {
          for (var _e87 = _r45.nextSibling; _e87 && _e87 !== _s30;) {
            var _t90 = _e87;
            _e87 = _e87.nextSibling, _r45.appendChild(_t90);
          }
          return e.dom.remove(_s30), Dt.each(Dt.grep(_s30.childNodes), function (e) {
            _r45.appendChild(e);
          }), _r45;
        }
      }
      return n;
    },
    Yb = function Yb(e, t, n, o) {
      var r;
      if (o && !1 !== t.merge_siblings) {
        var _t91 = null !== (r = Gb(e, dm(o), o)) && void 0 !== r ? r : o;
        Gb(e, _t91, dm(_t91, !0));
      }
    },
    Xb = function Xb(e, t, n) {
      qb(e.childNodes, function (e) {
        Wb(e) && (t(e) && n(e), e.hasChildNodes() && Xb(e, t, n));
      });
    },
    Qb = function Qb(e, t) {
      return function (n) {
        return !(!n || !bm(e, n, t));
      };
    },
    Jb = function Jb(e, t, n) {
      return function (o) {
        e.setStyle(o, t, n), "" === o.getAttribute("style") && o.removeAttribute("style"), function (e, t) {
          "SPAN" === t.nodeName && 0 === e.getAttribs(t).length && e.remove(t, !0);
        }(e, o);
      };
    },
    Zb = al([{
      keep: []
    }, {
      rename: ["name"]
    }, {
      removed: []
    }]),
    ev = /^(src|href|style)$/,
    tv = Dt.each,
    nv = pm,
    ov = function ov(e, t, n) {
      return e.isChildOf(t, n) && t !== n && !e.isBlock(n);
    },
    rv = function rv(e, t, n) {
      var o = t[n ? "startContainer" : "endContainer"],
        r = t[n ? "startOffset" : "endOffset"];
      if ($o(o)) {
        var _e88 = o.childNodes.length - 1;
        !n && r && r--, o = o.childNodes[r > _e88 ? _e88 : r];
      }
      return Jo(o) && n && r >= o.data.length && (o = new zo(o, e.getBody()).next() || o), Jo(o) && !n && 0 === r && (o = new zo(o, e.getBody()).prev() || o), o;
    },
    sv = function sv(e, t) {
      var n = t ? "firstChild" : "lastChild",
        o = e[n];
      return function (e) {
        return /^(TR|TH|TD)$/.test(e.nodeName);
      }(e) && o ? "TR" === e.nodeName && o[n] || o : e;
    },
    av = function av(e, t, n, o) {
      var r;
      var s = e.create(n, o);
      return null === (r = t.parentNode) || void 0 === r || r.insertBefore(s, t), s.appendChild(t), s;
    },
    iv = function iv(e, t, n, o, r) {
      var s = yn(t),
        a = yn(e.create(o, r)),
        i = n ? Ln(s) : Pn(s);
      return yo(a, i), n ? (go(s, a), ho(a, s)) : (po(s, a), bo(a, s)), a.dom;
    },
    lv = function lv(e, t, n) {
      var o = t.parentNode;
      var r;
      var s = e.dom,
        a = Nl(e);
      wm(n) && o === s.getRoot() && (n.list_block && nv(t, n.list_block) || q(ce(t.childNodes), function (t) {
        um(e, a, t.nodeName.toLowerCase()) ? r ? r.appendChild(t) : (r = av(s, t, a), s.setAttribs(r, Rl(e))) : r = null;
      })), function (e) {
        return xm(e) && km(e) && Pt(xe(e, "mixed"), !0);
      }(n) && !nv(n.inline, t) || s.remove(t, !0);
    },
    dv = function dv(e, t, n) {
      return x(e) ? {
        name: t,
        value: null
      } : {
        name: e,
        value: gm(t, n)
      };
    },
    cv = function cv(e, t) {
      "" === e.getAttrib(t, "style") && (t.removeAttribute("style"), t.removeAttribute("data-mce-style"));
    },
    uv = function uv(e, t, n, o, r) {
      var s = !1;
      tv(n.styles, function (a, i) {
        var _dv = dv(i, a, o),
          l = _dv.name,
          d = _dv.value,
          c = hm(d, l);
        (n.remove_similar || h(d) || !$o(r) || nv(bm(e, r, l), c)) && e.setStyle(t, l, ""), s = !0;
      }), s && cv(e, t);
    },
    mv = function mv(e, t, n, o, r) {
      var s = e.dom,
        a = Wh(e),
        i = e.schema;
      if (km(t) && Ns(i, t.inline) && As(i, o) && o.parentElement === e.getBody()) return lv(e, o, t), Zb.removed();
      if (!t.ceFalseOverride && o && "false" === s.getContentEditableParent(o)) return Zb.keep();
      if (o && !Cb(s, o, t) && !function (e, t) {
        return t.links && "A" === e.nodeName;
      }(o, t)) return Zb.keep();
      var l = o,
        d = t.preserve_attributes;
      if (km(t) && "all" === t.remove && p(d)) {
        var _e89 = G(s.getAttribs(l), function (e) {
          return H(d, e.name.toLowerCase());
        });
        if (s.removeAllAttribs(l), q(_e89, function (e) {
          return s.setAttrib(l, e.name, e.value);
        }), _e89.length > 0) return Zb.rename("span");
      }
      if ("all" !== t.remove) {
        uv(s, l, t, n, r), tv(t.attributes, function (e, o) {
          var _dv2 = dv(o, e, n),
            a = _dv2.name,
            i = _dv2.value;
          if (t.remove_similar || h(i) || !$o(r) || nv(s.getAttrib(r, a), i)) {
            if ("class" === a) {
              var _e90 = s.getAttrib(l, a);
              if (_e90) {
                var _t92 = "";
                if (q(_e90.split(/\s+/), function (e) {
                  /mce\-\w+/.test(e) && (_t92 += (_t92 ? " " : "") + e);
                }), _t92) return void s.setAttrib(l, a, _t92);
              }
            }
            if (ev.test(a) && l.removeAttribute("data-mce-" + a), "style" === a && qo(["li"])(l) && "none" === s.getStyle(l, "list-style-type")) return l.removeAttribute(a), void s.setStyle(l, "list-style-type", "none");
            "class" === a && l.removeAttribute("className"), l.removeAttribute(a);
          }
        }), tv(t.classes, function (e) {
          e = gm(e, n), $o(r) && !s.hasClass(r, e) || s.removeClass(l, e);
        });
        var _e91 = s.getAttribs(l);
        for (var _t93 = 0; _t93 < _e91.length; _t93++) {
          var _n83 = _e91[_t93].nodeName;
          if (!a.isAttributeInternal(_n83)) return Zb.keep();
        }
      }
      return "none" !== t.remove ? (lv(e, l, t), Zb.removed()) : Zb.keep();
    },
    fv = function fv(e, t, n, o) {
      return mv(e, t, n, o, o).fold(N(o), function (t) {
        return e.dom.createFragment().appendChild(o), e.dom.rename(o, t);
      }, N(null));
    },
    gv = function gv(e, t, n, o, r) {
      (o || e.selection.isEditable()) && function (e, t, n, o, r) {
        var s = e.formatter.get(t),
          a = s[0],
          i = e.dom,
          l = e.selection,
          d = function d(o) {
            var i = function (e, t, n, o, r) {
              var s;
              return t.parentNode && q(ym(e.dom, t.parentNode).reverse(), function (t) {
                if (!s && $o(t) && "_start" !== t.id && "_end" !== t.id) {
                  var _a14 = xb(e, t, n, o, r);
                  _a14 && !1 !== _a14.split && (s = t);
                }
              }), s;
            }(e, o, t, n, r);
            return function (e, t, n, o, r, s, a, i) {
              var l, d;
              var c, u;
              var m = e.dom;
              if (n) {
                var _s31 = n.parentNode;
                for (var _n84 = o.parentNode; _n84 && _n84 !== _s31; _n84 = _n84.parentNode) {
                  var _o61 = m.clone(_n84, !1);
                  for (var _n85 = 0; _n85 < t.length && (_o61 = fv(e, t[_n85], i, _o61), null !== _o61); _n85++);
                  _o61 && (c && _o61.appendChild(c), u || (u = _o61), c = _o61);
                }
                a.mixed && m.isBlock(n) || (o = null !== (l = m.split(n, o)) && void 0 !== l ? l : o), c && u && (null === (d = r.parentNode) || void 0 === d || d.insertBefore(c, r), u.appendChild(r), km(a) && Yb(e, a, 0, c));
              }
              return o;
            }(e, s, i, o, o, 0, a, n);
          },
          c = function c(t) {
            return $(s, function (o) {
              return pv(e, o, n, t, t);
            });
          },
          u = function u(t) {
            var n = ce(t.childNodes),
              o = c(t) || $(s, function (e) {
                return Cb(i, t, e);
              }),
              r = t.parentNode;
            if (!o && C(r) && Em(a) && c(r), a.deep && n.length) for (var _e92 = 0; _e92 < n.length; _e92++) u(n[_e92]);
            q(["underline", "line-through", "overline"], function (n) {
              $o(t) && e.dom.getStyle(t, "text-decoration") === n && t.parentNode && vm(i, t.parentNode) === n && pv(e, {
                deep: !1,
                exact: !0,
                inline: "span",
                styles: {
                  textDecoration: n
                }
              }, void 0, t);
            });
          },
          m = function m(e) {
            var t = i.get(e ? "_start" : "_end");
            if (t) {
              var _n86 = t[e ? "firstChild" : "lastChild"];
              return function (e) {
                return Lu(e) && $o(e) && ("_start" === e.id || "_end" === e.id);
              }(_n86) && (_n86 = _n86[e ? "firstChild" : "lastChild"]), Jo(_n86) && 0 === _n86.data.length && (_n86 = e ? t.previousSibling || t.nextSibling : t.nextSibling || t.previousSibling), i.remove(t, !0), _n86;
            }
            return null;
          },
          f = function f(t) {
            var n,
              o,
              r = Um(i, t, s, t.collapsed);
            if (a.split) {
              if (r = Bf(r), n = rv(e, r, !0), o = rv(e, r), n !== o) {
                if (n = sv(n, !0), o = sv(o, !1), ov(i, n, o)) {
                  var _e93 = I.from(n.firstChild).getOr(n);
                  return d(iv(i, _e93, !0, "span", {
                    id: "_start",
                    "data-mce-type": "bookmark"
                  })), void m(!0);
                }
                if (ov(i, o, n)) {
                  var _e94 = I.from(o.lastChild).getOr(o);
                  return d(iv(i, _e94, !1, "span", {
                    id: "_end",
                    "data-mce-type": "bookmark"
                  })), void m(!1);
                }
                n = av(i, n, "span", {
                  id: "_start",
                  "data-mce-type": "bookmark"
                }), o = av(i, o, "span", {
                  id: "_end",
                  "data-mce-type": "bookmark"
                });
                var _e95 = i.createRng();
                _e95.setStartAfter(n), _e95.setEndBefore(o), zm(i, _e95, function (e) {
                  q(e, function (e) {
                    Lu(e) || Lu(e.parentNode) || d(e);
                  });
                }), d(n), d(o), n = m(!0), o = m();
              } else n = o = d(n);
              r.startContainer = n.parentNode ? n.parentNode : n, r.startOffset = i.nodeIndex(n), r.endContainer = o.parentNode ? o.parentNode : o, r.endOffset = i.nodeIndex(o) + 1;
            }
            zm(i, r, function (e) {
              q(e, u);
            });
          };
        if (o) {
          if (rm(o)) {
            var _e96 = i.createRng();
            _e96.setStartBefore(o), _e96.setEndAfter(o), f(_e96);
          } else f(o);
          Xm(e, t, o, n);
        } else l.isCollapsed() && km(a) && !Yu(e).length ? Bb(e, t, n, r) : (im(e, function () {
          return nm(e, f);
        }, function (o) {
          return km(a) && kb(e, t, n, o);
        }), e.nodeChanged()), function (e, t, n) {
          "removeformat" === t ? q(Vb(e.selection), function (t) {
            q(Ub, function (n) {
              return e.dom.setStyle(t, n, "");
            }), cv(e.dom, t);
          }) : zb(e.formatter, t).each(function (t) {
            q(Vb(e.selection), function (o) {
              return uv(e.dom, o, t, n, null);
            });
          });
        }(e, t, n), Xm(e, t, o, n);
      }(e, t, n, o, r);
    },
    pv = function pv(e, t, n, o, r) {
      return mv(e, t, n, o, r).fold(L, function (t) {
        return e.dom.rename(o, t), !0;
      }, M);
    },
    hv = Dt.each,
    bv = Dt.each,
    vv = function vv(e, t, n, o) {
      if (bv(n.styles, function (n, r) {
        e.setStyle(t, r, gm(n, o));
      }), n.styles) {
        var _n87 = e.getAttrib(t, "style");
        _n87 && e.setAttrib(t, "data-mce-style", _n87);
      }
    },
    yv = function yv(e, t, n, o) {
      var r = e.formatter.get(t),
        s = r[0],
        a = !o && e.selection.isCollapsed(),
        i = e.dom,
        l = e.selection,
        d = function d(e) {
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : s;
          w(t.onformat) && t.onformat(e, t, n, o), vv(i, e, t, n), bv(t.attributes, function (t, o) {
            i.setAttrib(e, o, gm(t, n));
          }), bv(t.classes, function (t) {
            var o = gm(t, n);
            i.hasClass(e, o) || i.addClass(e, o);
          });
        },
        c = function c(e, t) {
          var n = !1;
          return bv(e, function (e) {
            return !(!xm(e) || ("false" !== i.getContentEditable(t) || e.ceFalseOverride) && (!C(e.collapsed) || e.collapsed === a) && i.is(t, e.selector) && !xu(t) && (d(t, e), n = !0, 1));
          }), n;
        },
        u = function u(e) {
          if (m(e)) {
            var _t94 = i.create(e);
            return d(_t94), _t94;
          }
          return null;
        },
        f = function f(o, a, i) {
          var l = [];
          var m = !0;
          var f = s.inline || s.block,
            g = u(f);
          zm(o, a, function (a) {
            var u;
            var p = function p(a) {
              var h = !1,
                b = m,
                v = !1;
              var y = a.parentNode,
                w = y.nodeName.toLowerCase(),
                x = o.getContentEditable(a);
              C(x) && (b = m, m = "true" === x, h = !0, v = fm(e, a));
              var k = m && !h;
              if (rr(a) && !function (e, t, n, o) {
                if (md(e) && km(t) && n.parentNode) {
                  var _t95 = la(e.schema),
                    _r46 = gb(yn(n), function (e) {
                      return xu(e.dom);
                    });
                  return Ee(_t95, o) && bs(yn(n.parentNode), !1) && !_r46;
                }
                return !1;
              }(e, s, a, w)) return u = null, void (wm(s) && o.remove(a));
              if (function (o) {
                return function (e) {
                  return wm(e) && !0 === e.wrapper;
                }(s) && xb(e, o, t, n);
              }(a)) u = null;else {
                if (function (t, n, o) {
                  var r = function (e) {
                    return wm(e) && !0 !== e.wrapper;
                  }(s) && cm(e.schema, t) && um(e, n, f);
                  return o && r;
                }(a, w, k)) {
                  var _e97 = o.rename(a, f);
                  return d(_e97), l.push(_e97), void (u = null);
                }
                if (xm(s)) {
                  var _e98 = c(r, a);
                  if (!_e98 && C(y) && Em(s) && (_e98 = c(r, y)), !km(s) || _e98) return void (u = null);
                }
                C(g) && function (t, n, r, a) {
                  var l = t.nodeName.toLowerCase(),
                    d = um(e, f, l) && um(e, n, f),
                    c = !i && Jo(t) && Ir(t.data),
                    u = xu(t),
                    m = !km(s) || !o.isBlock(t);
                  return (r || a) && d && !c && !u && m;
                }(a, w, k, v) ? (u || (u = o.clone(g, !1), y.insertBefore(u, a), l.push(u)), v && h && (m = b), u.appendChild(a)) : (u = null, q(ce(a.childNodes), p), h && (m = b), u = null);
              }
            };
            q(a, p);
          }), !0 === s.links && q(l, function (e) {
            var t = function t(e) {
              "A" === e.nodeName && d(e, s), q(ce(e.childNodes), t);
            };
            t(e);
          }), q(l, function (a) {
            var i = function (e) {
              var t = 0;
              return q(e.childNodes, function (e) {
                (function (e) {
                  return C(e) && Jo(e) && 0 === e.length;
                })(e) || Lu(e) || t++;
              }), t;
            }(a);
            !(l.length > 1) && o.isBlock(a) || 0 !== i ? (km(s) || wm(s) && s.wrapper) && (s.exact || 1 !== i || (a = function (e) {
              var t = J(e.childNodes, sm).filter(function (e) {
                return "false" !== o.getContentEditable(e) && Cb(o, e, s);
              });
              return t.map(function (t) {
                var n = o.clone(t, !1);
                return d(n), o.replace(n, e, !0), o.remove(t, !0), n;
              }).getOr(e);
            }(a)), function (e, t, n, o) {
              hv(t, function (t) {
                km(t) && hv(e.dom.select(t.inline, o), function (o) {
                  Wb(o) && pv(e, t, n, o, t.exact ? o : null);
                }), function (e, t, n) {
                  if (t.clear_child_styles) {
                    var _o62 = t.links ? "*:not(a)" : "*";
                    qb(e.select(_o62, n), function (n) {
                      Wb(n) && am(n) && qb(t.styles, function (t, o) {
                        e.setStyle(n, o, "");
                      });
                    });
                  }
                }(e.dom, t, o);
              });
            }(e, r, n, a), function (e, t, n, o, r) {
              var s = r.parentNode;
              xb(e, s, n, o) && pv(e, t, o, r) || t.merge_with_parents && s && e.dom.getParent(s, function (s) {
                return !!xb(e, s, n, o) && (pv(e, t, o, r), !0);
              });
            }(e, s, t, n, a), function (e, t, n, o) {
              if (t.styles && t.styles.backgroundColor) {
                var _r47 = Qb(e, "fontSize");
                Xb(o, function (e) {
                  return _r47(e) && am(e);
                }, Jb(e, "backgroundColor", gm(t.styles.backgroundColor, n)));
              }
            }(o, s, n, a), function (e, t, n, o) {
              var r = function r(t) {
                if ($o(t) && $o(t.parentNode) && am(t)) {
                  var _n88 = vm(e, t.parentNode);
                  e.getStyle(t, "color") && _n88 ? e.setStyle(t, "text-decoration", _n88) : e.getStyle(t, "text-decoration") === _n88 && e.setStyle(t, "text-decoration", null);
                }
              };
              t.styles && (t.styles.color || t.styles.textDecoration) && (Dt.walk(o, r, "childNodes"), r(o));
            }(o, s, 0, a), function (e, t, n, o) {
              if (km(t) && ("sub" === t.inline || "sup" === t.inline)) {
                var _n89 = Qb(e, "fontSize");
                Xb(o, function (e) {
                  return _n89(e) && am(e);
                }, Jb(e, "fontSize", ""));
                var _r48 = G(e.select("sup" === t.inline ? "sub" : "sup", o), am);
                e.remove(_r48, !0);
              }
            }(o, s, 0, a), Yb(e, s, 0, a)) : o.remove(a, !0);
          });
        },
        g = rm(o) ? o : l.getNode();
      if ("false" === i.getContentEditable(g) && !fm(e, g)) return c(r, o = g), void Ym(e, t, o, n);
      if (s) {
        if (o) {
          if (rm(o)) {
            if (!c(r, o)) {
              var _e99 = i.createRng();
              _e99.setStartBefore(o), _e99.setEndAfter(o), f(i, Um(i, _e99, r), !0);
            }
          } else f(i, o, !0);
        } else a && km(s) && !Yu(e).length ? function (e, t, n) {
          var o;
          var r = e.selection,
            s = e.formatter.get(t);
          if (!s) return;
          var a = r.getRng();
          var i = a.startOffset;
          var l = a.startContainer.nodeValue;
          o = ku(e.getBody(), r.getStart());
          var d = /[^\s\u00a0\u00ad\u200b\ufeff]/;
          if (l && i > 0 && i < l.length && d.test(l.charAt(i)) && d.test(l.charAt(i - 1))) {
            var _o63 = r.getBookmark();
            a.collapse(!0);
            var _i16 = Um(e.dom, a, s);
            _i16 = Bf(_i16), e.formatter.apply(t, n, _i16), r.moveToBookmark(_o63);
          } else {
            var _s32 = o ? _b(o) : null;
            o && (null == _s32 ? void 0 : _s32.data) === Eb || (c = e.getDoc(), u = Nb(!0).dom, o = c.importNode(u, !0), _s32 = o.firstChild, a.insertNode(o), i = 1), e.formatter.apply(t, n, o), r.setCursorLocation(_s32, i);
          }
          var c, u;
        }(e, t, n) : (l.setRng(ob(l.getRng())), im(e, function () {
          nm(e, function (e, t) {
            var n = t ? e : Um(i, e, r);
            f(i, n, !1);
          });
        }, M), e.nodeChanged()), zb(e.formatter, t).each(function (t) {
          q(function (e) {
            return G(function (e) {
              var t = e.getSelectedBlocks(),
                n = e.getRng();
              if (e.isCollapsed()) return [];
              if (1 === t.length) return jb(n, t[0]) && Hb(n, t[0]) ? t : [];
              {
                var _e100 = le(t).filter(function (e) {
                    return jb(n, e);
                  }).toArray(),
                  _o64 = de(t).filter(function (e) {
                    return Hb(n, e);
                  }).toArray(),
                  _r49 = t.slice(1, -1);
                return _e100.concat(_r49).concat(_o64);
              }
            }(e), $b(e.dom));
          }(e.selection), function (e) {
            return vv(i, e, t, n);
          });
        });
        (function (e, t) {
          ke(Ib, e) && q(Ib[e], function (e) {
            e(t);
          });
        })(t, e);
      }
      Ym(e, t, o, n);
    },
    Cv = function Cv(e, t, n, o) {
      (o || e.selection.isEditable()) && yv(e, t, n, o);
    },
    wv = function wv(e) {
      return ke(e, "vars");
    },
    xv = function xv(e) {
      return e.selection.getStart();
    },
    kv = function kv(e, t, n, o, r) {
      return Q(t, function (t) {
        var s = e.formatter.matchNode(t, n, null != r ? r : {}, o);
        return !v(s);
      }, function (t) {
        return !!vb(e, t, n) || !o && C(e.formatter.matchNode(t, n, r, !0));
      });
    },
    Ev = function Ev(e, t) {
      var n = null != t ? t : xv(e);
      return G(ym(e.dom, n), function (e) {
        return $o(e) && !Go(e);
      });
    },
    Sv = function Sv(e, t, n) {
      var o = Ev(e, t);
      ge(n, function (n, r) {
        var s = function s(n) {
          var s = kv(e, o, r, n.similar, wv(n) ? n.vars : void 0),
            a = s.isSome();
          if (n.state.get() !== a) {
            n.state.set(a);
            var _e101 = s.getOr(t);
            wv(n) ? n.callback(a, {
              node: _e101,
              format: r,
              parents: o
            }) : q(n.callbacks, function (t) {
              return t(a, {
                node: _e101,
                format: r,
                parents: o
              });
            });
          }
        };
        q([n.withSimilar, n.withoutSimilar], s), q(n.withVars, s);
      });
    },
    _v = Dt.explode,
    Nv = function Nv() {
      var e = {};
      return {
        addFilter: function addFilter(t, n) {
          q(_v(t), function (t) {
            ke(e, t) || (e[t] = {
              name: t,
              callbacks: []
            }), e[t].callbacks.push(n);
          });
        },
        getFilters: function getFilters() {
          return we(e);
        },
        removeFilter: function removeFilter(t, n) {
          q(_v(t), function (t) {
            if (ke(e, t)) if (C(n)) {
              var _o65 = e[t],
                _r50 = G(_o65.callbacks, function (e) {
                  return e !== n;
                });
              _r50.length > 0 ? _o65.callbacks = _r50 : delete e[t];
            } else delete e[t];
          });
        }
      };
    },
    Rv = function Rv(e, t, n) {
      var o;
      var r = ua();
      t.convert_fonts_to_spans && function (e, t, n) {
        e.addNodeFilter("font", function (e) {
          q(e, function (e) {
            var o = t.parse(e.attr("style")),
              r = e.attr("color"),
              s = e.attr("face"),
              a = e.attr("size");
            r && (o.color = r), s && (o["font-family"] = s), a && Xe(a).each(function (e) {
              o["font-size"] = n[e - 1];
            }), e.name = "span", e.attr("style", t.serialize(o)), function (e, t) {
              q(["color", "face", "size"], function (t) {
                e.attr(t, null);
              });
            }(e);
          });
        });
      }(e, r, Dt.explode(null !== (o = t.font_size_legacy_values) && void 0 !== o ? o : "")), function (e, t, n) {
        e.addNodeFilter("strike", function (e) {
          var o = "html4" !== t.type;
          q(e, function (e) {
            if (o) e.name = "s";else {
              var _t96 = n.parse(e.attr("style"));
              _t96["text-decoration"] = "line-through", e.name = "span", e.attr("style", n.serialize(_t96));
            }
          });
        });
      }(e, n, r);
    },
    Av = function Av(e, t, n) {
      t.addNodeFilter("br", function (t, o, r) {
        var s = Dt.extend({}, n.getBlockElements()),
          a = n.getNonEmptyElements(),
          i = n.getWhitespaceElements();
        s.body = 1;
        var l = function l(e) {
          return e.name in s || Ts(n, e);
        };
        for (var _o66 = 0, _d10 = t.length; _o66 < _d10; _o66++) {
          var _d11 = t[_o66],
            _c5 = _d11.parent;
          if (_c5 && l(_c5) && _d11 === _c5.lastChild) {
            var _t97 = _d11.prev;
            for (; _t97;) {
              var _e102 = _t97.name;
              if ("span" !== _e102 || "bookmark" !== _t97.attr("data-mce-type")) {
                "br" === _e102 && (_d11 = null);
                break;
              }
              _t97 = _t97.prev;
            }
            if (_d11 && (_d11.remove(), Jh(n, a, i, _c5))) {
              var _t98 = n.getElementRule(_c5.name);
              _t98 && (_t98.removeEmpty ? _c5.remove() : _t98.paddEmpty && Xh(e, r, l, _c5));
            }
          } else {
            var _e103 = _d11;
            for (; _c5 && _c5.firstChild === _e103 && _c5.lastChild === _e103 && (_e103 = _c5, !s[_c5.name]);) _c5 = _c5.parent;
            if (_e103 === _c5) {
              var _e104 = new Fg("#text", 3);
              _e104.value = pr, _d11.replace(_e104);
            }
          }
        }
      });
    },
    Ov = function Ov(e) {
      var _e$split = e.split(","),
        _e$split2 = _toArray(_e$split),
        t = _e$split2[0],
        n = _e$split2.slice(1),
        o = n.join(","),
        r = /data:([^/]+\/[^;]+)(;.+)?/.exec(t);
      if (r) {
        var _e105 = ";base64" === r[2],
          _t99 = _e105 ? function (e) {
            var t = /([a-z0-9+\/=\s]+)/i.exec(e);
            return t ? t[1] : "";
          }(o) : decodeURIComponent(o);
        return I.some({
          type: r[1],
          data: _t99,
          base64Encoded: _e105
        });
      }
      return I.none();
    },
    Tv = function Tv(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
      var o = t;
      if (n) try {
        o = atob(t);
      } catch (e) {
        return I.none();
      }
      var r = new Uint8Array(o.length);
      for (var _e106 = 0; _e106 < r.length; _e106++) r[_e106] = o.charCodeAt(_e106);
      return I.some(new Blob([r], {
        type: e
      }));
    },
    Bv = function Bv(e) {
      return new Promise(function (t, n) {
        var o = new FileReader();
        o.onloadend = function () {
          t(o.result);
        }, o.onerror = function () {
          var e;
          n(null === (e = o.error) || void 0 === e ? void 0 : e.message);
        }, o.readAsDataURL(e);
      });
    };
  var Dv = 0;
  var Pv = function Pv(e, t, n) {
      return Ov(e).bind(function (_ref14) {
        var e = _ref14.data,
          o = _ref14.type,
          r = _ref14.base64Encoded;
        if (t && !r) return I.none();
        {
          var _t100 = r ? e : btoa(e);
          return n(_t100, o);
        }
      });
    },
    Lv = function Lv(e, t, n) {
      var o = e.create("blobid" + Dv++, t, n);
      return e.add(o), o;
    },
    Mv = function Mv(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
      return Pv(t, n, function (t, n) {
        return I.from(e.getByData(t, n)).orThunk(function () {
          return Tv(n, t).map(function (n) {
            return Lv(e, n, t);
          });
        });
      });
    },
    Iv = function Iv(e, t) {
      var n = e.schema;
      t.remove_trailing_brs && Av(t, e, n), e.addAttributeFilter("href", function (e) {
        var n = e.length;
        var o = function o(e) {
          var t = e ? Dt.trim(e) : "";
          return /\b(noopener)\b/g.test(t) ? t : function (e) {
            return e.split(" ").filter(function (e) {
              return e.length > 0;
            }).concat(["noopener"]).sort().join(" ");
          }(t);
        };
        if (!t.allow_unsafe_link_target) for (; n--;) {
          var _t101 = e[n];
          "a" === _t101.name && "_blank" === _t101.attr("target") && _t101.attr("rel", o(_t101.attr("rel")));
        }
      }), t.allow_html_in_named_anchor || e.addAttributeFilter("id,name", function (e) {
        var t,
          n,
          o,
          r,
          s = e.length;
        for (; s--;) if (r = e[s], "a" === r.name && r.firstChild && !r.attr("href")) for (o = r.parent, t = r.lastChild; t && o;) n = t.prev, o.insert(t, r), t = n;
      }), t.fix_list_elements && e.addNodeFilter("ul,ol", function (e) {
        var t,
          n,
          o = e.length;
        for (; o--;) if (t = e[o], n = t.parent, n && ("ul" === n.name || "ol" === n.name)) if (t.prev && "li" === t.prev.name) t.prev.append(t);else {
          var _e107 = new Fg("li", 1);
          _e107.attr("style", "list-style-type: none"), t.wrap(_e107);
        }
      });
      var o = n.getValidClasses();
      t.validate && o && e.addAttributeFilter("class", function (e) {
        var t;
        var n = e.length;
        for (; n--;) {
          var _r51 = e[n],
            _s33 = null !== (t = _r51.attr("class")) && void 0 !== t ? t : "",
            _a15 = Dt.explode(_s33, " ");
          var _i17 = "";
          for (var _e108 = 0; _e108 < _a15.length; _e108++) {
            var _t102 = _a15[_e108];
            var _n90 = !1,
              _s34 = o["*"];
            _s34 && _s34[_t102] && (_n90 = !0), _s34 = o[_r51.name], !_n90 && _s34 && _s34[_t102] && (_n90 = !0), _n90 && (_i17 && (_i17 += " "), _i17 += _t102);
          }
          _i17.length || (_i17 = null), _r51.attr("class", _i17);
        }
      }), function (e, t) {
        var n = t.blob_cache;
        if (n) {
          var _t103 = function _t103(e) {
            var t = e.attr("src");
            (function (e) {
              return e.attr("src") === At.transparentSrc || C(e.attr("data-mce-placeholder"));
            })(e) || function (e) {
              return C(e.attr("data-mce-bogus"));
            }(e) || y(t) || Mv(n, t, !0).each(function (t) {
              e.attr("src", t.blobUri());
            });
          };
          e.addAttributeFilter("src", function (e) {
            return q(e, _t103);
          });
        }
      }(e, t);
    };
  function Fv(e) {
    return Fv = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (e) {
      return _typeof(e);
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : _typeof(e);
    }, Fv(e);
  }
  function Uv(e, t) {
    return Uv = Object.setPrototypeOf || function (e, t) {
      return e.__proto__ = t, e;
    }, Uv(e, t);
  }
  function zv(e, t, n) {
    return zv = function () {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
      } catch (e) {
        return !1;
      }
    }() ? Reflect.construct : function (e, t, n) {
      var o = [null];
      o.push.apply(o, t);
      var r = new (Function.bind.apply(e, o))();
      return n && Uv(r, n.prototype), r;
    }, zv.apply(null, arguments);
  }
  function jv(e) {
    return function (e) {
      if (Array.isArray(e)) return Hv(e);
    }(e) || function (e) {
      if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"]) return Array.from(e);
    }(e) || function (e, t) {
      if (e) {
        if ("string" == typeof e) return Hv(e, t);
        var n = Object.prototype.toString.call(e).slice(8, -1);
        return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Hv(e, t) : void 0;
      }
    }(e) || function () {
      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }
  function Hv(e, t) {
    (null == t || t > e.length) && (t = e.length);
    for (var n = 0, o = new Array(t); n < t; n++) o[n] = e[n];
    return o;
  }
  var $v = Object.hasOwnProperty,
    Vv = Object.setPrototypeOf,
    qv = Object.isFrozen,
    Wv = Object.getPrototypeOf,
    Kv = Object.getOwnPropertyDescriptor,
    Gv = Object.freeze,
    Yv = Object.seal,
    Xv = Object.create,
    Qv = "undefined" != typeof Reflect && Reflect,
    Jv = Qv.apply,
    Zv = Qv.construct;
  Jv || (Jv = function Jv(e, t, n) {
    return e.apply(t, n);
  }), Gv || (Gv = function Gv(e) {
    return e;
  }), Yv || (Yv = function Yv(e) {
    return e;
  }), Zv || (Zv = function Zv(e, t) {
    return zv(e, jv(t));
  });
  var ey,
    ty = uy(Array.prototype.forEach),
    ny = uy(Array.prototype.pop),
    oy = uy(Array.prototype.push),
    ry = uy(String.prototype.toLowerCase),
    sy = uy(String.prototype.match),
    ay = uy(String.prototype.replace),
    iy = uy(String.prototype.indexOf),
    ly = uy(String.prototype.trim),
    dy = uy(RegExp.prototype.test),
    cy = (ey = TypeError, function () {
      for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
      return Zv(ey, t);
    });
  function uy(e) {
    return function (t) {
      for (var n = arguments.length, o = new Array(n > 1 ? n - 1 : 0), r = 1; r < n; r++) o[r - 1] = arguments[r];
      return Jv(e, t, o);
    };
  }
  function my(e, t) {
    Vv && Vv(e, null);
    for (var n = t.length; n--;) {
      var o = t[n];
      if ("string" == typeof o) {
        var r = ry(o);
        r !== o && (qv(t) || (t[n] = r), o = r);
      }
      e[o] = !0;
    }
    return e;
  }
  function fy(e) {
    var t,
      n = Xv(null);
    for (t in e) Jv($v, e, [t]) && (n[t] = e[t]);
    return n;
  }
  function gy(e, t) {
    for (; null !== e;) {
      var n = Kv(e, t);
      if (n) {
        if (n.get) return uy(n.get);
        if ("function" == typeof n.value) return uy(n.value);
      }
      e = Wv(e);
    }
    return function (e) {
      return console.warn("fallback value for", e), null;
    };
  }
  var py = Gv(["a", "abbr", "acronym", "address", "area", "article", "aside", "audio", "b", "bdi", "bdo", "big", "blink", "blockquote", "body", "br", "button", "canvas", "caption", "center", "cite", "code", "col", "colgroup", "content", "data", "datalist", "dd", "decorator", "del", "details", "dfn", "dialog", "dir", "div", "dl", "dt", "element", "em", "fieldset", "figcaption", "figure", "font", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "head", "header", "hgroup", "hr", "html", "i", "img", "input", "ins", "kbd", "label", "legend", "li", "main", "map", "mark", "marquee", "menu", "menuitem", "meter", "nav", "nobr", "ol", "optgroup", "option", "output", "p", "picture", "pre", "progress", "q", "rp", "rt", "ruby", "s", "samp", "section", "select", "shadow", "small", "source", "spacer", "span", "strike", "strong", "style", "sub", "summary", "sup", "table", "tbody", "td", "template", "textarea", "tfoot", "th", "thead", "time", "tr", "track", "tt", "u", "ul", "var", "video", "wbr"]),
    hy = Gv(["svg", "a", "altglyph", "altglyphdef", "altglyphitem", "animatecolor", "animatemotion", "animatetransform", "circle", "clippath", "defs", "desc", "ellipse", "filter", "font", "g", "glyph", "glyphref", "hkern", "image", "line", "lineargradient", "marker", "mask", "metadata", "mpath", "path", "pattern", "polygon", "polyline", "radialgradient", "rect", "stop", "style", "switch", "symbol", "text", "textpath", "title", "tref", "tspan", "view", "vkern"]),
    by = Gv(["feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feDistantLight", "feFlood", "feFuncA", "feFuncB", "feFuncG", "feFuncR", "feGaussianBlur", "feImage", "feMerge", "feMergeNode", "feMorphology", "feOffset", "fePointLight", "feSpecularLighting", "feSpotLight", "feTile", "feTurbulence"]),
    vy = Gv(["animate", "color-profile", "cursor", "discard", "fedropshadow", "font-face", "font-face-format", "font-face-name", "font-face-src", "font-face-uri", "foreignobject", "hatch", "hatchpath", "mesh", "meshgradient", "meshpatch", "meshrow", "missing-glyph", "script", "set", "solidcolor", "unknown", "use"]),
    yy = Gv(["math", "menclose", "merror", "mfenced", "mfrac", "mglyph", "mi", "mlabeledtr", "mmultiscripts", "mn", "mo", "mover", "mpadded", "mphantom", "mroot", "mrow", "ms", "mspace", "msqrt", "mstyle", "msub", "msup", "msubsup", "mtable", "mtd", "mtext", "mtr", "munder", "munderover"]),
    Cy = Gv(["maction", "maligngroup", "malignmark", "mlongdiv", "mscarries", "mscarry", "msgroup", "mstack", "msline", "msrow", "semantics", "annotation", "annotation-xml", "mprescripts", "none"]),
    wy = Gv(["#text"]),
    xy = Gv(["accept", "action", "align", "alt", "autocapitalize", "autocomplete", "autopictureinpicture", "autoplay", "background", "bgcolor", "border", "capture", "cellpadding", "cellspacing", "checked", "cite", "class", "clear", "color", "cols", "colspan", "controls", "controlslist", "coords", "crossorigin", "datetime", "decoding", "default", "dir", "disabled", "disablepictureinpicture", "disableremoteplayback", "download", "draggable", "enctype", "enterkeyhint", "face", "for", "headers", "height", "hidden", "high", "href", "hreflang", "id", "inputmode", "integrity", "ismap", "kind", "label", "lang", "list", "loading", "loop", "low", "max", "maxlength", "media", "method", "min", "minlength", "multiple", "muted", "name", "nonce", "noshade", "novalidate", "nowrap", "open", "optimum", "pattern", "placeholder", "playsinline", "poster", "preload", "pubdate", "radiogroup", "readonly", "rel", "required", "rev", "reversed", "role", "rows", "rowspan", "spellcheck", "scope", "selected", "shape", "size", "sizes", "span", "srclang", "start", "src", "srcset", "step", "style", "summary", "tabindex", "title", "translate", "type", "usemap", "valign", "value", "width", "xmlns", "slot"]),
    ky = Gv(["accent-height", "accumulate", "additive", "alignment-baseline", "ascent", "attributename", "attributetype", "azimuth", "basefrequency", "baseline-shift", "begin", "bias", "by", "class", "clip", "clippathunits", "clip-path", "clip-rule", "color", "color-interpolation", "color-interpolation-filters", "color-profile", "color-rendering", "cx", "cy", "d", "dx", "dy", "diffuseconstant", "direction", "display", "divisor", "dur", "edgemode", "elevation", "end", "fill", "fill-opacity", "fill-rule", "filter", "filterunits", "flood-color", "flood-opacity", "font-family", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-variant", "font-weight", "fx", "fy", "g1", "g2", "glyph-name", "glyphref", "gradientunits", "gradienttransform", "height", "href", "id", "image-rendering", "in", "in2", "k", "k1", "k2", "k3", "k4", "kerning", "keypoints", "keysplines", "keytimes", "lang", "lengthadjust", "letter-spacing", "kernelmatrix", "kernelunitlength", "lighting-color", "local", "marker-end", "marker-mid", "marker-start", "markerheight", "markerunits", "markerwidth", "maskcontentunits", "maskunits", "max", "mask", "media", "method", "mode", "min", "name", "numoctaves", "offset", "operator", "opacity", "order", "orient", "orientation", "origin", "overflow", "paint-order", "path", "pathlength", "patterncontentunits", "patterntransform", "patternunits", "points", "preservealpha", "preserveaspectratio", "primitiveunits", "r", "rx", "ry", "radius", "refx", "refy", "repeatcount", "repeatdur", "restart", "result", "rotate", "scale", "seed", "shape-rendering", "specularconstant", "specularexponent", "spreadmethod", "startoffset", "stddeviation", "stitchtiles", "stop-color", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke", "stroke-width", "style", "surfacescale", "systemlanguage", "tabindex", "targetx", "targety", "transform", "transform-origin", "text-anchor", "text-decoration", "text-rendering", "textlength", "type", "u1", "u2", "unicode", "values", "viewbox", "visibility", "version", "vert-adv-y", "vert-origin-x", "vert-origin-y", "width", "word-spacing", "wrap", "writing-mode", "xchannelselector", "ychannelselector", "x", "x1", "x2", "xmlns", "y", "y1", "y2", "z", "zoomandpan"]),
    Ey = Gv(["accent", "accentunder", "align", "bevelled", "close", "columnsalign", "columnlines", "columnspan", "denomalign", "depth", "dir", "display", "displaystyle", "encoding", "fence", "frame", "height", "href", "id", "largeop", "length", "linethickness", "lspace", "lquote", "mathbackground", "mathcolor", "mathsize", "mathvariant", "maxsize", "minsize", "movablelimits", "notation", "numalign", "open", "rowalign", "rowlines", "rowspacing", "rowspan", "rspace", "rquote", "scriptlevel", "scriptminsize", "scriptsizemultiplier", "selection", "separator", "separators", "stretchy", "subscriptshift", "supscriptshift", "symmetric", "voffset", "width", "xmlns"]),
    Sy = Gv(["xlink:href", "xml:id", "xlink:title", "xml:space", "xmlns:xlink"]),
    _y = Yv(/\{\{[\w\W]*|[\w\W]*\}\}/gm),
    Ny = Yv(/<%[\w\W]*|[\w\W]*%>/gm),
    Ry = Yv(/^data-[\-\w.\u00B7-\uFFFF]/),
    Ay = Yv(/^aria-[\-\w]+$/),
    Oy = Yv(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),
    Ty = Yv(/^(?:\w+script|data):/i),
    By = Yv(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),
    Dy = Yv(/^html$/i),
    Py = function Py() {
      return "undefined" == typeof window ? null : window;
    },
    Ly = function e() {
      var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : Py(),
        n = function n(t) {
          return e(t);
        };
      if (n.version = "2.3.8", n.removed = [], !t || !t.document || 9 !== t.document.nodeType) return n.isSupported = !1, n;
      var o = t.document,
        r = t.document,
        s = t.DocumentFragment,
        a = t.HTMLTemplateElement,
        i = t.Node,
        l = t.Element,
        d = t.NodeFilter,
        c = t.NamedNodeMap,
        u = void 0 === c ? t.NamedNodeMap || t.MozNamedAttrMap : c,
        m = t.HTMLFormElement,
        f = t.DOMParser,
        g = t.trustedTypes,
        p = l.prototype,
        h = gy(p, "cloneNode"),
        b = gy(p, "nextSibling"),
        v = gy(p, "childNodes"),
        y = gy(p, "parentNode");
      if ("function" == typeof a) {
        var C = r.createElement("template");
        C.content && C.content.ownerDocument && (r = C.content.ownerDocument);
      }
      var w = function (e, t) {
          if ("object" !== Fv(e) || "function" != typeof e.createPolicy) return null;
          var n = null,
            o = "data-tt-policy-suffix";
          t.currentScript && t.currentScript.hasAttribute(o) && (n = t.currentScript.getAttribute(o));
          var r = "dompurify" + (n ? "#" + n : "");
          try {
            return e.createPolicy(r, {
              createHTML: function createHTML(e) {
                return e;
              }
            });
          } catch (e) {
            return console.warn("TrustedTypes policy " + r + " could not be created."), null;
          }
        }(g, o),
        x = w ? w.createHTML("") : "",
        k = r,
        E = k.implementation,
        S = k.createNodeIterator,
        _ = k.createDocumentFragment,
        N = k.getElementsByTagName,
        R = o.importNode,
        A = {};
      try {
        A = fy(r).documentMode ? r.documentMode : {};
      } catch (e) {}
      var O = {};
      n.isSupported = "function" == typeof y && E && void 0 !== E.createHTMLDocument && 9 !== A;
      var T,
        B,
        D = _y,
        P = Ny,
        L = Ry,
        M = Ay,
        I = Ty,
        F = By,
        U = Oy,
        z = null,
        j = my({}, [].concat(jv(py), jv(hy), jv(by), jv(yy), jv(wy))),
        H = null,
        $ = my({}, [].concat(jv(xy), jv(ky), jv(Ey), jv(Sy))),
        V = Object.seal(Object.create(null, {
          tagNameCheck: {
            writable: !0,
            configurable: !1,
            enumerable: !0,
            value: null
          },
          attributeNameCheck: {
            writable: !0,
            configurable: !1,
            enumerable: !0,
            value: null
          },
          allowCustomizedBuiltInElements: {
            writable: !0,
            configurable: !1,
            enumerable: !0,
            value: !1
          }
        })),
        q = null,
        W = null,
        K = !0,
        G = !0,
        Y = !1,
        X = !1,
        Q = !1,
        J = !1,
        Z = !1,
        ee = !1,
        te = !1,
        ne = !1,
        oe = !0,
        re = !0,
        se = !1,
        ae = {},
        ie = null,
        le = my({}, ["annotation-xml", "audio", "colgroup", "desc", "foreignobject", "head", "iframe", "math", "mi", "mn", "mo", "ms", "mtext", "noembed", "noframes", "noscript", "plaintext", "script", "style", "svg", "template", "thead", "title", "video", "xmp"]),
        de = null,
        ce = my({}, ["audio", "video", "img", "source", "image", "track"]),
        ue = null,
        me = my({}, ["alt", "class", "for", "id", "label", "name", "pattern", "placeholder", "role", "summary", "title", "value", "style", "xmlns"]),
        fe = "http://www.w3.org/1998/Math/MathML",
        ge = "http://www.w3.org/2000/svg",
        pe = "http://www.w3.org/1999/xhtml",
        he = pe,
        be = !1,
        ve = ["application/xhtml+xml", "text/html"],
        ye = null,
        Ce = r.createElement("form"),
        we = function we(e) {
          return e instanceof RegExp || e instanceof Function;
        },
        xe = function xe(e) {
          ye && ye === e || (e && "object" === Fv(e) || (e = {}), e = fy(e), z = "ALLOWED_TAGS" in e ? my({}, e.ALLOWED_TAGS) : j, H = "ALLOWED_ATTR" in e ? my({}, e.ALLOWED_ATTR) : $, ue = "ADD_URI_SAFE_ATTR" in e ? my(fy(me), e.ADD_URI_SAFE_ATTR) : me, de = "ADD_DATA_URI_TAGS" in e ? my(fy(ce), e.ADD_DATA_URI_TAGS) : ce, ie = "FORBID_CONTENTS" in e ? my({}, e.FORBID_CONTENTS) : le, q = "FORBID_TAGS" in e ? my({}, e.FORBID_TAGS) : {}, W = "FORBID_ATTR" in e ? my({}, e.FORBID_ATTR) : {}, ae = "USE_PROFILES" in e && e.USE_PROFILES, K = !1 !== e.ALLOW_ARIA_ATTR, G = !1 !== e.ALLOW_DATA_ATTR, Y = e.ALLOW_UNKNOWN_PROTOCOLS || !1, X = e.SAFE_FOR_TEMPLATES || !1, Q = e.WHOLE_DOCUMENT || !1, ee = e.RETURN_DOM || !1, te = e.RETURN_DOM_FRAGMENT || !1, ne = e.RETURN_TRUSTED_TYPE || !1, Z = e.FORCE_BODY || !1, oe = !1 !== e.SANITIZE_DOM, re = !1 !== e.KEEP_CONTENT, se = e.IN_PLACE || !1, U = e.ALLOWED_URI_REGEXP || U, he = e.NAMESPACE || pe, e.CUSTOM_ELEMENT_HANDLING && we(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck) && (V.tagNameCheck = e.CUSTOM_ELEMENT_HANDLING.tagNameCheck), e.CUSTOM_ELEMENT_HANDLING && we(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck) && (V.attributeNameCheck = e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck), e.CUSTOM_ELEMENT_HANDLING && "boolean" == typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (V.allowCustomizedBuiltInElements = e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements), T = T = -1 === ve.indexOf(e.PARSER_MEDIA_TYPE) ? "text/html" : e.PARSER_MEDIA_TYPE, B = "application/xhtml+xml" === T ? function (e) {
            return e;
          } : ry, X && (G = !1), te && (ee = !0), ae && (z = my({}, jv(wy)), H = [], !0 === ae.html && (my(z, py), my(H, xy)), !0 === ae.svg && (my(z, hy), my(H, ky), my(H, Sy)), !0 === ae.svgFilters && (my(z, by), my(H, ky), my(H, Sy)), !0 === ae.mathMl && (my(z, yy), my(H, Ey), my(H, Sy))), e.ADD_TAGS && (z === j && (z = fy(z)), my(z, e.ADD_TAGS)), e.ADD_ATTR && (H === $ && (H = fy(H)), my(H, e.ADD_ATTR)), e.ADD_URI_SAFE_ATTR && my(ue, e.ADD_URI_SAFE_ATTR), e.FORBID_CONTENTS && (ie === le && (ie = fy(ie)), my(ie, e.FORBID_CONTENTS)), re && (z["#text"] = !0), Q && my(z, ["html", "head", "body"]), z.table && (my(z, ["tbody"]), delete q.tbody), Gv && Gv(e), ye = e);
        },
        ke = my({}, ["mi", "mo", "mn", "ms", "mtext"]),
        Ee = my({}, ["foreignobject", "desc", "title", "annotation-xml"]),
        Se = my({}, ["title", "style", "font", "a", "script"]),
        _e = my({}, hy);
      my(_e, by), my(_e, vy);
      var Ne = my({}, yy);
      my(Ne, Cy);
      var Re = function Re(e) {
          oy(n.removed, {
            element: e
          });
          try {
            e.parentNode.removeChild(e);
          } catch (t) {
            try {
              e.outerHTML = x;
            } catch (t) {
              e.remove();
            }
          }
        },
        Ae = function Ae(e, t) {
          try {
            oy(n.removed, {
              attribute: t.getAttributeNode(e),
              from: t
            });
          } catch (e) {
            oy(n.removed, {
              attribute: null,
              from: t
            });
          }
          if (t.removeAttribute(e), "is" === e && !H[e]) if (ee || te) try {
            Re(t);
          } catch (e) {} else try {
            t.setAttribute(e, "");
          } catch (e) {}
        },
        Oe = function Oe(e) {
          var t, n;
          if (Z) e = "<remove></remove>" + e;else {
            var o = sy(e, /^[\r\n\t ]+/);
            n = o && o[0];
          }
          "application/xhtml+xml" === T && (e = '<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>' + e + "</body></html>");
          var s = w ? w.createHTML(e) : e;
          if (he === pe) try {
            t = new f().parseFromString(s, T);
          } catch (e) {}
          if (!t || !t.documentElement) {
            t = E.createDocument(he, "template", null);
            try {
              t.documentElement.innerHTML = be ? "" : s;
            } catch (e) {}
          }
          var a = t.body || t.documentElement;
          return e && n && a.insertBefore(r.createTextNode(n), a.childNodes[0] || null), he === pe ? N.call(t, Q ? "html" : "body")[0] : Q ? t.documentElement : a;
        },
        Te = function Te(e) {
          return S.call(e.ownerDocument || e, e, d.SHOW_ELEMENT | d.SHOW_COMMENT | d.SHOW_TEXT, null, !1);
        },
        Be = function Be(e) {
          return "object" === Fv(i) ? e instanceof i : e && "object" === Fv(e) && "number" == typeof e.nodeType && "string" == typeof e.nodeName;
        },
        De = function De(e, t, o) {
          O[e] && ty(O[e], function (e) {
            e.call(n, t, o, ye);
          });
        },
        Pe = function Pe(e) {
          var t, o;
          if (De("beforeSanitizeElements", e, null), (o = e) instanceof m && ("string" != typeof o.nodeName || "string" != typeof o.textContent || "function" != typeof o.removeChild || !(o.attributes instanceof u) || "function" != typeof o.removeAttribute || "function" != typeof o.setAttribute || "string" != typeof o.namespaceURI || "function" != typeof o.insertBefore)) return Re(e), !0;
          if (dy(/[\u0080-\uFFFF]/, e.nodeName)) return Re(e), !0;
          var r = B(e.nodeName);
          if (De("uponSanitizeElement", e, {
            tagName: r,
            allowedTags: z
          }), e.hasChildNodes() && !Be(e.firstElementChild) && (!Be(e.content) || !Be(e.content.firstElementChild)) && dy(/<[/\w]/g, e.innerHTML) && dy(/<[/\w]/g, e.textContent)) return Re(e), !0;
          if ("select" === r && dy(/<template/i, e.innerHTML)) return Re(e), !0;
          if (!z[r] || q[r]) {
            if (!q[r] && Me(r)) {
              if (V.tagNameCheck instanceof RegExp && dy(V.tagNameCheck, r)) return !1;
              if (V.tagNameCheck instanceof Function && V.tagNameCheck(r)) return !1;
            }
            if (re && !ie[r]) {
              var s = y(e) || e.parentNode,
                a = v(e) || e.childNodes;
              if (a && s) for (var i = a.length - 1; i >= 0; --i) s.insertBefore(h(a[i], !0), b(e));
            }
            return Re(e), !0;
          }
          return e instanceof l && !function (e) {
            var t = y(e);
            t && t.tagName || (t = {
              namespaceURI: pe,
              tagName: "template"
            });
            var n = ry(e.tagName),
              o = ry(t.tagName);
            return e.namespaceURI === ge ? t.namespaceURI === pe ? "svg" === n : t.namespaceURI === fe ? "svg" === n && ("annotation-xml" === o || ke[o]) : Boolean(_e[n]) : e.namespaceURI === fe ? t.namespaceURI === pe ? "math" === n : t.namespaceURI === ge ? "math" === n && Ee[o] : Boolean(Ne[n]) : e.namespaceURI === pe && !(t.namespaceURI === ge && !Ee[o]) && !(t.namespaceURI === fe && !ke[o]) && !Ne[n] && (Se[n] || !_e[n]);
          }(e) ? (Re(e), !0) : "noscript" !== r && "noembed" !== r || !dy(/<\/no(script|embed)/i, e.innerHTML) ? (X && 3 === e.nodeType && (t = e.textContent, t = ay(t, D, " "), t = ay(t, P, " "), e.textContent !== t && (oy(n.removed, {
            element: e.cloneNode()
          }), e.textContent = t)), De("afterSanitizeElements", e, null), !1) : (Re(e), !0);
        },
        Le = function Le(e, t, n) {
          if (oe && ("id" === t || "name" === t) && (n in r || n in Ce)) return !1;
          if (G && !W[t] && dy(L, t)) ;else if (K && dy(M, t)) ;else if (!H[t] || W[t]) {
            if (!(Me(e) && (V.tagNameCheck instanceof RegExp && dy(V.tagNameCheck, e) || V.tagNameCheck instanceof Function && V.tagNameCheck(e)) && (V.attributeNameCheck instanceof RegExp && dy(V.attributeNameCheck, t) || V.attributeNameCheck instanceof Function && V.attributeNameCheck(t)) || "is" === t && V.allowCustomizedBuiltInElements && (V.tagNameCheck instanceof RegExp && dy(V.tagNameCheck, n) || V.tagNameCheck instanceof Function && V.tagNameCheck(n)))) return !1;
          } else if (ue[t]) ;else if (dy(U, ay(n, F, ""))) ;else if ("src" !== t && "xlink:href" !== t && "href" !== t || "script" === e || 0 !== iy(n, "data:") || !de[e]) if (Y && !dy(I, ay(n, F, ""))) ;else if (n) return !1;
          return !0;
        },
        Me = function Me(e) {
          return e.indexOf("-") > 0;
        },
        Ie = function Ie(e) {
          var t, n, o, r;
          De("beforeSanitizeAttributes", e, null);
          var s = e.attributes;
          if (s) {
            var a = {
              attrName: "",
              attrValue: "",
              keepAttr: !0,
              allowedAttributes: H
            };
            for (r = s.length; r--;) {
              var i = t = s[r],
                l = i.name,
                d = i.namespaceURI;
              n = "value" === l ? t.value : ly(t.value), o = B(l);
              var c = n;
              if (a.attrName = o, a.attrValue = n, a.keepAttr = !0, a.forceKeepAttr = void 0, De("uponSanitizeAttribute", e, a), n = a.attrValue, !a.forceKeepAttr) if (a.keepAttr) {
                if (dy(/\/>/i, n)) Ae(l, e);else {
                  X && (n = ay(n, D, " "), n = ay(n, P, " "));
                  var u = B(e.nodeName);
                  if (Le(u, o, n)) {
                    if (n !== c) try {
                      d ? e.setAttributeNS(d, l, n) : e.setAttribute(l, n);
                    } catch (t) {
                      Ae(l, e);
                    }
                  } else Ae(l, e);
                }
              } else Ae(l, e);
            }
            De("afterSanitizeAttributes", e, null);
          }
        },
        Fe = function e(t) {
          var n,
            o = Te(t);
          for (De("beforeSanitizeShadowDOM", t, null); n = o.nextNode();) De("uponSanitizeShadowNode", n, null), Pe(n) || (n.content instanceof s && e(n.content), Ie(n));
          De("afterSanitizeShadowDOM", t, null);
        };
      return n.sanitize = function (e, r) {
        var a, l, d, c, u;
        if ((be = !e) && (e = "\x3c!--\x3e"), "string" != typeof e && !Be(e)) {
          if ("function" != typeof e.toString) throw cy("toString is not a function");
          if ("string" != typeof (e = e.toString())) throw cy("dirty is not a string, aborting");
        }
        if (!n.isSupported) {
          if ("object" === Fv(t.toStaticHTML) || "function" == typeof t.toStaticHTML) {
            if ("string" == typeof e) return t.toStaticHTML(e);
            if (Be(e)) return t.toStaticHTML(e.outerHTML);
          }
          return e;
        }
        if (J || xe(r), n.removed = [], "string" == typeof e && (se = !1), se) {
          if (e.nodeName) {
            var m = B(e.nodeName);
            if (!z[m] || q[m]) throw cy("root node is forbidden and cannot be sanitized in-place");
          }
        } else if (e instanceof i) 1 === (l = (a = Oe("\x3c!----\x3e")).ownerDocument.importNode(e, !0)).nodeType && "BODY" === l.nodeName || "HTML" === l.nodeName ? a = l : a.appendChild(l);else {
          if (!ee && !X && !Q && -1 === e.indexOf("<")) return w && ne ? w.createHTML(e) : e;
          if (!(a = Oe(e))) return ee ? null : ne ? x : "";
        }
        a && Z && Re(a.firstChild);
        for (var f = Te(se ? e : a); d = f.nextNode();) 3 === d.nodeType && d === c || Pe(d) || (d.content instanceof s && Fe(d.content), Ie(d), c = d);
        if (c = null, se) return e;
        if (ee) {
          if (te) for (u = _.call(a.ownerDocument); a.firstChild;) u.appendChild(a.firstChild);else u = a;
          return H.shadowroot && (u = R.call(o, u, !0)), u;
        }
        var g = Q ? a.outerHTML : a.innerHTML;
        return Q && z["!doctype"] && a.ownerDocument && a.ownerDocument.doctype && a.ownerDocument.doctype.name && dy(Dy, a.ownerDocument.doctype.name) && (g = "<!DOCTYPE " + a.ownerDocument.doctype.name + ">\n" + g), X && (g = ay(g, D, " "), g = ay(g, P, " ")), w && ne ? w.createHTML(g) : g;
      }, n.setConfig = function (e) {
        xe(e), J = !0;
      }, n.clearConfig = function () {
        ye = null, J = !1;
      }, n.isValidAttribute = function (e, t, n) {
        ye || xe({});
        var o = B(e),
          r = B(t);
        return Le(o, r, n);
      }, n.addHook = function (e, t) {
        "function" == typeof t && (O[e] = O[e] || [], oy(O[e], t));
      }, n.removeHook = function (e) {
        if (O[e]) return ny(O[e]);
      }, n.removeHooks = function (e) {
        O[e] && (O[e] = []);
      }, n.removeAllHooks = function () {
        O = {};
      }, n;
    }();
  var My = Dt.each,
    Iy = Dt.trim,
    Fy = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"],
    Uy = {
      ftp: 21,
      http: 80,
      https: 443,
      mailto: 25
    },
    zy = ["img", "video"],
    jy = function jy(e, t, n) {
      var o = function (e) {
        try {
          return decodeURIComponent(e);
        } catch (t) {
          return unescape(e);
        }
      }(t).replace(/\s/g, "");
      return !e.allow_script_urls && (!!/((java|vb)script|mhtml):/i.test(o) || !e.allow_html_data_urls && (/^data:image\//i.test(o) ? function (e, t) {
        return C(e) ? !e : !C(t) || !H(zy, t);
      }(e.allow_svg_data_urls, n) && /^data:image\/svg\+xml/i.test(o) : /^data:/i.test(o)));
    };
  var Hy = /*#__PURE__*/function () {
    function Hy(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      _classCallCheck(this, Hy);
      this.path = "", this.directory = "", e = Iy(e), this.settings = t;
      var n = t.base_uri,
        o = this;
      if (/^([\w\-]+):([^\/]{2})/i.test(e) || /^\s*#/.test(e)) return void (o.source = e);
      var r = 0 === e.indexOf("//");
      if (0 !== e.indexOf("/") || r || (e = (n && n.protocol || "http") + "://mce_host" + e), !/^[\w\-]*:?\/\//.test(e)) {
        var _t104 = n ? n.path : new Hy(document.location.href).directory;
        if ("" === (null == n ? void 0 : n.protocol)) e = "//mce_host" + o.toAbsPath(_t104, e);else {
          var _r52 = /([^#?]*)([#?]?.*)/.exec(e);
          _r52 && (e = (n && n.protocol || "http") + "://mce_host" + o.toAbsPath(_t104, _r52[1]) + _r52[2]);
        }
      }
      e = e.replace(/@@/g, "(mce_at)");
      var s = /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);
      s && My(Fy, function (e, t) {
        var n = s[t];
        n && (n = n.replace(/\(mce_at\)/g, "@@")), o[e] = n;
      }), n && (o.protocol || (o.protocol = n.protocol), o.userInfo || (o.userInfo = n.userInfo), o.port || "mce_host" !== o.host || (o.port = n.port), o.host && "mce_host" !== o.host || (o.host = n.host), o.source = ""), r && (o.protocol = "");
    }
    _createClass(Hy, [{
      key: "setPath",
      value: function setPath(e) {
        var t = /^(.*?)\/?(\w+)?$/.exec(e);
        t && (this.path = t[0], this.directory = t[1], this.file = t[2]), this.source = "", this.getURI();
      }
    }, {
      key: "toRelative",
      value: function toRelative(e) {
        if ("./" === e) return e;
        var t = new Hy(e, {
          base_uri: this
        });
        if ("mce_host" !== t.host && this.host !== t.host && t.host || this.port !== t.port || this.protocol !== t.protocol && "" !== t.protocol) return t.getURI();
        var n = this.getURI(),
          o = t.getURI();
        if (n === o || "/" === n.charAt(n.length - 1) && n.substr(0, n.length - 1) === o) return n;
        var r = this.toRelPath(this.path, t.path);
        return t.query && (r += "?" + t.query), t.anchor && (r += "#" + t.anchor), r;
      }
    }, {
      key: "toAbsolute",
      value: function toAbsolute(e, t) {
        var n = new Hy(e, {
          base_uri: this
        });
        return n.getURI(t && this.isSameOrigin(n));
      }
    }, {
      key: "isSameOrigin",
      value: function isSameOrigin(e) {
        if (this.host == e.host && this.protocol == e.protocol) {
          if (this.port == e.port) return !0;
          var _t105 = this.protocol ? Uy[this.protocol] : null;
          if (_t105 && (this.port || _t105) == (e.port || _t105)) return !0;
        }
        return !1;
      }
    }, {
      key: "toRelPath",
      value: function toRelPath(e, t) {
        var n,
          o,
          r = 0,
          s = "";
        var a = e.substring(0, e.lastIndexOf("/")).split("/"),
          i = t.split("/");
        if (a.length >= i.length) for (n = 0, o = a.length; n < o; n++) if (n >= i.length || a[n] !== i[n]) {
          r = n + 1;
          break;
        }
        if (a.length < i.length) for (n = 0, o = i.length; n < o; n++) if (n >= a.length || a[n] !== i[n]) {
          r = n + 1;
          break;
        }
        if (1 === r) return t;
        for (n = 0, o = a.length - (r - 1); n < o; n++) s += "../";
        for (n = r - 1, o = i.length; n < o; n++) s += n !== r - 1 ? "/" + i[n] : i[n];
        return s;
      }
    }, {
      key: "toAbsPath",
      value: function toAbsPath(e, t) {
        var n = 0;
        var o = /\/$/.test(t) ? "/" : "",
          r = e.split("/"),
          s = t.split("/"),
          a = [];
        My(r, function (e) {
          e && a.push(e);
        });
        var i = [];
        for (var _e109 = s.length - 1; _e109 >= 0; _e109--) 0 !== s[_e109].length && "." !== s[_e109] && (".." !== s[_e109] ? n > 0 ? n-- : i.push(s[_e109]) : n++);
        var l = a.length - n;
        var d;
        return d = l <= 0 ? oe(i).join("/") : a.slice(0, l).join("/") + "/" + oe(i).join("/"), 0 !== d.indexOf("/") && (d = "/" + d), o && d.lastIndexOf("/") !== d.length - 1 && (d += o), d;
      }
    }, {
      key: "getURI",
      value: function getURI() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
        var t;
        return this.source && !e || (t = "", e || (this.protocol ? t += this.protocol + "://" : t += "//", this.userInfo && (t += this.userInfo + "@"), this.host && (t += this.host), this.port && (t += ":" + this.port)), this.path && (t += this.path), this.query && (t += "?" + this.query), this.anchor && (t += "#" + this.anchor), this.source = t), this.source;
      }
    }], [{
      key: "parseDataUri",
      value: function parseDataUri(e) {
        var t;
        var n = decodeURIComponent(e).split(","),
          o = /data:([^;]+)/.exec(n[0]);
        return o && (t = o[1]), {
          type: t,
          data: n[1]
        };
      }
    }, {
      key: "isDomSafe",
      value: function isDomSafe(e, t) {
        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
        if (n.allow_script_urls) return !0;
        {
          var _o67 = Zs.decode(e).replace(/[\s\u0000-\u001F]+/g, "");
          return !jy(n, _o67, t);
        }
      }
    }, {
      key: "getDocumentBaseUrl",
      value: function getDocumentBaseUrl(e) {
        var t;
        var n;
        return n = 0 !== e.protocol.indexOf("http") && "file:" !== e.protocol ? null !== (t = e.href) && void 0 !== t ? t : "" : e.protocol + "//" + e.host + e.pathname, /^[^:]+:\/\/\/?[^\/]+\//.test(n) && (n = n.replace(/[\?#].*$/, "").replace(/[\/\\][^\/]+$/, ""), /[\/\\]$/.test(n) || (n += "/")), n;
      }
    }]);
    return Hy;
  }();
  var $y = Dt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),
    Vy = "data-mce-type";
  var qy = 0;
  var Wy = function Wy(e, t, n, o) {
      var r, s, a, i;
      var l = t.validate,
        d = n.getSpecialElements();
      8 === e.nodeType && !t.allow_conditional_comments && /^\[if/i.test(null !== (r = e.nodeValue) && void 0 !== r ? r : "") && (e.nodeValue = " " + e.nodeValue);
      var c = null !== (s = null == o ? void 0 : o.tagName) && void 0 !== s ? s : e.nodeName.toLowerCase();
      if (1 !== e.nodeType || "body" === c) return;
      var u = yn(e),
        f = nn(u, Vy),
        g = en(u, "data-mce-bogus");
      if (!f && m(g)) return void ("all" === g ? wo(u) : xo(u));
      var p = n.getElementRule(c);
      if (!l || p) {
        if (C(o) && (o.allowedTags[c] = !0), l && p && !f) {
          if (q(null !== (a = p.attributesForced) && void 0 !== a ? a : [], function (e) {
            Jt(u, e.name, "{$uid}" === e.value ? "mce_" + qy++ : e.value);
          }), q(null !== (i = p.attributesDefault) && void 0 !== i ? i : [], function (e) {
            nn(u, e.name) || Jt(u, e.name, "{$uid}" === e.value ? "mce_" + qy++ : e.value);
          }), p.attributesRequired && !$(p.attributesRequired, function (e) {
            return nn(u, e);
          })) return void xo(u);
          if (p.removeEmptyAttrs && function (e) {
            var t = e.dom.attributes;
            return null == t || 0 === t.length;
          }(u)) return void xo(u);
          p.outputName && p.outputName !== c && function (e, t) {
            var n = function (e, t) {
              var n = bn(t),
                o = rn(e);
              return Zt(n, o), n;
            }(e, t);
            po(e, n);
            var o = Mn(e);
            yo(n, o), wo(e);
          }(u, p.outputName);
        }
      } else ke(d, c) ? wo(u) : xo(u);
    },
    Ky = function Ky(e, t, n, o, r) {
      return !(o in $y && jy(e, r, n)) && (!e.validate || t.isValid(n, o) || He(o, "data-") || He(o, "aria-"));
    },
    Gy = function Gy(e, t) {
      return e.hasAttribute(Vy) && ("id" === t || "class" === t || "style" === t);
    },
    Yy = function Yy(e, t) {
      return e in t.getBoolAttrs();
    },
    Xy = function Xy(e, t, n) {
      var o = e.attributes;
      for (var _r53 = o.length - 1; _r53 >= 0; _r53--) {
        var _s35 = o[_r53],
          _a16 = _s35.name,
          _i18 = _s35.value;
        Ky(t, n, e.tagName.toLowerCase(), _a16, _i18) || Gy(e, _a16) ? Yy(_a16, n) && e.setAttribute(_a16, _a16) : e.removeAttribute(_a16);
      }
    },
    Qy = function Qy(e, t) {
      var n = Ly();
      return n.addHook("uponSanitizeElement", function (n, o) {
        Wy(n, e, t, o);
      }), n.addHook("uponSanitizeAttribute", function (n, o) {
        var r = n.tagName.toLowerCase(),
          s = o.attrName,
          a = o.attrValue;
        o.keepAttr = Ky(e, t, r, s, a), o.keepAttr ? (o.allowedAttributes[s] = !0, Yy(s, t) && (o.attrValue = s), e.allow_svg_data_urls && He(a, "data:image/svg+xml") && (o.forceKeepAttr = !0)) : Gy(n, s) && (o.forceKeepAttr = !0);
      }), n;
    },
    Jy = Dt.makeMap,
    Zy = Dt.extend,
    eC = function eC(e, t, n) {
      var o = e.name,
        r = o in n && "title" !== o && "textarea" !== o,
        s = t.childNodes;
      for (var _t106 = 0, _o68 = s.length; _t106 < _o68; _t106++) {
        var _o69 = s[_t106],
          _a17 = new Fg(_o69.nodeName.toLowerCase(), _o69.nodeType);
        if ($o(_o69)) {
          var _e110 = _o69.attributes;
          for (var _t107 = 0, _n91 = _e110.length; _t107 < _n91; _t107++) {
            var _n92 = _e110[_t107];
            _a17.attr(_n92.name, _n92.value);
          }
        } else Jo(_o69) ? (_a17.value = _o69.data, r && (_a17.raw = !0)) : (tr(_o69) || Zo(_o69) || er(_o69)) && (_a17.value = _o69.data);
        eC(_a17, _o69, n), e.append(_a17);
      }
    },
    tC = function tC() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ca();
      var n = Nv(),
        o = Nv(),
        r = _objectSpread({
          validate: !0,
          root_name: "body",
          sanitize: !0
        }, e),
        s = new DOMParser(),
        a = function (e, t) {
          if (e.sanitize) {
            var _n93 = Qy(e, t);
            return function (t, o) {
              _n93.sanitize(t, function (e, t) {
                var n = {
                  IN_PLACE: !0,
                  ALLOW_UNKNOWN_PROTOCOLS: !0,
                  ALLOWED_TAGS: ["#comment", "#cdata-section", "body"],
                  ALLOWED_ATTR: []
                };
                return n.PARSER_MEDIA_TYPE = t, e.allow_script_urls ? n.ALLOWED_URI_REGEXP = /.*/ : e.allow_html_data_urls && (n.ALLOWED_URI_REGEXP = /^(?!(\w+script|mhtml):)/i), n;
              }(e, o)), _n93.removed = [];
            };
          }
          return function (n, o) {
            var r = document.createNodeIterator(n, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT);
            var s;
            for (; s = r.nextNode();) Wy(s, e, t), $o(s) && Xy(s, e, t);
          };
        }(r, t),
        i = n.addFilter,
        l = n.getFilters,
        d = n.removeFilter,
        c = o.addFilter,
        u = o.getFilters,
        f = o.removeFilter,
        g = function g(e, n) {
          var o = m(n.attr(Vy)),
            r = 1 === n.type && !ke(e, n.name) && !Ts(t, n);
          return 3 === n.type || r && !o;
        },
        p = {
          schema: t,
          addAttributeFilter: c,
          getAttributeFilters: u,
          removeAttributeFilter: f,
          addNodeFilter: i,
          getNodeFilters: l,
          removeNodeFilter: d,
          parse: function parse(e) {
            var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
            var o;
            var i = r.validate,
              d = null !== (o = n.context) && void 0 !== o ? o : r.root_name,
              c = function (e, n) {
                var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "html";
                var r = "xhtml" === o ? "application/xhtml+xml" : "text/html",
                  i = ke(t.getSpecialElements(), n.toLowerCase()),
                  l = i ? "<".concat(n, ">").concat(e, "</").concat(n, ">") : e,
                  d = "xhtml" === o ? "<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>".concat(l, "</body></html>") : "<body>".concat(l, "</body>"),
                  c = s.parseFromString(d, r).body;
                return a(c, r), i ? c.firstChild : c;
              }(e, d, n.format);
            Es(t, c);
            var m = new Fg(d, 11);
            eC(m, c, t.getSpecialElements()), c.innerHTML = "";
            var _ref15 = function (e, t, n, o) {
                var r = n.validate,
                  s = t.getNonEmptyElements(),
                  a = t.getWhitespaceElements(),
                  i = Zy(Jy("script,style,head,html,body,title,meta,param"), t.getBlockElements()),
                  l = la(t),
                  d = /[ \t\r\n]+/g,
                  c = /^[ \t\r\n]+/,
                  u = /[ \t\r\n]+$/,
                  m = function m(e) {
                    var t = e.parent;
                    for (; C(t);) {
                      if (t.name in a) return !0;
                      t = t.parent;
                    }
                    return !1;
                  },
                  f = function f(e) {
                    return e.name in i || Ts(t, e);
                  },
                  g = function g(t, n) {
                    var r = n ? t.prev : t.next;
                    return !C(r) && !y(t.parent) && f(t.parent) && (t.parent !== e || !0 === o.isRootContent);
                  };
                return [function (e) {
                  var t;
                  if (3 === e.type && !m(e)) {
                    var _n94 = null !== (t = e.value) && void 0 !== t ? t : "";
                    _n94 = _n94.replace(d, " "), (function (e, t) {
                      return C(e) && (t(e) || "br" === e.name);
                    }(e.prev, f) || g(e, !0)) && (_n94 = _n94.replace(c, "")), 0 === _n94.length ? e.remove() : e.value = _n94;
                  }
                }, function (e) {
                  var i;
                  if (1 === e.type) {
                    var _i19 = t.getElementRule(e.name);
                    if (r && _i19) {
                      var _r54 = Jh(t, s, a, e);
                      _i19.paddInEmptyBlock && _r54 && function (e) {
                        var n = e;
                        for (; C(n);) {
                          if (n.name in l) return Jh(t, s, a, n);
                          n = n.parent;
                        }
                        return !1;
                      }(e) ? Xh(n, o, f, e) : _i19.removeEmpty && _r54 ? f(e) ? e.remove() : e.unwrap() : _i19.paddEmpty && (_r54 || function (e) {
                        var t;
                        return Qh(e, "#text") && (null === (t = null == e ? void 0 : e.firstChild) || void 0 === t ? void 0 : t.value) === pr;
                      }(e)) && Xh(n, o, f, e);
                    }
                  } else if (3 === e.type && !m(e)) {
                    var _t108 = null !== (i = e.value) && void 0 !== i ? i : "";
                    (e.next && f(e.next) || g(e, !1)) && (_t108 = _t108.replace(u, "")), 0 === _t108.length ? e.remove() : e.value = _t108;
                  }
                }];
              }(m, t, r, n),
              _ref16 = _slicedToArray(_ref15, 2),
              f = _ref16[0],
              p = _ref16[1],
              h = [],
              b = i ? function (e) {
                return function (e, n) {
                  nb(t, e) && n.push(e);
                }(e, h);
              } : E,
              v = {
                nodes: {},
                attributes: {}
              },
              w = function w(e) {
                return Kh(l(), u(), e, v);
              };
            if (function (e, t, n) {
              var o = [];
              var _loop2 = function _loop2(_n96) {
                var s = _n96;
                q(t, function (e) {
                  return e(s);
                }), y(s.parent) && s !== e ? _n96 = _r55 : o.push(s);
                _n95 = _n96;
              };
              for (var _n95 = e, _r55 = _n95; _n95; _r55 = _n95, _n95 = _n95.walk()) {
                _loop2(_n95);
              }
              var _loop3 = function _loop3() {
                var t = o[_e111];
                q(n, function (e) {
                  return e(t);
                });
              };
              for (var _e111 = o.length - 1; _e111 >= 0; _e111--) {
                _loop3();
              }
            }(m, [f, w], [p, b]), h.reverse(), i && h.length > 0) if (n.context) {
              var _K = K(h, function (e) {
                  return e.parent === m;
                }),
                _e112 = _K.pass,
                _o70 = _K.fail;
              tb(_o70, t, m, w), n.invalid = _e112.length > 0;
            } else tb(h, t, m, w);
            var x = function (e, t) {
              var n;
              var o = null !== (n = t.forced_root_block) && void 0 !== n ? n : e.forced_root_block;
              return !1 === o ? "" : !0 === o ? "p" : o;
            }(r, n);
            return x && ("body" === m.name || n.isRootContent) && function (e, n) {
              var o = Zy(Jy("script,style,head,html,body,title,meta,param"), t.getBlockElements()),
                s = /^[ \t\r\n]+/,
                a = /[ \t\r\n]+$/;
              var i = e.firstChild,
                l = null;
              var d = function d(e) {
                var t, n;
                e && (i = e.firstChild, i && 3 === i.type && (i.value = null === (t = i.value) || void 0 === t ? void 0 : t.replace(s, "")), i = e.lastChild, i && 3 === i.type && (i.value = null === (n = i.value) || void 0 === n ? void 0 : n.replace(a, "")));
              };
              if (t.isValidChild(e.name, n.toLowerCase())) {
                for (; i;) {
                  var _t109 = i.next;
                  g(o, i) ? (l || (l = new Fg(n, 1), l.attr(r.forced_root_block_attrs), e.insert(l, i)), l.append(i)) : (d(l), l = null), i = _t109;
                }
                d(l);
              }
            }(m, x), n.invalid || Gh(v, n), m;
          }
        };
      return Iv(p, r), function (e, t, n) {
        t.inline_styles && Rv(e, t, n);
      }(p, r, t), p;
    },
    nC = function nC(e, t, n) {
      var o = function (e) {
          return mb(e) ? Gg({
            validate: !1
          }).serialize(e) : e;
        }(e),
        r = t(o);
      if (r.isDefaultPrevented()) return r;
      if (mb(e)) {
        if (r.content !== o) {
          var _t110 = tC({
            validate: !1,
            forced_root_block: !1,
            sanitize: n
          }).parse(r.content, {
            context: e.name
          });
          return _objectSpread(_objectSpread({}, r), {}, {
            content: _t110
          });
        }
        return _objectSpread(_objectSpread({}, r), {}, {
          content: e
        });
      }
      return r;
    },
    oC = function oC(e, t) {
      if (t.no_events) return sl.value(t);
      {
        var _n97 = function (e, t) {
          return e.dispatch("BeforeGetContent", t);
        }(e, t);
        return _n97.isDefaultPrevented() ? sl.error(Jm(e, _objectSpread({
          content: ""
        }, _n97)).content) : sl.value(_n97);
      }
    },
    rC = function rC(e, t, n) {
      if (n.no_events) return t;
      {
        var _o71 = nC(t, function (t) {
          return Jm(e, _objectSpread(_objectSpread({}, n), {}, {
            content: t
          }));
        }, oc(e));
        return _o71.content;
      }
    },
    sC = function sC(e, t) {
      if (t.no_events) return sl.value(t);
      {
        var _n98 = nC(t.content, function (n) {
          return function (e, t) {
            return e.dispatch("BeforeSetContent", t);
          }(e, _objectSpread(_objectSpread({}, t), {}, {
            content: n
          }));
        }, oc(e));
        return _n98.isDefaultPrevented() ? (Qm(e, _n98), sl.error(void 0)) : sl.value(_n98);
      }
    },
    aC = function aC(e, t, n) {
      n.no_events || Qm(e, _objectSpread(_objectSpread({}, n), {}, {
        content: t
      }));
    },
    iC = function iC(e, t, n) {
      return {
        element: e,
        width: t,
        rows: n
      };
    },
    lC = function lC(e, t) {
      return {
        element: e,
        cells: t
      };
    },
    dC = function dC(e, t) {
      return {
        x: e,
        y: t
      };
    },
    cC = function cC(e, t) {
      return tn(e, t).bind(Xe).getOr(1);
    },
    uC = function uC(e, t, n) {
      var o = e.rows;
      return !!(o[n] ? o[n].cells : [])[t];
    },
    mC = function mC(e) {
      return X(e, function (e, t) {
        return t.cells.length > e ? t.cells.length : e;
      }, 0);
    },
    fC = function fC(e, t) {
      var n = e.rows;
      for (var _e113 = 0; _e113 < n.length; _e113++) {
        var _o72 = n[_e113].cells;
        for (var _n99 = 0; _n99 < _o72.length; _n99++) if (En(_o72[_n99], t)) return I.some(dC(_n99, _e113));
      }
      return I.none();
    },
    gC = function gC(e, t, n, o, r) {
      var s = [],
        a = e.rows;
      for (var _e114 = n; _e114 <= r; _e114++) {
        var _n100 = a[_e114].cells,
          _r56 = t < o ? _n100.slice(t, o + 1) : _n100.slice(o, t + 1);
        s.push(lC(a[_e114].element, _r56));
      }
      return s;
    },
    pC = function pC(e) {
      return function (e, t) {
        var n = oi(e.element),
          o = bn("tbody");
        return yo(o, t), bo(n, o), n;
      }(e, function (e) {
        return V(e.rows, function (e) {
          var t = V(e.cells, function (e) {
              var t = ri(e);
              return on(t, "colspan"), on(t, "rowspan"), t;
            }),
            n = oi(e.element);
          return yo(n, t), n;
        });
      }(e));
    },
    hC = function hC(e, t) {
      var n = yn(t.commonAncestorContainer),
        o = pp(n, e),
        r = G(o, Br),
        s = function (e, t) {
          return J(e, function (e) {
            return "li" === Ht(e) && Zu(e, t);
          }).fold(N([]), function (t) {
            return function (e) {
              return J(e, function (e) {
                return "ul" === Ht(e) || "ol" === Ht(e);
              });
            }(e).map(function (e) {
              var t = bn(Ht(e)),
                n = ye(mo(e), function (e, t) {
                  return He(t, "list-style");
                });
              return io(t, n), [bn("li"), t];
            }).getOr([]);
          });
        }(o, t),
        a = r.concat(s.length ? s : function (e) {
          return Nr(e) ? An(e).filter(_r).fold(N([]), function (t) {
            return [e, t];
          }) : _r(e) ? [e] : [];
        }(n));
      return V(a, oi);
    },
    bC = function bC() {
      return Cf([]);
    },
    vC = function vC(e, t) {
      return function (e, t) {
        return Zn(t, "table", O(En, e));
      }(e, t[0]).bind(function (e) {
        var n = t[0],
          o = t[t.length - 1],
          r = function (e) {
            var t = iC(oi(e), 0, []);
            return q(Fo(e, "tr"), function (e, n) {
              q(Fo(e, "td,th"), function (o, r) {
                (function (e, t, n, o, r) {
                  var s = cC(r, "rowspan"),
                    a = cC(r, "colspan"),
                    i = e.rows;
                  for (var _e115 = n; _e115 < n + s; _e115++) {
                    i[_e115] || (i[_e115] = lC(ri(o), []));
                    for (var _o73 = t; _o73 < t + a; _o73++) i[_e115].cells[_o73] = _e115 === n && _o73 === t ? r : oi(r);
                  }
                })(t, function (e, t, n) {
                  for (; uC(e, t, n);) t++;
                  return t;
                }(t, r, n), n, e, o);
              });
            }), iC(t.element, mC(t.rows), t.rows);
          }(e);
        return function (e, t, n) {
          return fC(e, t).bind(function (t) {
            return fC(e, n).map(function (n) {
              return function (e, t, n) {
                var o = t.x,
                  r = t.y,
                  s = n.x,
                  a = n.y,
                  i = r < a ? gC(e, o, r, s, a) : gC(e, o, a, s, r);
                return iC(e.element, mC(i), i);
              }(e, t, n);
            });
          });
        }(r, n, o).map(function (e) {
          return Cf([pC(e)]);
        });
      }).getOrThunk(bC);
    },
    yC = function yC(e, t) {
      var n = Gu(t, e);
      return n.length > 0 ? vC(e, n) : function (e, t) {
        return t.length > 0 && t[0].collapsed ? bC() : function (e, t) {
          return function (e, t) {
            var n = X(t, function (e, t) {
              return bo(t, e), t;
            }, e);
            return t.length > 0 ? Cf([n]) : n;
          }(yn(t.cloneContents()), hC(e, t));
        }(e, t[0]);
      }(e, t);
    },
    CC = function CC(e, t) {
      return t >= 0 && t < e.length && Fu(e.charAt(t));
    },
    wC = function wC(e) {
      return Fr(e.innerText);
    },
    xC = function xC(e) {
      return $o(e) ? e.outerHTML : Jo(e) ? Zs.encodeRaw(e.data, !1) : tr(e) ? "\x3c!--" + e.data + "--\x3e" : "";
    },
    kC = function kC(e, t) {
      return function (e, t) {
        var n = 0;
        q(e, function (e) {
          0 === e[0] ? n++ : 1 === e[0] ? (function (e, t, n) {
            var o = function (e) {
              var t;
              var n = document.createElement("div"),
                o = document.createDocumentFragment();
              for (e && (n.innerHTML = e); t = n.firstChild;) o.appendChild(t);
              return o;
            }(t);
            if (e.hasChildNodes() && n < e.childNodes.length) {
              var _t111 = e.childNodes[n];
              e.insertBefore(o, _t111);
            } else e.appendChild(o);
          }(t, e[1], n), n++) : 2 === e[0] && function (e, t) {
            if (e.hasChildNodes() && t < e.childNodes.length) {
              var _n101 = e.childNodes[t];
              e.removeChild(_n101);
            }
          }(t, n);
        });
      }(function (e, t) {
        var n = e.length + t.length + 2,
          o = new Array(n),
          r = new Array(n),
          s = function s(n, o, r, a, l) {
            var d = i(n, o, r, a);
            if (null === d || d.start === o && d.diag === o - a || d.end === n && d.diag === n - r) {
              var _s36 = n,
                _i20 = r;
              for (; _s36 < o || _i20 < a;) _s36 < o && _i20 < a && e[_s36] === t[_i20] ? (l.push([0, e[_s36]]), ++_s36, ++_i20) : o - n > a - r ? (l.push([2, e[_s36]]), ++_s36) : (l.push([1, t[_i20]]), ++_i20);
            } else {
              s(n, d.start, r, d.start - d.diag, l);
              for (var _t112 = d.start; _t112 < d.end; ++_t112) l.push([0, e[_t112]]);
              s(d.end, o, d.end - d.diag, a, l);
            }
          },
          a = function a(n, o, r, s) {
            var a = n;
            for (; a - o < s && a < r && e[a] === t[a - o];) ++a;
            return function (e, t, n) {
              return {
                start: e,
                end: t,
                diag: n
              };
            }(n, a, o);
          },
          i = function i(n, s, _i21, l) {
            var d = s - n,
              c = l - _i21;
            if (0 === d || 0 === c) return null;
            var u = d - c,
              m = c + d,
              f = (m % 2 == 0 ? m : m + 1) / 2;
            var g, p, h, b, v;
            for (o[1 + f] = n, r[1 + f] = s + 1, g = 0; g <= f; ++g) {
              for (p = -g; p <= g; p += 2) {
                for (h = p + f, p === -g || p !== g && o[h - 1] < o[h + 1] ? o[h] = o[h + 1] : o[h] = o[h - 1] + 1, b = o[h], v = b - n + _i21 - p; b < s && v < l && e[b] === t[v];) o[h] = ++b, ++v;
                if (u % 2 != 0 && u - g <= p && p <= u + g && r[h - u] <= o[h]) return a(r[h - u], p + n - _i21, s, l);
              }
              for (p = u - g; p <= u + g; p += 2) {
                for (h = p + f - u, p === u - g || p !== u + g && r[h + 1] <= r[h - 1] ? r[h] = r[h + 1] - 1 : r[h] = r[h - 1], b = r[h] - 1, v = b - n + _i21 - p; b >= n && v >= _i21 && e[b] === t[v];) r[h] = b--, v--;
                if (u % 2 == 0 && -g <= p && p <= g && r[h] <= o[h + u]) return a(r[h], p + n - _i21, s, l);
              }
            }
            return null;
          },
          l = [];
        return s(0, e.length, 0, t.length, l), l;
      }(V(ce(t.childNodes), xC), e), t), t;
    },
    EC = Pe(function () {
      return document.implementation.createHTMLDocument("undo");
    }),
    SC = function SC(e) {
      var t = (n = e.getBody(), G(V(ce(n.childNodes), xC), function (e) {
        return e.length > 0;
      }));
      var n;
      var o = te(t, function (t) {
          var n = jg(e.serializer, t);
          return n.length > 0 ? [n] : [];
        }),
        r = o.join("");
      return function (e) {
        return -1 !== e.indexOf("</iframe>");
      }(r) ? function (e) {
        return {
          type: "fragmented",
          fragments: e,
          content: "",
          bookmark: null,
          beforeBookmark: null
        };
      }(o) : function (e) {
        return {
          type: "complete",
          fragments: null,
          content: e,
          bookmark: null,
          beforeBookmark: null
        };
      }(r);
    },
    _C = function _C(e, t, n) {
      var o = n ? t.beforeBookmark : t.bookmark;
      "fragmented" === t.type ? kC(t.fragments, e.getBody()) : e.setContent(t.content, {
        format: "raw",
        no_selection: !C(o) || !Su(o) || !o.isFakeCaret
      }), o && (e.selection.moveToBookmark(o), e.selection.scrollIntoView());
    },
    NC = function NC(e) {
      return "fragmented" === e.type ? e.fragments.join("") : e.content;
    },
    RC = function RC(e) {
      var t = bn("body", EC());
      return So(t, NC(e)), q(Fo(t, "*[data-mce-bogus]"), xo), Eo(t);
    },
    AC = function AC(e, t) {
      return !(!e || !t) && (!!function (e, t) {
        return NC(e) === NC(t);
      }(e, t) || function (e, t) {
        return RC(e) === RC(t);
      }(e, t));
    },
    OC = function OC(e) {
      return 0 === e.get();
    },
    TC = function TC(e, t, n) {
      OC(n) && (e.typing = t);
    },
    BC = function BC(e, t) {
      e.typing && (TC(e, !1, t), e.add());
    },
    DC = function DC(e) {
      return {
        init: {
          bindEvents: E
        },
        undoManager: {
          beforeChange: function beforeChange(t, n) {
            return function (e, t, n) {
              OC(t) && n.set(nl(e.selection));
            }(e, t, n);
          },
          add: function add(t, n, o, r, s, a) {
            return function (e, t, n, o, r, s, a) {
              var i = SC(e),
                l = Dt.extend(s || {}, i);
              if (!OC(o) || e.removed) return null;
              var d = t.data[n.get()];
              if (e.dispatch("BeforeAddUndo", {
                level: l,
                lastLevel: d,
                originalEvent: a
              }).isDefaultPrevented()) return null;
              if (d && AC(d, l)) return null;
              t.data[n.get()] && r.get().each(function (e) {
                t.data[n.get()].beforeBookmark = e;
              });
              var c = Cd(e);
              if (c && t.data.length > c) {
                for (var _e116 = 0; _e116 < t.data.length - 1; _e116++) t.data[_e116] = t.data[_e116 + 1];
                t.data.length--, n.set(t.data.length);
              }
              l.bookmark = nl(e.selection), n.get() < t.data.length - 1 && (t.data.length = n.get() + 1), t.data.push(l), n.set(t.data.length - 1);
              var u = {
                level: l,
                lastLevel: d,
                originalEvent: a
              };
              return n.get() > 0 ? (e.setDirty(!0), e.dispatch("AddUndo", u), e.dispatch("change", u)) : e.dispatch("AddUndo", u), l;
            }(e, t, n, o, r, s, a);
          },
          undo: function undo(t, n, o) {
            return function (e, t, n, o) {
              var r;
              return t.typing && (t.add(), t.typing = !1, TC(t, !1, n)), o.get() > 0 && (o.set(o.get() - 1), r = t.data[o.get()], _C(e, r, !0), e.setDirty(!0), e.dispatch("Undo", {
                level: r
              })), r;
            }(e, t, n, o);
          },
          redo: function redo(t, n) {
            return function (e, t, n) {
              var o;
              return t.get() < n.length - 1 && (t.set(t.get() + 1), o = n[t.get()], _C(e, o, !1), e.setDirty(!0), e.dispatch("Redo", {
                level: o
              })), o;
            }(e, t, n);
          },
          clear: function clear(t, n) {
            return function (e, t, n) {
              t.data = [], n.set(0), t.typing = !1, e.dispatch("ClearUndos");
            }(e, t, n);
          },
          reset: function reset(e) {
            return function (e) {
              e.clear(), e.add();
            }(e);
          },
          hasUndo: function hasUndo(t, n) {
            return function (e, t, n) {
              return n.get() > 0 || t.typing && t.data[0] && !AC(SC(e), t.data[0]);
            }(e, t, n);
          },
          hasRedo: function hasRedo(e, t) {
            return function (e, t) {
              return t.get() < e.data.length - 1 && !e.typing;
            }(e, t);
          },
          transact: function transact(e, t, n) {
            return function (e, t, n) {
              return BC(e, t), e.beforeChange(), e.ignore(n), e.add();
            }(e, t, n);
          },
          ignore: function ignore(e, t) {
            return function (e, t) {
              try {
                e.set(e.get() + 1), t();
              } finally {
                e.set(e.get() - 1);
              }
            }(e, t);
          },
          extra: function extra(t, n, o, r) {
            return function (e, t, n, o, r) {
              if (t.transact(o)) {
                var _o74 = t.data[n.get()].bookmark,
                  _s37 = t.data[n.get() - 1];
                _C(e, _s37, !0), t.transact(r) && (t.data[n.get() - 1].beforeBookmark = _o74);
              }
            }(e, t, n, o, r);
          }
        },
        formatter: {
          match: function match(t, n, o, r) {
            return kb(e, t, n, o, r);
          },
          matchAll: function matchAll(t, n) {
            return function (e, t, n) {
              var o = [],
                r = {},
                s = e.selection.getStart();
              return e.dom.getParent(s, function (s) {
                for (var _a18 = 0; _a18 < t.length; _a18++) {
                  var _i22 = t[_a18];
                  !r[_i22] && xb(e, s, _i22, n) && (r[_i22] = !0, o.push(_i22));
                }
              }, e.dom.getRoot()), o;
            }(e, t, n);
          },
          matchNode: function matchNode(t, n, o, r) {
            return xb(e, t, n, o, r);
          },
          canApply: function canApply(t) {
            return function (e, t) {
              var n = e.formatter.get(t),
                o = e.dom;
              if (n && e.selection.isEditable()) {
                var _t113 = e.selection.getStart(),
                  _r57 = ym(o, _t113);
                for (var _e117 = n.length - 1; _e117 >= 0; _e117--) {
                  var _t114 = n[_e117];
                  if (!xm(_t114)) return !0;
                  for (var _e118 = _r57.length - 1; _e118 >= 0; _e118--) if (o.is(_r57[_e118], _t114.selector)) return !0;
                }
              }
              return !1;
            }(e, t);
          },
          closest: function closest(t) {
            return function (e, t) {
              var n = function n(t) {
                return En(t, yn(e.getBody()));
              };
              return I.from(e.selection.getStart(!0)).bind(function (o) {
                return hb(yn(o), function (n) {
                  return ue(t, function (t) {
                    return function (t, n) {
                      return xb(e, t.dom, n) ? I.some(n) : I.none();
                    }(n, t);
                  });
                }, n);
              }).getOrNull();
            }(e, t);
          },
          apply: function apply(t, n, o) {
            return Cv(e, t, n, o);
          },
          remove: function remove(t, n, o, r) {
            return gv(e, t, n, o, r);
          },
          toggle: function toggle(t, n, o) {
            return function (e, t, n, o) {
              var r = e.formatter.get(t);
              r && (!kb(e, t, n, o) || "toggle" in r[0] && !r[0].toggle ? Cv(e, t, n, o) : gv(e, t, n, o));
            }(e, t, n, o);
          },
          formatChanged: function formatChanged(t, n, o, r, s) {
            return function (e, t, n, o, r, s) {
              return function (e, t, n, o, r, s) {
                var a = t.get();
                q(n.split(","), function (t) {
                  var n = xe(a, t).getOrThunk(function () {
                      var e = {
                        withSimilar: {
                          state: Da(!1),
                          similar: !0,
                          callbacks: []
                        },
                        withoutSimilar: {
                          state: Da(!1),
                          similar: !1,
                          callbacks: []
                        },
                        withVars: []
                      };
                      return a[t] = e, e;
                    }),
                    i = function i() {
                      var n = Ev(e);
                      return kv(e, n, t, r, s).isSome();
                    };
                  if (v(s)) {
                    var _e119 = r ? n.withSimilar : n.withoutSimilar;
                    _e119.callbacks.push(o), 1 === _e119.callbacks.length && _e119.state.set(i());
                  } else n.withVars.push({
                    state: Da(i()),
                    similar: r,
                    vars: s,
                    callback: o
                  });
                }), t.set(a);
              }(e, t, n, o, r, s), {
                unbind: function unbind() {
                  return function (e, t, n) {
                    var o = e.get();
                    q(t.split(","), function (e) {
                      return xe(o, e).each(function (t) {
                        o[e] = {
                          withSimilar: _objectSpread(_objectSpread({}, t.withSimilar), {}, {
                            callbacks: G(t.withSimilar.callbacks, function (e) {
                              return e !== n;
                            })
                          }),
                          withoutSimilar: _objectSpread(_objectSpread({}, t.withoutSimilar), {}, {
                            callbacks: G(t.withoutSimilar.callbacks, function (e) {
                              return e !== n;
                            })
                          }),
                          withVars: G(t.withVars, function (e) {
                            return e.callback !== n;
                          })
                        };
                      });
                    }), e.set(o);
                  }(t, n, o);
                }
              };
            }(e, t, n, o, r, s);
          }
        },
        editor: {
          getContent: function getContent(t) {
            return function (e, t) {
              return I.from(e.getBody()).fold(N("tree" === t.format ? new Fg("body", 11) : ""), function (n) {
                return qg(e, t, n);
              });
            }(e, t);
          },
          setContent: function setContent(t, n) {
            return function (e, t, n) {
              return I.from(e.getBody()).map(function (o) {
                return mb(t) ? function (e, t, n, o) {
                  Yh(e.parser.getNodeFilters(), e.parser.getAttributeFilters(), n);
                  var r = Gg({
                      validate: !1
                    }, e.schema).serialize(n),
                    s = Or(yn(t)) ? r : Dt.trim(r);
                  return fb(e, s, o.no_selection), {
                    content: n,
                    html: s
                  };
                }(e, o, t, n) : function (e, t, n, o) {
                  if (0 === n.length || /^\s+$/.test(n)) {
                    var _r58 = '<br data-mce-bogus="1">';
                    "TABLE" === t.nodeName ? n = "<tr><td>" + _r58 + "</td></tr>" : /^(UL|OL)$/.test(t.nodeName) && (n = "<li>" + _r58 + "</li>");
                    var _s38 = Nl(e);
                    return e.schema.isValidChild(t.nodeName.toLowerCase(), _s38.toLowerCase()) ? (n = _r58, n = e.dom.createHTML(_s38, Rl(e), n)) : n || (n = _r58), fb(e, n, o.no_selection), {
                      content: n,
                      html: n
                    };
                  }
                  {
                    "raw" !== o.format && (n = Gg({
                      validate: !1
                    }, e.schema).serialize(e.parser.parse(n, {
                      isRootContent: !0,
                      insert: !0
                    })));
                    var _r59 = Or(yn(t)) ? n : Dt.trim(n);
                    return fb(e, _r59, o.no_selection), {
                      content: _r59,
                      html: _r59
                    };
                  }
                }(e, o, t, n);
              }).getOr({
                content: t,
                html: mb(n.content) ? "" : n.content
              });
            }(e, t, n);
          },
          insertContent: function insertContent(t, n) {
            return ub(e, t, n);
          },
          addVisual: function addVisual(t) {
            return function (e, t) {
              var n = e.dom,
                o = C(t) ? t : e.getBody();
              q(n.select("table,a", o), function (t) {
                switch (t.nodeName) {
                  case "TABLE":
                    var _o75 = Ad(e),
                      _r60 = n.getAttrib(t, "border");
                    _r60 && "0" !== _r60 || !e.hasVisual ? n.removeClass(t, _o75) : n.addClass(t, _o75);
                    break;
                  case "A":
                    if (!n.getAttrib(t, "href")) {
                      var _o76 = n.getAttrib(t, "name") || t.id,
                        _r61 = Od(e);
                      _o76 && e.hasVisual ? n.addClass(t, _r61) : n.removeClass(t, _r61);
                    }
                }
              }), e.dispatch("VisualAid", {
                element: t,
                hasVisual: e.hasVisual
              });
            }(e, t);
          }
        },
        selection: {
          getContent: function getContent(t, n) {
            return function (e, t) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              var o = function (e, t) {
                return _objectSpread(_objectSpread({}, e), {}, {
                  format: t,
                  get: !0,
                  selection: !0,
                  getInner: !0
                });
              }(n, t);
              return oC(e, o).fold(R, function (t) {
                var n = function (e, t) {
                  if ("text" === t.format) return function (e) {
                    return I.from(e.selection.getRng()).map(function (t) {
                      var n;
                      var o = I.from(e.dom.getParent(t.commonAncestorContainer, e.dom.isBlock)),
                        r = e.getBody(),
                        s = function (e) {
                          return e.map(function (e) {
                            return e.nodeName;
                          }).getOr("div").toLowerCase();
                        }(o),
                        a = yn(t.cloneContents());
                      $g(a), Vg(a);
                      var i = e.dom.add(r, s, {
                          "data-mce-bogus": "all",
                          style: "overflow: hidden; opacity: 0;"
                        }, a.dom),
                        l = wC(i),
                        d = Fr(null !== (n = i.textContent) && void 0 !== n ? n : "");
                      if (e.dom.remove(i), CC(d, 0) || CC(d, d.length - 1)) {
                        var _e120 = o.getOr(r),
                          _t115 = wC(_e120),
                          _n102 = _t115.indexOf(l);
                        return -1 === _n102 ? l : (CC(_t115, _n102 - 1) ? " " : "") + l + (CC(_t115, _n102 + l.length) ? " " : "");
                      }
                      return l;
                    }).getOr("");
                  }(e);
                  {
                    var _n103 = function (e, t) {
                      var n = e.selection.getRng(),
                        o = e.dom.create("body"),
                        r = e.selection.getSel(),
                        s = Rg(e, Ku(r)),
                        a = t.contextual ? yC(yn(e.getBody()), s).dom : n.cloneContents();
                      return a && o.appendChild(a), e.selection.serializer.serialize(o, t);
                    }(e, t);
                    return "tree" === t.format ? _n103 : e.selection.isCollapsed() ? "" : _n103;
                  }
                }(e, t);
                return rC(e, n, t);
              });
            }(e, t, n);
          }
        },
        autocompleter: {
          addDecoration: function addDecoration(t) {
            return Bg(e, t);
          },
          removeDecoration: function removeDecoration() {
            return function (e, t) {
              return Dg(t).each(function (t) {
                var n = e.selection.getBookmark();
                xo(t), e.selection.moveToBookmark(n);
              });
            }(e, yn(e.getBody()));
          }
        },
        raw: {
          getModel: function getModel() {
            return I.none();
          }
        }
      };
    },
    PC = function PC(e) {
      return ke(e.plugins, "rtc");
    },
    LC = function LC(e) {
      return e.rtcInstance ? e.rtcInstance : DC(e);
    },
    MC = function MC(e) {
      var t = e.rtcInstance;
      if (t) return t;
      throw new Error("Failed to get RTC instance not yet initialized.");
    },
    IC = function IC(e) {
      return MC(e).init.bindEvents();
    },
    FC = function FC(e) {
      return 0 === e.dom.length ? (wo(e), I.none()) : I.some(e);
    },
    UC = function UC(e, t, n, o) {
      e.bind(function (e) {
        return (o ? Kp : Wp)(e.dom, o ? e.dom.length : 0), t.filter(Kt).map(function (t) {
          return function (e, t, n, o) {
            var r = e.dom,
              s = t.dom,
              a = o ? r.length : s.length;
            o ? (Gp(r, s, !1, !o), n.setStart(s, a)) : (Gp(s, r, !1, !o), n.setEnd(s, a));
          }(e, t, n, o);
        });
      }).orThunk(function () {
        var e = function (e, t) {
          return e.filter(function (e) {
            return Wm.isBookmarkNode(e.dom);
          }).bind(t ? Dn : Bn);
        }(t, o).or(t).filter(Kt);
        return e.map(function (e) {
          return function (e, t) {
            An(e).each(function (n) {
              var o = e.dom;
              t && Ip(n, Li(o, 0)) ? Wp(o, 0) : !t && Fp(n, Li(o, o.length)) && Kp(o, o.length);
            });
          }(e, o);
        });
      });
    },
    zC = function zC(e, t, n) {
      if (ke(e, t)) {
        var _o77 = G(e[t], function (e) {
          return e !== n;
        });
        0 === _o77.length ? delete e[t] : e[t] = _o77;
      }
    };
  var jC = function jC(e) {
      return !(!e || !e.ownerDocument) && Sn(yn(e.ownerDocument), yn(e));
    },
    HC = function HC(e, t, n, o) {
      var r, s;
      var _ref17 = function (e, t) {
          var n, o;
          var r = function r(t, n) {
              return J(n, function (n) {
                return e.is(n, t);
              });
            },
            s = function s(t) {
              return e.getParents(t, void 0, e.getRoot());
            };
          return {
            selectorChangedWithUnbind: function selectorChangedWithUnbind(e, a) {
              return n || (n = {}, o = {}, t.on("NodeChange", function (e) {
                var t = e.element,
                  a = s(t),
                  i = {};
                ge(n, function (e, t) {
                  r(t, a).each(function (n) {
                    o[t] || (q(e, function (e) {
                      e(!0, {
                        node: n,
                        selector: t,
                        parents: a
                      });
                    }), o[t] = e), i[t] = e;
                  });
                }), ge(o, function (e, n) {
                  i[n] || (delete o[n], q(e, function (e) {
                    e(!1, {
                      node: t,
                      selector: n,
                      parents: a
                    });
                  }));
                });
              })), n[e] || (n[e] = []), n[e].push(a), r(e, s(t.selection.getStart())).each(function () {
                o[e] = n[e];
              }), {
                unbind: function unbind() {
                  zC(n, e, a), zC(o, e, a);
                }
              };
            }
          };
        }(e, o),
        a = _ref17.selectorChangedWithUnbind,
        i = function i(e, t) {
          return function (e, t) {
            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
            var o = function (e, t) {
              return _objectSpread(_objectSpread({
                format: "html"
              }, e), {}, {
                set: !0,
                selection: !0,
                content: t
              });
            }(n, t);
            sC(e, o).each(function (t) {
              var n = function (e, t) {
                  if ("raw" !== t.format) {
                    var _n104 = e.selection.getRng(),
                      _o78 = e.dom.getParent(_n104.commonAncestorContainer, e.dom.isBlock),
                      _r62 = _o78 ? {
                        context: _o78.nodeName.toLowerCase()
                      } : {},
                      _s39 = e.parser.parse(t.content, _objectSpread(_objectSpread({
                        forced_root_block: !1
                      }, _r62), t));
                    return Gg({
                      validate: !1
                    }, e.schema).serialize(_s39);
                  }
                  return t.content;
                }(e, t),
                o = e.selection.getRng();
              (function (e, t) {
                var n = I.from(t.firstChild).map(yn),
                  o = I.from(t.lastChild).map(yn);
                e.deleteContents(), e.insertNode(t);
                var r = n.bind(Bn).filter(Kt).bind(FC),
                  s = o.bind(Dn).filter(Kt).bind(FC);
                UC(r, n, e, !0), UC(s, o, e, !1), e.collapse(!1);
              })(o, o.createContextualFragment(n)), e.selection.setRng(o), Zf(e, o), aC(e, n, t);
            });
          }(o, e, t);
        },
        l = function l(e) {
          var t = c();
          t.collapse(!!e), u(t);
        },
        d = function d() {
          return t.getSelection ? t.getSelection() : t.document.selection;
        },
        c = function c() {
          var n;
          var a = function a(e, t, n) {
              try {
                return t.compareBoundaryPoints(e, n);
              } catch (e) {
                return -1;
              }
            },
            i = t.document;
          if (C(o.bookmark) && !xg(o)) {
            var _e121 = cg(o);
            if (_e121.isSome()) return _e121.map(function (e) {
              return Rg(o, [e])[0];
            }).getOr(i.createRange());
          }
          try {
            var _e122 = d();
            _e122 && !Ho(_e122.anchorNode) && (n = _e122.rangeCount > 0 ? _e122.getRangeAt(0) : i.createRange(), n = Rg(o, [n])[0]);
          } catch (e) {}
          if (n || (n = i.createRange()), nr(n.startContainer) && n.collapsed) {
            var _t116 = e.getRoot();
            n.setStart(_t116, 0), n.setEnd(_t116, 0);
          }
          return r && s && (0 === a(n.START_TO_START, n, r) && 0 === a(n.END_TO_END, n, r) ? n = s : (r = null, s = null)), n;
        },
        u = function u(e, t) {
          if (!function (e) {
            return !!e && jC(e.startContainer) && jC(e.endContainer);
          }(e)) return;
          var n = d();
          if (e = o.dispatch("SetSelectionRange", {
            range: e,
            forward: t
          }).range, n) {
            s = e;
            try {
              n.removeAllRanges(), n.addRange(e);
            } catch (e) {}
            !1 === t && n.extend && (n.collapse(e.endContainer, e.endOffset), n.extend(e.startContainer, e.startOffset)), r = n.rangeCount > 0 ? n.getRangeAt(0) : null;
          }
          if (!e.collapsed && e.startContainer === e.endContainer && (null == n ? void 0 : n.setBaseAndExtent) && e.endOffset - e.startOffset < 2 && e.startContainer.hasChildNodes()) {
            var _t117 = e.startContainer.childNodes[e.startOffset];
            _t117 && "IMG" === _t117.nodeName && (n.setBaseAndExtent(e.startContainer, e.startOffset, e.endContainer, e.endOffset), n.anchorNode === e.startContainer && n.focusNode === e.endContainer || n.setBaseAndExtent(_t117, 0, _t117, 1));
          }
          o.dispatch("AfterSetSelectionRange", {
            range: e,
            forward: t
          });
        },
        m = function m() {
          var t = d(),
            n = null == t ? void 0 : t.anchorNode,
            o = null == t ? void 0 : t.focusNode;
          if (!t || !n || !o || Ho(n) || Ho(o)) return !0;
          var r = e.createRng(),
            s = e.createRng();
          try {
            r.setStart(n, t.anchorOffset), r.collapse(!0), s.setStart(o, t.focusOffset), s.collapse(!0);
          } catch (e) {
            return !0;
          }
          return r.compareBoundaryPoints(r.START_TO_START, s) <= 0;
        },
        f = {
          dom: e,
          win: t,
          serializer: n,
          editor: o,
          expand: function expand() {
            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
              type: "word"
            };
            return u(Df(e).expand(c(), t));
          },
          collapse: l,
          setCursorLocation: function setCursorLocation(t, n) {
            var r = e.createRng();
            C(t) && C(n) ? (r.setStart(t, n), r.setEnd(t, n), u(r), l(!1)) : (em(e, r, o.getBody(), !0), u(r));
          },
          getContent: function getContent(e) {
            return function (e) {
              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              return function (e, t, n) {
                return MC(e).selection.getContent(t, n);
              }(e, t.format ? t.format : "html", t);
            }(o, e);
          },
          setContent: i,
          getBookmark: function getBookmark(e, t) {
            return g.getBookmark(e, t);
          },
          moveToBookmark: function moveToBookmark(e) {
            return g.moveToBookmark(e);
          },
          select: function select(t, n) {
            return function (e, t, n) {
              return I.from(t).bind(function (t) {
                return I.from(t.parentNode).map(function (o) {
                  var r = e.nodeIndex(t),
                    s = e.createRng();
                  return s.setStart(o, r), s.setEnd(o, r + 1), n && (em(e, s, t, !0), em(e, s, t, !1)), s;
                });
              });
            }(e, t, n).each(u), t;
          },
          isCollapsed: function isCollapsed() {
            var e = c(),
              t = d();
            return !(!e || e.item) && (e.compareEndPoints ? 0 === e.compareEndPoints("StartToEnd", e) : !t || e.collapsed);
          },
          isEditable: function isEditable() {
            var t = c(),
              n = o.getBody().querySelectorAll('[data-mce-selected="1"]');
            return n.length > 0 ? ne(n, function (t) {
              return e.isEditable(t.parentElement);
            }) : t.startContainer === t.endContainer ? e.isEditable(t.startContainer) : e.isEditable(t.startContainer) && e.isEditable(t.endContainer);
          },
          isForward: m,
          setNode: function setNode(t) {
            return i(e.getOuterHTML(t)), t;
          },
          getNode: function getNode() {
            return function (e, t) {
              if (!t) return e;
              var n = t.startContainer,
                o = t.endContainer;
              var r = t.startOffset,
                s = t.endOffset;
              var a = t.commonAncestorContainer;
              t.collapsed || (n === o && s - r < 2 && n.hasChildNodes() && (a = n.childNodes[r]), Jo(n) && Jo(o) && (n = n.length === r ? Ng(n.nextSibling, !0) : n.parentNode, o = 0 === s ? Ng(o.previousSibling, !1) : o.parentNode, n && n === o && (a = n)));
              var i = Jo(a) ? a.parentNode : a;
              return $o(i) ? i : e;
            }(o.getBody(), c());
          },
          getSel: d,
          setRng: u,
          getRng: c,
          getStart: function getStart(e) {
            return Sg(o.getBody(), c(), e);
          },
          getEnd: function getEnd(e) {
            return _g(o.getBody(), c(), e);
          },
          getSelectedBlocks: function getSelectedBlocks(t, n) {
            return function (e, t, n, o) {
              var r = [],
                s = e.getRoot(),
                a = e.getParent(n || Sg(s, t, t.collapsed), e.isBlock),
                i = e.getParent(o || _g(s, t, t.collapsed), e.isBlock);
              if (a && a !== s && r.push(a), a && i && a !== i) {
                var _t118;
                var _n105 = new zo(a, s);
                for (; (_t118 = _n105.next()) && _t118 !== i;) e.isBlock(_t118) && r.push(_t118);
              }
              return i && a !== i && i !== s && r.push(i), r;
            }(e, c(), t, n);
          },
          normalize: function normalize() {
            var t = c(),
              n = d();
            if (!(Ku(n).length > 1) && tm(o)) {
              var _n106 = Of(e, t);
              return _n106.each(function (e) {
                u(e, m());
              }), _n106.getOr(t);
            }
            return t;
          },
          selectorChanged: function selectorChanged(e, t) {
            return a(e, t), f;
          },
          selectorChangedWithUnbind: a,
          getScrollContainer: function getScrollContainer() {
            var t,
              n = e.getRoot();
            for (; n && "BODY" !== n.nodeName;) {
              if (n.scrollHeight > n.clientHeight) {
                t = n;
                break;
              }
              n = n.parentNode;
            }
            return t;
          },
          scrollIntoView: function scrollIntoView(e, t) {
            C(e) ? function (e, t, n) {
              (e.inline ? Xf : Jf)(e, t, n);
            }(o, e, t) : Zf(o, c(), t);
          },
          placeCaretAt: function placeCaretAt(e, t) {
            return u(xf(e, t, o.getDoc()));
          },
          getBoundingClientRect: function getBoundingClientRect() {
            var e = c();
            return e.collapsed ? Li.fromRangeStart(e).getClientRects()[0] : e.getBoundingClientRect();
          },
          destroy: function destroy() {
            t = r = s = null, p.destroy();
          }
        },
        g = Wm(f),
        p = sf(f, o);
      return f.bookmarkManager = g, f.controlSelection = p, f;
    },
    $C = function $C(e, t, n) {
      -1 === Dt.inArray(t, n) && (e.addAttributeFilter(n, function (e, t) {
        var n = e.length;
        for (; n--;) e[n].attr(t, null);
      }), t.push(n));
    },
    VC = function VC(e, t) {
      var n = ["data-mce-selected"],
        o = _objectSpread({
          entity_encoding: "named",
          remove_trailing_brs: !0,
          pad_empty_with_br: !1
        }, e),
        r = t && t.dom ? t.dom : Oa.DOM,
        s = t && t.schema ? t.schema : ca(o),
        a = tC(o, s);
      return function (e, t, n) {
        e.addAttributeFilter("data-mce-tabindex", function (e, t) {
          var n = e.length;
          for (; n--;) {
            var _o79 = e[n];
            _o79.attr("tabindex", _o79.attr("data-mce-tabindex")), _o79.attr(t, null);
          }
        }), e.addAttributeFilter("src,href,style", function (e, o) {
          var r = "data-mce-" + o,
            s = t.url_converter,
            a = t.url_converter_scope;
          var i = e.length;
          for (; i--;) {
            var _t119 = e[i];
            var _l10 = _t119.attr(r);
            void 0 !== _l10 ? (_t119.attr(o, _l10.length > 0 ? _l10 : null), _t119.attr(r, null)) : (_l10 = _t119.attr(o), "style" === o ? _l10 = n.serializeStyle(n.parseStyle(_l10), _t119.name) : s && (_l10 = s.call(a, _l10, o, _t119.name)), _t119.attr(o, _l10.length > 0 ? _l10 : null));
          }
        }), e.addAttributeFilter("class", function (e) {
          var t = e.length;
          for (; t--;) {
            var _n107 = e[t];
            var _o80 = _n107.attr("class");
            _o80 && (_o80 = _o80.replace(/(?:^|\s)mce-item-\w+(?!\S)/g, ""), _n107.attr("class", _o80.length > 0 ? _o80 : null));
          }
        }), e.addAttributeFilter("data-mce-type", function (e, t, n) {
          var o = e.length;
          for (; o--;) {
            var _t120 = e[o];
            if ("bookmark" === _t120.attr("data-mce-type") && !n.cleanup) {
              var _e123 = I.from(_t120.firstChild).exists(function (e) {
                var t;
                return !Ir(null !== (t = e.value) && void 0 !== t ? t : "");
              });
              _e123 ? _t120.unwrap() : _t120.remove();
            }
          }
        }), e.addNodeFilter("noscript", function (e) {
          var t;
          var n = e.length;
          for (; n--;) {
            var _o81 = e[n].firstChild;
            _o81 && (_o81.value = Zs.decode(null !== (t = _o81.value) && void 0 !== t ? t : ""));
          }
        }), e.addNodeFilter("script,style", function (e, n) {
          var o;
          var r = function r(e) {
            return e.replace(/(<!--\[CDATA\[|\]\]-->)/g, "\n").replace(/^[\r\n]*|[\r\n]*$/g, "").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi, "").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g, "");
          };
          var s = e.length;
          for (; s--;) {
            var _a19 = e[s],
              _i23 = _a19.firstChild,
              _l11 = null !== (o = null == _i23 ? void 0 : _i23.value) && void 0 !== o ? o : "";
            if ("script" === n) {
              var _e124 = _a19.attr("type");
              _e124 && _a19.attr("type", "mce-no/type" === _e124 ? null : _e124.replace(/^mce\-/, "")), "xhtml" === t.element_format && _i23 && _l11.length > 0 && (_i23.value = "// <![CDATA[\n" + r(_l11) + "\n// ]]>");
            } else "xhtml" === t.element_format && _i23 && _l11.length > 0 && (_i23.value = "\x3c!--\n" + r(_l11) + "\n--\x3e");
          }
        }), e.addNodeFilter("#comment", function (e) {
          var o = e.length;
          for (; o--;) {
            var _r63 = e[o],
              _s40 = _r63.value;
            t.preserve_cdata && 0 === (null == _s40 ? void 0 : _s40.indexOf("[CDATA[")) ? (_r63.name = "#cdata", _r63.type = 4, _r63.value = n.decode(_s40.replace(/^\[CDATA\[|\]\]$/g, ""))) : 0 === (null == _s40 ? void 0 : _s40.indexOf("mce:protected ")) && (_r63.name = "#text", _r63.type = 3, _r63.raw = !0, _r63.value = unescape(_s40).substr(14));
          }
        }), e.addNodeFilter("xml:namespace,input", function (e, t) {
          var n = e.length;
          for (; n--;) {
            var _o82 = e[n];
            7 === _o82.type ? _o82.remove() : 1 === _o82.type && ("input" !== t || _o82.attr("type") || _o82.attr("type", "text"));
          }
        }), e.addAttributeFilter("data-mce-type", function (t) {
          q(t, function (t) {
            "format-caret" === t.attr("data-mce-type") && (t.isEmpty(e.schema.getNonEmptyElements()) ? t.remove() : t.unwrap());
          });
        }), e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder", function (e, t) {
          var n = e.length;
          for (; n--;) e[n].attr(t, null);
        }), t.remove_trailing_brs && Av(t, e, e.schema);
      }(a, o, r), {
        schema: s,
        addNodeFilter: a.addNodeFilter,
        addAttributeFilter: a.addAttributeFilter,
        serialize: function serialize(e) {
          var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
          var i = _objectSpread({
              format: "html"
            }, n),
            l = function (e, t, n) {
              return function (e, t) {
                return C(e) && e.hasEventListeners("PreProcess") && !t.no_events;
              }(e, n) ? function (e, t, n) {
                var o;
                var r = e.dom;
                var s = t.cloneNode(!0);
                var a = document.implementation;
                if (a.createHTMLDocument) {
                  var _e125 = a.createHTMLDocument("");
                  Dt.each("BODY" === s.nodeName ? s.childNodes : [s], function (t) {
                    _e125.body.appendChild(_e125.importNode(t, !0));
                  }), s = "BODY" !== s.nodeName ? _e125.body.firstChild : _e125.body, o = r.doc, r.doc = _e125;
                }
                return function (e, t) {
                  e.dispatch("PreProcess", t);
                }(e, _objectSpread(_objectSpread({}, n), {}, {
                  node: s
                })), o && (r.doc = o), s;
              }(e, t, n) : t;
            }(t, e, i),
            d = function (e, t, n) {
              var o = Fr(n.getInner ? t.innerHTML : e.getOuterHTML(t));
              return n.selection || Or(yn(t)) ? o : Dt.trim(o);
            }(r, l, i),
            c = function (e, t, n) {
              var o = n.selection ? _objectSpread({
                  forced_root_block: !1
                }, n) : n,
                r = e.parse(t, o);
              return function (e) {
                var t = function t(e) {
                    return "br" === (null == e ? void 0 : e.name);
                  },
                  n = e.lastChild;
                if (t(n)) {
                  var _e126 = n.prev;
                  t(_e126) && (n.remove(), _e126.remove());
                }
              }(r), r;
            }(a, d, i);
          return "tree" === i.format ? c : function (e, t, n, o, r) {
            var s = function (e, t, n) {
              return Gg(e, t).serialize(n);
            }(t, n, o);
            return function (e, t, n) {
              if (!t.no_events && e) {
                var _o83 = function (e, t) {
                  return e.dispatch("PostProcess", t);
                }(e, _objectSpread(_objectSpread({}, t), {}, {
                  content: n
                }));
                return _o83.content;
              }
              return n;
            }(e, r, s);
          }(t, o, s, c, i);
        },
        addRules: s.addValidElements,
        setRules: s.setValidElements,
        addTempAttr: O($C, a, n),
        getTempAttrs: N(n),
        getNodeFilters: a.getNodeFilters,
        getAttributeFilters: a.getAttributeFilters,
        removeNodeFilter: a.removeNodeFilter,
        removeAttributeFilter: a.removeAttributeFilter
      };
    },
    qC = function qC(e, t) {
      var n = VC(e, t);
      return {
        schema: n.schema,
        addNodeFilter: n.addNodeFilter,
        addAttributeFilter: n.addAttributeFilter,
        serialize: n.serialize,
        addRules: n.addRules,
        setRules: n.setRules,
        addTempAttr: n.addTempAttr,
        getTempAttrs: n.getTempAttrs,
        getNodeFilters: n.getNodeFilters,
        getAttributeFilters: n.getAttributeFilters,
        removeNodeFilter: n.removeNodeFilter,
        removeAttributeFilter: n.removeAttributeFilter
      };
    },
    WC = function WC(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var o = function (e, t) {
        return _objectSpread(_objectSpread({
          format: "html"
        }, e), {}, {
          set: !0,
          content: t
        });
      }(n, t);
      return sC(e, o).map(function (t) {
        var n = function (e, t, n) {
          return LC(e).editor.setContent(t, n);
        }(e, t.content, t);
        return aC(e, n.html, t), n.content;
      }).getOr(t);
    },
    KC = "autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),
    GC = "template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),
    YC = "bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),
    XC = [{
      name: "template",
      replacedWith: "Advanced Template"
    }, {
      name: "rtc"
    }],
    QC = function QC(e, t) {
      var n = G(t, function (t) {
        return ke(e, t);
      });
      return ae(n);
    },
    JC = function JC(e) {
      var t = QC(e, KC),
        n = e.forced_root_block;
      return !1 !== n && "" !== n || t.push("forced_root_block (false only)"), ae(t);
    },
    ZC = function ZC(e) {
      return QC(e, GC);
    },
    ew = function ew(e, t) {
      var n = Dt.makeMap(e.plugins, " "),
        o = G(t, function (e) {
          return ke(n, e);
        });
      return ae(o);
    },
    tw = function tw(e) {
      return ew(e, YC);
    },
    nw = function nw(e) {
      return ew(e, XC.map(function (e) {
        return e.name;
      }));
    },
    ow = function ow(e) {
      return J(XC, function (t) {
        return t.name === e;
      }).fold(function () {
        return e;
      }, function (t) {
        return t.replacedWith ? "".concat(e, ", replaced by ").concat(t.replacedWith) : e;
      });
    },
    rw = Oa.DOM,
    sw = function sw(e) {
      return I.from(e).each(function (e) {
        return e.destroy();
      });
    },
    aw = function () {
      var e = {};
      return {
        add: function add(t, n) {
          e[t] = n;
        },
        get: function get(t) {
          return e[t] ? e[t] : {
            icons: {}
          };
        },
        has: function has(t) {
          return ke(e, t);
        }
      };
    }(),
    iw = Fa.ModelManager,
    lw = function lw(e, t) {
      return t.dom[e];
    },
    dw = function dw(e, t) {
      return parseInt(lo(t, e), 10);
    },
    cw = O(lw, "clientWidth"),
    uw = O(lw, "clientHeight"),
    mw = O(dw, "margin-top"),
    fw = O(dw, "margin-left"),
    gw = function gw(e) {
      var t = [],
        n = function n() {
          var t = e.theme;
          return t && t.getNotificationManagerImpl ? t.getNotificationManagerImpl() : function () {
            var e = function e() {
              throw new Error("Theme did not provide a NotificationManager implementation.");
            };
            return {
              open: e,
              close: e,
              getArgs: e
            };
          }();
        },
        o = function o() {
          return I.from(t[0]);
        },
        r = function r() {
          q(t, function (e) {
            e.reposition();
          });
        },
        s = function s(e) {
          Z(t, function (t) {
            return t === e;
          }).each(function (e) {
            t.splice(e, 1);
          });
        },
        a = function a(_a20) {
          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
          return e.removed || !function (e) {
            return (t = e.inline ? e.getBody() : e.getContentAreaContainer(), I.from(t).map(yn)).map(Yn).getOr(!1);
            var t;
          }(e) ? {} : (i && e.dispatch("BeforeOpenNotification", {
            notification: _a20
          }), J(t, function (e) {
            return t = n().getArgs(e), o = _a20, !(t.type !== o.type || t.text !== o.text || t.progressBar || t.timeout || o.progressBar || o.timeout);
            var t, o;
          }).getOrThunk(function () {
            e.editorManager.setActive(e);
            var i = n().open(_a20, function () {
              s(i), r(), o().fold(function () {
                return e.focus();
              }, function (e) {
                return eg(yn(e.getEl()));
              });
            });
            return function (e) {
              t.push(e);
            }(i), r(), e.dispatch("OpenNotification", {
              notification: _objectSpread({}, i)
            }), i;
          }));
        },
        i = N(t);
      return function (e) {
        e.on("SkinLoaded", function () {
          var t = rd(e);
          t && a({
            text: t,
            type: "warning",
            timeout: 0
          }, !1), r();
        }), e.on("show ResizeEditor ResizeWindow NodeChange", function () {
          requestAnimationFrame(r);
        }), e.on("remove", function () {
          q(t.slice(), function (e) {
            n().close(e);
          });
        });
      }(e), {
        open: a,
        close: function close() {
          o().each(function (e) {
            n().close(e), s(e), r();
          });
        },
        getNotifications: i
      };
    },
    pw = Fa.PluginManager,
    hw = Fa.ThemeManager,
    bw = function bw(e) {
      var t = [];
      var n = function n() {
          var t = e.theme;
          return t && t.getWindowManagerImpl ? t.getWindowManagerImpl() : function () {
            var e = function e() {
              throw new Error("Theme did not provide a WindowManager implementation.");
            };
            return {
              open: e,
              openUrl: e,
              alert: e,
              confirm: e,
              close: e
            };
          }();
        },
        o = function o(e, t) {
          return function () {
            for (var _len10 = arguments.length, n = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {
              n[_key10] = arguments[_key10];
            }
            return t ? t.apply(e, n) : void 0;
          };
        },
        r = function r(n) {
          (function (t) {
            e.dispatch("CloseWindow", {
              dialog: t
            });
          })(n), t = G(t, function (e) {
            return e !== n;
          }), 0 === t.length && e.focus();
        },
        s = function s(n) {
          e.editorManager.setActive(e), dg(e), e.ui.show();
          var o = n();
          return function (n) {
            t.push(n), function (t) {
              e.dispatch("OpenWindow", {
                dialog: t
              });
            }(n);
          }(o), o;
        };
      return e.on("remove", function () {
        q(t, function (e) {
          n().close(e);
        });
      }), {
        open: function open(e, t) {
          return s(function () {
            return n().open(e, t, r);
          });
        },
        openUrl: function openUrl(e) {
          return s(function () {
            return n().openUrl(e, r);
          });
        },
        alert: function alert(e, t, r) {
          var s = n();
          s.alert(e, o(r || s, t));
        },
        confirm: function confirm(e, t, r) {
          var s = n();
          s.confirm(e, o(r || s, t));
        },
        close: function close() {
          I.from(t[t.length - 1]).each(function (e) {
            n().close(e), r(e);
          });
        }
      };
    },
    vw = function vw(e, t) {
      e.notificationManager.open({
        type: "error",
        text: t
      });
    },
    yw = function yw(e, t) {
      e._skinLoaded ? vw(e, t) : e.on("SkinLoaded", function () {
        vw(e, t);
      });
    },
    Cw = function Cw(e, t, n) {
      Gm(e, t, {
        message: n
      }), console.error(n);
    },
    ww = function ww(e, t, n) {
      return n ? "Failed to load ".concat(e, ": ").concat(n, " from url ").concat(t) : "Failed to load ".concat(e, " url: ").concat(t);
    },
    xw = function xw(e) {
      var n = window.console;
      for (var _len11 = arguments.length, t = new Array(_len11 > 1 ? _len11 - 1 : 0), _key11 = 1; _key11 < _len11; _key11++) {
        t[_key11 - 1] = arguments[_key11];
      }
      n && (n.error ? n.error.apply(n, [e].concat(t)) : n.log.apply(n, [e].concat(t)));
    },
    kw = function kw(e, t) {
      var n = e.editorManager.baseURL + "/skins/content",
        o = "content".concat(e.editorManager.suffix, ".css");
      return V(t, function (t) {
        return function (e) {
          return /^[a-z0-9\-]+$/i.test(e);
        }(t) && !e.inline ? "".concat(n, "/").concat(t, "/").concat(o) : e.documentBaseURI.toAbsolute(t);
      });
    },
    Ew = function Ew(e, t) {
      var n = {};
      return {
        findAll: function findAll(o) {
          var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : M;
          var s = G(function (e) {
              return e ? ce(e.getElementsByTagName("img")) : [];
            }(o), function (t) {
              var n = t.src;
              return !t.hasAttribute("data-mce-bogus") && !t.hasAttribute("data-mce-placeholder") && !(!n || n === At.transparentSrc) && (He(n, "blob:") ? !e.isUploaded(n) && r(t) : !!He(n, "data:") && r(t));
            }),
            a = V(s, function (e) {
              var o = e.src;
              if (ke(n, o)) return n[o].then(function (t) {
                return m(t) ? t : {
                  image: e,
                  blobInfo: t.blobInfo
                };
              });
              {
                var _r64 = function (e, t) {
                  var n = function n() {
                    return Promise.reject("Invalid data URI");
                  };
                  if (He(t, "blob:")) {
                    var _s41 = e.getByUri(t);
                    return C(_s41) ? Promise.resolve(_s41) : (o = t, He(o, "blob:") ? function (e) {
                      return fetch(e).then(function (e) {
                        return e.ok ? e.blob() : Promise.reject();
                      })["catch"](function () {
                        return Promise.reject({
                          message: "Cannot convert ".concat(e, " to Blob. Resource might not exist or is inaccessible."),
                          uriType: "blob"
                        });
                      });
                    }(o) : He(o, "data:") ? (r = o, new Promise(function (e, t) {
                      Ov(r).bind(function (_ref18) {
                        var e = _ref18.type,
                          t = _ref18.data,
                          n = _ref18.base64Encoded;
                        return Tv(e, t, n);
                      }).fold(function () {
                        return t("Invalid data URI");
                      }, e);
                    })) : Promise.reject("Unknown URI format")).then(function (t) {
                      return Bv(t).then(function (o) {
                        return Pv(o, !1, function (n) {
                          return I.some(Lv(e, t, n));
                        }).getOrThunk(n);
                      });
                    });
                  }
                  var o, r;
                  return He(t, "data:") ? Mv(e, t).fold(n, function (e) {
                    return Promise.resolve(e);
                  }) : Promise.reject("Unknown image data format");
                }(t, o).then(function (t) {
                  return delete n[o], {
                    image: e,
                    blobInfo: t
                  };
                })["catch"](function (e) {
                  return delete n[o], e;
                });
                return n[o] = _r64, _r64;
              }
            });
          return Promise.all(a);
        }
      };
    },
    Sw = function Sw() {
      var e = {};
      var t = function t(e, _t121) {
          return {
            status: e,
            resultUri: _t121
          };
        },
        n = function n(t) {
          return t in e;
        };
      return {
        hasBlobUri: n,
        getResultUri: function getResultUri(t) {
          var n = e[t];
          return n ? n.resultUri : null;
        },
        isPending: function isPending(t) {
          return !!n(t) && 1 === e[t].status;
        },
        isUploaded: function isUploaded(t) {
          return !!n(t) && 2 === e[t].status;
        },
        markPending: function markPending(n) {
          e[n] = t(1, null);
        },
        markUploaded: function markUploaded(n, o) {
          e[n] = t(2, o);
        },
        removeFailed: function removeFailed(t) {
          delete e[t];
        },
        destroy: function destroy() {
          e = {};
        }
      };
    };
  var _w = 0;
  var Nw = function Nw(e, t) {
      var n = {},
        o = function o(e, n) {
          return new Promise(function (o, r) {
            var s = new XMLHttpRequest();
            s.open("POST", t.url), s.withCredentials = t.credentials, s.upload.onprogress = function (e) {
              n(e.loaded / e.total * 100);
            }, s.onerror = function () {
              r("Image upload failed due to a XHR Transport error. Code: " + s.status);
            }, s.onload = function () {
              if (s.status < 200 || s.status >= 300) return void r("HTTP Error: " + s.status);
              var e = JSON.parse(s.responseText);
              var n, a;
              e && m(e.location) ? o((n = t.basePath, a = e.location, n ? n.replace(/\/$/, "") + "/" + a.replace(/^\//, "") : a)) : r("Invalid JSON: " + s.responseText);
            };
            var a = new FormData();
            a.append("file", e.blob(), e.filename()), s.send(a);
          });
        },
        r = w(t.handler) ? t.handler : o,
        s = function s(e, t) {
          return {
            url: t,
            blobInfo: e,
            status: !0
          };
        },
        a = function a(e, t) {
          return {
            url: "",
            blobInfo: e,
            status: !1,
            error: t
          };
        },
        i = function i(e, t) {
          Dt.each(n[e], function (e) {
            e(t);
          }), delete n[e];
        };
      return {
        upload: function upload(l, d) {
          return t.url || r !== o ? function (t, o) {
            return t = Dt.grep(t, function (t) {
              return !e.isUploaded(t.blobUri());
            }), Promise.all(Dt.map(t, function (t) {
              return e.isPending(t.blobUri()) ? function (e) {
                var t = e.blobUri();
                return new Promise(function (e) {
                  n[t] = n[t] || [], n[t].push(e);
                });
              }(t) : function (t, n, o) {
                return e.markPending(t.blobUri()), new Promise(function (r) {
                  var l, d;
                  try {
                    var _c6 = function _c6() {
                        l && (l.close(), d = E);
                      },
                      _u6 = function _u6(n) {
                        _c6(), e.markUploaded(t.blobUri(), n), i(t.blobUri(), s(t, n)), r(s(t, n));
                      },
                      _f5 = function _f5(n) {
                        _c6(), e.removeFailed(t.blobUri()), i(t.blobUri(), a(t, n)), r(a(t, n));
                      };
                    d = function d(e) {
                      e < 0 || e > 100 || I.from(l).orThunk(function () {
                        return I.from(o).map(D);
                      }).each(function (t) {
                        l = t, t.progressBar.value(e);
                      });
                    }, n(t, d).then(_u6, function (e) {
                      _f5(m(e) ? {
                        message: e
                      } : e);
                    });
                  } catch (e) {
                    r(a(t, e));
                  }
                });
              }(t, r, o);
            }));
          }(l, d) : new Promise(function (e) {
            e([]);
          });
        }
      };
    },
    Rw = function Rw(e) {
      return function () {
        return e.notificationManager.open({
          text: e.translate("Image uploading..."),
          type: "info",
          timeout: -1,
          progressBar: !0
        });
      };
    },
    Aw = function Aw(e, t) {
      return Nw(t, {
        url: Ul(e),
        basePath: zl(e),
        credentials: jl(e),
        handler: Hl(e)
      });
    },
    Ow = function Ow(e) {
      var t = function () {
        var e = [];
        var t = function t(e) {
            if (!e.blob || !e.base64) throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");
            var t = e.id || "blobid" + _w++ + function () {
                var e = function e() {
                  return Math.round(4294967295 * Math.random()).toString(36);
                };
                return "s" + new Date().getTime().toString(36) + e() + e() + e();
              }(),
              n = e.name || t,
              o = e.blob;
            var r;
            return {
              id: N(t),
              name: N(n),
              filename: N(e.filename || n + "." + (r = o.type, {
                "image/jpeg": "jpg",
                "image/jpg": "jpg",
                "image/gif": "gif",
                "image/png": "png",
                "image/apng": "apng",
                "image/avif": "avif",
                "image/svg+xml": "svg",
                "image/webp": "webp",
                "image/bmp": "bmp",
                "image/tiff": "tiff"
              }[r.toLowerCase()] || "dat")),
              blob: N(o),
              base64: N(e.base64),
              blobUri: N(e.blobUri || URL.createObjectURL(o)),
              uri: N(e.uri)
            };
          },
          n = function n(t) {
            return J(e, t).getOrUndefined();
          },
          o = function o(e) {
            return n(function (t) {
              return t.id() === e;
            });
          };
        return {
          create: function create(e, n, o, r, s) {
            if (m(e)) return t({
              id: e,
              name: r,
              filename: s,
              blob: n,
              base64: o
            });
            if (f(e)) return t(e);
            throw new Error("Unknown input type");
          },
          add: function add(t) {
            o(t.id()) || e.push(t);
          },
          get: o,
          getByUri: function getByUri(e) {
            return n(function (t) {
              return t.blobUri() === e;
            });
          },
          getByData: function getByData(e, t) {
            return n(function (n) {
              return n.base64() === e && n.blob().type === t;
            });
          },
          findFirst: n,
          removeByUri: function removeByUri(t) {
            e = G(e, function (e) {
              return e.blobUri() !== t || (URL.revokeObjectURL(e.blobUri()), !1);
            });
          },
          destroy: function destroy() {
            q(e, function (e) {
              URL.revokeObjectURL(e.blobUri());
            }), e = [];
          }
        };
      }();
      var n, o;
      var r = Sw(),
        s = [],
        a = function a(t) {
          return function (n) {
            return e.selection ? t(n) : [];
          };
        },
        i = function i(e, t, n) {
          var o = 0;
          do {
            o = e.indexOf(t, o), -1 !== o && (e = e.substring(0, o) + n + e.substr(o + t.length), o += n.length - t.length + 1);
          } while (-1 !== o);
          return e;
        },
        l = function l(e, t, n) {
          var o = "src=\"".concat(n, "\"").concat(n === At.transparentSrc ? ' data-mce-placeholder="1"' : "");
          return e = i(e, "src=\"".concat(t, "\""), o), i(e, 'data-mce-src="' + t + '"', 'data-mce-src="' + n + '"');
        },
        d = function d(t, n) {
          q(e.undoManager.data, function (e) {
            "fragmented" === e.type ? e.fragments = V(e.fragments, function (e) {
              return l(e, t, n);
            }) : e.content = l(e.content, t, n);
          });
        },
        c = function c() {
          return n || (n = Aw(e, r)), p().then(a(function (o) {
            var r = V(o, function (e) {
              return e.blobInfo;
            });
            return n.upload(r, Rw(e)).then(a(function (n) {
              var r = [];
              var s = !1;
              var a = V(n, function (n, a) {
                var _o$a = o[a],
                  i = _o$a.blobInfo,
                  l = _o$a.image;
                var c = !1;
                return n.status && Ml(e) ? (n.url && !je(l.src, n.url) && (s = !0), t.removeByUri(l.src), PC(e) || function (t, n) {
                  var o = e.convertURL(n, "src");
                  var r;
                  d(t.src, n), Zt(yn(t), {
                    src: Ll(e) ? (r = n, r + (-1 === r.indexOf("?") ? "?" : "&") + new Date().getTime()) : n,
                    "data-mce-src": o
                  });
                }(l, n.url)) : n.error && (n.error.remove && (d(l.src, At.transparentSrc), r.push(l), c = !0), function (e, t) {
                  yw(e, Ia.translate(["Failed to upload image: {0}", t]));
                }(e, n.error.message)), {
                  element: l,
                  status: n.status,
                  uploadUri: n.url,
                  blobInfo: i,
                  removed: c
                };
              });
              return r.length > 0 && !PC(e) ? e.undoManager.transact(function () {
                q(ko(r), function (n) {
                  var o = An(n);
                  wo(n), o.each(function (e) {
                    return function (t) {
                      (function (e, t) {
                        return e.dom.isEmpty(t.dom) && C(e.schema.getTextBlockElements()[Ht(t)]);
                      })(e, t) && bo(t, hn('<br data-mce-bogus="1" />'));
                    };
                  }(e)), t.removeByUri(n.dom.src);
                });
              }) : s && e.undoManager.dispatchChange(), a;
            }));
          }));
        },
        u = function u() {
          return Pl(e) ? c() : Promise.resolve([]);
        },
        g = function g(e) {
          return ne(s, function (t) {
            return t(e);
          });
        },
        p = function p() {
          return o || (o = Ew(r, t)), o.findAll(e.getBody(), g).then(a(function (t) {
            var n = G(t, function (t) {
              return m(t) ? (yw(e, t), !1) : "blob" !== t.uriType;
            });
            return PC(e) || q(n, function (e) {
              d(e.image.src, e.blobInfo.blobUri()), e.image.src = e.blobInfo.blobUri(), e.image.removeAttribute("data-mce-src");
            }), n;
          }));
        },
        h = function h(n) {
          return n.replace(/src="(blob:[^"]+)"/g, function (n, o) {
            var s = r.getResultUri(o);
            if (s) return 'src="' + s + '"';
            var a = t.getByUri(o);
            return a || (a = X(e.editorManager.get(), function (e, t) {
              return e || t.editorUpload && t.editorUpload.blobCache.getByUri(o);
            }, void 0)), a ? 'src="data:' + a.blob().type + ";base64," + a.base64() + '"' : n;
          });
        };
      return e.on("SetContent", function () {
        Pl(e) ? u() : p();
      }), e.on("RawSaveContent", function (e) {
        e.content = h(e.content);
      }), e.on("GetContent", function (e) {
        e.source_view || "raw" === e.format || "tree" === e.format || (e.content = h(e.content));
      }), e.on("PostRender", function () {
        e.parser.addNodeFilter("img", function (e) {
          q(e, function (e) {
            var n = e.attr("src");
            if (!n || t.getByUri(n)) return;
            var o = r.getResultUri(n);
            o && e.attr("src", o);
          });
        });
      }), {
        blobCache: t,
        addFilter: function addFilter(e) {
          s.push(e);
        },
        uploadImages: c,
        uploadImagesAuto: u,
        scanForImages: p,
        destroy: function destroy() {
          t.destroy(), r.destroy(), o = n = null;
        }
      };
    },
    Tw = {
      remove_similar: !0,
      inherit: !1
    },
    Bw = _objectSpread({
      selector: "td,th"
    }, Tw),
    Dw = {
      tablecellbackgroundcolor: _objectSpread({
        styles: {
          backgroundColor: "%value"
        }
      }, Bw),
      tablecellverticalalign: _objectSpread({
        styles: {
          "vertical-align": "%value"
        }
      }, Bw),
      tablecellbordercolor: _objectSpread({
        styles: {
          borderColor: "%value"
        }
      }, Bw),
      tablecellclass: _objectSpread({
        classes: ["%value"]
      }, Bw),
      tableclass: _objectSpread({
        selector: "table",
        classes: ["%value"]
      }, Tw),
      tablecellborderstyle: _objectSpread({
        styles: {
          borderStyle: "%value"
        }
      }, Bw),
      tablecellborderwidth: _objectSpread({
        styles: {
          borderWidth: "%value"
        }
      }, Bw)
    },
    Pw = N(Dw),
    Lw = Dt.each,
    Mw = Oa.DOM,
    Iw = function Iw(e) {
      return C(e) && f(e);
    },
    Fw = function Fw(e, t) {
      var n = t && t.schema || ca({}),
        o = function o(e) {
          var t = m(e) ? {
              name: e,
              classes: [],
              attrs: {}
            } : e,
            n = Mw.create(t.name);
          return function (e, t) {
            t.classes.length > 0 && Mw.addClass(e, t.classes.join(" ")), Mw.setAttribs(e, t.attrs);
          }(n, t), n;
        },
        r = function r(e, t, s) {
          var a;
          var i = t[0],
            l = Iw(i) ? i.name : void 0,
            d = function (e, t) {
              var o = n.getElementRule(e.nodeName.toLowerCase()),
                r = null == o ? void 0 : o.parentsRequired;
              return !(!r || !r.length) && (t && H(r, t) ? t : r[0]);
            }(e, l);
          if (d) l === d ? (a = i, t = t.slice(1)) : a = d;else if (i) a = i, t = t.slice(1);else if (!s) return e;
          var c = a ? o(a) : Mw.create("div");
          c.appendChild(e), s && Dt.each(s, function (t) {
            var n = o(t);
            c.insertBefore(n, e);
          });
          var u = Iw(a) ? a.siblings : void 0;
          return r(c, t, u);
        },
        s = Mw.create("div");
      if (e.length > 0) {
        var _t122 = e[0],
          _n108 = o(_t122),
          _a21 = Iw(_t122) ? _t122.siblings : void 0;
        s.appendChild(r(_n108, e.slice(1), _a21));
      }
      return s;
    },
    Uw = function Uw(e) {
      var t = "div";
      var n = {
        name: t,
        classes: [],
        attrs: {},
        selector: e = Dt.trim(e)
      };
      return "*" !== e && (t = e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g, function (e, t, o, r, s) {
        switch (t) {
          case "#":
            n.attrs.id = o;
            break;
          case ".":
            n.classes.push(o);
            break;
          case ":":
            -1 !== Dt.inArray("checked disabled enabled read-only required".split(" "), o) && (n.attrs[o] = o);
        }
        if ("[" === r) {
          var _e127 = s.match(/([\w\-]+)(?:\=\"([^\"]+))?/);
          _e127 && (n.attrs[_e127[1]] = _e127[2]);
        }
        return "";
      })), n.name = t || "div", n;
    },
    zw = function zw(e, t) {
      var n = "",
        o = ud(e);
      if ("" === o) return "";
      var r = function r(e) {
          return m(e) ? e.replace(/%(\w+)/g, "") : "";
        },
        s = function s(t, n) {
          return Mw.getStyle(null != n ? n : e.getBody(), t, !0);
        };
      if (m(t)) {
        var _n109 = e.formatter.get(t);
        if (!_n109) return "";
        t = _n109[0];
      }
      if ("preview" in t) {
        var _e128 = t.preview;
        if (!1 === _e128) return "";
        o = _e128 || o;
      }
      var a,
        i = t.block || t.inline || "span";
      var l = (d = t.selector, m(d) ? (d = (d = d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g, "$1"), Dt.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/), function (e) {
        var t = Dt.map(e.split(/(?:~\+|~|\+)/), Uw),
          n = t.pop();
        return t.length && (n.siblings = t), n;
      }).reverse()) : []);
      var d;
      l.length > 0 ? (l[0].name || (l[0].name = i), i = t.selector, a = Fw(l, e)) : a = Fw([i], e);
      var c = Mw.select(i, a)[0] || a.firstChild;
      Lw(t.styles, function (e, t) {
        var n = r(e);
        n && Mw.setStyle(c, t, n);
      }), Lw(t.attributes, function (e, t) {
        var n = r(e);
        n && Mw.setAttrib(c, t, n);
      }), Lw(t.classes, function (e) {
        var t = r(e);
        Mw.hasClass(c, t) || Mw.addClass(c, t);
      }), e.dispatch("PreviewFormats"), Mw.setStyles(a, {
        position: "absolute",
        left: -65535
      }), e.getBody().appendChild(a);
      var u = s("fontSize"),
        f = /px$/.test(u) ? parseInt(u, 10) : 0;
      return Lw(o.split(" "), function (e) {
        var t = s(e, c);
        if (!("background-color" === e && /transparent|rgba\s*\([^)]+,\s*0\)/.test(t) && (t = s(e), "#ffffff" === Wu(t).toLowerCase()) || "color" === e && "#000000" === Wu(t).toLowerCase())) {
          if ("font-size" === e && /em|%$/.test(t)) {
            if (0 === f) return;
            t = parseFloat(t) / (/%$/.test(t) ? 100 : 1) * f + "px";
          }
          "border" === e && t && (n += "padding:0 2px;"), n += e + ":" + t + ";";
        }
      }), e.dispatch("AfterPreviewFormats"), Mw.remove(a), n;
    },
    jw = function jw(e) {
      var t = function (e) {
          var t = {},
            n = function n(e, o) {
              e && (m(e) ? (p(o) || (o = [o]), q(o, function (e) {
                v(e.deep) && (e.deep = !xm(e)), v(e.split) && (e.split = !xm(e) || km(e)), v(e.remove) && xm(e) && !km(e) && (e.remove = "none"), xm(e) && km(e) && (e.mixed = !0, e.block_expand = !0), m(e.classes) && (e.classes = e.classes.split(/\s+/));
              }), t[e] = o) : ge(e, function (e, t) {
                n(t, e);
              }));
            };
          return n(function (e) {
            var t = e.dom,
              n = e.schema.type,
              o = {
                valigntop: [{
                  selector: "td,th",
                  styles: {
                    verticalAlign: "top"
                  }
                }],
                valignmiddle: [{
                  selector: "td,th",
                  styles: {
                    verticalAlign: "middle"
                  }
                }],
                valignbottom: [{
                  selector: "td,th",
                  styles: {
                    verticalAlign: "bottom"
                  }
                }],
                alignleft: [{
                  selector: "figure.image",
                  collapsed: !1,
                  classes: "align-left",
                  ceFalseOverride: !0,
                  preview: "font-family font-size"
                }, {
                  selector: "figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",
                  styles: {
                    textAlign: "left"
                  },
                  inherit: !1,
                  preview: !1
                }, {
                  selector: "img,audio,video",
                  collapsed: !1,
                  styles: {
                    "float": "left"
                  },
                  preview: "font-family font-size"
                }, {
                  selector: "table",
                  collapsed: !1,
                  styles: {
                    marginLeft: "0px",
                    marginRight: "auto"
                  },
                  onformat: function onformat(e) {
                    t.setStyle(e, "float", null);
                  },
                  preview: "font-family font-size"
                }, {
                  selector: ".mce-preview-object,[data-ephox-embed-iri]",
                  ceFalseOverride: !0,
                  styles: {
                    "float": "left"
                  }
                }],
                aligncenter: [{
                  selector: "figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",
                  styles: {
                    textAlign: "center"
                  },
                  inherit: !1,
                  preview: "font-family font-size"
                }, {
                  selector: "figure.image",
                  collapsed: !1,
                  classes: "align-center",
                  ceFalseOverride: !0,
                  preview: "font-family font-size"
                }, {
                  selector: "img,audio,video",
                  collapsed: !1,
                  styles: {
                    display: "block",
                    marginLeft: "auto",
                    marginRight: "auto"
                  },
                  preview: !1
                }, {
                  selector: "table",
                  collapsed: !1,
                  styles: {
                    marginLeft: "auto",
                    marginRight: "auto"
                  },
                  preview: "font-family font-size"
                }, {
                  selector: ".mce-preview-object",
                  ceFalseOverride: !0,
                  styles: {
                    display: "table",
                    marginLeft: "auto",
                    marginRight: "auto"
                  },
                  preview: !1
                }, {
                  selector: "[data-ephox-embed-iri]",
                  ceFalseOverride: !0,
                  styles: {
                    marginLeft: "auto",
                    marginRight: "auto"
                  },
                  preview: !1
                }],
                alignright: [{
                  selector: "figure.image",
                  collapsed: !1,
                  classes: "align-right",
                  ceFalseOverride: !0,
                  preview: "font-family font-size"
                }, {
                  selector: "figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",
                  styles: {
                    textAlign: "right"
                  },
                  inherit: !1,
                  preview: "font-family font-size"
                }, {
                  selector: "img,audio,video",
                  collapsed: !1,
                  styles: {
                    "float": "right"
                  },
                  preview: "font-family font-size"
                }, {
                  selector: "table",
                  collapsed: !1,
                  styles: {
                    marginRight: "0px",
                    marginLeft: "auto"
                  },
                  onformat: function onformat(e) {
                    t.setStyle(e, "float", null);
                  },
                  preview: "font-family font-size"
                }, {
                  selector: ".mce-preview-object,[data-ephox-embed-iri]",
                  ceFalseOverride: !0,
                  styles: {
                    "float": "right"
                  },
                  preview: !1
                }],
                alignjustify: [{
                  selector: "figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",
                  styles: {
                    textAlign: "justify"
                  },
                  inherit: !1,
                  preview: "font-family font-size"
                }],
                bold: [{
                  inline: "strong",
                  remove: "all",
                  preserve_attributes: ["class", "style"]
                }, {
                  inline: "span",
                  styles: {
                    fontWeight: "bold"
                  }
                }, {
                  inline: "b",
                  remove: "all",
                  preserve_attributes: ["class", "style"]
                }],
                italic: [{
                  inline: "em",
                  remove: "all",
                  preserve_attributes: ["class", "style"]
                }, {
                  inline: "span",
                  styles: {
                    fontStyle: "italic"
                  }
                }, {
                  inline: "i",
                  remove: "all",
                  preserve_attributes: ["class", "style"]
                }],
                underline: [{
                  inline: "span",
                  styles: {
                    textDecoration: "underline"
                  },
                  exact: !0
                }, {
                  inline: "u",
                  remove: "all",
                  preserve_attributes: ["class", "style"]
                }],
                strikethrough: function () {
                  var e = {
                      inline: "span",
                      styles: {
                        textDecoration: "line-through"
                      },
                      exact: !0
                    },
                    t = {
                      inline: "strike",
                      remove: "all",
                      preserve_attributes: ["class", "style"]
                    },
                    o = {
                      inline: "s",
                      remove: "all",
                      preserve_attributes: ["class", "style"]
                    };
                  return "html4" !== n ? [o, e, t] : [e, o, t];
                }(),
                forecolor: {
                  inline: "span",
                  styles: {
                    color: "%value"
                  },
                  links: !0,
                  remove_similar: !0,
                  clear_child_styles: !0
                },
                hilitecolor: {
                  inline: "span",
                  styles: {
                    backgroundColor: "%value"
                  },
                  links: !0,
                  remove_similar: !0,
                  clear_child_styles: !0
                },
                fontname: {
                  inline: "span",
                  toggle: !1,
                  styles: {
                    fontFamily: "%value"
                  },
                  clear_child_styles: !0
                },
                fontsize: {
                  inline: "span",
                  toggle: !1,
                  styles: {
                    fontSize: "%value"
                  },
                  clear_child_styles: !0
                },
                lineheight: {
                  selector: "h1,h2,h3,h4,h5,h6,p,li,td,th,div",
                  styles: {
                    lineHeight: "%value"
                  }
                },
                fontsize_class: {
                  inline: "span",
                  attributes: {
                    "class": "%value"
                  }
                },
                blockquote: {
                  block: "blockquote",
                  wrapper: !0,
                  remove: "all"
                },
                subscript: {
                  inline: "sub"
                },
                superscript: {
                  inline: "sup"
                },
                code: {
                  inline: "code"
                },
                link: {
                  inline: "a",
                  selector: "a",
                  remove: "all",
                  split: !0,
                  deep: !0,
                  onmatch: function onmatch(e, t, n) {
                    return $o(e) && e.hasAttribute("href");
                  },
                  onformat: function onformat(e, n, o) {
                    Dt.each(o, function (n, o) {
                      t.setAttrib(e, o, n);
                    });
                  }
                },
                lang: {
                  inline: "span",
                  clear_child_styles: !0,
                  remove_similar: !0,
                  attributes: {
                    lang: "%value",
                    "data-mce-lang": function dataMceLang(e) {
                      var t;
                      return null !== (t = null == e ? void 0 : e.customValue) && void 0 !== t ? t : null;
                    }
                  }
                },
                removeformat: [{
                  selector: "b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",
                  remove: "all",
                  split: !0,
                  expand: !1,
                  block_expand: !0,
                  deep: !0
                }, {
                  selector: "span",
                  attributes: ["style", "class"],
                  remove: "empty",
                  split: !0,
                  expand: !1,
                  deep: !0
                }, {
                  selector: "*",
                  attributes: ["style", "class"],
                  split: !1,
                  expand: !1,
                  deep: !0
                }]
              };
            return Dt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/), function (e) {
              o[e] = {
                block: e,
                remove: "all"
              };
            }), o;
          }(e)), n(Pw()), n(cd(e)), {
            get: function get(e) {
              return C(e) ? t[e] : t;
            },
            has: function has(e) {
              return ke(t, e);
            },
            register: n,
            unregister: function unregister(e) {
              return e && t[e] && delete t[e], t;
            }
          };
        }(e),
        n = Da({});
      return function (e) {
        e.addShortcut("meta+b", "", "Bold"), e.addShortcut("meta+i", "", "Italic"), e.addShortcut("meta+u", "", "Underline");
        for (var _t123 = 1; _t123 <= 6; _t123++) e.addShortcut("access+" + _t123, "", ["FormatBlock", !1, "h" + _t123]);
        e.addShortcut("access+7", "", ["FormatBlock", !1, "p"]), e.addShortcut("access+8", "", ["FormatBlock", !1, "div"]), e.addShortcut("access+9", "", ["FormatBlock", !1, "address"]);
      }(e), function (e) {
        e.on("mouseup keydown", function (t) {
          var n;
          (function (e, t, n) {
            var o = e.selection,
              r = e.getBody();
            Ab(e, null, n), 8 !== t && 46 !== t || !o.isCollapsed() || o.getStart().innerHTML !== Eb || Ab(e, ku(r, o.getStart())), 37 !== t && 39 !== t || Ab(e, ku(r, o.getStart()));
          })(e, t.keyCode, (n = e.selection.getRng().endContainer, Jo(n) && $e(n.data, pr)));
        });
      }(e), PC(e) || function (e, t) {
        e.set({}), t.on("NodeChange", function (n) {
          Sv(t, n.element, e.get());
        }), t.on("FormatApply FormatRemove", function (n) {
          var o = I.from(n.node).map(function (e) {
            return rm(e) ? e : e.startContainer;
          }).bind(function (e) {
            return $o(e) ? I.some(e) : I.from(e.parentElement);
          }).getOrThunk(function () {
            return xv(t);
          });
          Sv(t, o, e.get());
        });
      }(n, e), {
        get: t.get,
        has: t.has,
        register: t.register,
        unregister: t.unregister,
        apply: function apply(t, n, o) {
          (function (e, t, n, o) {
            MC(e).formatter.apply(t, n, o);
          })(e, t, n, o);
        },
        remove: function remove(t, n, o, r) {
          (function (e, t, n, o, r) {
            MC(e).formatter.remove(t, n, o, r);
          })(e, t, n, o, r);
        },
        toggle: function toggle(t, n, o) {
          (function (e, t, n, o) {
            MC(e).formatter.toggle(t, n, o);
          })(e, t, n, o);
        },
        match: function match(t, n, o, r) {
          return function (e, t, n, o, r) {
            return MC(e).formatter.match(t, n, o, r);
          }(e, t, n, o, r);
        },
        closest: function closest(t) {
          return function (e, t) {
            return MC(e).formatter.closest(t);
          }(e, t);
        },
        matchAll: function matchAll(t, n) {
          return function (e, t, n) {
            return MC(e).formatter.matchAll(t, n);
          }(e, t, n);
        },
        matchNode: function matchNode(t, n, o, r) {
          return function (e, t, n, o, r) {
            return MC(e).formatter.matchNode(t, n, o, r);
          }(e, t, n, o, r);
        },
        canApply: function canApply(t) {
          return function (e, t) {
            return MC(e).formatter.canApply(t);
          }(e, t);
        },
        formatChanged: function formatChanged(t, o, r, s) {
          return function (e, t, n, o, r, s) {
            return MC(e).formatter.formatChanged(t, n, o, r, s);
          }(e, n, t, o, r, s);
        },
        getCssText: O(zw, e)
      };
    },
    Hw = function Hw(e) {
      switch (e.toLowerCase()) {
        case "undo":
        case "redo":
        case "mcefocus":
          return !0;
        default:
          return !1;
      }
    },
    $w = function $w(e) {
      var t = za(),
        n = Da(0),
        o = Da(0),
        r = {
          data: [],
          typing: !1,
          beforeChange: function beforeChange() {
            (function (e, t, n) {
              MC(e).undoManager.beforeChange(t, n);
            })(e, n, t);
          },
          add: function add(s, a) {
            return function (e, t, n, o, r, s, a) {
              return MC(e).undoManager.add(t, n, o, r, s, a);
            }(e, r, o, n, t, s, a);
          },
          dispatchChange: function dispatchChange() {
            e.setDirty(!0);
            var t = SC(e);
            t.bookmark = nl(e.selection), e.dispatch("change", {
              level: t,
              lastLevel: ie(r.data, o.get()).getOrUndefined()
            });
          },
          undo: function undo() {
            return function (e, t, n, o) {
              return MC(e).undoManager.undo(t, n, o);
            }(e, r, n, o);
          },
          redo: function redo() {
            return function (e, t, n) {
              return MC(e).undoManager.redo(t, n);
            }(e, o, r.data);
          },
          clear: function clear() {
            (function (e, t, n) {
              MC(e).undoManager.clear(t, n);
            })(e, r, o);
          },
          reset: function reset() {
            (function (e, t) {
              MC(e).undoManager.reset(t);
            })(e, r);
          },
          hasUndo: function hasUndo() {
            return function (e, t, n) {
              return MC(e).undoManager.hasUndo(t, n);
            }(e, r, o);
          },
          hasRedo: function hasRedo() {
            return function (e, t, n) {
              return MC(e).undoManager.hasRedo(t, n);
            }(e, r, o);
          },
          transact: function transact(t) {
            return function (e, t, n, o) {
              return MC(e).undoManager.transact(t, n, o);
            }(e, r, n, t);
          },
          ignore: function ignore(t) {
            (function (e, t, n) {
              MC(e).undoManager.ignore(t, n);
            })(e, n, t);
          },
          extra: function extra(t, n) {
            (function (e, t, n, o, r) {
              MC(e).undoManager.extra(t, n, o, r);
            })(e, r, o, t, n);
          }
        };
      return PC(e) || function (e, t, n) {
        var o = Da(!1),
          r = function r(e) {
            TC(t, !1, n), t.add({}, e);
          };
        e.on("init", function () {
          t.add();
        }), e.on("BeforeExecCommand", function (e) {
          var o = e.command;
          Hw(o) || (BC(t, n), t.beforeChange());
        }), e.on("ExecCommand", function (e) {
          var t = e.command;
          Hw(t) || r(e);
        }), e.on("ObjectResizeStart cut", function () {
          t.beforeChange();
        }), e.on("SaveContent ObjectResized blur", r), e.on("dragend", r), e.on("keyup", function (n) {
          var s = n.keyCode;
          if (n.isDefaultPrevented()) return;
          var a = At.os.isMacOS() && "Meta" === n.key;
          (s >= 33 && s <= 36 || s >= 37 && s <= 40 || 45 === s || n.ctrlKey || a) && (r(), e.nodeChanged()), 46 !== s && 8 !== s || e.nodeChanged(), o.get() && t.typing && !AC(SC(e), t.data[0]) && (e.isDirty() || e.setDirty(!0), e.dispatch("TypingUndo"), o.set(!1), e.nodeChanged());
        }), e.on("keydown", function (e) {
          var s = e.keyCode;
          if (e.isDefaultPrevented()) return;
          if (s >= 33 && s <= 36 || s >= 37 && s <= 40 || 45 === s) return void (t.typing && r(e));
          var a = e.ctrlKey && !e.altKey || e.metaKey;
          if ((s < 16 || s > 20) && 224 !== s && 91 !== s && !t.typing && !a) return t.beforeChange(), TC(t, !0, n), t.add({}, e), void o.set(!0);
          (At.os.isMacOS() ? e.metaKey : e.ctrlKey && !e.altKey) && t.beforeChange();
        }), e.on("mousedown", function (e) {
          t.typing && r(e);
        }), e.on("input", function (e) {
          var t;
          e.inputType && ("insertReplacementText" === e.inputType || "insertText" === (t = e).inputType && null === t.data || function (e) {
            return "insertFromPaste" === e.inputType || "insertFromDrop" === e.inputType;
          }(e)) && r(e);
        }), e.on("AddUndo Undo Redo ClearUndos", function (t) {
          t.isDefaultPrevented() || e.nodeChanged();
        });
      }(e, r, n), function (e) {
        e.addShortcut("meta+z", "", "Undo"), e.addShortcut("meta+y,meta+shift+z", "", "Redo");
      }(e), r;
    },
    Vw = [9, 27, ef.HOME, ef.END, 19, 20, 44, 144, 145, 33, 34, 45, 16, 17, 18, 91, 92, 93, ef.DOWN, ef.UP, ef.LEFT, ef.RIGHT].concat(At.browser.isFirefox() ? [224] : []),
    qw = "data-mce-placeholder",
    Ww = function Ww(e) {
      return "keydown" === e.type || "keyup" === e.type;
    },
    Kw = function Kw(e) {
      var t = e.keyCode;
      return t === ef.BACKSPACE || t === ef.DELETE;
    },
    Gw = function Gw(e, t) {
      return {
        from: e,
        to: t
      };
    },
    Yw = function Yw(e, t) {
      var n = yn(e),
        o = yn(t.container());
      return fh(n, o).map(function (e) {
        return function (e, t) {
          return {
            block: e,
            position: t
          };
        }(e, t);
      });
    },
    Xw = function Xw(e, t) {
      return Jn(t, function (e) {
        return Ar(e) || ar(e.dom);
      }, function (t) {
        return En(t, e);
      }).filter(Wt).getOr(e);
    },
    Qw = function Qw(e) {
      var t = function (e) {
        var t = Mn(e);
        return Z(t, xr).fold(N(t), function (e) {
          return t.slice(0, e);
        });
      }(e);
      return q(t, wo), t;
    },
    Jw = function Jw(e, t) {
      var n = pp(t, e);
      return J(n.reverse(), function (e) {
        return bs(e);
      }).each(wo);
    },
    Zw = function Zw(e, t, n, o) {
      if (bs(n)) return Pr(n), yu(n.dom);
      0 === G(Pn(o), function (e) {
        return !bs(e);
      }).length && bs(t) && go(o, bn("br"));
      var r = vu(n.dom, Li.before(o.dom));
      return q(Qw(t), function (e) {
        go(o, e);
      }), Jw(e, t), r;
    },
    ex = function ex(e, t, n) {
      if (bs(n)) {
        if (bs(t)) {
          var _e129 = function _e129(e) {
              var t = function t(e, n) {
                return Fn(e).fold(function () {
                  return n;
                }, function (e) {
                  return kr(e) ? t(e, n.concat(oi(e))) : n;
                });
              };
              return t(e, []);
            },
            _o84 = Y(_e129(n), function (e, t) {
              return vo(e, t), t;
            }, Dr());
          Co(t), bo(t, _o84);
        }
        return wo(n), yu(t.dom);
      }
      var o = Cu(n.dom);
      return q(Qw(t), function (e) {
        bo(n, e);
      }), Jw(e, t), o;
    },
    tx = function tx(e, t) {
      hu(e, t.dom).bind(function (e) {
        return I.from(e.getNode());
      }).map(yn).filter(Er).each(wo);
    },
    nx = function nx(e, t, n) {
      return tx(!0, t), tx(!1, n), function (e, t) {
        return Sn(t, e) ? function (e, t) {
          var n = pp(t, e);
          return I.from(n[n.length - 1]);
        }(t, e) : I.none();
      }(t, n).fold(O(ex, e, t, n), O(Zw, e, t, n));
    },
    ox = function ox(e, t, n, o) {
      return t ? nx(e, o, n) : nx(e, n, o);
    },
    rx = function rx(e, t) {
      var n = yn(e.getBody()),
        o = function (e, t, n) {
          return n.collapsed ? function (e, t, n) {
            var o = Yw(e, Li.fromRangeStart(n)),
              r = o.bind(function (n) {
                return fu(t, e, n.position).bind(function (n) {
                  return Yw(e, n).map(function (n) {
                    return function (e, t, n) {
                      return rr(n.position.getNode()) && !bs(n.block) ? hu(!1, n.block.dom).bind(function (o) {
                        return o.isEqual(n.position) ? fu(t, e, o).bind(function (t) {
                          return Yw(e, t);
                        }) : I.some(n);
                      }).getOr(n) : n;
                    }(e, t, n);
                  });
                });
              });
            return Mt(o, r, Gw).filter(function (t) {
              return function (e) {
                return !En(e.from.block, e.to.block);
              }(t) && function (e, t) {
                var n = yn(e);
                return En(Xw(n, t.from.block), Xw(n, t.to.block));
              }(e, t) && function (e) {
                return !1 === ir(e.from.block.dom) && !1 === ir(e.to.block.dom);
              }(t) && function (e) {
                var t = function t(e) {
                  return Sr(e) || _s(e.dom);
                };
                return t(e.from.block) && t(e.to.block);
              }(t);
            });
          }(e, t, n) : I.none();
        }(n.dom, t, e.selection.getRng()).map(function (o) {
          return function () {
            ox(n, t, o.from.block, o.to.block).each(function (t) {
              e.selection.setRng(t.toRange());
            });
          };
        });
      return o;
    },
    sx = function sx(e, t) {
      var n = yn(t),
        o = O(En, e);
      return Qn(n, Ar, o).isSome();
    },
    ax = function ax(e) {
      var t = yn(e.getBody());
      return function (e, t) {
        var n = vu(e.dom, Li.fromRangeStart(t)).isNone(),
          o = bu(e.dom, Li.fromRangeEnd(t)).isNone();
        return !function (e, t) {
          return sx(e, t.startContainer) || sx(e, t.endContainer);
        }(e, t) && n && o;
      }(t, e.selection.getRng()) ? function (e) {
        return I.some(function () {
          e.setContent(""), e.selection.setCursorLocation();
        });
      }(e) : function (e, t) {
        var n = t.getRng();
        return Mt(fh(e, yn(n.startContainer)), fh(e, yn(n.endContainer)), function (o, r) {
          return En(o, r) ? I.none() : I.some(function () {
            n.deleteContents(), ox(e, !0, o, r).each(function (e) {
              t.setRng(e.toRange());
            });
          });
        }).getOr(I.none());
      }(t, e.selection);
    },
    ix = function ix(e, t) {
      return e.selection.isCollapsed() ? I.none() : ax(e);
    },
    lx = function lx(e, t, n, o, r) {
      return I.from(t._selectionOverrides.showCaret(e, n, o, r));
    },
    dx = function dx(e, t) {
      return e.dispatch("BeforeObjectSelected", {
        target: t
      }).isDefaultPrevented() ? I.none() : I.some(function (e) {
        var t = e.ownerDocument.createRange();
        return t.selectNode(e), t;
      }(t));
    },
    cx = function cx(e, t, n) {
      return t.collapsed ? function (e, t, n) {
        var o = Wc(1, e.getBody(), t),
          r = Li.fromRangeStart(o),
          s = r.getNode();
        if (kc(s)) return lx(1, e, s, !r.isAtEnd(), !1);
        var a = r.getNode(!0);
        if (kc(a)) return lx(1, e, a, !1, !1);
        var i = $h(e.dom.getRoot(), r.getNode());
        return kc(i) ? lx(1, e, i, !1, n) : I.none();
      }(e, t, n).getOr(t) : t;
    },
    ux = function ux(e) {
      return mp(e) || lp(e);
    },
    mx = function mx(e) {
      return fp(e) || dp(e);
    },
    fx = function fx(e, t, n, o, r, s) {
      lx(o, e, s.getNode(!r), r, !0).each(function (n) {
        if (t.collapsed) {
          var _e130 = t.cloneRange();
          r ? _e130.setEnd(n.startContainer, n.startOffset) : _e130.setStart(n.endContainer, n.endOffset), _e130.deleteContents();
        } else t.deleteContents();
        e.selection.setRng(n);
      }), function (e, t) {
        Jo(t) && 0 === t.data.length && e.remove(t);
      }(e.dom, n);
    },
    gx = function gx(e, t) {
      return function (e, t) {
        var n = e.selection.getRng();
        if (!Jo(n.commonAncestorContainer)) return I.none();
        var o = t ? Jc.Forwards : Jc.Backwards,
          r = du(e.getBody()),
          s = O(Xc, t ? r.next : r.prev),
          a = t ? ux : mx,
          i = Gc(o, e.getBody(), n),
          l = s(i),
          d = l ? ih(t, l) : l;
        if (!d || !Qc(i, d)) return I.none();
        if (a(d)) return I.some(function () {
          return fx(e, n, i.getNode(), o, t, d);
        });
        var c = s(d);
        return c && a(c) && Qc(d, c) ? I.some(function () {
          return fx(e, n, i.getNode(), o, t, c);
        }) : I.none();
      }(e, t);
    },
    px = function px(e, t) {
      var n = e.getBody();
      return t ? yu(n).filter(mp) : Cu(n).filter(fp);
    },
    hx = function hx(e) {
      var t = e.selection.getRng();
      return !t.collapsed && (px(e, !0).exists(function (e) {
        return e.isEqual(Li.fromRangeStart(t));
      }) || px(e, !1).exists(function (e) {
        return e.isEqual(Li.fromRangeEnd(t));
      }));
    },
    bx = al([{
      remove: ["element"]
    }, {
      moveToElement: ["element"]
    }, {
      moveToPosition: ["position"]
    }]),
    vx = function vx(e, t, n) {
      return fu(t, e, n).bind(function (o) {
        return r = o.getNode(), C(r) && (Ar(yn(r)) || Nr(yn(r))) || function (e, t, n, o) {
          var r = function r(t) {
            return kr(yn(t)) && !Uc(n, o, e);
          };
          return Kc(!t, n).fold(function () {
            return Kc(t, o).fold(L, r);
          }, r);
        }(e, t, n, o) ? I.none() : t && ir(o.getNode()) || !t && ir(o.getNode(!0)) ? function (e, t, n, o) {
          var r = o.getNode(!t);
          return fh(yn(e), yn(n.getNode())).map(function (e) {
            return bs(e) ? bx.remove(e.dom) : bx.moveToElement(r);
          }).orThunk(function () {
            return I.some(bx.moveToElement(r));
          });
        }(e, t, n, o) : t && fp(n) || !t && mp(n) ? I.some(bx.moveToPosition(o)) : I.none();
        var r;
      });
    },
    yx = function yx(e, t) {
      return I.from($h(e.getBody(), t));
    },
    Cx = function Cx(e, t) {
      var n = e.selection.getNode();
      return yx(e, n).filter(ir).fold(function () {
        return function (e, t, n) {
          var o = Wc(t ? 1 : -1, e, n),
            r = Li.fromRangeStart(o),
            s = yn(e);
          return !t && fp(r) ? I.some(bx.remove(r.getNode(!0))) : t && mp(r) ? I.some(bx.remove(r.getNode())) : !t && mp(r) && Np(s, r) ? Rp(s, r).map(function (e) {
            return bx.remove(e.getNode());
          }) : t && fp(r) && _p(s, r) ? Ap(s, r).map(function (e) {
            return bx.remove(e.getNode());
          }) : function (e, t, n) {
            return function (e, t) {
              var n = t.getNode(!e),
                o = e ? "after" : "before";
              return $o(n) && n.getAttribute("data-mce-caret") === o;
            }(t, n) ? function (e, t) {
              return y(t) ? I.none() : e && ir(t.nextSibling) ? I.some(bx.moveToElement(t.nextSibling)) : !e && ir(t.previousSibling) ? I.some(bx.moveToElement(t.previousSibling)) : I.none();
            }(t, n.getNode(!t)).orThunk(function () {
              return vx(e, t, n);
            }) : vx(e, t, n).bind(function (t) {
              return function (e, t, n) {
                return n.fold(function (e) {
                  return I.some(bx.remove(e));
                }, function (e) {
                  return I.some(bx.moveToElement(e));
                }, function (n) {
                  return Uc(t, n, e) ? I.none() : I.some(bx.moveToPosition(n));
                });
              }(e, n, t);
            });
          }(e, t, r);
        }(e.getBody(), t, e.selection.getRng()).map(function (n) {
          return function () {
            return n.fold(function (e, t) {
              return function (n) {
                return e._selectionOverrides.hideFakeCaret(), nh(e, t, yn(n)), !0;
              };
            }(e, t), function (e, t) {
              return function (n) {
                var o = t ? Li.before(n) : Li.after(n);
                return e.selection.setRng(o.toRange()), !0;
              };
            }(e, t), function (e) {
              return function (t) {
                return e.selection.setRng(t.toRange()), !0;
              };
            }(e));
          };
        });
      }, function () {
        return I.some(E);
      });
    },
    wx = function wx(e) {
      var t = e.dom,
        n = e.selection,
        o = $h(e.getBody(), n.getNode());
      if (ar(o) && t.isBlock(o) && t.isEmpty(o)) {
        var _e131 = t.create("br", {
          "data-mce-bogus": "1"
        });
        t.setHTML(o, ""), o.appendChild(_e131), n.setRng(Li.before(_e131).toRange());
      }
      return !0;
    },
    xx = function xx(e, t) {
      return e.selection.isCollapsed() ? Cx(e, t) : function (e, t) {
        var n = e.selection.getNode();
        return ir(n) && !lr(n) ? yx(e, n.parentNode).filter(ir).fold(function () {
          return I.some(function () {
            var n;
            n = yn(e.getBody()), q(Fo(n, ".mce-offscreen-selection"), wo), nh(e, t, yn(e.selection.getNode())), gh(e);
          });
        }, function () {
          return I.some(E);
        }) : hx(e) ? I.some(function () {
          bh(e, e.selection.getRng(), yn(e.getBody()));
        }) : I.none();
      }(e, t);
    },
    kx = function kx(e, t) {
      return e.selection.isCollapsed() ? function (e, t) {
        var n = Li.fromRangeStart(e.selection.getRng());
        return fu(t, e.getBody(), n).filter(function (e) {
          return t ? ap(e) : ip(e);
        }).bind(function (e) {
          return zc(t ? 0 : -1, e);
        }).map(function (t) {
          return function () {
            return e.selection.select(t);
          };
        });
      }(e, t) : I.none();
    },
    Ex = Jo,
    Sx = function Sx(e) {
      return Ex(e) && e.data[0] === Mr;
    },
    _x = function _x(e) {
      return Ex(e) && e.data[e.data.length - 1] === Mr;
    },
    Nx = function Nx(e) {
      var t;
      return (null !== (t = e.ownerDocument) && void 0 !== t ? t : document).createTextNode(Mr);
    },
    Rx = function Rx(e, t) {
      return e ? function (e) {
        var t;
        if (Ex(e.previousSibling)) return _x(e.previousSibling) || e.previousSibling.appendData(Mr), e.previousSibling;
        if (Ex(e)) return Sx(e) || e.insertData(0, Mr), e;
        {
          var _n110 = Nx(e);
          return null === (t = e.parentNode) || void 0 === t || t.insertBefore(_n110, e), _n110;
        }
      }(t) : function (e) {
        var t, n;
        if (Ex(e.nextSibling)) return Sx(e.nextSibling) || e.nextSibling.insertData(0, Mr), e.nextSibling;
        if (Ex(e)) return _x(e) || e.appendData(Mr), e;
        {
          var _o85 = Nx(e);
          return e.nextSibling ? null === (t = e.parentNode) || void 0 === t || t.insertBefore(_o85, e.nextSibling) : null === (n = e.parentNode) || void 0 === n || n.appendChild(_o85), _o85;
        }
      }(t);
    },
    Ax = O(Rx, !0),
    Ox = O(Rx, !1),
    Tx = function Tx(e, t) {
      return Jo(e.container()) ? Rx(t, e.container()) : Rx(t, e.getNode());
    },
    Bx = function Bx(e, t) {
      var n = t.get();
      return n && e.container() === n && Hr(n);
    },
    Dx = function Dx(e, t) {
      return t.fold(function (t) {
        hc(e.get());
        var n = Ax(t);
        return e.set(n), I.some(Li(n, n.length - 1));
      }, function (t) {
        return yu(t).map(function (t) {
          if (Bx(t, e)) {
            var _t124 = e.get();
            return Li(_t124, 1);
          }
          {
            hc(e.get());
            var _n111 = Tx(t, !0);
            return e.set(_n111), Li(_n111, 1);
          }
        });
      }, function (t) {
        return Cu(t).map(function (t) {
          if (Bx(t, e)) {
            var _t125 = e.get();
            return Li(_t125, _t125.length - 1);
          }
          {
            hc(e.get());
            var _n112 = Tx(t, !1);
            return e.set(_n112), Li(_n112, _n112.length - 1);
          }
        });
      }, function (t) {
        hc(e.get());
        var n = Ox(t);
        return e.set(n), I.some(Li(n, 1));
      });
    },
    Px = function Px(e, t) {
      for (var _n113 = 0; _n113 < e.length; _n113++) {
        var _o86 = e[_n113].apply(null, t);
        if (_o86.isSome()) return _o86;
      }
      return I.none();
    },
    Lx = al([{
      before: ["element"]
    }, {
      start: ["element"]
    }, {
      end: ["element"]
    }, {
      after: ["element"]
    }]),
    Mx = function Mx(e, t) {
      return Fc(t, e) || e;
    },
    Ix = function Ix(e, t, n) {
      var o = lh(n),
        r = Mx(t, o.container());
      return ah(e, r, o).fold(function () {
        return bu(r, o).bind(O(ah, e, r)).map(function (e) {
          return Lx.before(e);
        });
      }, I.none);
    },
    Fx = function Fx(e, t) {
      return null === ku(e, t);
    },
    Ux = function Ux(e, t, n) {
      return ah(e, t, n).filter(O(Fx, t));
    },
    zx = function zx(e, t, n) {
      var o = dh(n);
      return Ux(e, t, o).bind(function (e) {
        return vu(e, o).isNone() ? I.some(Lx.start(e)) : I.none();
      });
    },
    jx = function jx(e, t, n) {
      var o = lh(n);
      return Ux(e, t, o).bind(function (e) {
        return bu(e, o).isNone() ? I.some(Lx.end(e)) : I.none();
      });
    },
    Hx = function Hx(e, t, n) {
      var o = dh(n),
        r = Mx(t, o.container());
      return ah(e, r, o).fold(function () {
        return vu(r, o).bind(O(ah, e, r)).map(function (e) {
          return Lx.after(e);
        });
      }, I.none);
    },
    $x = function $x(e) {
      return !sh(qx(e));
    },
    Vx = function Vx(e, t, n) {
      return Px([Ix, zx, jx, Hx], [e, t, n]).filter($x);
    },
    qx = function qx(e) {
      return e.fold(R, R, R, R);
    },
    Wx = function Wx(e) {
      return e.fold(N("before"), N("start"), N("end"), N("after"));
    },
    Kx = function Kx(e) {
      return e.fold(Lx.before, Lx.before, Lx.after, Lx.after);
    },
    Gx = function Gx(e) {
      return e.fold(Lx.start, Lx.start, Lx.end, Lx.end);
    },
    Yx = function Yx(e, t, n, o, r, s) {
      return Mt(ah(t, n, o), ah(t, n, r), function (t, o) {
        return t !== o && function (e, t, n) {
          var o = Fc(t, e),
            r = Fc(n, e);
          return C(o) && o === r;
        }(n, t, o) ? Lx.after(e ? t : o) : s;
      }).getOr(s);
    },
    Xx = function Xx(e, t) {
      return e.fold(M, function (e) {
        return o = t, !(Wx(n = e) === Wx(o) && qx(n) === qx(o));
        var n, o;
      });
    },
    Qx = function Qx(e, t) {
      return e ? t.fold(S(I.some, Lx.start), I.none, S(I.some, Lx.after), I.none) : t.fold(I.none, S(I.some, Lx.before), I.none, S(I.some, Lx.end));
    },
    Jx = function Jx(e, t, n) {
      var o = e ? 1 : -1;
      return t.setRng(Li(n.container(), n.offset() + o).toRange()), t.getSel().modify("move", e ? "forward" : "backward", "word"), !0;
    };
  var Zx;
  !function (e) {
    e[e.Br = 0] = "Br", e[e.Block = 1] = "Block", e[e.Wrap = 2] = "Wrap", e[e.Eol = 3] = "Eol";
  }(Zx || (Zx = {}));
  var ek = function ek(e, t) {
      return e === Jc.Backwards ? oe(t) : t;
    },
    tk = function tk(e, t, n) {
      return e === Jc.Forwards ? t.next(n) : t.prev(n);
    },
    nk = function nk(e, t, n, o) {
      return rr(o.getNode(t === Jc.Forwards)) ? Zx.Br : !1 === Uc(n, o) ? Zx.Block : Zx.Wrap;
    },
    ok = function ok(e, t, n, o) {
      var r = du(n);
      var s = o;
      var a = [];
      for (; s;) {
        var _n114 = tk(t, r, s);
        if (!_n114) break;
        if (rr(_n114.getNode(!1))) return t === Jc.Forwards ? {
          positions: ek(t, a).concat([_n114]),
          breakType: Zx.Br,
          breakAt: I.some(_n114)
        } : {
          positions: ek(t, a),
          breakType: Zx.Br,
          breakAt: I.some(_n114)
        };
        if (_n114.isVisible()) {
          if (e(s, _n114)) {
            var _e132 = nk(0, t, s, _n114);
            return {
              positions: ek(t, a),
              breakType: _e132,
              breakAt: I.some(_n114)
            };
          }
          a.push(_n114), s = _n114;
        } else s = _n114;
      }
      return {
        positions: ek(t, a),
        breakType: Zx.Eol,
        breakAt: I.none()
      };
    },
    rk = function rk(e, t, n, o) {
      return t(n, o).breakAt.map(function (o) {
        var r = t(n, o).positions;
        return e === Jc.Backwards ? r.concat(o) : [o].concat(r);
      }).getOr([]);
    },
    sk = function sk(e, t) {
      return X(e, function (e, n) {
        return e.fold(function () {
          return I.some(n);
        }, function (o) {
          return Mt(le(o.getClientRects()), le(n.getClientRects()), function (e, r) {
            var s = Math.abs(t - e.left);
            return Math.abs(t - r.left) <= s ? n : o;
          }).or(e);
        });
      }, I.none());
    },
    ak = function ak(e, t) {
      return le(t.getClientRects()).bind(function (t) {
        return sk(e, t.left);
      });
    },
    ik = O(ok, Li.isAbove, -1),
    lk = O(ok, Li.isBelow, 1),
    dk = O(rk, -1, ik),
    ck = O(rk, 1, lk),
    uk = function uk(e, t) {
      return ik(e, t).breakAt.isNone();
    },
    mk = function mk(e, t) {
      return lk(e, t).breakAt.isNone();
    },
    fk = function fk(e, t) {
      return ak(dk(e, t), t);
    },
    gk = function gk(e, t) {
      return ak(ck(e, t), t);
    },
    pk = ir,
    hk = function hk(e, t) {
      return Math.abs(e.left - t);
    },
    bk = function bk(e, t) {
      return Math.abs(e.right - t);
    },
    vk = function vk(e, t) {
      return Te(e, function (e, n) {
        var o = Math.min(hk(e, t), bk(e, t)),
          r = Math.min(hk(n, t), bk(n, t));
        return r === o && Ee(n, "node") && pk(n.node) || r < o ? n : e;
      });
    },
    yk = function yk(e) {
      var t = function t(_t126) {
        return V(_t126, function (t) {
          var n = li(t);
          return n.node = e, n;
        });
      };
      if ($o(e)) return t(e.getClientRects());
      if (Jo(e)) {
        var _n115 = e.ownerDocument.createRange();
        return _n115.setStart(e, 0), _n115.setEnd(e, e.data.length), t(_n115.getClientRects());
      }
      return [];
    },
    Ck = function Ck(e) {
      return te(e, yk);
    };
  var wk;
  !function (e) {
    e[e.Up = -1] = "Up", e[e.Down = 1] = "Down";
  }(wk || (wk = {}));
  var xk = function xk(e, t, n, o, r, s) {
      var a = 0;
      var i = [],
        l = function l(o) {
          var s = Ck([o]);
          -1 === e && (s = s.reverse());
          for (var _e133 = 0; _e133 < s.length; _e133++) {
            var _o87 = s[_e133];
            if (!n(_o87, d)) {
              if (i.length > 0 && t(_o87, De(i)) && a++, _o87.line = a, r(_o87)) return !0;
              i.push(_o87);
            }
          }
          return !1;
        },
        d = De(s.getClientRects());
      if (!d) return i;
      var c = s.getNode();
      return c && (l(c), function (e, t, n, o) {
        var r = o;
        for (; r = Ic(r, e, is, t);) if (n(r)) return;
      }(e, o, l, c)), i;
    },
    kk = O(xk, wk.Up, ui, mi),
    Ek = O(xk, wk.Down, mi, ui),
    Sk = function Sk(e) {
      return De(e.getClientRects());
    },
    _k = function _k(e) {
      return function (t) {
        return function (e, t) {
          return t.line > e;
        }(e, t);
      };
    },
    Nk = function Nk(e) {
      return function (t) {
        return function (e, t) {
          return t.line === e;
        }(e, t);
      };
    },
    Rk = function Rk(e, t) {
      e.selection.setRng(t), Zf(e, e.selection.getRng());
    },
    Ak = function Ak(e, t, n) {
      return I.some(cx(e, t, n));
    },
    Ok = function Ok(e, t, n, o, r, s) {
      var a = t === Jc.Forwards,
        i = du(e.getBody()),
        l = O(Xc, a ? i.next : i.prev),
        d = a ? o : r;
      if (!n.collapsed) {
        var _o88 = gi(n);
        if (s(_o88)) return lx(t, e, _o88, t === Jc.Backwards, !1);
        if (hx(e)) {
          var _e134 = n.cloneRange();
          return _e134.collapse(t === Jc.Backwards), I.from(_e134);
        }
      }
      var c = Gc(t, e.getBody(), n);
      if (d(c)) return dx(e, c.getNode(!a));
      var u = l(c);
      var m = Xr(n);
      if (!u) return m ? I.some(n) : I.none();
      if (u = ih(a, u), d(u)) return lx(t, e, u.getNode(!a), a, !1);
      var f = l(u);
      return f && d(f) && Qc(u, f) ? lx(t, e, f.getNode(!a), a, !1) : m ? Ak(e, u.toRange(), !1) : I.none();
    },
    Tk = function Tk(e, t, n, o, r, s) {
      var a = Gc(t, e.getBody(), n),
        i = De(a.getClientRects()),
        l = t === wk.Down,
        d = e.getBody();
      if (!i) return I.none();
      if (hx(e)) {
        var _e135 = l ? Li.fromRangeEnd(n) : Li.fromRangeStart(n);
        return (l ? gk : fk)(d, _e135).orThunk(function () {
          return I.from(_e135);
        }).map(function (e) {
          return e.toRange();
        });
      }
      var c = (l ? Ek : kk)(d, _k(1), a),
        u = G(c, Nk(1)),
        m = i.left,
        f = vk(u, m);
      if (f && s(f.node)) {
        var _n116 = Math.abs(m - f.left),
          _o89 = Math.abs(m - f.right);
        return lx(t, e, f.node, _n116 < _o89, !1);
      }
      var g;
      if (g = o(a) ? a.getNode() : r(a) ? a.getNode(!0) : gi(n), g) {
        var _n117 = function (e, t, n, o) {
          var r = du(t);
          var s, a, i, l;
          var d = [];
          var c = 0;
          1 === e ? (s = r.next, a = mi, i = ui, l = Li.after(o)) : (s = r.prev, a = ui, i = mi, l = Li.before(o));
          var u = Sk(l);
          do {
            if (!l.isVisible()) continue;
            var _e136 = Sk(l);
            if (i(_e136, u)) continue;
            d.length > 0 && a(_e136, De(d)) && c++;
            var _t127 = li(_e136);
            if (_t127.position = l, _t127.line = c, n(_t127)) return d;
            d.push(_t127);
          } while (l = s(l));
          return d;
        }(t, d, _k(1), g);
        var _o90 = vk(G(_n117, Nk(1)), m);
        if (_o90) return Ak(e, _o90.position.toRange(), !1);
        if (_o90 = De(G(_n117, Nk(0))), _o90) return Ak(e, _o90.position.toRange(), !1);
      }
      return 0 === u.length ? Bk(e, l).filter(l ? r : o).map(function (t) {
        return cx(e, t.toRange(), !1);
      }) : I.none();
    },
    Bk = function Bk(e, t) {
      var n = e.selection.getRng(),
        o = t ? Li.fromRangeEnd(n) : Li.fromRangeStart(n),
        r = (s = o.container(), a = e.getBody(), Qn(yn(s), function (e) {
          return Sc(e.dom);
        }, function (e) {
          return e.dom === a;
        }).map(function (e) {
          return e.dom;
        }).getOr(a));
      var s, a;
      if (t) {
        var _e137 = lk(r, o);
        return de(_e137.positions);
      }
      {
        var _e138 = ik(r, o);
        return le(_e138.positions);
      }
    },
    Dk = function Dk(e, t, n) {
      return Bk(e, t).filter(n).exists(function (t) {
        return e.selection.setRng(t.toRange()), !0;
      });
    },
    Pk = function Pk(e, t) {
      var n = e.dom.createRng();
      n.setStart(t.container(), t.offset()), n.setEnd(t.container(), t.offset()), e.selection.setRng(n);
    },
    Lk = function Lk(e, t) {
      e ? t.setAttribute("data-mce-selected", "inline-boundary") : t.removeAttribute("data-mce-selected");
    },
    Mk = function Mk(e, t, n) {
      return Dx(t, n).map(function (t) {
        return Pk(e, t), n;
      });
    },
    Ik = function Ik(e, t, n) {
      var o = e.getBody(),
        r = function (e, t, n) {
          var o = Li.fromRangeStart(e);
          if (e.collapsed) return o;
          {
            var _r65 = Li.fromRangeEnd(e);
            return n ? vu(t, _r65).getOr(_r65) : bu(t, o).getOr(o);
          }
        }(e.selection.getRng(), o, n);
      return function (e, t, n, o) {
        var r = ih(e, o),
          s = Vx(t, n, r);
        return Vx(t, n, r).bind(O(Qx, e)).orThunk(function () {
          return function (e, t, n, o, r) {
            var s = ih(e, r);
            return fu(e, n, s).map(O(ih, e)).fold(function () {
              return o.map(Kx);
            }, function (r) {
              return Vx(t, n, r).map(O(Yx, e, t, n, s, r)).filter(O(Xx, o));
            }).filter($x);
          }(e, t, n, s, o);
        });
      }(n, O(rh, e), o, r).bind(function (n) {
        return Mk(e, t, n);
      });
    },
    Fk = function Fk(e, t, n) {
      return !!dd(e) && Ik(e, t, n).isSome();
    },
    Uk = function Uk(e, t, n) {
      return !!dd(t) && function (e, t) {
        var n = t.selection.getRng(),
          o = e ? Li.fromRangeEnd(n) : Li.fromRangeStart(n);
        return !!function (e) {
          return w(e.selection.getSel().modify);
        }(t) && (e && qr(o) ? Jx(!0, t.selection, o) : !(e || !Wr(o)) && Jx(!1, t.selection, o));
      }(e, t);
    },
    zk = function zk(e) {
      var t = Da(null),
        n = O(rh, e);
      return e.on("NodeChange", function (o) {
        dd(e) && (function (e, t, n) {
          var o = V(Fo(yn(t.getRoot()), '*[data-mce-selected="inline-boundary"]'), function (e) {
              return e.dom;
            }),
            r = G(o, e),
            s = G(n, e);
          q(re(r, s), O(Lk, !1)), q(re(s, r), O(Lk, !0));
        }(n, e.dom, o.parents), function (e, t) {
          var n = t.get();
          if (e.selection.isCollapsed() && !e.composing && n) {
            var _o91 = Li.fromRangeStart(e.selection.getRng());
            Li.isTextPosition(_o91) && !function (e) {
              return qr(e) || Wr(e);
            }(_o91) && (Pk(e, pc(n, _o91)), t.set(null));
          }
        }(e, t), function (e, t, n, o) {
          if (t.selection.isCollapsed()) {
            var _r66 = G(o, e);
            q(_r66, function (o) {
              var r = Li.fromRangeStart(t.selection.getRng());
              Vx(e, t.getBody(), r).bind(function (e) {
                return Mk(t, n, e);
              });
            });
          }
        }(n, e, t, o.parents));
      }), t;
    },
    jk = O(Uk, !0),
    Hk = O(Uk, !1),
    $k = function $k(e, t, n) {
      if (dd(e)) {
        var _o92 = Bk(e, t).getOrThunk(function () {
          var n = e.selection.getRng();
          return t ? Li.fromRangeEnd(n) : Li.fromRangeStart(n);
        });
        return Vx(O(rh, e), e.getBody(), _o92).exists(function (t) {
          var o = Kx(t);
          return Dx(n, o).exists(function (t) {
            return Pk(e, t), !0;
          });
        });
      }
      return !1;
    },
    Vk = function Vk(e, t) {
      return function (n) {
        return Dx(t, n).map(function (t) {
          return function () {
            return Pk(e, t);
          };
        });
      };
    },
    qk = function qk(e, t, n, o) {
      var r = e.getBody(),
        s = O(rh, e);
      e.undoManager.ignore(function () {
        e.selection.setRng(function (e, t) {
          var n = document.createRange();
          return n.setStart(e.container(), e.offset()), n.setEnd(t.container(), t.offset()), n;
        }(n, o)), uh(e), Vx(s, r, Li.fromRangeStart(e.selection.getRng())).map(Gx).bind(Vk(e, t)).each(P);
      }), e.nodeChanged();
    },
    Wk = function Wk(e, t, n) {
      if (e.selection.isCollapsed() && dd(e)) {
        var _o93 = Li.fromRangeStart(e.selection.getRng());
        return function (e, t, n, o) {
          var r = function (e, t) {
              return Fc(t, e) || e;
            }(e.getBody(), o.container()),
            s = O(rh, e),
            a = Vx(s, r, o);
          return a.bind(function (e) {
            return n ? e.fold(N(I.some(Gx(e))), I.none, N(I.some(Kx(e))), I.none) : e.fold(I.none, N(I.some(Kx(e))), I.none, N(I.some(Gx(e))));
          }).map(Vk(e, t)).getOrThunk(function () {
            var i = gu(n, r, o),
              l = i.bind(function (e) {
                return Vx(s, r, e);
              });
            return Mt(a, l, function () {
              return ah(s, r, o).bind(function (t) {
                return function (e) {
                  return Mt(yu(e), Cu(e), function (t, n) {
                    var o = ih(!0, t),
                      r = ih(!1, n);
                    return bu(e, o).forall(function (e) {
                      return e.isEqual(r);
                    });
                  }).getOr(!0);
                }(t) ? I.some(function () {
                  nh(e, n, yn(t));
                }) : I.none();
              });
            }).getOrThunk(function () {
              return l.bind(function () {
                return i.map(function (r) {
                  return function () {
                    n ? qk(e, t, o, r) : qk(e, t, r, o);
                  };
                });
              });
            });
          });
        }(e, t, n, _o93);
      }
      return I.none();
    },
    Kk = function Kk(e, t) {
      var n = yn(e.getBody()),
        o = yn(e.selection.getStart()),
        r = pp(o, n);
      return Z(r, t).fold(N(r), function (e) {
        return r.slice(0, e);
      });
    },
    Gk = function Gk(e) {
      return 1 === zn(e);
    },
    Yk = function Yk(e, t) {
      var n = O(Lb, e);
      return te(t, function (e) {
        return n(e) ? [e.dom] : [];
      });
    },
    Xk = function Xk(e) {
      var t = function (e) {
        return Kk(e, xr);
      }(e);
      return Yk(e, t);
    },
    Qk = function Qk(e, t) {
      var n = G(function (e) {
        return Kk(e, function (e) {
          return xr(e) || function (e) {
            return zn(e) > 1;
          }(e);
        });
      }(e), Gk);
      return de(n).bind(function (o) {
        var r = Li.fromRangeStart(e.selection.getRng());
        return ph(t, r, o.dom) && !Mb(o) ? I.some(function () {
          return function (e, t, n, o) {
            var r = Yk(t, o);
            if (0 === r.length) nh(t, e, n);else {
              var _e139 = Pb(n.dom, r);
              t.selection.setRng(_e139.toRange());
            }
          }(t, e, o, n);
        }) : I.none();
      });
    },
    Jk = function Jk(e, t) {
      var n = e.selection.getStart(),
        o = function (e, t) {
          var n = t.parentElement;
          return rr(t) && !h(n) && e.dom.isEmpty(n);
        }(e, n) || Mb(yn(n)) ? Pb(n, t) : function (e, t) {
          var _Db2 = Db(t),
            n = _Db2.caretContainer,
            o = _Db2.caretPosition;
          return e.insertNode(n.dom), o;
        }(e.selection.getRng(), t);
      e.selection.setRng(o.toRange());
    },
    Zk = function Zk(e) {
      return Jo(e.startContainer);
    },
    eE = function eE(e) {
      var t = e.selection.getRng();
      return function (e) {
        return 0 === e.startOffset && Zk(e);
      }(t) && function (e, t) {
        var n = t.startContainer.parentElement;
        return !h(n) && Lb(e, yn(n));
      }(e, t) && function (e) {
        return function (e) {
          return function (e) {
            var t = e.startContainer.parentNode,
              n = e.endContainer.parentNode;
            return !h(t) && !h(n) && t.isEqualNode(n);
          }(e) && function (e) {
            var t = e.endContainer;
            return e.endOffset === (Jo(t) ? t.length : t.childNodes.length);
          }(e);
        }(e) || function (e) {
          return !e.endContainer.isEqualNode(e.commonAncestorContainer);
        }(e);
      }(t);
    },
    tE = function tE(e, t) {
      return e.selection.isCollapsed() ? Qk(e, t) : function (e) {
        if (eE(e)) {
          var _t128 = Xk(e);
          return I.some(function () {
            uh(e), function (e, t) {
              var n = re(t, Xk(e));
              n.length > 0 && Jk(e, n);
            }(e, _t128);
          });
        }
        return I.none();
      }(e);
    },
    nE = function nE(e) {
      return function (e, t, n) {
        return Qn(e, function (e) {
          return xu(e.dom);
        }, n).isSome();
      }(e, 0, xr);
    },
    oE = function oE(e) {
      return function (e) {
        var t = e.selection.getRng();
        return t.collapsed && (Zk(t) || e.dom.isEmpty(t.startContainer)) && !function (e) {
          return nE(yn(e.selection.getStart()));
        }(e);
      }(e) && Jk(e, []), !0;
    },
    rE = function rE(e, t, n) {
      return C(n) ? I.some(function () {
        e._selectionOverrides.hideFakeCaret(), nh(e, t, yn(n));
      }) : I.none();
    },
    sE = function sE(e, t) {
      return e.selection.isCollapsed() ? function (e, t) {
        var n = t ? lp : dp,
          o = t ? Jc.Forwards : Jc.Backwards,
          r = Gc(o, e.getBody(), e.selection.getRng());
        return n(r) ? rE(e, t, r.getNode(!t)) : I.from(ih(t, r)).filter(function (e) {
          return n(e) && Qc(r, e);
        }).bind(function (n) {
          return rE(e, t, n.getNode(!t));
        });
      }(e, t) : function (e, t) {
        var n = e.selection.getNode();
        return cr(n) ? rE(e, t, n) : I.none();
      }(e, t);
    },
    aE = function aE(e) {
      return Xe(null != e ? e : "").getOr(0);
    },
    iE = function iE(e, t) {
      return (e || "table" === Ht(t) ? "margin" : "padding") + ("rtl" === lo(t, "direction") ? "-right" : "-left");
    },
    lE = function lE(e) {
      var t = cE(e);
      return !e.mode.isReadOnly() && (t.length > 1 || function (e, t) {
        return ne(t, function (t) {
          var n = iE(Kl(e), t),
            o = uo(t, n).map(aE).getOr(0);
          return "false" !== e.dom.getContentEditable(t.dom) && o > 0;
        });
      }(e, t));
    },
    dE = function dE(e) {
      return _r(e) || Nr(e);
    },
    cE = function cE(e) {
      return G(ko(e.selection.getSelectedBlocks()), function (e) {
        return !dE(e) && !function (e) {
          return An(e).exists(dE);
        }(e) && Jn(e, function (e) {
          return ar(e.dom) || ir(e.dom);
        }).exists(function (e) {
          return ar(e.dom);
        });
      });
    },
    uE = function uE(e, t) {
      var n, o;
      var r = e.dom,
        s = Gl(e),
        a = null !== (o = null === (n = /[a-z%]+$/i.exec(s)) || void 0 === n ? void 0 : n[0]) && void 0 !== o ? o : "px",
        i = aE(s),
        l = Kl(e);
      q(cE(e), function (e) {
        (function (e, t, n, o, r, s) {
          var a = iE(n, yn(s)),
            i = aE(e.getStyle(s, a));
          if ("outdent" === t) {
            var _t129 = Math.max(0, i - o);
            e.setStyle(s, a, _t129 ? _t129 + r : "");
          } else {
            var _t130 = i + o + r;
            e.setStyle(s, a, _t130);
          }
        })(r, t, l, i, a, e.dom);
      });
    },
    mE = function mE(e) {
      return uE(e, "outdent");
    },
    fE = function fE(e) {
      if (e.selection.isCollapsed() && lE(e)) {
        var _t131 = e.dom,
          _n118 = e.selection.getRng(),
          _o94 = Li.fromRangeStart(_n118),
          _r67 = _t131.getParent(_n118.startContainer, _t131.isBlock);
        if (null !== _r67 && Cp(yn(_r67), _o94)) return I.some(function () {
          return mE(e);
        });
      }
      return I.none();
    },
    gE = function gE(e, t, n) {
      return ue([fE, xx, gx, function (e, n) {
        return Wk(e, t, n);
      }, rx, Hh, kx, sE, ix, tE], function (t) {
        return t(e, n);
      }).filter(function (t) {
        return e.selection.isEditable();
      });
    },
    pE = function pE(e, t) {
      e.addCommand("delete", function () {
        (function (e, t) {
          gE(e, t, !1).fold(function () {
            uh(e), gh(e);
          }, P);
        })(e, t);
      }), e.addCommand("forwardDelete", function () {
        (function (e, t) {
          gE(e, t, !0).fold(function () {
            return function (e) {
              return ch(e, "ForwardDelete");
            }(e);
          }, P);
        })(e, t);
      });
    },
    hE = function hE(e) {
      return void 0 === e.touches || 1 !== e.touches.length ? I.none() : I.some(e.touches[0]);
    },
    bE = function bE(e, t) {
      return ke(e, t.nodeName);
    },
    vE = function vE(e, t) {
      return !!Jo(t) || !!$o(t) && !bE(e.getBlockElements(), t) && !Lu(t) && !As(e, t);
    },
    yE = function yE(e, t) {
      if (Jo(t)) {
        if (0 === t.data.length) return !0;
        if (/^\s+$/.test(t.data) && (!t.nextSibling || bE(e, t.nextSibling))) return !0;
      }
      return !1;
    },
    CE = function CE(e) {
      return e.dom.create(Nl(e), Rl(e));
    },
    wE = function wE(e) {
      var t = e.dom,
        n = e.selection,
        o = e.schema,
        r = o.getBlockElements(),
        s = n.getStart(),
        a = e.getBody();
      var i,
        l,
        d = !1;
      var c = Nl(e);
      if (!s || !$o(s)) return;
      var u = a.nodeName.toLowerCase();
      if (!o.isValidChild(u, c.toLowerCase()) || function (e, t, n) {
        return $(gp(yn(n), yn(t)), function (t) {
          return bE(e, t.dom);
        });
      }(r, a, s)) return;
      var m = n.getRng(),
        f = m.startContainer,
        g = m.startOffset,
        p = m.endContainer,
        h = m.endOffset,
        b = xg(e);
      var v = a.firstChild;
      for (; v;) if ($o(v) && Ss(o, v), vE(o, v)) {
        if (yE(r, v)) {
          l = v, v = v.nextSibling, t.remove(l);
          continue;
        }
        i || (i = CE(e), a.insertBefore(i, v), d = !0), l = v, v = v.nextSibling, i.appendChild(l);
      } else i = null, v = v.nextSibling;
      d && b && (m.setStart(f, g), m.setEnd(p, h), n.setRng(m), e.nodeChanged());
    },
    xE = function xE(e, t, n) {
      var o = yn(CE(e)),
        r = Dr();
      bo(o, r), n(t, o);
      var s = document.createRange();
      return s.setStartBefore(r.dom), s.setEndBefore(r.dom), s;
    },
    kE = function kE(e) {
      return function (t) {
        return -1 !== (" " + t.attr("class") + " ").indexOf(e);
      };
    },
    EE = function EE(e, t, n) {
      return function (o) {
        var r = arguments,
          s = r[r.length - 2],
          a = s > 0 ? t.charAt(s - 1) : "";
        if ('"' === a) return o;
        if (">" === a) {
          var _e140 = t.lastIndexOf("<", s);
          if (-1 !== _e140 && -1 !== t.substring(_e140, s).indexOf('contenteditable="false"')) return o;
        }
        return '<span class="' + n + '" data-mce-content="' + e.dom.encode(r[0]) + '">' + e.dom.encode("string" == typeof r[1] ? r[1] : r[0]) + "</span>";
      };
    },
    SE = function SE(e, t) {
      t.hasAttribute("data-mce-caret") && (Yr(t), e.selection.setRng(e.selection.getRng()), e.selection.scrollIntoView(t));
    },
    _E = function _E(e, t) {
      var n = function (e) {
        return eo(yn(e.getBody()), "*[data-mce-caret]").map(function (e) {
          return e.dom;
        }).getOrNull();
      }(e);
      if (n) return "compositionstart" === t.type ? (t.preventDefault(), t.stopPropagation(), void SE(e, n)) : void (Vr(n) && (SE(e, n), e.undoManager.add()));
    },
    NE = ir,
    RE = function RE(e, t, n) {
      var o = du(e.getBody()),
        r = O(Xc, 1 === t ? o.next : o.prev);
      if (n.collapsed) {
        var _o95 = e.dom.getParent(n.startContainer, "PRE");
        if (!_o95) return;
        if (!r(Li.fromRangeStart(n))) {
          var _n119 = yn(function (e) {
            var t = e.dom.create(Nl(e));
            return t.innerHTML = '<br data-mce-bogus="1">', t;
          }(e));
          1 === t ? po(yn(_o95), _n119) : go(yn(_o95), _n119), e.selection.select(_n119.dom, !0), e.selection.collapse();
        }
      }
    },
    AE = function AE(e, t) {
      return function (e, t) {
        var n = t ? Jc.Forwards : Jc.Backwards,
          o = e.selection.getRng();
        return function (e, t, n) {
          return Ok(t, e, n, mp, fp, NE);
        }(n, e, o).orThunk(function () {
          return RE(e, n, o), I.none();
        });
      }(e, function (e, t) {
        var n = t ? e.getEnd(!0) : e.getStart(!0);
        return sh(n) ? !t : t;
      }(e.selection, t)).exists(function (t) {
        return Rk(e, t), !0;
      });
    },
    OE = function OE(e, t) {
      return function (e, t) {
        var n = t ? 1 : -1,
          o = e.selection.getRng();
        return function (e, t, n) {
          return Tk(t, e, n, function (e) {
            return mp(e) || cp(e);
          }, function (e) {
            return fp(e) || up(e);
          }, NE);
        }(n, e, o).orThunk(function () {
          return RE(e, n, o), I.none();
        });
      }(e, t).exists(function (t) {
        return Rk(e, t), !0;
      });
    },
    TE = function TE(e, t) {
      return Dk(e, t, t ? fp : mp);
    },
    BE = function BE(e, t) {
      return px(e, !t).map(function (n) {
        var o = n.toRange(),
          r = e.selection.getRng();
        return t ? o.setStart(r.startContainer, r.startOffset) : o.setEnd(r.endContainer, r.endOffset), o;
      }).exists(function (t) {
        return Rk(e, t), !0;
      });
    },
    DE = function DE(e) {
      return H(["figcaption"], Ht(e));
    },
    PE = function PE(e, t) {
      return !!e.selection.isCollapsed() && function (e, t) {
        var n = yn(e.getBody()),
          o = Li.fromRangeStart(e.selection.getRng());
        return function (e, t) {
          var n = O(En, t);
          return Jn(yn(e.container()), xr, n).filter(DE);
        }(o, n).exists(function () {
          if (function (e, t, n) {
            return t ? mk(e.dom, n) : uk(e.dom, n);
          }(n, t, o)) {
            var _o96 = xE(e, n, t ? bo : ho);
            return e.selection.setRng(_o96), !0;
          }
          return !1;
        });
      }(e, t);
    },
    LE = function LE(e, t) {
      return function (e, t) {
        return t ? I.from(e.dom.getParent(e.selection.getNode(), "details")).map(function (t) {
          return function (e, t) {
            var n = e.selection.getRng(),
              o = Li.fromRangeStart(n);
            return !(e.getBody().lastChild !== t || !mk(t, o) || (e.execCommand("InsertNewBlockAfter"), 0));
          }(e, t);
        }).getOr(!1) : I.from(e.dom.getParent(e.selection.getNode(), "summary")).bind(function (t) {
          return I.from(e.dom.getParent(t, "details")).map(function (n) {
            return function (e, t, n) {
              var o = e.selection.getRng(),
                r = Li.fromRangeStart(o);
              return !(e.getBody().firstChild !== t || !uk(n, r) || (e.execCommand("InsertNewBlockBefore"), 0));
            }(e, n, t);
          });
        }).getOr(!1);
      }(e, t);
    },
    ME = {
      shiftKey: !1,
      altKey: !1,
      ctrlKey: !1,
      metaKey: !1,
      keyCode: 0
    },
    IE = function IE(e, t) {
      return t.keyCode === e.keyCode && t.shiftKey === e.shiftKey && t.altKey === e.altKey && t.ctrlKey === e.ctrlKey && t.metaKey === e.metaKey;
    },
    FE = function FE(e) {
      for (var _len12 = arguments.length, t = new Array(_len12 > 1 ? _len12 - 1 : 0), _key12 = 1; _key12 < _len12; _key12++) {
        t[_key12 - 1] = arguments[_key12];
      }
      return function () {
        return e.apply(null, t);
      };
    },
    UE = function UE(e, t) {
      return J(function (e, t) {
        return te(function (e) {
          return V(e, function (e) {
            return _objectSpread(_objectSpread({}, ME), e);
          });
        }(e), function (e) {
          return IE(e, t) ? [e] : [];
        });
      }(e, t), function (e) {
        return e.action();
      });
    },
    zE = function zE(e, t) {
      return ue(function (e, t) {
        return te(function (e) {
          return V(e, function (e) {
            return _objectSpread(_objectSpread({}, ME), e);
          });
        }(e), function (e) {
          return IE(e, t) ? [e] : [];
        });
      }(e, t), function (e) {
        return e.action();
      });
    },
    jE = function jE(e, t) {
      var n = t ? Jc.Forwards : Jc.Backwards,
        o = e.selection.getRng();
      return Ok(e, n, o, lp, dp, cr).exists(function (t) {
        return Rk(e, t), !0;
      });
    },
    HE = function HE(e, t) {
      var n = t ? 1 : -1,
        o = e.selection.getRng();
      return Tk(e, n, o, lp, dp, cr).exists(function (t) {
        return Rk(e, t), !0;
      });
    },
    $E = function $E(e, t) {
      return Dk(e, t, t ? dp : lp);
    },
    VE = al([{
      none: ["current"]
    }, {
      first: ["current"]
    }, {
      middle: ["current", "target"]
    }, {
      last: ["current"]
    }]),
    qE = _objectSpread(_objectSpread({}, VE), {}, {
      none: function none(e) {
        return VE.none(e);
      }
    }),
    WE = function WE(e, t, n) {
      return te(Mn(e), function (e) {
        return xn(e, t) ? n(e) ? [e] : [] : WE(e, t, n);
      });
    },
    KE = function KE(e, t) {
      return to(e, "table", t);
    },
    GE = function GE(e, t, n, o) {
      var r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : M;
      var s = 1 === o;
      if (!s && n <= 0) return qE.first(e[0]);
      if (s && n >= e.length - 1) return qE.last(e[e.length - 1]);
      {
        var _s42 = n + o,
          _a22 = e[_s42];
        return r(_a22) ? qE.middle(t, _a22) : GE(e, t, _s42, o, r);
      }
    },
    YE = function YE(e, t) {
      return KE(e, t).bind(function (t) {
        var n = WE(t, "th,td", M);
        return Z(n, function (t) {
          return En(e, t);
        }).map(function (e) {
          return {
            index: e,
            all: n
          };
        });
      });
    },
    XE = function XE(e, t, n, o, r) {
      var s = Fo(yn(n), "td,th,caption").map(function (e) {
          return e.dom;
        }),
        a = G(function (e, t) {
          return te(t, function (t) {
            var n = function (e, t) {
              return {
                left: e.left - t,
                top: e.top - t,
                right: e.right + -2,
                bottom: e.bottom + -2,
                width: e.width + t,
                height: e.height + t
              };
            }(li(t.getBoundingClientRect()), -1);
            return [{
              x: n.left,
              y: e(n),
              cell: t
            }, {
              x: n.right,
              y: e(n),
              cell: t
            }];
          });
        }(e, s), function (e) {
          return t(e, r);
        });
      return function (e, t, n) {
        return X(e, function (e, o) {
          return e.fold(function () {
            return I.some(o);
          }, function (e) {
            var r = Math.sqrt(Math.abs(e.x - t) + Math.abs(e.y - n)),
              s = Math.sqrt(Math.abs(o.x - t) + Math.abs(o.y - n));
            return I.some(s < r ? o : e);
          });
        }, I.none());
      }(a, o, r).map(function (e) {
        return e.cell;
      });
    },
    QE = O(XE, function (e) {
      return e.bottom;
    }, function (e, t) {
      return e.y < t;
    }),
    JE = O(XE, function (e) {
      return e.top;
    }, function (e, t) {
      return e.y > t;
    }),
    ZE = function ZE(e, t, n) {
      var o = e(t, n);
      return function (e) {
        return e.breakType === Zx.Wrap && 0 === e.positions.length;
      }(o) || !rr(n.getNode()) && function (e) {
        return e.breakType === Zx.Br && 1 === e.positions.length;
      }(o) ? !function (e, t, n) {
        return n.breakAt.exists(function (n) {
          return e(t, n).breakAt.isSome();
        });
      }(e, t, o) : o.breakAt.isNone();
    },
    eS = O(ZE, ik),
    tS = O(ZE, lk),
    nS = function nS(e, t, n, o) {
      var r = e.selection.getRng(),
        s = t ? 1 : -1;
      return !(!xc() || !function (e, t, n) {
        var o = Li.fromRangeStart(t);
        return hu(!e, n).exists(function (e) {
          return e.isEqual(o);
        });
      }(t, r, n) || (lx(s, e, n, !t, !1).each(function (t) {
        Rk(e, t);
      }), 0));
    },
    oS = function oS(e, t, n) {
      var o = function (e, t) {
          var n = t.getNode(e);
          return Yo(n) ? I.some(n) : I.none();
        }(!!t, n),
        r = !1 === t;
      o.fold(function () {
        return Rk(e, n.toRange());
      }, function (o) {
        return hu(r, e.getBody()).filter(function (e) {
          return e.isEqual(n);
        }).fold(function () {
          return Rk(e, n.toRange());
        }, function (n) {
          return function (e, t, n) {
            t.undoManager.transact(function () {
              var o = e ? po : go,
                r = xE(t, yn(n), o);
              Rk(t, r);
            });
          }(t, e, o);
        });
      });
    },
    rS = function rS(e, t, n, o) {
      var r = e.selection.getRng(),
        s = Li.fromRangeStart(r),
        a = e.getBody();
      if (!t && eS(o, s)) {
        var _o97 = function (e, t, n) {
          return function (e, t) {
            return le(t.getClientRects()).bind(function (t) {
              return QE(e, t.left, t.top);
            }).bind(function (e) {
              return ak(Cu(n = e).map(function (e) {
                return ik(n, e).positions.concat(e);
              }).getOr([]), t);
              var n;
            });
          }(t, n).orThunk(function () {
            return le(n.getClientRects()).bind(function (n) {
              return sk(dk(e, Li.before(t)), n.left);
            });
          }).getOr(Li.before(t));
        }(a, n, s);
        return oS(e, t, _o97), !0;
      }
      if (t && tS(o, s)) {
        var _o98 = function (e, t, n) {
          return function (e, t) {
            return de(t.getClientRects()).bind(function (t) {
              return JE(e, t.left, t.top);
            }).bind(function (e) {
              return ak(yu(n = e).map(function (e) {
                return [e].concat(lk(n, e).positions);
              }).getOr([]), t);
              var n;
            });
          }(t, n).orThunk(function () {
            return le(n.getClientRects()).bind(function (n) {
              return sk(ck(e, Li.after(t)), n.left);
            });
          }).getOr(Li.after(t));
        }(a, n, s);
        return oS(e, t, _o98), !0;
      }
      return !1;
    },
    sS = function sS(e, t, n) {
      return I.from(e.dom.getParent(e.selection.getNode(), "td,th")).bind(function (o) {
        return I.from(e.dom.getParent(o, "table")).map(function (r) {
          return n(e, t, r, o);
        });
      }).getOr(!1);
    },
    aS = function aS(e, t) {
      return sS(e, t, nS);
    },
    iS = function iS(e, t) {
      return sS(e, t, rS);
    },
    lS = function lS(e, t, n) {
      return n.fold(I.none, I.none, function (e, t) {
        return (n = t, function (e, t) {
          var n = function n(e) {
            for (var _o99 = 0; _o99 < e.childNodes.length; _o99++) {
              var _r68 = yn(e.childNodes[_o99]);
              if (t(_r68)) return I.some(_r68);
              var _s43 = n(e.childNodes[_o99]);
              if (_s43.isSome()) return _s43;
            }
            return I.none();
          };
          return n(e.dom);
        }(n, Og)).map(function (e) {
          return function (e) {
            var t = hf.exact(e, 0, e, 0);
            return wf(t);
          }(e);
        });
        var n;
      }, function (n) {
        return e.execCommand("mceTableInsertRowAfter"), dS(e, t, n);
      });
    },
    dS = function dS(e, t, n) {
      return lS(e, t, (r = no, YE(o = n, void 0).fold(function () {
        return qE.none(o);
      }, function (e) {
        return GE(e.all, o, e.index, 1, r);
      })));
      var o, r;
    },
    cS = function cS(e, t, n) {
      return lS(e, t, (r = no, YE(o = n, void 0).fold(function () {
        return qE.none();
      }, function (e) {
        return GE(e.all, o, e.index, -1, r);
      })));
      var o, r;
    },
    uS = function uS(e, t) {
      var n = ["table", "li", "dl"],
        o = yn(e.getBody()),
        r = function r(e) {
          var t = Ht(e);
          return En(e, o) || H(n, t);
        },
        s = e.selection.getRng();
      return function (e, t) {
        return function (e, t) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : L;
          return n(t) ? I.none() : H(e, Ht(t)) ? I.some(t) : Zn(t, e.join(","), function (e) {
            return xn(e, "table") || n(e);
          });
        }(["td", "th"], e, t);
      }(yn(t ? s.endContainer : s.startContainer), r).map(function (n) {
        return KE(n, r).each(function (t) {
          e.model.table.clearSelectedCells(t.dom);
        }), e.selection.collapse(!t), (t ? dS : cS)(e, r, n).each(function (t) {
          e.selection.setRng(t);
        }), !0;
      }).getOr(!1);
    },
    mS = function mS(e, t) {
      return {
        container: e,
        offset: t
      };
    },
    fS = Oa.DOM,
    gS = function gS(e) {
      return function (t) {
        return e === t ? -1 : 0;
      };
    },
    pS = function pS(e, t, n) {
      if (Jo(e) && t >= 0) return I.some(mS(e, t));
      {
        var _o100 = ai(fS);
        return I.from(_o100.backwards(e, t, gS(e), n)).map(function (e) {
          return mS(e.container, e.container.data.length);
        });
      }
    },
    hS = function hS(e, t, n) {
      if (!Jo(e)) return I.none();
      var o = e.data;
      if (t >= 0 && t <= o.length) return I.some(mS(e, t));
      {
        var _o101 = ai(fS);
        return I.from(_o101.backwards(e, t, gS(e), n)).bind(function (e) {
          var o = e.container.data;
          return hS(e.container, t + o.length, n);
        });
      }
    },
    bS = function bS(e, t, n) {
      if (!Jo(e)) return I.none();
      var o = e.data;
      if (t <= o.length) return I.some(mS(e, t));
      {
        var _r69 = ai(fS);
        return I.from(_r69.forwards(e, t, gS(e), n)).bind(function (e) {
          return bS(e.container, t - o.length, n);
        });
      }
    },
    vS = function vS(e, t, n, o, r) {
      var s = ai(e, function (e) {
        return function (t) {
          return e.isBlock(t) || H(["BR", "IMG", "HR", "INPUT"], t.nodeName) || "false" === e.getContentEditable(t);
        };
      }(e));
      return I.from(s.backwards(t, n, o, r));
    },
    yS = function yS(e) {
      return Fr(e.toString().replace(/\u00A0/g, " "));
    },
    CS = function CS(e) {
      return "" !== e && -1 !== " \xa0\f\n\r\t\v".indexOf(e);
    },
    wS = function wS(e, t) {
      return e.substring(t.length);
    },
    xS = function xS(e, t, n) {
      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
      return (r = yn(t.startContainer), to(r, Tg)).fold(function () {
        return function (e, t, n) {
          var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
          if (!(r = t).collapsed || !Jo(r.startContainer)) return I.none();
          var r;
          var s = {
              text: "",
              offset: 0
            },
            a = e.getParent(t.startContainer, e.isBlock) || e.getRoot();
          return vS(e, t.startContainer, t.startOffset, function (e, t, o) {
            return s.text = o + s.text, s.offset += t, function (e, t, n) {
              var o;
              var r = n.charAt(0);
              for (o = t - 1; o >= 0; o--) {
                var _s44 = e.charAt(o);
                if (CS(_s44)) return I.none();
                if (r === _s44 && je(e, n, o, t)) break;
              }
              return I.some(o);
            }(s.text, s.offset, n).getOr(t);
          }, a).bind(function (e) {
            var r = t.cloneRange();
            if (r.setStart(e.container, e.offset), r.setEnd(t.endContainer, t.endOffset), r.collapsed) return I.none();
            var s = yS(r);
            return 0 !== s.lastIndexOf(n) || wS(s, n).length < o ? I.none() : I.some({
              text: wS(s, n),
              range: r,
              trigger: n
            });
          });
        }(e, t, n, o);
      }, function (t) {
        var o = e.createRng();
        o.selectNode(t.dom);
        var r = yS(o);
        return I.some({
          range: o,
          text: wS(r, n),
          trigger: n
        });
      });
      var r;
    },
    kS = function kS(e) {
      if (function (e) {
        return 3 === e.nodeType;
      }(e)) return mS(e, e.data.length);
      {
        var _t132 = e.childNodes;
        return _t132.length > 0 ? kS(_t132[_t132.length - 1]) : mS(e, _t132.length);
      }
    },
    ES = function ES(e, t) {
      var n = e.childNodes;
      return n.length > 0 && t < n.length ? ES(n[t], 0) : n.length > 0 && function (e) {
        return 1 === e.nodeType;
      }(e) && n.length === t ? kS(n[n.length - 1]) : mS(e, t);
    },
    SS = function SS(e, t, n) {
      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      var r;
      var s = t(),
        a = null !== (r = e.selection.getRng().startContainer.nodeValue) && void 0 !== r ? r : "",
        i = G(s.lookupByTrigger(n.trigger), function (t) {
          return n.text.length >= t.minChars && t.matches.getOrThunk(function () {
            return function (e) {
              return function (t) {
                var n = ES(t.startContainer, t.startOffset);
                return !function (e, t) {
                  var n;
                  var o = null !== (n = e.getParent(t.container, e.isBlock)) && void 0 !== n ? n : e.getRoot();
                  return vS(e, t.container, t.offset, function (e, t) {
                    return 0 === t ? -1 : t;
                  }, o).filter(function (e) {
                    var t = e.container.data.charAt(e.offset - 1);
                    return !CS(t);
                  }).isSome();
                }(e, n);
              };
            }(e.dom);
          })(n.range, a, n.text);
        });
      if (0 === i.length) return I.none();
      var l = Promise.all(V(i, function (e) {
        return e.fetch(n.text, e.maxResults, o).then(function (t) {
          return {
            matchText: n.text,
            items: t,
            columns: e.columns,
            onAction: e.onAction,
            highlightOn: e.highlightOn
          };
        });
      }));
      return I.some({
        lookupData: l,
        context: n
      });
    };
  var _S;
  !function (e) {
    e[e.Error = 0] = "Error", e[e.Value = 1] = "Value";
  }(_S || (_S = {}));
  var NS = function NS(e, t, n) {
      return e.stype === _S.Error ? t(e.serror) : n(e.svalue);
    },
    RS = function RS(e) {
      return {
        stype: _S.Value,
        svalue: e
      };
    },
    AS = function AS(e) {
      return {
        stype: _S.Error,
        serror: e
      };
    },
    OS = NS,
    TS = function TS(e) {
      return f(e) && me(e).length > 100 ? " removed due to size" : JSON.stringify(e, null, 2);
    },
    BS = function BS(e, t) {
      return AS([{
        path: e,
        getErrorInfo: t
      }]);
    },
    DS = function DS(e, t) {
      return {
        extract: function extract(n, o) {
          return xe(o, e).fold(function () {
            return function (e, t) {
              return BS(e, function () {
                return 'Choice schema did not contain choice key: "' + t + '"';
              });
            }(n, e);
          }, function (e) {
            return function (e, t, n, o) {
              return xe(n, o).fold(function () {
                return function (e, t, n) {
                  return BS(e, function () {
                    return 'The chosen schema: "' + n + '" did not exist in branches: ' + TS(t);
                  });
                }(e, n, o);
              }, function (n) {
                return n.extract(e.concat(["branch: " + o]), t);
              });
            }(n, o, t, e);
          });
        },
        toString: function toString() {
          return "chooseOn(" + e + "). Possible values: " + me(t);
        }
      };
    },
    PS = function PS(e) {
      return function () {
        if (0 === arguments.length) throw new Error("Can't merge zero objects");
        var n = {};
        for (var _o102 = 0; _o102 < arguments.length; _o102++) {
          var _r70 = _o102 < 0 || arguments.length <= _o102 ? undefined : arguments[_o102];
          for (var _t133 in _r70) ke(_r70, _t133) && (n[_t133] = e(n[_t133], _r70[_t133]));
        }
        return n;
      };
    },
    LS = PS(function (e, t) {
      return g(e) && g(t) ? LS(e, t) : t;
    }),
    MS = (PS(function (e, t) {
      return t;
    }), function (e) {
      return {
        tag: "defaultedThunk",
        process: N(e)
      };
    }),
    IS = function IS(e) {
      var t = function (e) {
        var t = [],
          n = [];
        return q(e, function (e) {
          NS(e, function (e) {
            return n.push(e);
          }, function (e) {
            return t.push(e);
          });
        }), {
          values: t,
          errors: n
        };
      }(e);
      return t.errors.length > 0 ? (n = t.errors, S(AS, ee)(n)) : RS(t.values);
      var n;
    },
    FS = function FS(e, t, n) {
      switch (e.tag) {
        case "field":
          return t(e.key, e.newKey, e.presence, e.prop);
        case "custom":
          return n(e.newKey, e.instantiator);
      }
    },
    US = function US(e) {
      return {
        extract: function extract(t, n) {
          return o = e(n), r = function r(e) {
            return function (e, t) {
              return BS(e, N(t));
            }(t, e);
          }, o.stype === _S.Error ? r(o.serror) : o;
          var o, r;
        },
        toString: N("val")
      };
    },
    zS = US(RS),
    jS = function jS(e, t, n, o) {
      return o(xe(e, t).getOrThunk(function () {
        return n(e);
      }));
    },
    HS = function HS(e, t, n, o, r) {
      var s = function s(e) {
          return r.extract(t.concat([o]), e);
        },
        a = function a(e) {
          return e.fold(function () {
            return RS(I.none());
          }, function (e) {
            var n = r.extract(t.concat([o]), e);
            return s = n, a = I.some, s.stype === _S.Value ? {
              stype: _S.Value,
              svalue: a(s.svalue)
            } : s;
            var s, a;
          });
        };
      switch (e.tag) {
        case "required":
          return function (e, t, n, o) {
            return xe(t, n).fold(function () {
              return function (e, t, n) {
                return BS(e, function () {
                  return 'Could not find valid *required* value for "' + t + '" in ' + TS(n);
                });
              }(e, n, t);
            }, o);
          }(t, n, o, s);
        case "defaultedThunk":
          return jS(n, o, e.process, s);
        case "option":
          return function (e, t, n) {
            return n(xe(e, t));
          }(n, o, a);
        case "defaultedOptionThunk":
          return function (e, t, n, o) {
            return o(xe(e, t).map(function (t) {
              return !0 === t ? n(e) : t;
            }));
          }(n, o, e.process, a);
        case "mergeWithThunk":
          return jS(n, o, N({}), function (t) {
            var o = LS(e.process(n), t);
            return s(o);
          });
      }
    },
    $S = function $S(e) {
      return {
        extract: function extract(t, n) {
          return function (e, t, n) {
            var o = {},
              r = [];
            var _iterator4 = _createForOfIteratorHelper(n),
              _step4;
            try {
              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
                var _s45 = _step4.value;
                FS(_s45, function (n, s, a, i) {
                  var l = HS(a, e, t, n, i);
                  OS(l, function (e) {
                    r.push.apply(r, _toConsumableArray(e));
                  }, function (e) {
                    o[s] = e;
                  });
                }, function (e, n) {
                  o[e] = n(t);
                });
              }
            } catch (err) {
              _iterator4.e(err);
            } finally {
              _iterator4.f();
            }
            return r.length > 0 ? AS(r) : RS(o);
          }(t, n, e);
        },
        toString: function toString() {
          var t = V(e, function (e) {
            return FS(e, function (e, t, n, o) {
              return e + " -> " + o.toString();
            }, function (e, t) {
              return "state(" + e + ")";
            });
          });
          return "obj{\n" + t.join("\n") + "}";
        }
      };
    },
    VS = function VS(e) {
      return {
        extract: function extract(t, n) {
          var o = V(n, function (n, o) {
            return e.extract(t.concat(["[" + o + "]"]), n);
          });
          return IS(o);
        },
        toString: function toString() {
          return "array(" + e.toString() + ")";
        }
      };
    },
    qS = function qS(e, t, n) {
      return o = function (e, t, n) {
        return function (e, t) {
          return e.stype === _S.Error ? {
            stype: _S.Error,
            serror: t(e.serror)
          } : e;
        }(t.extract([e], n), function (e) {
          return {
            input: n,
            errors: e
          };
        });
      }(e, t, n), NS(o, sl.error, sl.value);
      var o;
    },
    WS = function WS(e, t) {
      return DS(e, pe(t, $S));
    },
    KS = N(zS),
    GS = function GS(e, t) {
      return US(function (n) {
        var o = _typeof(n);
        return e(n) ? RS(n) : AS("Expected type: ".concat(t, " but got: ").concat(o));
      });
    },
    YS = GS(x, "number"),
    XS = GS(m, "string"),
    QS = GS(b, "boolean"),
    JS = GS(w, "function"),
    ZS = function ZS(e, t, n, o) {
      return {
        tag: "field",
        key: e,
        newKey: t,
        presence: n,
        prop: o
      };
    },
    e_ = function e_(e, t) {
      return {
        tag: "custom",
        newKey: e,
        instantiator: t
      };
    },
    t_ = function t_(e, t) {
      return ZS(e, e, {
        tag: "required",
        process: {}
      }, t);
    },
    n_ = function n_(e) {
      return t_(e, XS);
    },
    o_ = function o_(e) {
      return t_(e, JS);
    },
    r_ = function r_(e, t) {
      return ZS(e, e, {
        tag: "option",
        process: {}
      }, t);
    },
    s_ = function s_(e) {
      return r_(e, XS);
    },
    a_ = function a_(e, t, n) {
      return ZS(e, e, MS(t), n);
    },
    i_ = function i_(e, t) {
      return a_(e, t, YS);
    },
    l_ = function l_(e, t, n) {
      return a_(e, t, function (e) {
        return t = function t(_t134) {
          return H(e, _t134) ? sl.value(_t134) : sl.error("Unsupported value: \"".concat(_t134, "\", choose one of \"").concat(e.join(", "), "\"."));
        }, US(function (e) {
          return t(e).fold(AS, RS);
        });
        var t;
      }(n));
    },
    d_ = function d_(e, t) {
      return a_(e, t, QS);
    },
    c_ = function c_(e, t) {
      return a_(e, t, JS);
    },
    u_ = n_("type"),
    m_ = o_("fetch"),
    f_ = o_("onAction"),
    g_ = c_("onSetup", function () {
      return E;
    }),
    p_ = s_("text"),
    h_ = s_("icon"),
    b_ = s_("tooltip"),
    v_ = s_("label"),
    y_ = d_("active", !1),
    C_ = d_("enabled", !0),
    w_ = d_("primary", !1),
    x_ = function x_(e) {
      return function (e, t) {
        return a_("type", t, XS);
      }(0, e);
    },
    k_ = $S([u_, n_("trigger"), i_("minChars", 1), (1, function (e, t) {
      return ZS(e, e, MS(1), KS());
    }("columns")), i_("maxResults", 10), ("matches", r_("matches", JS)), m_, f_, (E_ = XS, a_("highlightOn", [], VS(E_)))]);
  var E_;
  var S_ = [C_, b_, h_, p_, g_],
    __ = [y_].concat(S_),
    N_ = [c_("predicate", L), l_("scope", "node", ["node", "editor"]), l_("position", "selection", ["node", "selection", "line"])],
    R_ = S_.concat([x_("contextformbutton"), w_, f_, e_("original", R)]),
    A_ = __.concat([x_("contextformbutton"), w_, f_, e_("original", R)]),
    O_ = S_.concat([x_("contextformbutton")]),
    T_ = __.concat([x_("contextformtogglebutton")]),
    B_ = WS("type", {
      contextformbutton: R_,
      contextformtogglebutton: A_
    });
  $S([x_("contextform"), c_("initValue", N("")), v_, function (e, t) {
    return ZS(e, e, {
      tag: "required",
      process: {}
    }, VS(t));
  }("commands", B_), r_("launch", WS("type", {
    contextformbutton: O_,
    contextformtogglebutton: T_
  }))].concat(N_));
  var D_ = function D_(e) {
      var t = e.ui.registry.getAll().popups,
        n = pe(t, function (e) {
          return (t = e, qS("Autocompleter", k_, _objectSpread({
            trigger: t.ch
          }, t))).fold(function (e) {
            throw new Error("Errors: \n" + function (e) {
              var t = e.length > 10 ? e.slice(0, 10).concat([{
                path: [],
                getErrorInfo: N("... (only showing first ten failures)")
              }]) : e;
              return V(t, function (e) {
                return "Failed path: (" + e.path.join(" > ") + ")\n" + e.getErrorInfo();
              });
            }((t = e).errors).join("\n") + "\n\nInput object: " + TS(t.input));
            var t;
          }, R);
          var t;
        }),
        o = Se(Ce(n, function (e) {
          return e.trigger;
        })),
        r = we(n);
      return {
        dataset: n,
        triggers: o,
        lookupByTrigger: function lookupByTrigger(e) {
          return G(r, function (t) {
            return t.trigger === e;
          });
        }
      };
    },
    P_ = function P_(e) {
      var t = za(),
        n = Da(!1),
        o = t.isSet,
        r = function r() {
          o() && (function (e) {
            MC(e).autocompleter.removeDecoration();
          }(e), function (e) {
            e.dispatch("AutocompleterEnd");
          }(e), n.set(!1), t.clear());
        },
        s = Pe(function () {
          return D_(e);
        }),
        a = function a(_a23) {
          (function (n) {
            return t.get().map(function (t) {
              return xS(e.dom, e.selection.getRng(), t.trigger).bind(function (t) {
                return SS(e, s, t, n);
              });
            }).getOrThunk(function () {
              return function (e, t) {
                var n = t(),
                  o = e.selection.getRng();
                return function (e, t, n) {
                  return ue(n.triggers, function (n) {
                    return xS(e, t, n);
                  });
                }(e.dom, o, n).bind(function (n) {
                  return SS(e, t, n);
                });
              }(e, s);
            });
          })(_a23).fold(r, function (s) {
            (function (n) {
              o() || (function (e, t) {
                MC(e).autocompleter.addDecoration(t);
              }(e, n.range), t.set({
                trigger: n.trigger,
                matchLength: n.text.length
              }));
            })(s.context), s.lookupData.then(function (o) {
              t.get().map(function (a) {
                var i = s.context;
                a.trigger === i.trigger && (i.text.length - a.matchLength >= 10 ? r() : (t.set(_objectSpread(_objectSpread({}, a), {}, {
                  matchLength: i.text.length
                })), n.get() ? function (e, t) {
                  e.dispatch("AutocompleterUpdate", t);
                }(e, {
                  lookupData: o
                }) : (n.set(!0), function (e, t) {
                  e.dispatch("AutocompleterStart", t);
                }(e, {
                  lookupData: o
                }))));
              });
            });
          });
        };
      e.addCommand("mceAutocompleterReload", function (e, t) {
        var n = f(t) ? t.fetchOptions : {};
        a(n);
      }), e.addCommand("mceAutocompleterClose", r), function (e, t) {
        var n = Ha(t.load, 50);
        e.on("keypress compositionend", function (e) {
          27 !== e.which && n.throttle();
        }), e.on("keydown", function (e) {
          var o = e.which;
          8 === o ? n.throttle() : 27 === o && t.cancelIfNecessary();
        }), e.on("remove", n.cancel);
      }(e, {
        cancelIfNecessary: r,
        load: a
      });
    },
    L_ = xt().browser.isSafari(),
    M_ = function M_(e) {
      return Pr(yn(e));
    },
    I_ = function I_(e, t) {
      var n;
      return 0 === e.startOffset && e.endOffset === (null === (n = t.textContent) || void 0 === n ? void 0 : n.length);
    },
    F_ = function F_(e, t) {
      return I.from(e.getParent(t.container(), "details"));
    },
    U_ = function U_(e, t) {
      return F_(e, t).isSome();
    },
    z_ = function z_(e, t) {
      var n = t.getNode();
      v(n) || e.selection.setCursorLocation(n, t.offset());
    },
    j_ = function j_(e, t, n) {
      var o = e.dom.getParent(t.container(), "details");
      if (o && !o.open) {
        var _t135 = e.dom.select("summary", o)[0];
        _t135 && (n ? yu(_t135) : Cu(_t135)).each(function (t) {
          return z_(e, t);
        });
      } else z_(e, t);
    },
    H_ = function H_(e, t, n) {
      var o = e.dom,
        r = e.selection,
        s = e.getBody();
      if ("character" === n) {
        var _n120 = Li.fromRangeStart(r.getRng()),
          _a24 = o.getParent(_n120.container(), o.isBlock),
          _i24 = F_(o, _n120),
          _l12 = _a24 && o.isEmpty(_a24),
          _d12 = h(null == _a24 ? void 0 : _a24.previousSibling),
          _c7 = h(null == _a24 ? void 0 : _a24.nextSibling);
        return !!(_l12 && (t ? _c7 : _d12) && gu(!t, s, _n120).exists(function (e) {
          return U_(o, e) && !Lt(_i24, F_(o, e));
        })) || gu(t, s, _n120).fold(L, function (n) {
          var r = F_(o, n);
          if (U_(o, n) && !Lt(_i24, r)) {
            if (t || j_(e, n, !1), _a24 && _l12) {
              if (t && _d12) return !0;
              if (!t && _c7) return !0;
              j_(e, n, t), e.dom.remove(_a24);
            }
            return !0;
          }
          return !1;
        });
      }
      return !1;
    },
    $_ = function $_(e, t, n, o) {
      var r = e.selection.getRng(),
        s = Li.fromRangeStart(r),
        a = e.getBody();
      return "selection" === o ? function (e, t) {
        var n = t.startSummary.exists(function (t) {
            return t.contains(e.startContainer);
          }),
          o = t.startSummary.exists(function (t) {
            return t.contains(e.endContainer);
          }),
          r = t.startDetails.forall(function (e) {
            return t.endDetails.forall(function (t) {
              return e !== t;
            });
          });
        return (n || o) && !(n && o) || r;
      }(r, t) : n ? function (e, t) {
        return t.startSummary.exists(function (t) {
          return function (e, t) {
            return Cu(t).exists(function (n) {
              return rr(n.getNode()) && vu(t, n).exists(function (t) {
                return t.isEqual(e);
              }) || n.isEqual(e);
            });
          }(e, t);
        });
      }(s, t) || function (e, t, n) {
        return n.startDetails.exists(function (n) {
          return bu(e, t).forall(function (e) {
            return !n.contains(e.container());
          });
        });
      }(a, s, t) : function (e, t) {
        return t.startSummary.exists(function (t) {
          return function (e, t) {
            return yu(t).exists(function (t) {
              return t.isEqual(e);
            });
          }(e, t);
        });
      }(s, t) || function (e, t) {
        return t.startDetails.exists(function (n) {
          return vu(n, e).forall(function (n) {
            return t.startSummary.exists(function (t) {
              return !t.contains(e.container()) && t.contains(n.container());
            });
          });
        });
      }(s, t);
    },
    V_ = function V_(e, t, n) {
      return function (e, t, n) {
        return function (e, t) {
          var n = I.from(e.getParent(t.startContainer, "details")),
            o = I.from(e.getParent(t.endContainer, "details"));
          if (n.isSome() || o.isSome()) {
            var _t136 = n.bind(function (t) {
              return I.from(e.select("summary", t)[0]);
            });
            return I.some({
              startSummary: _t136,
              startDetails: n,
              endDetails: o
            });
          }
          return I.none();
        }(e.dom, e.selection.getRng()).fold(function () {
          return H_(e, t, n);
        }, function (o) {
          return $_(e, o, t, n) || H_(e, t, n);
        });
      }(e, t, n) || L_ && function (e, t, n) {
        var o = e.selection,
          r = o.getNode(),
          s = o.getRng(),
          a = Li.fromRangeStart(s);
        return !!fr(r) && ("selection" === n && I_(s, r) || ph(t, a, r) ? M_(r) : e.undoManager.transact(function () {
          var s = o.getSel();
          var _ref19 = null != s ? s : {},
            a = _ref19.anchorNode,
            i = _ref19.anchorOffset,
            l = _ref19.focusNode,
            d = _ref19.focusOffset;
          var c = function c() {
              C(a) && C(i) && C(l) && C(d) && (null == s || s.setBaseAndExtent(a, i, l, d));
            },
            u = function u(e, t) {
              q(e.childNodes, function (e) {
                rm(e) && t.appendChild(e);
              });
            },
            m = e.dom.create("span", {
              "data-mce-bogus": "1"
            });
          u(r, m), r.appendChild(m), c(), "word" !== n && "line" !== n || null == s || s.modify("extend", t ? "right" : "left", n), !o.isCollapsed() && I_(o.getRng(), m) ? M_(r) : (e.execCommand(t ? "ForwardDelete" : "Delete"), a = null == s ? void 0 : s.anchorNode, i = null == s ? void 0 : s.anchorOffset, l = null == s ? void 0 : s.focusNode, d = null == s ? void 0 : s.focusOffset, u(m, r), c()), e.dom.remove(m);
        }), !0);
      }(e, t, n) ? I.some(E) : I.none();
    },
    q_ = function q_(e) {
      return function (t, n) {
        var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
        var r = t.getBody(),
          s = {
            bubbles: !0,
            composed: !0,
            data: null,
            isComposing: !1,
            detail: 0,
            view: null,
            target: r,
            currentTarget: r,
            eventPhase: Event.AT_TARGET,
            originalTarget: r,
            explicitOriginalTarget: r,
            isTrusted: !1,
            srcElement: r,
            cancelable: !1,
            preventDefault: E,
            inputType: n
          },
          a = fa(new InputEvent(e));
        return t.dispatch(e, _objectSpread(_objectSpread(_objectSpread({}, a), s), o));
      };
    },
    W_ = q_("input"),
    K_ = q_("beforeinput"),
    G_ = xt(),
    Y_ = G_.os,
    X_ = Y_.isMacOS() || Y_.isiOS(),
    Q_ = G_.browser.isFirefox(),
    J_ = function J_(e, t) {
      var n = e.dom,
        o = e.schema.getMoveCaretBeforeOnEnterElements();
      if (!t) return;
      if (/^(LI|DT|DD)$/.test(t.nodeName)) {
        var _e141 = function (e) {
          for (; e;) {
            if ($o(e) || Jo(e) && e.data && /[\r\n\s]/.test(e.data)) return e;
            e = e.nextSibling;
          }
          return null;
        }(t.firstChild);
        _e141 && /^(UL|OL|DL)$/.test(_e141.nodeName) && t.insertBefore(n.doc.createTextNode(pr), t.firstChild);
      }
      var r = n.createRng();
      if (t.normalize(), t.hasChildNodes()) {
        var _e142 = new zo(t, t);
        var _n121,
          _s46 = t;
        for (; _n121 = _e142.current();) {
          if (Jo(_n121)) {
            r.setStart(_n121, 0), r.setEnd(_n121, 0);
            break;
          }
          if (o[_n121.nodeName.toLowerCase()]) {
            r.setStartBefore(_n121), r.setEndBefore(_n121);
            break;
          }
          _s46 = _n121, _n121 = _e142.next();
        }
        _n121 || (r.setStart(_s46, 0), r.setEnd(_s46, 0));
      } else rr(t) ? t.nextSibling && n.isBlock(t.nextSibling) ? (r.setStartBefore(t), r.setEndBefore(t)) : (r.setStartAfter(t), r.setEndAfter(t)) : (r.setStart(t, 0), r.setEnd(t, 0));
      e.selection.setRng(r), Zf(e, r);
    },
    Z_ = function Z_(e, t) {
      var n = e.getRoot();
      var o,
        r = t;
      for (; r !== n && r && "false" !== e.getContentEditable(r);) {
        if ("true" === e.getContentEditable(r)) {
          o = r;
          break;
        }
        r = r.parentNode;
      }
      return r !== n ? o : n;
    },
    eN = function eN(e) {
      return I.from(e.dom.getParent(e.selection.getStart(!0), e.dom.isBlock));
    },
    tN = function tN(e) {
      e.innerHTML = '<br data-mce-bogus="1">';
    },
    nN = function nN(e, t) {
      Nl(e).toLowerCase() === t.tagName.toLowerCase() && function (e, t, n) {
        var o = e.dom;
        I.from(n.style).map(o.parseStyle).each(function (e) {
          var n = _objectSpread(_objectSpread({}, mo(yn(t))), e);
          o.setStyles(t, n);
        });
        var r = I.from(n["class"]).map(function (e) {
            return e.split(/\s+/);
          }),
          s = I.from(t.className).map(function (e) {
            return G(e.split(/\s+/), function (e) {
              return "" !== e;
            });
          });
        Mt(r, s, function (e, n) {
          var r = G(n, function (t) {
              return !H(e, t);
            }),
            s = [].concat(_toConsumableArray(e), _toConsumableArray(r));
          o.setAttrib(t, "class", s.join(" "));
        });
        var a = ["style", "class"],
          i = ye(n, function (e, t) {
            return !H(a, t);
          });
        o.setAttribs(t, i);
      }(e, t, Rl(e));
    },
    oN = function oN(e, t, n, o) {
      var r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !0;
      var s = arguments.length > 5 ? arguments[5] : undefined;
      var a = e.dom,
        i = e.schema,
        l = Nl(e),
        d = n ? n.nodeName.toUpperCase() : "";
      var c = t;
      var u = i.getTextInlineElements();
      var m;
      m = s || "TABLE" === d || "HR" === d ? a.create(s || l) : n.cloneNode(!1);
      var f = m;
      if (r) {
        do {
          if (u[c.nodeName]) {
            if (xu(c) || Lu(c)) continue;
            var _e143 = c.cloneNode(!1);
            a.setAttrib(_e143, "id", ""), m.hasChildNodes() ? (_e143.appendChild(m.firstChild), m.appendChild(_e143)) : (f = _e143, m.appendChild(_e143));
          }
        } while ((c = c.parentNode) && c !== o);
      } else a.setAttrib(m, "style", null), a.setAttrib(m, "class", null);
      return nN(e, m), tN(f), m;
    },
    rN = function rN(e, t) {
      var n = null == e ? void 0 : e.parentNode;
      return C(n) && n.nodeName === t;
    },
    sN = function sN(e) {
      return C(e) && /^(OL|UL|LI)$/.test(e.nodeName);
    },
    aN = function aN(e) {
      var t = e.parentNode;
      return C(n = t) && /^(LI|DT|DD)$/.test(n.nodeName) ? t : e;
      var n;
    },
    iN = function iN(e, t, n) {
      var o = e[n ? "firstChild" : "lastChild"];
      for (; o && !$o(o);) o = o[n ? "nextSibling" : "previousSibling"];
      return o === t;
    },
    lN = function lN(e, t) {
      return t && "A" === t.nodeName && e.isEmpty(t);
    },
    dN = function dN(e, t) {
      return e.nodeName === t || e.previousSibling && e.previousSibling.nodeName === t;
    },
    cN = function cN(e, t) {
      return C(t) && e.isBlock(t) && !/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName) && !/^(fixed|absolute)/i.test(t.style.position) && e.isEditable(t.parentNode) && "false" !== e.getContentEditable(t);
    },
    uN = function uN(e, t, n) {
      return Jo(t) ? e ? 1 === n && t.data.charAt(n - 1) === Mr ? 0 : n : n === t.data.length - 1 && t.data.charAt(n) === Mr ? t.data.length : n : n;
    },
    mN = {
      insert: function insert(e, t) {
        var n,
          o,
          r,
          s,
          a = !1;
        var i = e.dom,
          l = e.schema.getNonEmptyElements(),
          d = e.selection.getRng(),
          c = Nl(e),
          u = yn(d.startContainer),
          f = In(u, d.startOffset),
          g = f.exists(function (e) {
            return qt(e) && !no(e);
          }),
          p = d.collapsed && g,
          b = function b(t) {
            return oN(e, n, S, E, Bl(e), t);
          },
          v = function v(e) {
            var t = uN(e, n, o);
            if (Jo(n) && (e ? t > 0 : t < n.data.length)) return !1;
            if (n.parentNode === S && a && !e) return !0;
            if (e && $o(n) && n === S.firstChild) return !0;
            if (dN(n, "TABLE") || dN(n, "HR")) return a && !e || !a && e;
            var r = new zo(n, S);
            var s;
            for (Jo(n) && (e && 0 === t ? r.prev() : e || t !== n.data.length || r.next()); s = r.current();) {
              if ($o(s)) {
                if (!s.getAttribute("data-mce-bogus")) {
                  var _e144 = s.nodeName.toLowerCase();
                  if (l[_e144] && "br" !== _e144) return !1;
                }
              } else if (Jo(s) && !ds(s.data)) return !1;
              e ? r.prev() : r.next();
            }
            return !0;
          },
          w = function w() {
            var t;
            return t = /^(H[1-6]|PRE|FIGURE)$/.test(r) && "HGROUP" !== _ ? b(c) : b(), function (e, t) {
              var n = Dl(e);
              return !y(t) && (m(n) ? H(Dt.explode(n), t.nodeName.toLowerCase()) : n);
            }(e, s) && cN(i, s) && i.isEmpty(S, void 0, {
              includeZwsp: !0
            }) ? t = i.split(s, S) : i.insertAfter(t, S), J_(e, t), t;
          };
        Of(i, d).each(function (e) {
          d.setStart(e.startContainer, e.startOffset), d.setEnd(e.endContainer, e.endOffset);
        }), n = d.startContainer, o = d.startOffset;
        var x = !(!t || !t.shiftKey),
          k = !(!t || !t.ctrlKey);
        $o(n) && n.hasChildNodes() && !p && (a = o > n.childNodes.length - 1, n = n.childNodes[Math.min(o, n.childNodes.length - 1)] || n, o = a && Jo(n) ? n.data.length : 0);
        var E = Z_(i, n);
        if (!E || function (e, t) {
          var n = e.dom.getParent(t, "ol,ul,dl");
          return null !== n && "false" === e.dom.getContentEditableParent(n);
        }(e, n)) return;
        x || (n = function (e, t, n, o, r) {
          var s, a;
          var i = e.dom,
            l = null !== (s = Z_(i, o)) && void 0 !== s ? s : i.getRoot();
          var d = i.getParent(o, i.isBlock);
          if (!d || !cN(i, d)) {
            if (d = d || l, !d.hasChildNodes()) {
              var _o103 = i.create(t);
              return nN(e, _o103), d.appendChild(_o103), n.setStart(_o103, 0), n.setEnd(_o103, 0), _o103;
            }
            var _s47,
              _c8 = o;
            for (; _c8 && _c8.parentNode !== d;) _c8 = _c8.parentNode;
            for (; _c8 && !i.isBlock(_c8);) _s47 = _c8, _c8 = _c8.previousSibling;
            var _u7 = null === (a = null == _s47 ? void 0 : _s47.parentElement) || void 0 === a ? void 0 : a.nodeName;
            if (_s47 && _u7 && e.schema.isValidChild(_u7, t.toLowerCase())) {
              var _a25 = _s47.parentNode,
                _l13 = i.create(t);
              for (nN(e, _l13), _a25.insertBefore(_l13, _s47), _c8 = _s47; _c8 && !i.isBlock(_c8);) {
                var _e145 = _c8.nextSibling;
                _l13.appendChild(_c8), _c8 = _e145;
              }
              n.setStart(o, r), n.setEnd(o, r);
            }
          }
          return o;
        }(e, c, d, n, o));
        var S = i.getParent(n, i.isBlock) || i.getRoot();
        s = C(null == S ? void 0 : S.parentNode) ? i.getParent(S.parentNode, i.isBlock) : null, r = S ? S.nodeName.toUpperCase() : "";
        var _ = s ? s.nodeName.toUpperCase() : "";
        if ("LI" !== _ || k || (S = s, s = s.parentNode, r = _), $o(s) && function (e, t, n) {
          return !t && n.nodeName.toLowerCase() === Nl(e) && e.dom.isEmpty(n) && function (t, n, o) {
            var r = n;
            for (; r && r !== t && h(r.nextSibling);) {
              var _t137 = r.parentElement;
              if (!_t137 || (s = _t137, !ke(e.schema.getTextBlockElements(), s.nodeName.toLowerCase()))) return mr(_t137);
              r = _t137;
            }
            var s;
            return !1;
          }(e.getBody(), n);
        }(e, x, S)) return function (e, t, n) {
          var o, r, s;
          var a = t(Nl(e)),
            i = function (e, t) {
              return e.dom.getParent(t, mr);
            }(e, n);
          i && (e.dom.insertAfter(a, i), J_(e, a), (null !== (s = null === (r = null === (o = n.parentElement) || void 0 === o ? void 0 : o.childNodes) || void 0 === r ? void 0 : r.length) && void 0 !== s ? s : 0) > 1 && e.dom.remove(n));
        }(e, b, S);
        if (/^(LI|DT|DD)$/.test(r) && $o(s) && i.isEmpty(S)) return void function (e, t, n, o, r) {
          var s = e.dom,
            a = e.selection.getRng(),
            i = n.parentNode;
          if (n === e.getBody() || !i) return;
          var l;
          sN(l = n) && sN(l.parentNode) && (r = "LI");
          var d = t(r);
          if (iN(n, o, !0) && iN(n, o, !1)) {
            if (rN(n, "LI")) {
              var _e146 = aN(n);
              s.insertAfter(d, _e146), function (e) {
                var t;
                return (null === (t = e.parentNode) || void 0 === t ? void 0 : t.firstChild) === e;
              }(n) ? s.remove(_e146) : s.remove(n);
            } else s.replace(d, n);
          } else if (iN(n, o, !0)) rN(n, "LI") ? (s.insertAfter(d, aN(n)), d.appendChild(s.doc.createTextNode(" ")), d.appendChild(n)) : i.insertBefore(d, n), s.remove(o);else if (iN(n, o, !1)) s.insertAfter(d, aN(n)), s.remove(o);else {
            n = aN(n);
            var _e147 = a.cloneRange();
            _e147.setStartAfter(o), _e147.setEndAfter(n);
            var _t138 = _e147.extractContents();
            "LI" === r && function (e, t) {
              return e.firstChild && "LI" === e.firstChild.nodeName;
            }(_t138) ? (d = _t138.firstChild, s.insertAfter(_t138, n)) : (s.insertAfter(_t138, n), s.insertAfter(d, n)), s.remove(o);
          }
          J_(e, d);
        }(e, b, s, S, c);
        if (!(p || S !== e.getBody() && cN(i, S))) return;
        var N = S.parentNode;
        var R;
        if (p) R = b(c), f.fold(function () {
          bo(u, yn(R));
        }, function (e) {
          go(e, yn(R));
        }), e.selection.setCursorLocation(R, 0);else if (jr(S)) R = Yr(S), i.isEmpty(S) && tN(S), nN(e, R), J_(e, R);else if (v(!1)) R = w();else if (v(!0) && N) {
          R = N.insertBefore(b(), S);
          var _t139 = yn(d.startContainer).dom.hasChildNodes() && d.collapsed;
          J_(e, dN(S, "HR") || _t139 ? R : S);
        } else {
          var _t140 = function (e) {
            var t = e.cloneRange();
            return t.setStart(e.startContainer, uN(!0, e.startContainer, e.startOffset)), t.setEnd(e.endContainer, uN(!1, e.endContainer, e.endOffset)), t;
          }(d).cloneRange();
          _t140.setEndAfter(S);
          var _n122 = _t140.extractContents();
          (function (e) {
            q(Io(yn(e), Kt), function (e) {
              var t = e.dom;
              t.nodeValue = Fr(t.data);
            });
          })(_n122), function (e) {
            var t = e;
            do {
              Jo(t) && (t.data = t.data.replace(/^[\r\n]+/, "")), t = t.firstChild;
            } while (t);
          }(_n122), R = _n122.firstChild, i.insertAfter(_n122, S), function (e, t, n) {
            var o;
            var r = [];
            if (!n) return;
            var s = n;
            for (; s = s.firstChild;) {
              if (e.isBlock(s)) return;
              $o(s) && !t[s.nodeName.toLowerCase()] && r.push(s);
            }
            var a = r.length;
            for (; a--;) s = r[a], (!s.hasChildNodes() || s.firstChild === s.lastChild && "" === (null === (o = s.firstChild) || void 0 === o ? void 0 : o.nodeValue) || lN(e, s)) && e.remove(s);
          }(i, l, R), function (e, t) {
            t.normalize();
            var n = t.lastChild;
            (!n || $o(n) && /^(left|right)$/gi.test(e.getStyle(n, "float", !0))) && e.add(t, "br");
          }(i, S), i.isEmpty(S) && tN(S), R.normalize(), i.isEmpty(R) ? (i.remove(R), w()) : (nN(e, R), J_(e, R));
        }
        i.setAttrib(R, "id", ""), e.dispatch("NewBlock", {
          newBlock: R
        });
      },
      fakeEventName: "insertParagraph"
    },
    fN = function fN(e, t, n) {
      var o = e.dom.createRng();
      n ? (o.setStartBefore(t), o.setEndBefore(t)) : (o.setStartAfter(t), o.setEndAfter(t)), e.selection.setRng(o), Zf(e, o);
    },
    gN = function gN(e, t) {
      var n = bn("br");
      go(yn(t), n), e.undoManager.add();
    },
    pN = function pN(e, t) {
      hN(e.getBody(), t) || po(yn(t), bn("br"));
      var n = bn("br");
      po(yn(t), n), fN(e, n.dom, !1), e.undoManager.add();
    },
    hN = function hN(e, t) {
      return n = Li.after(t), !!rr(n.getNode()) || bu(e, Li.after(t)).map(function (e) {
        return rr(e.getNode());
      }).getOr(!1);
      var n;
    },
    bN = function bN(e) {
      return e && "A" === e.nodeName && "href" in e;
    },
    vN = function vN(e) {
      return e.fold(L, bN, bN, L);
    },
    yN = function yN(e, t) {
      t.fold(E, O(gN, e), O(pN, e), E);
    },
    CN = {
      insert: function insert(e, t) {
        var n = function (e) {
          var t = O(rh, e),
            n = Li.fromRangeStart(e.selection.getRng());
          return Vx(t, e.getBody(), n).filter(vN);
        }(e);
        n.isSome() ? n.each(O(yN, e)) : function (e, t) {
          var n = e.selection,
            o = e.dom,
            r = n.getRng();
          var s,
            a = !1;
          Of(o, r).each(function (e) {
            r.setStart(e.startContainer, e.startOffset), r.setEnd(e.endContainer, e.endOffset);
          });
          var i = r.startOffset,
            l = r.startContainer;
          if ($o(l) && l.hasChildNodes()) {
            var _e148 = i > l.childNodes.length - 1;
            l = l.childNodes[Math.min(i, l.childNodes.length - 1)] || l, i = _e148 && Jo(l) ? l.data.length : 0;
          }
          var d = o.getParent(l, o.isBlock);
          var c = d && d.parentNode ? o.getParent(d.parentNode, o.isBlock) : null,
            u = c ? c.nodeName.toUpperCase() : "",
            m = !(!t || !t.ctrlKey);
          "LI" !== u || m || (d = c), Jo(l) && i >= l.data.length && (function (e, t, n) {
            var o = new zo(t, n);
            var r;
            var s = e.getNonEmptyElements();
            for (; r = o.next();) if (s[r.nodeName.toLowerCase()] || Jo(r) && r.length > 0) return !0;
            return !1;
          }(e.schema, l, d || o.getRoot()) || (s = o.create("br"), r.insertNode(s), r.setStartAfter(s), r.setEndAfter(s), a = !0)), s = o.create("br"), Ii(o, r, s), fN(e, s, a), e.undoManager.add();
        }(e, t);
      },
      fakeEventName: "insertLineBreak"
    },
    wN = function wN(e, t) {
      return eN(e).filter(function (e) {
        return t.length > 0 && xn(yn(e), t);
      }).isSome();
    },
    xN = al([{
      br: []
    }, {
      block: []
    }, {
      none: []
    }]),
    kN = function kN(e, t) {
      return function (e) {
        return wN(e, Tl(e));
      }(e);
    },
    EN = function EN(e) {
      return function (t, n) {
        return function (e) {
          return eN(e).filter(function (e) {
            return Nr(yn(e));
          }).isSome();
        }(t) === e;
      };
    },
    SN = function SN(e, t) {
      return function (n, o) {
        var r = function (e) {
          return eN(e).fold(N(""), function (e) {
            return e.nodeName.toUpperCase();
          });
        }(n) === e.toUpperCase();
        return r === t;
      };
    },
    _N = function _N(e) {
      var t = Z_(e.dom, e.selection.getStart());
      return y(t);
    },
    NN = function NN(e) {
      return SN("pre", e);
    },
    RN = function RN(e) {
      return function (t, n) {
        return _l(t) === e;
      };
    },
    AN = function AN(e, t) {
      return function (e) {
        return wN(e, Ol(e));
      }(e);
    },
    ON = function ON(e, t) {
      return t;
    },
    TN = function TN(e) {
      var t = Nl(e),
        n = Z_(e.dom, e.selection.getStart());
      return C(n) && e.schema.isValidChild(n.nodeName, t);
    },
    BN = function BN(e) {
      var t = e.selection.getRng(),
        n = yn(t.startContainer),
        o = In(n, t.startOffset).map(function (e) {
          return qt(e) && !no(e);
        });
      return t.collapsed && o.getOr(!0);
    },
    DN = function DN(e, t) {
      return function (n, o) {
        return X(e, function (e, t) {
          return e && t(n, o);
        }, !0) ? I.some(t) : I.none();
      };
    },
    PN = function PN(e, t, n) {
      t.selection.isCollapsed() || function (e) {
        e.execCommand("delete");
      }(t), C(n) && K_(t, e.fakeEventName).isDefaultPrevented() || (e.insert(t, n), C(n) && W_(t, e.fakeEventName));
    },
    LN = function LN(e, t) {
      var n = function n() {
          return PN(CN, e, t);
        },
        o = function o() {
          return PN(mN, e, t);
        },
        r = function (e, t) {
          return Px([DN([kN], xN.none()), DN([NN(!0), _N], xN.none()), DN([SN("summary", !0)], xN.br()), DN([NN(!0), RN(!1), ON], xN.br()), DN([NN(!0), RN(!1)], xN.block()), DN([NN(!0), RN(!0), ON], xN.block()), DN([NN(!0), RN(!0)], xN.br()), DN([EN(!0), ON], xN.br()), DN([EN(!0)], xN.block()), DN([AN], xN.br()), DN([ON], xN.br()), DN([TN], xN.block()), DN([BN], xN.block())], [e, !(!t || !t.shiftKey)]).getOr(xN.none());
        }(e, t);
      switch (Al(e)) {
        case "linebreak":
          r.fold(n, n, E);
          break;
        case "block":
          r.fold(o, o, E);
          break;
        case "invert":
          r.fold(o, n, E);
          break;
        default:
          r.fold(n, o, E);
      }
    },
    MN = xt(),
    IN = MN.os.isiOS() && MN.browser.isSafari(),
    FN = function FN(e, t) {
      var n;
      t.isDefaultPrevented() || (t.preventDefault(), (n = e.undoManager).typing && (n.typing = !1, n.add()), e.undoManager.transact(function () {
        LN(e, t);
      }));
    },
    UN = xt(),
    zN = function zN(e) {
      return e.stopImmediatePropagation();
    },
    jN = function jN(e) {
      return e.keyCode === ef.PAGE_UP || e.keyCode === ef.PAGE_DOWN;
    },
    HN = function HN(e, t, n) {
      n && !e.get() ? t.on("NodeChange", zN, !0) : !n && e.get() && t.off("NodeChange", zN), e.set(n);
    },
    $N = function $N(e, t) {
      var n = t.container(),
        o = t.offset();
      return Jo(n) ? (n.insertData(o, e), I.some(Li(n, o + e.length))) : Yc(t).map(function (n) {
        var o = vn(e);
        return t.isAtEnd() ? po(n, o) : go(n, o), Li(o.dom, e.length);
      });
    },
    VN = O($N, pr),
    qN = O($N, " "),
    WN = function WN(e) {
      return function (t) {
        e.selection.setRng(t.toRange()), e.nodeChanged();
      };
    },
    KN = function KN(e) {
      var t = Li.fromRangeStart(e.selection.getRng()),
        n = yn(e.getBody());
      if (e.selection.isCollapsed()) {
        var _o104 = O(rh, e),
          _r71 = Li.fromRangeStart(e.selection.getRng());
        return Vx(_o104, e.getBody(), _r71).bind(function (e) {
          return function (t) {
            return t.fold(function (t) {
              return vu(e.dom, Li.before(t));
            }, function (e) {
              return yu(e);
            }, function (e) {
              return Cu(e);
            }, function (t) {
              return bu(e.dom, Li.after(t));
            });
          };
        }(n)).map(function (o) {
          return function () {
            return function (e, t) {
              return function (n) {
                return Mp(e, n) ? VN(t) : qN(t);
              };
            }(n, t)(o).each(WN(e));
          };
        });
      }
      return I.none();
    },
    GN = function GN(e) {
      return It(At.browser.isFirefox() && e.selection.isEditable() && (t = e.dom, n = e.selection.getRng().startContainer, t.isEditable(t.getParent(n, "summary"))), function () {
        var t = yn(e.getBody());
        e.selection.isCollapsed() || e.getDoc().execCommand("Delete"), function (e, t) {
          return Mp(e, t) ? VN(t) : qN(t);
        }(t, Li.fromRangeStart(e.selection.getRng())).each(WN(e));
      });
      var t, n;
    },
    YN = function YN(e) {
      return ac(e) ? [{
        keyCode: ef.TAB,
        action: FE(uS, e, !0)
      }, {
        keyCode: ef.TAB,
        shiftKey: !0,
        action: FE(uS, e, !1)
      }] : [];
    },
    XN = function XN(e) {
      if (e.addShortcut("Meta+P", "", "mcePrint"), P_(e), PC(e)) return Da(null);
      {
        var _t141 = zk(e);
        return function (e) {
          e.on("keyup compositionstart", O(_E, e));
        }(e), function (e, t) {
          e.on("keydown", function (n) {
            n.isDefaultPrevented() || function (e, t, n) {
              var o = At.os.isMacOS() || At.os.isiOS();
              UE([{
                keyCode: ef.RIGHT,
                action: FE(AE, e, !0)
              }, {
                keyCode: ef.LEFT,
                action: FE(AE, e, !1)
              }, {
                keyCode: ef.UP,
                action: FE(OE, e, !1)
              }, {
                keyCode: ef.DOWN,
                action: FE(OE, e, !0)
              }].concat(_toConsumableArray(o ? [{
                keyCode: ef.UP,
                action: FE(BE, e, !1),
                metaKey: !0,
                shiftKey: !0
              }, {
                keyCode: ef.DOWN,
                action: FE(BE, e, !0),
                metaKey: !0,
                shiftKey: !0
              }] : []), [{
                keyCode: ef.RIGHT,
                action: FE(aS, e, !0)
              }, {
                keyCode: ef.LEFT,
                action: FE(aS, e, !1)
              }, {
                keyCode: ef.UP,
                action: FE(iS, e, !1)
              }, {
                keyCode: ef.DOWN,
                action: FE(iS, e, !0)
              }, {
                keyCode: ef.UP,
                action: FE(iS, e, !1)
              }, {
                keyCode: ef.UP,
                action: FE(LE, e, !1)
              }, {
                keyCode: ef.DOWN,
                action: FE(LE, e, !0)
              }, {
                keyCode: ef.RIGHT,
                action: FE(jE, e, !0)
              }, {
                keyCode: ef.LEFT,
                action: FE(jE, e, !1)
              }, {
                keyCode: ef.UP,
                action: FE(HE, e, !1)
              }, {
                keyCode: ef.DOWN,
                action: FE(HE, e, !0)
              }, {
                keyCode: ef.RIGHT,
                action: FE(Fk, e, t, !0)
              }, {
                keyCode: ef.LEFT,
                action: FE(Fk, e, t, !1)
              }, {
                keyCode: ef.RIGHT,
                ctrlKey: !o,
                altKey: o,
                action: FE(jk, e, t)
              }, {
                keyCode: ef.LEFT,
                ctrlKey: !o,
                altKey: o,
                action: FE(Hk, e, t)
              }, {
                keyCode: ef.UP,
                action: FE(PE, e, !1)
              }, {
                keyCode: ef.DOWN,
                action: FE(PE, e, !0)
              }]), n).each(function (e) {
                n.preventDefault();
              });
            }(e, t, n);
          });
        }(e, _t141), function (e, t) {
          var n = !1;
          e.on("keydown", function (o) {
            n = o.keyCode === ef.BACKSPACE, o.isDefaultPrevented() || function (e, t, n) {
              var o = n.keyCode === ef.BACKSPACE ? "deleteContentBackward" : "deleteContentForward",
                r = e.selection.isCollapsed(),
                s = r ? "character" : "selection",
                a = function a(e) {
                  return r ? e ? "word" : "line" : "selection";
                };
              zE([{
                keyCode: ef.BACKSPACE,
                action: FE(fE, e)
              }, {
                keyCode: ef.BACKSPACE,
                action: FE(xx, e, !1)
              }, {
                keyCode: ef.DELETE,
                action: FE(xx, e, !0)
              }, {
                keyCode: ef.BACKSPACE,
                action: FE(gx, e, !1)
              }, {
                keyCode: ef.DELETE,
                action: FE(gx, e, !0)
              }, {
                keyCode: ef.BACKSPACE,
                action: FE(Wk, e, t, !1)
              }, {
                keyCode: ef.DELETE,
                action: FE(Wk, e, t, !0)
              }, {
                keyCode: ef.BACKSPACE,
                action: FE(Hh, e, !1)
              }, {
                keyCode: ef.DELETE,
                action: FE(Hh, e, !0)
              }, {
                keyCode: ef.BACKSPACE,
                action: FE(V_, e, !1, s)
              }, {
                keyCode: ef.DELETE,
                action: FE(V_, e, !0, s)
              }].concat(_toConsumableArray(X_ ? [{
                keyCode: ef.BACKSPACE,
                altKey: !0,
                action: FE(V_, e, !1, a(!0))
              }, {
                keyCode: ef.DELETE,
                altKey: !0,
                action: FE(V_, e, !0, a(!0))
              }, {
                keyCode: ef.BACKSPACE,
                metaKey: !0,
                action: FE(V_, e, !1, a(!1))
              }] : [{
                keyCode: ef.BACKSPACE,
                ctrlKey: !0,
                action: FE(V_, e, !1, a(!0))
              }, {
                keyCode: ef.DELETE,
                ctrlKey: !0,
                action: FE(V_, e, !0, a(!0))
              }]), [{
                keyCode: ef.BACKSPACE,
                action: FE(kx, e, !1)
              }, {
                keyCode: ef.DELETE,
                action: FE(kx, e, !0)
              }, {
                keyCode: ef.BACKSPACE,
                action: FE(sE, e, !1)
              }, {
                keyCode: ef.DELETE,
                action: FE(sE, e, !0)
              }, {
                keyCode: ef.BACKSPACE,
                action: FE(ix, e, !1)
              }, {
                keyCode: ef.DELETE,
                action: FE(ix, e, !0)
              }, {
                keyCode: ef.BACKSPACE,
                action: FE(rx, e, !1)
              }, {
                keyCode: ef.DELETE,
                action: FE(rx, e, !0)
              }, {
                keyCode: ef.BACKSPACE,
                action: FE(tE, e, !1)
              }, {
                keyCode: ef.DELETE,
                action: FE(tE, e, !0)
              }]), n).filter(function (t) {
                return e.selection.isEditable();
              }).each(function (t) {
                n.preventDefault(), K_(e, o).isDefaultPrevented() || (t(), W_(e, o));
              });
            }(e, t, o);
          }), e.on("keyup", function (t) {
            t.isDefaultPrevented() || function (e, t, n) {
              UE([{
                keyCode: ef.BACKSPACE,
                action: FE(wx, e)
              }, {
                keyCode: ef.DELETE,
                action: FE(wx, e)
              }].concat(_toConsumableArray(X_ ? [{
                keyCode: ef.BACKSPACE,
                altKey: !0,
                action: FE(oE, e)
              }, {
                keyCode: ef.DELETE,
                altKey: !0,
                action: FE(oE, e)
              }].concat(_toConsumableArray(n ? [{
                keyCode: Q_ ? 224 : 91,
                action: FE(oE, e)
              }] : [])) : [{
                keyCode: ef.BACKSPACE,
                ctrlKey: !0,
                action: FE(oE, e)
              }, {
                keyCode: ef.DELETE,
                ctrlKey: !0,
                action: FE(oE, e)
              }])), t);
            }(e, t, n), n = !1;
          });
        }(e, _t141), function (e) {
          var t = I.none();
          e.on("keydown", function (n) {
            n.keyCode === ef.ENTER && (IN && function (e) {
              if (!e.collapsed) return !1;
              var t = e.startContainer;
              if (Jo(t)) {
                var _n123 = /^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,
                  _o105 = t.data.charAt(e.startOffset - 1);
                return _n123.test(_o105);
              }
              return !1;
            }(e.selection.getRng()) ? function (e) {
              t = I.some(e.selection.getBookmark()), e.undoManager.add();
            }(e) : FN(e, n));
          }), e.on("keyup", function (n) {
            n.keyCode === ef.ENTER && t.each(function () {
              return function (e, n) {
                e.undoManager.undo(), t.fold(E, function (t) {
                  return e.selection.moveToBookmark(t);
                }), FN(e, n), t = I.none();
              }(e, n);
            });
          });
        }(e), function (e) {
          e.on("keydown", function (t) {
            t.isDefaultPrevented() || function (e, t) {
              zE([{
                keyCode: ef.SPACEBAR,
                action: FE(KN, e)
              }, {
                keyCode: ef.SPACEBAR,
                action: FE(GN, e)
              }], t).each(function (n) {
                t.preventDefault(), K_(e, "insertText", {
                  data: " "
                }).isDefaultPrevented() || (n(), W_(e, "insertText", {
                  data: " "
                }));
              });
            }(e, t);
          });
        }(e), function (e) {
          e.on("input", function (t) {
            t.isComposing || function (e) {
              var t = yn(e.getBody());
              e.selection.isCollapsed() && Vp(t, Li.fromRangeStart(e.selection.getRng())).each(function (t) {
                e.selection.setRng(t.toRange());
              });
            }(e);
          });
        }(e), function (e) {
          e.on("keydown", function (t) {
            t.isDefaultPrevented() || function (e, t) {
              UE(_toConsumableArray(YN(e)), t).each(function (e) {
                t.preventDefault();
              });
            }(e, t);
          });
        }(e), function (e, t) {
          e.on("keydown", function (n) {
            n.isDefaultPrevented() || function (e, t, n) {
              var o = At.os.isMacOS() || At.os.isiOS();
              UE([{
                keyCode: ef.END,
                action: FE(TE, e, !0)
              }, {
                keyCode: ef.HOME,
                action: FE(TE, e, !1)
              }].concat(_toConsumableArray(o ? [] : [{
                keyCode: ef.HOME,
                action: FE(BE, e, !1),
                ctrlKey: !0,
                shiftKey: !0
              }, {
                keyCode: ef.END,
                action: FE(BE, e, !0),
                ctrlKey: !0,
                shiftKey: !0
              }]), [{
                keyCode: ef.END,
                action: FE($E, e, !0)
              }, {
                keyCode: ef.HOME,
                action: FE($E, e, !1)
              }, {
                keyCode: ef.END,
                action: FE($k, e, !0, t)
              }, {
                keyCode: ef.HOME,
                action: FE($k, e, !1, t)
              }]), n).each(function (e) {
                n.preventDefault();
              });
            }(e, t, n);
          });
        }(e, _t141), function (e, t) {
          if (UN.os.isMacOS()) return;
          var n = Da(!1);
          e.on("keydown", function (t) {
            jN(t) && HN(n, e, !0);
          }), e.on("keyup", function (o) {
            o.isDefaultPrevented() || function (e, t, n) {
              UE([{
                keyCode: ef.PAGE_UP,
                action: FE($k, e, !1, t)
              }, {
                keyCode: ef.PAGE_DOWN,
                action: FE($k, e, !0, t)
              }], n);
            }(e, t, o), jN(o) && n.get() && (HN(n, e, !1), e.nodeChanged());
          });
        }(e, _t141), _t141;
      }
    };
  var QN = /*#__PURE__*/function () {
    function QN(e) {
      _classCallCheck(this, QN);
      var t;
      this.lastPath = [], this.editor = e;
      var n = this;
      "onselectionchange" in e.getDoc() || e.on("NodeChange click mouseup keyup focus", function (n) {
        var o = e.selection.getRng(),
          r = {
            startContainer: o.startContainer,
            startOffset: o.startOffset,
            endContainer: o.endContainer,
            endOffset: o.endOffset
          };
        "nodechange" !== n.type && kf(r, t) || e.dispatch("SelectionChange"), t = r;
      }), e.on("contextmenu", function () {
        e.dispatch("SelectionChange");
      }), e.on("SelectionChange", function () {
        var t = e.selection.getStart(!0);
        t && tm(e) && !n.isSameElementPath(t) && e.dom.isChildOf(t, e.getBody()) && e.nodeChanged({
          selectionChange: !0
        });
      }), e.on("mouseup", function (t) {
        !t.isDefaultPrevented() && tm(e) && ("IMG" === e.selection.getNode().nodeName ? mg.setEditorTimeout(e, function () {
          e.nodeChanged();
        }) : e.nodeChanged());
      });
    }
    _createClass(QN, [{
      key: "nodeChanged",
      value: function nodeChanged() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var t = this.editor.selection;
        var n;
        if (this.editor.initialized && t && !wd(this.editor) && !this.editor.mode.isReadOnly()) {
          var _o106 = this.editor.getBody();
          n = t.getStart(!0) || _o106, n.ownerDocument === this.editor.getDoc() && this.editor.dom.isChildOf(n, _o106) || (n = _o106);
          var _r72 = [];
          this.editor.dom.getParent(n, function (e) {
            return e === _o106 || (_r72.push(e), !1);
          }), this.editor.dispatch("NodeChange", _objectSpread(_objectSpread({}, e), {}, {
            element: n,
            parents: _r72
          }));
        }
      }
    }, {
      key: "isSameElementPath",
      value: function isSameElementPath(e) {
        var t;
        var n = this.editor,
          o = oe(n.dom.getParents(e, M, n.getBody()));
        if (o.length === this.lastPath.length) {
          for (t = o.length; t >= 0 && o[t] === this.lastPath[t]; t--);
          if (-1 === t) return this.lastPath = o, !0;
        }
        return this.lastPath = o, !1;
      }
    }]);
    return QN;
  }();
  var JN = ti("image"),
    ZN = ti("event"),
    eR = function eR(e) {
      return function (t) {
        t[ZN] = e;
      };
    },
    tR = eR(0),
    nR = eR(2),
    oR = eR(1),
    rR = (0, function (e) {
      var t = e;
      return I.from(t[ZN]).exists(function (e) {
        return 0 === e;
      });
    });
  var sR = ti("mode"),
    aR = function aR(e) {
      return function (t) {
        t[sR] = e;
      };
    },
    iR = function iR(e, t) {
      return aR(t)(e);
    },
    lR = aR(0),
    dR = aR(2),
    cR = aR(1),
    uR = function uR(e) {
      return function (t) {
        var n = t;
        return I.from(n[sR]).exists(function (t) {
          return t === e;
        });
      };
    },
    mR = uR(0),
    fR = uR(1),
    gR = ["none", "copy", "link", "move"],
    pR = ["none", "copy", "copyLink", "copyMove", "link", "linkMove", "move", "all", "uninitialized"],
    hR = function hR() {
      var e = new window.DataTransfer();
      var t = "move",
        n = "all";
      var o = {
        get dropEffect() {
          return t;
        },
        set dropEffect(e) {
          H(gR, e) && (t = e);
        },
        get effectAllowed() {
          return n;
        },
        set effectAllowed(e) {
          rR(o) && H(pR, e) && (n = e);
        },
        get items() {
          return function (e, t) {
            return _objectSpread(_objectSpread({}, t), {}, {
              get length() {
                return t.length;
              },
              add: function add(n, o) {
                if (mR(e)) {
                  if (!m(n)) return t.add(n);
                  if (!v(o)) return t.add(n, o);
                }
                return null;
              },
              remove: function remove(n) {
                mR(e) && t.remove(n);
              },
              clear: function clear() {
                mR(e) && t.clear();
              }
            });
          }(o, e.items);
        },
        get files() {
          return fR(o) ? Object.freeze({
            length: 0,
            item: function item(e) {
              return null;
            }
          }) : e.files;
        },
        get types() {
          return e.types;
        },
        setDragImage: function setDragImage(t, n, r) {
          var s;
          mR(o) && (s = {
            image: t,
            x: n,
            y: r
          }, o[JN] = s, e.setDragImage(t, n, r));
        },
        getData: function getData(t) {
          return fR(o) ? "" : e.getData(t);
        },
        setData: function setData(t, n) {
          mR(o) && e.setData(t, n);
        },
        clearData: function clearData(t) {
          mR(o) && e.clearData(t);
        }
      };
      return lR(o), o;
    },
    bR = function bR(e, t) {
      return e.setData("text/html", t);
    },
    vR = "x-tinymce/html",
    yR = N(vR),
    CR = "\x3c!-- " + vR + " --\x3e",
    wR = function wR(e) {
      return CR + e;
    },
    xR = function xR(e) {
      return -1 !== e.indexOf(CR);
    },
    kR = "%MCEPASTEBIN%",
    ER = function ER(e) {
      return e.dom.get("mcepastebin");
    },
    SR = function SR(e) {
      return C(e) && "mcepastebin" === e.id;
    },
    _R = function _R(e) {
      return e === kR;
    },
    NR = function NR(e, t) {
      return Dt.each(t, function (t) {
        e = u(t, RegExp) ? e.replace(t, "") : e.replace(t[0], t[1]);
      }), e;
    },
    RR = function RR(e) {
      return NR(e, [/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi, /<!--StartFragment-->|<!--EndFragment-->/g, [/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g, function (e, t, n) {
        return t || n ? pr : " ";
      }], /<br class="Apple-interchange-newline">/g, /<br>$/i]);
    },
    AR = function AR(e, t) {
      return {
        content: e,
        cancelled: t
      };
    },
    OR = function OR(e, t) {
      return e.insertContent(t, {
        merge: qd(e),
        paste: !0
      }), !0;
    },
    TR = function TR(e) {
      return /^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e);
    },
    BR = function BR(e, t, n) {
      return !(e.selection.isCollapsed() || !TR(t)) && function (e, t, n) {
        return e.undoManager.extra(function () {
          n(e, t);
        }, function () {
          e.execCommand("mceInsertLink", !1, t);
        }), !0;
      }(e, t, n);
    },
    DR = function DR(e, t, n) {
      return !!function (e, t) {
        return TR(t) && $(sc(e), function (e) {
          return $e(t.toLowerCase(), ".".concat(e.toLowerCase()));
        });
      }(e, t) && function (e, t, n) {
        return e.undoManager.extra(function () {
          n(e, t);
        }, function () {
          e.insertContent('<img src="' + t + '">');
        }), !0;
      }(e, t, n);
    },
    PR = function (e) {
      var t = 0;
      return function () {
        return "mceclip" + t++;
      };
    }(),
    LR = function LR(e) {
      var t = hR();
      return bR(t, e), dR(t), t;
    },
    MR = function MR(e, t, n, o, r) {
      var s = function (e, t, n) {
        return function (e, t, n) {
          var o = function (e, t, n) {
              return e.dispatch("PastePreProcess", {
                content: t,
                internal: n
              });
            }(e, t, n),
            r = function (e, t) {
              var n = tC({
                sanitize: oc(e)
              }, e.schema);
              n.addNodeFilter("meta", function (e) {
                Dt.each(e, function (e) {
                  e.remove();
                });
              });
              var o = n.parse(t, {
                forced_root_block: !1,
                isRootContent: !0
              });
              return Gg({
                validate: !0
              }, e.schema).serialize(o);
            }(e, o.content);
          return e.hasEventListeners("PastePostProcess") && !o.isDefaultPrevented() ? function (e, t, n) {
            var o = e.dom.create("div", {
                style: "display:none"
              }, t),
              r = function (e, t, n) {
                return e.dispatch("PastePostProcess", {
                  node: t,
                  internal: n
                });
              }(e, o, n);
            return AR(r.node.innerHTML, r.isDefaultPrevented());
          }(e, r, n) : AR(r, o.isDefaultPrevented());
        }(e, t, n);
      }(e, t, n);
      if (!s.cancelled) {
        var _t142 = s.content,
          _n124 = function _n124() {
            return function (e, t, n) {
              n || !Wd(e) ? OR(e, t) : function (e, t) {
                Dt.each([BR, DR, OR], function (n) {
                  return !n(e, t, OR);
                });
              }(e, t);
            }(e, _t142, o);
          };
        r ? K_(e, "insertFromPaste", {
          dataTransfer: LR(_t142)
        }).isDefaultPrevented() || (_n124(), W_(e, "insertFromPaste")) : _n124();
      }
    },
    IR = function IR(e, t, n, o) {
      var r = n || xR(t);
      MR(e, function (e) {
        return e.replace(CR, "");
      }(t), r, !1, o);
    },
    FR = function FR(e, t, n) {
      var o = e.dom.encode(t).replace(/\r\n/g, "\n"),
        r = function (e, t, n) {
          var o = e.split(/\n\n/),
            r = function (e, t) {
              var n = "<" + e;
              var o = Ce(t, function (e, t) {
                return t + '="' + Zs.encodeAllRaw(e) + '"';
              });
              return o.length && (n += " " + o.join(" ")), n + ">";
            }(t, n),
            s = "</" + t + ">",
            a = V(o, function (e) {
              return e.split(/\n/).join("<br />");
            });
          return 1 === a.length ? a[0] : V(a, function (e) {
            return r + e + s;
          }).join("");
        }(ms(o, Gd(e)), Nl(e), Rl(e));
      MR(e, r, !1, !0, n);
    },
    UR = function UR(e) {
      var t = {};
      if (e && e.types) for (var _n125 = 0; _n125 < e.types.length; _n125++) {
        var _o107 = e.types[_n125];
        try {
          t[_o107] = e.getData(_o107);
        } catch (e) {
          t[_o107] = "";
        }
      }
      return t;
    },
    zR = function zR(e, t) {
      return t in e && e[t].length > 0;
    },
    jR = function jR(e) {
      return zR(e, "text/html") || zR(e, "text/plain");
    },
    HR = function HR(e, t, n) {
      var o = "paste" === t.type ? t.clipboardData : t.dataTransfer;
      var r;
      if (Ud(e) && o) {
        var _s48 = function (e, t) {
          var n = t.items ? te(ce(t.items), function (e) {
              return "file" === e.kind ? [e.getAsFile()] : [];
            }) : [],
            o = t.files ? ce(t.files) : [];
          return G(n.length > 0 ? n : o, function (e) {
            var t = sc(e);
            return function (e) {
              return He(e.type, "image/") && $(t, function (t) {
                return function (e) {
                  var t = e.toLowerCase(),
                    n = {
                      jpg: "jpeg",
                      jpe: "jpeg",
                      jfi: "jpeg",
                      jif: "jpeg",
                      jfif: "jpeg",
                      pjpeg: "jpeg",
                      pjp: "jpeg",
                      svg: "svg+xml"
                    };
                  return Dt.hasOwn(n, t) ? "image/" + n[t] : "image/" + t;
                }(t) === e.type;
              });
            };
          }(e));
        }(e, o);
        if (_s48.length > 0) return t.preventDefault(), (r = _s48, Promise.all(V(r, function (e) {
          return Bv(e).then(function (t) {
            return {
              file: e,
              uri: t
            };
          });
        }))).then(function (t) {
          n && e.selection.setRng(n), q(t, function (t) {
            (function (e, t) {
              Ov(t.uri).each(function (_ref20) {
                var n = _ref20.data,
                  o = _ref20.type,
                  r = _ref20.base64Encoded;
                var s = r ? n : btoa(n),
                  a = t.file,
                  i = e.editorUpload.blobCache,
                  l = i.getByData(s, o),
                  d = null != l ? l : function (e, t, n, o) {
                    var r = PR(),
                      s = Ll(e) && C(n.name),
                      a = s ? function (e, t) {
                        var n = t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);
                        return C(n) ? e.dom.encode(n[1]) : void 0;
                      }(e, n.name) : r,
                      i = s ? n.name : void 0,
                      l = t.create(r, n, o, a, i);
                    return t.add(l), l;
                  }(e, i, a, s);
                IR(e, "<img src=\"".concat(d.blobUri(), "\">"), !1, !0);
              });
            })(e, t);
          });
        }), !0;
      }
      return !1;
    },
    $R = function $R(e, t, n, o, r) {
      var s = RR(n);
      var a = zR(t, yR()) || xR(n),
        i = !a && function (e) {
          return !/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e);
        }(s),
        l = TR(s);
      (_R(s) || !s.length || i && !l) && (o = !0), (o || l) && (s = zR(t, "text/plain") && i ? t["text/plain"] : function (e) {
        var t = ca(),
          n = tC({}, t);
        var o = "";
        var r = t.getVoidElements(),
          s = Dt.makeMap("script noscript style textarea video audio iframe object", " "),
          a = t.getBlockElements(),
          i = function i(e) {
            var n = e.name,
              l = e;
            if ("br" !== n) {
              if ("wbr" !== n) if (r[n] && (o += " "), s[n]) o += " ";else {
                if (3 === e.type && (o += e.value), !(e.name in t.getVoidElements())) {
                  var _t143 = e.firstChild;
                  if (_t143) do {
                    i(_t143);
                  } while (_t143 = _t143.next);
                }
                a[n] && l.next && (o += "\n", "p" === n && (o += "\n"));
              }
            } else o += "\n";
          };
        return e = NR(e, [/<!\[[^\]]+\]>/g]), i(n.parse(e)), o;
      }(s)), _R(s) || (o ? FR(e, s, r) : IR(e, s, a, r));
    },
    VR = function VR(e, t, n) {
      (function (e, t, n) {
        var o;
        e.on("keydown", function (e) {
          (function (e) {
            return ef.metaKeyPressed(e) && 86 === e.keyCode || e.shiftKey && 45 === e.keyCode;
          })(e) && !e.isDefaultPrevented() && (o = e.shiftKey && 86 === e.keyCode);
        }), e.on("paste", function (r) {
          if (r.isDefaultPrevented() || function (e) {
            var t, n;
            return At.os.isAndroid() && 0 === (null === (n = null === (t = e.clipboardData) || void 0 === t ? void 0 : t.items) || void 0 === n ? void 0 : n.length);
          }(r)) return;
          var s = "text" === n.get() || o;
          o = !1;
          var a = UR(r.clipboardData);
          !jR(a) && HR(e, r, t.getLastRng() || e.selection.getRng()) || (zR(a, "text/html") ? (r.preventDefault(), $R(e, a, a["text/html"], s, !0)) : zR(a, "text/plain") && zR(a, "text/uri-list") ? (r.preventDefault(), $R(e, a, a["text/plain"], s, !0)) : (t.create(), mg.setEditorTimeout(e, function () {
            var n = t.getHtml();
            t.remove(), $R(e, a, n, s, !1);
          }, 0)));
        });
      })(e, t, n), function (e) {
        var t = function t(e) {
            return He(e, "webkit-fake-url");
          },
          n = function n(e) {
            return He(e, "data:");
          };
        e.parser.addNodeFilter("img", function (o, r, s) {
          if (!Ud(e) && function (e) {
            var t;
            return !0 === (null === (t = e.data) || void 0 === t ? void 0 : t.paste);
          }(s)) {
            var _iterator5 = _createForOfIteratorHelper(o),
              _step5;
            try {
              for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
                var _r73 = _step5.value;
                var _o108 = _r73.attr("src");
                m(_o108) && !_r73.attr("data-mce-object") && _o108 !== At.transparentSrc && (t(_o108) || !Yd(e) && n(_o108)) && _r73.remove();
              }
            } catch (err) {
              _iterator5.e(err);
            } finally {
              _iterator5.f();
            }
          }
        });
      }(e);
    },
    qR = function qR(e, t, n, o) {
      (function (e, t, n) {
        if (!e) return !1;
        try {
          return e.clearData(), e.setData("text/html", t), e.setData("text/plain", n), e.setData(yR(), t), !0;
        } catch (e) {
          return !1;
        }
      })(e.clipboardData, t.html, t.text) ? (e.preventDefault(), o()) : n(t.html, o);
    },
    WR = function WR(e) {
      return function (t, n) {
        var o = e.dom,
          r = e.selection,
          s = o.create("div", {
            contenteditable: "false",
            "data-mce-bogus": "all"
          }),
          a = o.create("div", {
            contenteditable: "true"
          }, t);
        o.setStyles(s, {
          position: "fixed",
          top: "0",
          left: "-3000px",
          width: "1000px",
          overflow: "hidden"
        }), s.appendChild(a), o.add(e.getBody(), s);
        var i = r.getRng();
        a.focus();
        var l = o.createRng();
        l.selectNodeContents(a), r.setRng(l), mg.setEditorTimeout(e, function () {
          r.setRng(i), o.remove(s), n();
        }, 0);
      };
    },
    KR = function KR(e) {
      return {
        html: wR(e.selection.getContent({
          contextual: !0
        })),
        text: e.selection.getContent({
          format: "text"
        })
      };
    },
    GR = function GR(e) {
      return !e.selection.isCollapsed() || function (e) {
        return !!e.dom.getParent(e.selection.getStart(), "td[data-mce-selected],th[data-mce-selected]", e.getBody());
      }(e);
    },
    YR = function YR(e, t) {
      var n, o;
      return Df.getCaretRangeFromPoint(null !== (n = t.clientX) && void 0 !== n ? n : 0, null !== (o = t.clientY) && void 0 !== o ? o : 0, e.getDoc());
    },
    XR = function XR(e, t) {
      e.focus(), t && e.selection.setRng(t);
    },
    QR = /rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,
    JR = function JR(e) {
      return Dt.trim(e).replace(QR, Wu).toLowerCase();
    },
    ZR = function ZR(e, t, n) {
      var o = $d(e);
      if (n || "all" === o || !Vd(e)) return t;
      var r = o ? o.split(/[, ]/) : [];
      if (r && "none" !== o) {
        var _n126 = e.dom,
          _o109 = e.selection.getNode();
        t = t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi, function (e, t, s, a) {
          var i = _n126.parseStyle(_n126.decode(s)),
            l = {};
          for (var _e149 = 0; _e149 < r.length; _e149++) {
            var _t144 = i[r[_e149]];
            var _s49 = _t144,
              _a26 = _n126.getStyle(_o109, r[_e149], !0);
            /color/.test(r[_e149]) && (_s49 = JR(_s49), _a26 = JR(_a26)), _a26 !== _s49 && (l[r[_e149]] = _t144);
          }
          var d = _n126.serializeStyle(l, "span");
          return d ? t + ' style="' + d + '"' + a : t + a;
        });
      } else t = t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi, "$1$3");
      return t = t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi, function (e, t, n, o) {
        return t + ' style="' + n + '"' + o;
      }), t;
    },
    eA = function eA(e) {
      var t = Da(!1),
        n = Da(Kd(e) ? "text" : "html"),
        o = function (e) {
          var t = Da(null);
          return {
            create: function create() {
              return function (e, t) {
                var n = e.dom,
                  o = e.selection,
                  r = e.getBody();
                t.set(o.getRng());
                var s = n.add(e.getBody(), "div", {
                  id: "mcepastebin",
                  "class": "mce-pastebin",
                  contentEditable: !0,
                  "data-mce-bogus": "all",
                  style: "position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"
                }, kR);
                At.browser.isFirefox() && n.setStyle(s, "left", "rtl" === n.getStyle(r, "direction", !0) ? 65535 : -65535), n.bind(s, "beforedeactivate focusin focusout", function (e) {
                  e.stopPropagation();
                }), s.focus(), o.select(s, !0);
              }(e, t);
            },
            remove: function remove() {
              return function (e, t) {
                var n = e.dom;
                if (ER(e)) {
                  var _o110;
                  var _r74 = t.get();
                  for (; _o110 = ER(e);) n.remove(_o110), n.unbind(_o110);
                  _r74 && e.selection.setRng(_r74);
                }
                t.set(null);
              }(e, t);
            },
            getEl: function getEl() {
              return ER(e);
            },
            getHtml: function getHtml() {
              return function (e) {
                var t = e.dom,
                  n = function n(e, _n127) {
                    e.appendChild(_n127), t.remove(_n127, !0);
                  },
                  _G = G(e.getBody().childNodes, SR),
                  _G2 = _toArray(_G),
                  o = _G2[0],
                  r = _G2.slice(1);
                q(r, function (e) {
                  n(o, e);
                });
                var s = t.select("div[id=mcepastebin]", o);
                for (var _e150 = s.length - 1; _e150 >= 0; _e150--) {
                  var _r75 = t.create("div");
                  o.insertBefore(_r75, s[_e150]), n(_r75, s[_e150]);
                }
                return o ? o.innerHTML : "";
              }(e);
            },
            getLastRng: t.get
          };
        }(e);
      (function (e) {
        (At.browser.isChromium() || At.browser.isSafari()) && function (e, t) {
          e.on("PastePreProcess", function (n) {
            n.content = t(e, n.content, n.internal);
          });
        }(e, ZR);
      })(e), function (e, t) {
        e.addCommand("mceTogglePlainTextPaste", function () {
          (function (e, t) {
            "text" === t.get() ? (t.set("html"), Zm(e, !1)) : (t.set("text"), Zm(e, !0)), e.focus();
          })(e, t);
        }), e.addCommand("mceInsertClipboardContent", function (t, n) {
          n.html && IR(e, n.html, n.internal, !1), n.text && FR(e, n.text, !1);
        });
      }(e, n), function (e) {
        var t = function t(_t145) {
            return function (n) {
              _t145(e, n);
            };
          },
          n = zd(e);
        w(n) && e.on("PastePreProcess", t(n));
        var o = jd(e);
        w(o) && e.on("PastePostProcess", t(o));
      }(e), e.on("PreInit", function () {
        (function (e) {
          e.on("cut", function (e) {
            return function (t) {
              !t.isDefaultPrevented() && GR(e) && qR(t, KR(e), WR(e), function () {
                if (At.browser.isChromium() || At.browser.isFirefox()) {
                  var _t146 = e.selection.getRng();
                  mg.setEditorTimeout(e, function () {
                    e.selection.setRng(_t146), e.execCommand("Delete");
                  }, 0);
                } else e.execCommand("Delete");
              });
            };
          }(e)), e.on("copy", function (e) {
            return function (t) {
              !t.isDefaultPrevented() && GR(e) && qR(t, KR(e), WR(e), E);
            };
          }(e));
        })(e), function (e, t) {
          Fd(e) && e.on("dragend dragover draggesture dragdrop drop drag", function (e) {
            e.preventDefault(), e.stopPropagation();
          }), Ud(e) || e.on("drop", function (e) {
            var t = e.dataTransfer;
            t && function (e) {
              return $(e.files, function (e) {
                return /^image\//.test(e.type);
              });
            }(t) && e.preventDefault();
          }), e.on("drop", function (n) {
            if (n.isDefaultPrevented()) return;
            var o = YR(e, n);
            if (y(o)) return;
            var r = UR(n.dataTransfer),
              s = zR(r, yR());
            if ((!jR(r) || function (e) {
              var t = e["text/plain"];
              return !!t && 0 === t.indexOf("file://");
            }(r)) && HR(e, n, o)) return;
            var a = r[yR()],
              i = a || r["text/html"] || r["text/plain"],
              l = function (e, t, n, o) {
                var r = e.getParent(n, function (e) {
                  return As(t, e);
                });
                if (!h(e.getParent(n, "summary"))) return !0;
                if (r && ke(o, "text/html")) {
                  var _e151 = new DOMParser().parseFromString(o["text/html"], "text/html").body;
                  return !h(_e151.querySelector(r.nodeName.toLowerCase()));
                }
                return !1;
              }(e.dom, e.schema, o.startContainer, r),
              d = t.get();
            d && !l || i && (n.preventDefault(), mg.setEditorTimeout(e, function () {
              e.undoManager.transact(function () {
                (a || d && l) && e.execCommand("Delete"), XR(e, o);
                var t = RR(i);
                r["text/html"] ? IR(e, t, s, !0) : FR(e, t, !0);
              });
            }));
          }), e.on("dragstart", function (e) {
            t.set(!0);
          }), e.on("dragover dragend", function (n) {
            Ud(e) && !t.get() && (n.preventDefault(), XR(e, YR(e, n))), "dragend" === n.type && t.set(!1);
          }), function (e) {
            e.on("input", function (t) {
              var n = function n(e) {
                return h(e.querySelector("summary"));
              };
              if ("deleteByDrag" === t.inputType) {
                var _t147 = G(e.dom.select("details"), n);
                q(_t147, function (t) {
                  rr(t.firstChild) && t.firstChild.remove();
                  var n = e.dom.create("summary");
                  n.appendChild(Dr().dom), t.prepend(n);
                });
              }
            });
          }(e);
        }(e, t), VR(e, o, n);
      });
    },
    tA = rr,
    nA = Jo,
    oA = function oA(e) {
      return ir(e.dom);
    },
    rA = function rA(e) {
      return function (t) {
        return En(yn(e), t);
      };
    },
    sA = function sA(e, t) {
      return Jn(yn(e), oA, rA(t));
    },
    aA = function aA(e, t, n) {
      var o = new zo(e, t),
        r = n ? o.next.bind(o) : o.prev.bind(o);
      var s = e;
      for (var _t148 = n ? e : r(); _t148 && !tA(_t148); _t148 = r()) ss(_t148) && (s = _t148);
      return s;
    },
    iA = function iA(e) {
      var t = function (e, t) {
        var n = Li.fromRangeStart(e).getNode(),
          o = function (e, t) {
            return Jn(yn(e), function (e) {
              return function (e) {
                return ar(e.dom);
              }(e) || xr(e);
            }, rA(t)).getOr(yn(t)).dom;
          }(n, t),
          r = aA(n, o, !1),
          s = aA(n, o, !0),
          a = document.createRange();
        return sA(r, o).fold(function () {
          nA(r) ? a.setStart(r, 0) : a.setStartBefore(r);
        }, function (e) {
          return a.setStartBefore(e.dom);
        }), sA(s, o).fold(function () {
          nA(s) ? a.setEnd(s, s.data.length) : a.setEndAfter(s);
        }, function (e) {
          return a.setEndAfter(e.dom);
        }), a;
      }(e.selection.getRng(), e.getBody());
      e.selection.setRng(ob(t));
    };
  var lA;
  !function (e) {
    e.Before = "before", e.After = "after";
  }(lA || (lA = {}));
  var dA = function dA(e, t) {
      return Math.abs(e.left - t);
    },
    cA = function cA(e, t) {
      return Math.abs(e.right - t);
    },
    uA = function uA(e, t) {
      return function (e) {
        return X(e, function (e, t) {
          return e.fold(function () {
            return I.some(t);
          }, function (e) {
            var n = Math.min(t.left, e.left),
              o = Math.min(t.top, e.top),
              r = Math.max(t.right, e.right),
              s = Math.max(t.bottom, e.bottom);
            return I.some({
              top: o,
              right: r,
              bottom: s,
              left: n,
              width: r - n,
              height: s - o
            });
          });
        }, I.none());
      }(G(e, function (e) {
        return (n = t) >= (o = e).top && n <= o.bottom;
        var n, o;
      })).fold(function () {
        return [[], e];
      }, function (t) {
        var _K2 = K(e, function (e) {
            return function (e, t) {
              var n = function (e, t) {
                return Math.max(0, Math.min(e.bottom, t.bottom) - Math.max(e.top, t.top));
              }(e, t) / Math.min(e.height, t.height);
              return function (e, t) {
                return e.top < t.bottom && e.bottom > t.top;
              }(e, t) && n > .5;
            }(e, t);
          }),
          n = _K2.pass,
          o = _K2.fail;
        return [n, o];
      });
    },
    mA = function mA(e, t, n) {
      return t > e.left && t < e.right ? 0 : Math.min(Math.abs(e.left - t), Math.abs(e.right - t));
    },
    fA = function fA(e, t, n) {
      var o = function o(e) {
          return ss(e.node) ? I.some(e) : $o(e.node) ? fA(ce(e.node.childNodes), t, n) : I.none();
        },
        r = function r(e, _r76) {
          var s = ae(e, function (e, o) {
            return _r76(e, t, n) - _r76(o, t, n);
          });
          return function (e, r) {
            if (e.length >= 2) {
              var _s50 = o(e[0]).getOr(e[0]),
                _a27 = o(e[1]).getOr(e[1]);
              if (Math.abs(r(_s50, t, n) - r(_a27, t, n)) < 2) {
                if (Jo(_s50.node)) return I.some(_s50);
                if (Jo(_a27.node)) return I.some(_a27);
              }
            }
            return I.none();
          }(s, _r76).orThunk(function () {
            return ue(s, o);
          });
        },
        _uA = uA(Ck(e), n),
        _uA2 = _slicedToArray(_uA, 2),
        s = _uA2[0],
        a = _uA2[1],
        _K3 = K(a, function (e) {
          return e.top < n;
        }),
        i = _K3.pass,
        l = _K3.fail;
      return r(s, mA).orThunk(function () {
        return r(l, fi);
      }).orThunk(function () {
        return r(i, fi);
      });
    },
    gA = function gA(e, t, n) {
      return function (e, t, n) {
        var o = yn(e),
          r = Nn(o),
          s = Cn(r, t, n).filter(function (e) {
            return Sn(o, e);
          }).getOr(o);
        return function (e, t, n, o) {
          var r = function r(t, s) {
            var a = G(t.dom.childNodes, T(function (e) {
              return $o(e) && e.classList.contains("mce-drag-container");
            }));
            return s.fold(function () {
              return fA(a, n, o);
            }, function (e) {
              var t = G(a, function (t) {
                return t !== e.dom;
              });
              return fA(t, n, o);
            }).orThunk(function () {
              return (En(t, e) ? I.none() : On(t)).bind(function (e) {
                return r(e, I.some(t));
              });
            });
          };
          return r(t, I.none());
        }(o, s, t, n);
      }(e, t, n).filter(function (e) {
        return Ec(e.node);
      }).map(function (e) {
        return function (e, t) {
          return {
            node: e.node,
            position: dA(e, t) < cA(e, t) ? lA.Before : lA.After
          };
        }(e, t);
      });
    },
    pA = function pA(e) {
      var t, n;
      var o = e.getBoundingClientRect(),
        r = e.ownerDocument,
        s = r.documentElement,
        a = r.defaultView;
      return {
        top: o.top + (null !== (t = null == a ? void 0 : a.scrollY) && void 0 !== t ? t : 0) - s.clientTop,
        left: o.left + (null !== (n = null == a ? void 0 : a.scrollX) && void 0 !== n ? n : 0) - s.clientLeft
      };
    },
    hA = function hA(e) {
      return {
        target: e,
        srcElement: e
      };
    },
    bA = function bA(e, t, n, o) {
      var r = function (e, t) {
        var n = function (e) {
          var t = hR(),
            n = function (e) {
              var t = e;
              return I.from(t[sR]);
            }(e);
          return dR(e), tR(t), t.dropEffect = e.dropEffect, t.effectAllowed = e.effectAllowed, function (e) {
            var t = e;
            return I.from(t[JN]);
          }(e).each(function (e) {
            return t.setDragImage(e.image, e.x, e.y);
          }), q(e.types, function (n) {
            "Files" !== n && t.setData(n, e.getData(n));
          }), q(e.files, function (e) {
            return t.items.add(e);
          }), function (e) {
            var t = e;
            return I.from(t[ZN]);
          }(e).each(function (e) {
            (function (e, t) {
              eR(t)(e);
            })(t, e);
          }), n.each(function (n) {
            iR(e, n), iR(t, n);
          }), t;
        }(e);
        return "dragstart" === t ? (tR(n), lR(n)) : "drop" === t ? (nR(n), dR(n)) : (oR(n), cR(n)), n;
      }(n, e);
      return v(o) ? function (e, t, n) {
        var o = B("Function not supported on simulated event.");
        return _objectSpread({
          bubbles: !0,
          cancelBubble: !1,
          cancelable: !0,
          composed: !1,
          currentTarget: null,
          defaultPrevented: !1,
          eventPhase: 0,
          isTrusted: !0,
          returnValue: !1,
          timeStamp: 0,
          type: e,
          composedPath: o,
          initEvent: o,
          preventDefault: E,
          stopImmediatePropagation: E,
          stopPropagation: E,
          AT_TARGET: window.Event.AT_TARGET,
          BUBBLING_PHASE: window.Event.BUBBLING_PHASE,
          CAPTURING_PHASE: window.Event.CAPTURING_PHASE,
          NONE: window.Event.NONE,
          altKey: !1,
          button: 0,
          buttons: 0,
          clientX: 0,
          clientY: 0,
          ctrlKey: !1,
          metaKey: !1,
          movementX: 0,
          movementY: 0,
          offsetX: 0,
          offsetY: 0,
          pageX: 0,
          pageY: 0,
          relatedTarget: null,
          screenX: 0,
          screenY: 0,
          shiftKey: !1,
          x: 0,
          y: 0,
          detail: 0,
          view: null,
          which: 0,
          initUIEvent: o,
          initMouseEvent: o,
          getModifierState: o,
          dataTransfer: n
        }, hA(t));
      }(e, t, r) : function (e, t, n, o) {
        return _objectSpread(_objectSpread({}, t), {}, {
          dataTransfer: o,
          type: e
        }, hA(n));
      }(e, o, t, r);
    },
    vA = ir,
    yA = function () {
      for (var _len13 = arguments.length, e = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {
        e[_key13] = arguments[_key13];
      }
      return function (t) {
        for (var _n128 = 0; _n128 < e.length; _n128++) if (e[_n128](t)) return !0;
        return !1;
      };
    }(vA, ar),
    CA = function CA(e, t, n, o) {
      var r = e.dom,
        s = t.cloneNode(!0);
      r.setStyles(s, {
        width: n,
        height: o
      }), r.setAttrib(s, "data-mce-selected", null);
      var a = r.create("div", {
        "class": "mce-drag-container",
        "data-mce-bogus": "all",
        unselectable: "on",
        contenteditable: "false"
      });
      return r.setStyles(a, {
        position: "absolute",
        opacity: .5,
        overflow: "hidden",
        border: 0,
        padding: 0,
        margin: 0,
        width: n,
        height: o
      }), r.setStyles(s, {
        margin: 0,
        boxSizing: "border-box"
      }), a.appendChild(s), a;
    },
    wA = function wA(e, t) {
      return function (n) {
        return function () {
          var _n$scroll;
          var o = "left" === e ? n.scrollX : n.scrollY;
          n.scroll((_n$scroll = {}, _defineProperty(_n$scroll, e, o + t), _defineProperty(_n$scroll, "behavior", "smooth"), _n$scroll));
        };
      };
    },
    xA = wA("left", -32),
    kA = wA("left", 32),
    EA = wA("top", -32),
    SA = wA("top", 32),
    _A = function _A(e) {
      e && e.parentNode && e.parentNode.removeChild(e);
    },
    NA = function NA(e, t, n, o, r) {
      "dragstart" === t && bR(o, e.dom.getOuterHTML(n));
      var s = bA(t, n, o, r);
      return e.dispatch(t, s);
    },
    RA = function RA(e, t) {
      var n = ja(function (e, n) {
        return function (e, t, n) {
          e._selectionOverrides.hideFakeCaret(), gA(e.getBody(), t, n).fold(function () {
            return e.selection.placeCaretAt(t, n);
          }, function (o) {
            var r = e._selectionOverrides.showCaret(1, o.node, o.position === lA.Before, !1);
            r ? e.selection.setRng(r) : e.selection.placeCaretAt(t, n);
          });
        }(t, e, n);
      }, 0);
      t.on("remove", n.cancel);
      var o = e;
      return function (r) {
        return e.on(function (e) {
          var s = Math.max(Math.abs(r.screenX - e.screenX), Math.abs(r.screenY - e.screenY));
          if (!e.dragging && s > 10) {
            var _n129 = NA(t, "dragstart", e.element, e.dataTransfer, r);
            if (C(_n129.dataTransfer) && (e.dataTransfer = _n129.dataTransfer), _n129.isDefaultPrevented()) return;
            e.dragging = !0, t.focus();
          }
          if (e.dragging) {
            var _s51 = r.currentTarget === t.getDoc().documentElement,
              _l14 = function (e, t) {
                return {
                  pageX: t.pageX - e.relX,
                  pageY: t.pageY + 5
                };
              }(e, function (e, t) {
                return n = function (e) {
                  return e.inline ? pA(e.getBody()) : {
                    left: 0,
                    top: 0
                  };
                }(e), o = function (e) {
                  var t = e.getBody();
                  return e.inline ? {
                    left: t.scrollLeft,
                    top: t.scrollTop
                  } : {
                    left: 0,
                    top: 0
                  };
                }(e), r = function (e, t) {
                  if (t.target.ownerDocument !== e.getDoc()) {
                    var _n130 = pA(e.getContentAreaContainer()),
                      _o111 = function (e) {
                        var t = e.getBody(),
                          n = e.getDoc().documentElement,
                          o = {
                            left: t.scrollLeft,
                            top: t.scrollTop
                          },
                          r = {
                            left: t.scrollLeft || n.scrollLeft,
                            top: t.scrollTop || n.scrollTop
                          };
                        return e.inline ? o : r;
                      }(e);
                    return {
                      left: t.pageX - _n130.left + _o111.left,
                      top: t.pageY - _n130.top + _o111.top
                    };
                  }
                  return {
                    left: t.pageX,
                    top: t.pageY
                  };
                }(e, t), {
                  pageX: r.left - n.left + o.left,
                  pageY: r.top - n.top + o.top
                };
                var n, o, r;
              }(t, r));
            a = e.ghost, i = t.getBody(), a.parentNode !== i && i.appendChild(a), function (e, t, n, o, r, s, a, i, l, d, c, u) {
              var m = 0,
                f = 0;
              e.style.left = t.pageX + "px", e.style.top = t.pageY + "px", t.pageX + n > r && (m = t.pageX + n - r), t.pageY + o > s && (f = t.pageY + o - s), e.style.width = n - m + "px", e.style.height = o - f + "px";
              var g = l.clientHeight,
                p = l.clientWidth,
                h = a + l.getBoundingClientRect().top,
                b = i + l.getBoundingClientRect().left;
              c.on(function (e) {
                e.intervalId.clear(), e.dragging && u && (a + 8 >= g ? e.intervalId.set(SA(d)) : a - 8 <= 0 ? e.intervalId.set(EA(d)) : i + 8 >= p ? e.intervalId.set(kA(d)) : i - 8 <= 0 ? e.intervalId.set(xA(d)) : h + 16 >= window.innerHeight ? e.intervalId.set(SA(window)) : h - 16 <= 0 ? e.intervalId.set(EA(window)) : b + 16 >= window.innerWidth ? e.intervalId.set(kA(window)) : b - 16 <= 0 && e.intervalId.set(xA(window)));
              });
            }(e.ghost, _l14, e.width, e.height, e.maxX, e.maxY, r.clientY, r.clientX, t.getContentAreaContainer(), t.getWin(), o, _s51), n.throttle(r.clientX, r.clientY);
          }
          var a, i;
        });
      };
    },
    AA = function AA(e, t, n) {
      e.on(function (e) {
        e.intervalId.clear(), e.dragging && n.fold(function () {
          return NA(t, "dragend", e.element, e.dataTransfer);
        }, function (n) {
          return NA(t, "dragend", e.element, e.dataTransfer, n);
        });
      }), OA(e);
    },
    OA = function OA(e) {
      e.on(function (e) {
        e.intervalId.clear(), _A(e.ghost);
      }), e.clear();
    },
    TA = function TA(e) {
      var t = za(),
        n = Oa.DOM,
        o = document,
        r = function (e, t) {
          return function (n) {
            if (function (e) {
              return 0 === e.button;
            }(n)) {
              var _o112 = J(t.dom.getParents(n.target), yA).getOr(null);
              if (C(_o112) && function (e, t, n) {
                return vA(n) && n !== t && e.isEditable(n.parentElement);
              }(t.dom, t.getBody(), _o112)) {
                var _r77 = t.dom.getPos(_o112),
                  _s52 = t.getBody(),
                  _a28 = t.getDoc().documentElement;
                e.set({
                  element: _o112,
                  dataTransfer: hR(),
                  dragging: !1,
                  screenX: n.screenX,
                  screenY: n.screenY,
                  maxX: (t.inline ? _s52.scrollWidth : _a28.offsetWidth) - 2,
                  maxY: (t.inline ? _s52.scrollHeight : _a28.offsetHeight) - 2,
                  relX: n.pageX - _r77.x,
                  relY: n.pageY - _r77.y,
                  width: _o112.offsetWidth,
                  height: _o112.offsetHeight,
                  ghost: CA(t, _o112, _o112.offsetWidth, _o112.offsetHeight),
                  intervalId: Ua(100)
                });
              }
            }
          };
        }(t, e),
        s = RA(t, e),
        a = function (e, t) {
          return function (n) {
            e.on(function (e) {
              var o;
              if (e.intervalId.clear(), e.dragging) {
                if (function (e, t, n) {
                  return !y(t) && t !== n && !e.dom.isChildOf(t, n) && e.dom.isEditable(t);
                }(t, function (e) {
                  var t = e.getSel();
                  if (C(t)) {
                    var _e152 = t.getRangeAt(0).startContainer;
                    return Jo(_e152) ? _e152.parentNode : _e152;
                  }
                  return null;
                }(t.selection), e.element)) {
                  var _r78 = null !== (o = t.getDoc().elementFromPoint(n.clientX, n.clientY)) && void 0 !== o ? o : t.getBody();
                  NA(t, "drop", _r78, e.dataTransfer, n).isDefaultPrevented() || t.undoManager.transact(function () {
                    (function (e, t) {
                      var n = e.getParent(t.parentNode, e.isBlock);
                      _A(t), n && n !== e.getRoot() && e.isEmpty(n) && Pr(yn(n));
                    })(t.dom, e.element), function (e) {
                      var t = e.getData("text/html");
                      return "" === t ? I.none() : I.some(t);
                    }(e.dataTransfer).each(function (e) {
                      return t.insertContent(e);
                    }), t._selectionOverrides.hideFakeCaret();
                  });
                }
                NA(t, "dragend", t.getBody(), e.dataTransfer, n);
              }
            }), OA(e);
          };
        }(t, e),
        i = function (e, t) {
          return function (n) {
            return AA(e, t, I.some(n));
          };
        }(t, e);
      e.on("mousedown", r), e.on("mousemove", s), e.on("mouseup", a), n.bind(o, "mousemove", s), n.bind(o, "mouseup", i), e.on("remove", function () {
        n.unbind(o, "mousemove", s), n.unbind(o, "mouseup", i);
      }), e.on("keydown", function (n) {
        n.keyCode === ef.ESC && AA(t, e, I.none());
      });
    },
    BA = ir,
    DA = function DA(e, t) {
      return $h(e.getBody(), t);
    },
    PA = function PA(e) {
      var t = e.selection,
        n = e.dom,
        o = e.getBody(),
        r = wc(e, o, n.isBlock, function () {
          return xg(e);
        }),
        s = "sel-" + n.uniqueId(),
        a = "data-mce-selected";
      var i;
      var l = function l(e) {
          return e !== o && (BA(e) || cr(e)) && n.isChildOf(e, o) && n.isEditable(e.parentNode);
        },
        d = function d(n, o, s) {
          var a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
          return e.dispatch("ShowCaret", {
            target: o,
            direction: n,
            before: s
          }).isDefaultPrevented() ? null : (a && t.scrollIntoView(o, -1 === n), r.show(s, o));
        },
        c = function c(e) {
          return $r(e) || Kr(e) || Gr(e);
        },
        u = function u(e) {
          return c(e.startContainer) || c(e.endContainer);
        },
        m = function m(t) {
          var o = e.schema.getVoidElements(),
            r = n.createRng(),
            s = t.startContainer,
            a = t.startOffset,
            i = t.endContainer,
            l = t.endOffset;
          return ke(o, s.nodeName.toLowerCase()) ? 0 === a ? r.setStartBefore(s) : r.setStartAfter(s) : r.setStart(s, a), ke(o, i.nodeName.toLowerCase()) ? 0 === l ? r.setEndBefore(i) : r.setEndAfter(i) : r.setEnd(i, l), r;
        },
        f = function f(r, c) {
          if (!r) return null;
          if (r.collapsed) {
            if (!u(r)) {
              var _e153 = c ? 1 : -1,
                _t149 = Gc(_e153, o, r),
                _s53 = _t149.getNode(!c);
              if (C(_s53)) {
                if (Ec(_s53)) return d(_e153, _s53, !!c && !_t149.isAtEnd(), !1);
                if (Hr(_s53) && ir(_s53.nextSibling)) {
                  var _e154 = n.createRng();
                  return _e154.setStart(_s53, 0), _e154.setEnd(_s53, 0), _e154;
                }
              }
              var _a29 = _t149.getNode(c);
              if (C(_a29)) {
                if (Ec(_a29)) return d(_e153, _a29, !c && !_t149.isAtEnd(), !1);
                if (Hr(_a29) && ir(_a29.previousSibling)) {
                  var _e155 = n.createRng();
                  return _e155.setStart(_a29, 1), _e155.setEnd(_a29, 1), _e155;
                }
              }
            }
            return null;
          }
          var m = r.startContainer,
            f = r.startOffset;
          var g = r.endOffset;
          if (Jo(m) && 0 === f && BA(m.parentNode) && (m = m.parentNode, f = n.nodeIndex(m), m = m.parentNode), !$o(m)) return null;
          if (g === f + 1 && m === r.endContainer) {
            var _o113 = m.childNodes[f];
            if (l(_o113)) return function (o) {
              var r = o.cloneNode(!0),
                l = e.dispatch("ObjectSelected", {
                  target: o,
                  targetClone: r
                });
              if (l.isDefaultPrevented()) return null;
              var d = function (o, r) {
                  var a = yn(e.getBody()),
                    i = e.getDoc(),
                    l = eo(a, "#" + s).getOrThunk(function () {
                      var e = hn('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>', i);
                      return Jt(e, "id", s), bo(a, e), e;
                    }),
                    d = n.createRng();
                  Co(l), yo(l, [vn(pr, i), yn(r), vn(pr, i)]), d.setStart(l.dom.firstChild, 1), d.setEnd(l.dom.lastChild, 0), io(l, {
                    top: n.getPos(o, e.getBody()).y + "px"
                  }), eg(l);
                  var c = t.getSel();
                  return c && (c.removeAllRanges(), c.addRange(d)), d;
                }(o, l.targetClone),
                c = yn(o);
              return q(Fo(yn(e.getBody()), "*[".concat(a, "]")), function (e) {
                En(c, e) || on(e, a);
              }), n.getAttrib(o, a) || o.setAttribute(a, "1"), i = o, p(), d;
            }(_o113);
          }
          return null;
        },
        g = function g() {
          i && i.removeAttribute(a), eo(yn(e.getBody()), "#" + s).each(wo), i = null;
        },
        p = function p() {
          r.hide();
        };
      return PC(e) || (e.on("click", function (t) {
        n.isEditable(t.target) || (t.preventDefault(), e.focus());
      }), e.on("blur NewBlock", g), e.on("ResizeWindow FullscreenStateChanged", r.reposition), e.on("tap", function (t) {
        var n = t.target,
          o = DA(e, n);
        BA(o) ? (t.preventDefault(), dx(e, o).each(f)) : l(n) && dx(e, n).each(f);
      }, !0), e.on("mousedown", function (r) {
        var s = r.target;
        if (s !== o && "HTML" !== s.nodeName && !n.isChildOf(s, o)) return;
        if (!function (e, t, n) {
          var o = yn(e.getBody()),
            r = e.inline ? o : yn(Nn(o).dom.documentElement),
            s = function (e, t, n, o) {
              var r = function (e) {
                return e.dom.getBoundingClientRect();
              }(t);
              return {
                x: n - (e ? r.left + t.dom.clientLeft + fw(t) : 0),
                y: o - (e ? r.top + t.dom.clientTop + mw(t) : 0)
              };
            }(e.inline, r, t, n);
          return function (e, t, n) {
            var o = cw(e),
              r = uw(e);
            return t >= 0 && n >= 0 && t <= o && n <= r;
          }(r, s.x, s.y);
        }(e, r.clientX, r.clientY)) return;
        g(), p();
        var a = DA(e, s);
        BA(a) ? (r.preventDefault(), dx(e, a).each(f)) : gA(o, r.clientX, r.clientY).each(function (n) {
          var o;
          r.preventDefault(), (o = d(1, n.node, n.position === lA.Before, !1)) && t.setRng(o), $o(a) ? a.focus() : e.getBody().focus();
        });
      }), e.on("keypress", function (e) {
        ef.modifierPressed(e) || BA(t.getNode()) && e.preventDefault();
      }), e.on("GetSelectionRange", function (e) {
        var t = e.range;
        if (i) {
          if (!i.parentNode) return void (i = null);
          t = t.cloneRange(), t.selectNode(i), e.range = t;
        }
      }), e.on("SetSelectionRange", function (e) {
        e.range = m(e.range);
        var t = f(e.range, e.forward);
        t && (e.range = t);
      }), e.on("AfterSetSelectionRange", function (e) {
        var t = e.range,
          o = t.startContainer.parentElement;
        var r;
        u(t) || $o(r = o) && "mcepastebin" === r.id || p(), function (e) {
          return C(e) && n.hasClass(e, "mce-offscreen-selection");
        }(o) || g();
      }), function (e) {
        TA(e), Nd(e) && function (e) {
          var t = function t(_t150) {
              if (!_t150.isDefaultPrevented()) {
                var _n131 = _t150.dataTransfer;
                _n131 && (H(_n131.types, "Files") || _n131.files.length > 0) && (_t150.preventDefault(), "drop" === _t150.type && yw(e, "Dropped file type is not supported"));
              }
            },
            n = function n(_n132) {
              hg(e, _n132.target) && t(_n132);
            },
            o = function o() {
              var o = Oa.DOM,
                r = e.dom,
                s = document,
                a = e.inline ? e.getBody() : e.getDoc(),
                i = ["drop", "dragover"];
              q(i, function (e) {
                o.bind(s, e, n), r.bind(a, e, t);
              }), e.on("remove", function () {
                q(i, function (e) {
                  o.unbind(s, e, n), r.unbind(a, e, t);
                });
              });
            };
          e.on("init", function () {
            mg.setEditorTimeout(e, o, 0);
          });
        }(e);
      }(e), function (e) {
        var t = ja(function () {
          if (!e.removed && e.getBody().contains(document.activeElement)) {
            var _t151 = e.selection.getRng();
            if (_t151.collapsed) {
              var _n133 = cx(e, _t151, !1);
              e.selection.setRng(_n133);
            }
          }
        }, 0);
        e.on("focus", function () {
          t.throttle();
        }), e.on("blur", function () {
          t.cancel();
        });
      }(e), function (e) {
        e.on("init", function () {
          e.on("focusin", function (t) {
            var n = t.target;
            if (cr(n)) {
              var _t152 = $h(e.getBody(), n),
                _o114 = ir(_t152) ? _t152 : n;
              e.selection.getNode() !== _o114 && dx(e, _o114).each(function (t) {
                return e.selection.setRng(t);
              });
            }
          });
        });
      }(e)), {
        showCaret: d,
        showBlockCaretContainer: function showBlockCaretContainer(e) {
          e.hasAttribute("data-mce-caret") && (Yr(e), t.scrollIntoView(e));
        },
        hideFakeCaret: p,
        destroy: function destroy() {
          r.destroy(), i = null;
        }
      };
    },
    LA = function LA(e, t) {
      var n = t;
      for (var _t153 = e.previousSibling; Jo(_t153); _t153 = _t153.previousSibling) n += _t153.data.length;
      return n;
    },
    MA = function MA(e, t, n, o, r) {
      if (Jo(n) && (o < 0 || o > n.data.length)) return [];
      var s = r && Jo(n) ? [LA(n, o)] : [o];
      var a = n;
      for (; a !== t && a.parentNode;) s.push(e.nodeIndex(a, r)), a = a.parentNode;
      return a === t ? s.reverse() : [];
    },
    IA = function IA(e, t, n, o, r, s) {
      var a = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : !1;
      return {
        start: MA(e, t, n, o, a),
        end: MA(e, t, r, s, a)
      };
    },
    FA = function FA(e, t) {
      var n = t.slice(),
        o = n.pop();
      return x(o) ? X(n, function (e, t) {
        return e.bind(function (e) {
          return I.from(e.childNodes[t]);
        });
      }, I.some(e)).bind(function (e) {
        return Jo(e) && (o < 0 || o > e.data.length) ? I.none() : I.some({
          node: e,
          offset: o
        });
      }) : I.none();
    },
    UA = function UA(e, t) {
      return FA(e, t.start).bind(function (_ref21) {
        var n = _ref21.node,
          o = _ref21.offset;
        return FA(e, t.end).map(function (_ref22) {
          var e = _ref22.node,
            t = _ref22.offset;
          var r = document.createRange();
          return r.setStart(n, o), r.setEnd(e, t), r;
        });
      });
    },
    zA = function zA(e, t, n) {
      if (t && e.isEmpty(t) && !n(t)) {
        var _o115 = t.parentNode;
        e.remove(t, Jo(t.firstChild) && ds(t.firstChild.data)), zA(e, _o115, n);
      }
    },
    jA = function jA(e, t, n) {
      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
      var r = t.startContainer.parentNode,
        s = t.endContainer.parentNode;
      t.deleteContents(), o && !n(t.startContainer) && (Jo(t.startContainer) && 0 === t.startContainer.data.length && e.remove(t.startContainer), Jo(t.endContainer) && 0 === t.endContainer.data.length && e.remove(t.endContainer), zA(e, r, n), r !== s && zA(e, s, n));
    },
    HA = function HA(e, t) {
      return I.from(e.dom.getParent(t.startContainer, e.dom.isBlock));
    },
    $A = function $A(e, t, n) {
      var o = e.dynamicPatternsLookup({
        text: n,
        block: t
      });
      return _objectSpread(_objectSpread({}, e), {}, {
        blockPatterns: cl(o).concat(e.blockPatterns),
        inlinePatterns: ul(o).concat(e.inlinePatterns)
      });
    },
    VA = function VA(e, t, n, o) {
      var r = e.createRng();
      return r.setStart(t, 0), r.setEnd(n, o), r.toString();
    },
    qA = function qA(e, t, n) {
      (function (e, t, n) {
        if (Jo(e) && 0 >= e.length) return I.some(mS(e, 0));
        {
          var _t154 = ai(fS);
          return I.from(_t154.forwards(e, 0, gS(e), n)).map(function (e) {
            return mS(e.container, 0);
          });
        }
      })(t, 0, t).each(function (o) {
        var r = o.container;
        bS(r, n.start.length, t).each(function (n) {
          var o = e.createRng();
          o.setStart(r, 0), o.setEnd(n.container, n.offset), jA(e, o, function (e) {
            return e === t;
          });
        });
        var s = yn(r),
          a = vr(s);
        /^\s[^\s]/.test(a) && function (e, t) {
          br.set(e, t);
        }(s, a.slice(1));
      });
    },
    WA = function WA(e, t) {
      return e.create("span", {
        "data-mce-type": "bookmark",
        id: t
      });
    },
    KA = function KA(e, t) {
      var n = e.createRng();
      return n.setStartAfter(t.start), n.setEndBefore(t.end), n;
    },
    GA = function GA(e, t, n) {
      var o = UA(e.getRoot(), n).getOrDie("Unable to resolve path range"),
        r = o.startContainer,
        s = o.endContainer,
        a = 0 === o.endOffset ? s : s.splitText(o.endOffset),
        i = 0 === o.startOffset ? r : r.splitText(o.startOffset),
        l = i.parentNode;
      return {
        prefix: t,
        end: a.parentNode.insertBefore(WA(e, t + "-end"), a),
        start: l.insertBefore(WA(e, t + "-start"), i)
      };
    },
    YA = function YA(e, t, n) {
      zA(e, e.get(t.prefix + "-end"), n), zA(e, e.get(t.prefix + "-start"), n);
    },
    XA = function XA(e) {
      return 0 === e.start.length;
    },
    QA = function QA(e, t, n, o) {
      var r = t.start;
      var s;
      return vS(e, o.container, o.offset, (s = r, function (e, t) {
        var n = e.data.substring(0, t),
          o = n.lastIndexOf(s.charAt(s.length - 1)),
          r = n.lastIndexOf(s);
        return -1 !== r ? r + s.length : -1 !== o ? o + 1 : -1;
      }), n).bind(function (o) {
        var s, a;
        var i = null !== (a = null === (s = n.textContent) || void 0 === s ? void 0 : s.indexOf(r)) && void 0 !== a ? a : -1;
        if (-1 !== i && o.offset >= i + r.length) {
          var _t155 = e.createRng();
          return _t155.setStart(o.container, o.offset - r.length), _t155.setEnd(o.container, o.offset), I.some(_t155);
        }
        {
          var _s54 = o.offset - r.length;
          return hS(o.container, _s54, n).map(function (t) {
            var n = e.createRng();
            return n.setStart(t.container, t.offset), n.setEnd(o.container, o.offset), n;
          }).filter(function (e) {
            return e.toString() === r;
          }).orThunk(function () {
            return QA(e, t, n, mS(o.container, 0));
          });
        }
      });
    },
    JA = function JA(e, t, n, o) {
      var r = e.dom,
        s = r.getRoot(),
        a = n.pattern,
        i = n.position.container,
        l = n.position.offset;
      return hS(i, l - n.pattern.end.length, t).bind(function (d) {
        var c = IA(r, s, d.container, d.offset, i, l, o);
        if (XA(a)) return I.some({
          matches: [{
            pattern: a,
            startRng: c,
            endRng: c
          }],
          position: d
        });
        {
          var _i25 = ZA(e, n.remainingPatterns, d.container, d.offset, t, o),
            _l15 = _i25.getOr({
              matches: [],
              position: d
            }),
            _u8 = _l15.position,
            _m6 = function (e, t, n, o, r) {
              var s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : !1;
              if (0 === t.start.length && !s) {
                var _t156 = e.createRng();
                return _t156.setStart(n, o), _t156.setEnd(n, o), I.some(_t156);
              }
              return pS(n, o, r).bind(function (n) {
                return QA(e, t, r, n).bind(function (e) {
                  var t;
                  if (s) {
                    if (e.endContainer === n.container && e.endOffset === n.offset) return I.none();
                    if (0 === n.offset && (null === (t = e.endContainer.textContent) || void 0 === t ? void 0 : t.length) === e.endOffset) return I.none();
                  }
                  return I.some(e);
                });
              });
            }(r, a, _u8.container, _u8.offset, t, _i25.isNone());
          return _m6.map(function (e) {
            var t = function (e, t, n) {
              var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
              return IA(e, t, n.startContainer, n.startOffset, n.endContainer, n.endOffset, o);
            }(r, s, e, o);
            return {
              matches: _l15.matches.concat([{
                pattern: a,
                startRng: t,
                endRng: c
              }]),
              position: mS(e.startContainer, e.startOffset)
            };
          });
        }
      });
    },
    ZA = function ZA(e, t, n, o, r, s) {
      var a = e.dom;
      return pS(n, o, a.getRoot()).bind(function (i) {
        var l = VA(a, r, n, o);
        for (var _a30 = 0; _a30 < t.length; _a30++) {
          var _d13 = t[_a30];
          if (!$e(l, _d13.end)) continue;
          var _c9 = t.slice();
          _c9.splice(_a30, 1);
          var _u9 = JA(e, r, {
            pattern: _d13,
            remainingPatterns: _c9,
            position: i
          }, s);
          if (_u9.isNone() && o > 0) return ZA(e, t, n, o - 1, r, s);
          if (_u9.isSome()) return _u9;
        }
        return I.none();
      });
    },
    eO = function eO(e, t, n) {
      e.selection.setRng(n), "inline-format" === t.type ? q(t.format, function (t) {
        e.formatter.apply(t);
      }) : e.execCommand(t.cmd, !1, t.value);
    },
    tO = function tO(e, t, n, o, r, s) {
      var a;
      return function (e, t) {
        var n = ne(e, function (e) {
          return $(t, function (t) {
            return e.pattern.start === t.pattern.start && e.pattern.end === t.pattern.end;
          });
        });
        return e.length === t.length ? n ? e : t : e.length > t.length ? e : t;
      }(ZA(e, r.inlinePatterns, n, o, t, s).fold(function () {
        return [];
      }, function (e) {
        return e.matches;
      }), ZA(e, (a = r.inlinePatterns, ae(a, function (e, t) {
        return t.end.length - e.end.length;
      })), n, o, t, s).fold(function () {
        return [];
      }, function (e) {
        return e.matches;
      }));
    },
    nO = function nO(e, t) {
      if (0 === t.length) return;
      var n = e.dom,
        o = e.selection.getBookmark(),
        r = function (e, t) {
          var n = ti("mce_textpattern"),
            o = Y(t, function (t, o) {
              var r = GA(e, n + "_end".concat(t.length), o.endRng);
              return t.concat([_objectSpread(_objectSpread({}, o), {}, {
                endMarker: r
              })]);
            }, []);
          return Y(o, function (t, r) {
            var s = o.length - t.length - 1,
              a = XA(r.pattern) ? r.endMarker : GA(e, n + "_start".concat(s), r.startRng);
            return t.concat([_objectSpread(_objectSpread({}, r), {}, {
              startMarker: a
            })]);
          }, []);
        }(n, t);
      q(r, function (t) {
        var o = n.getParent(t.startMarker.start, n.isBlock),
          r = function r(e) {
            return e === o;
          };
        XA(t.pattern) ? function (e, t, n, o) {
          var r = KA(e.dom, n);
          jA(e.dom, r, o), eO(e, t, r);
        }(e, t.pattern, t.endMarker, r) : function (e, t, n, o, r) {
          var s = e.dom,
            a = KA(s, o),
            i = KA(s, n);
          jA(s, i, r), jA(s, a, r);
          var l = {
              prefix: n.prefix,
              start: n.end,
              end: o.start
            },
            d = KA(s, l);
          eO(e, t, d);
        }(e, t.pattern, t.startMarker, t.endMarker, r), YA(n, t.endMarker, r), YA(n, t.startMarker, r);
      }), e.selection.moveToBookmark(o);
    },
    oO = function oO(e, t) {
      var n = e.selection.getRng();
      return HA(e, n).map(function (o) {
        var r;
        var s = Math.max(0, n.startOffset),
          a = $A(t, o, null !== (r = o.textContent) && void 0 !== r ? r : ""),
          i = tO(e, o, n.startContainer, s, a, !0),
          l = function (e, t, n, o) {
            var r;
            var s = e.dom,
              a = Nl(e);
            if (!s.is(t, a)) return [];
            var i = null !== (r = t.textContent) && void 0 !== r ? r : "";
            return function (e, t) {
              var n = function (e) {
                  return ae(e, function (e, t) {
                    return t.start.length - e.start.length;
                  });
                }(e),
                o = t.replace(pr, " ");
              return J(n, function (e) {
                return 0 === t.indexOf(e.start) || 0 === o.indexOf(e.start);
              });
            }(n.blockPatterns, i).map(function (e) {
              return Dt.trim(i).length === e.start.length ? [] : [{
                pattern: e,
                range: IA(s, s.getRoot(), t, 0, t, 0, true)
              }];
            }).getOr([]);
          }(e, o, a);
        return (l.length > 0 || i.length > 0) && (e.undoManager.add(), e.undoManager.extra(function () {
          e.execCommand("mceInsertNewLine");
        }, function () {
          e.insertContent(gr), nO(e, i), function (e, t) {
            if (0 === t.length) return;
            var n = e.selection.getBookmark();
            q(t, function (t) {
              return function (e, t) {
                var n = e.dom,
                  o = t.pattern,
                  r = UA(n.getRoot(), t.range).getOrDie("Unable to resolve path range");
                return HA(e, r).each(function (t) {
                  "block-format" === o.type ? function (e, t) {
                    var n = t.get(e);
                    return p(n) && le(n).exists(function (e) {
                      return ke(e, "block");
                    });
                  }(o.format, e.formatter) && e.undoManager.transact(function () {
                    qA(e.dom, t, o), e.formatter.apply(o.format);
                  }) : "block-command" === o.type && e.undoManager.transact(function () {
                    qA(e.dom, t, o), e.execCommand(o.cmd, !1, o.value);
                  });
                }), !0;
              }(e, t);
            }), e.selection.moveToBookmark(n);
          }(e, l);
          var t = e.selection.getRng(),
            n = pS(t.startContainer, t.startOffset, e.dom.getRoot());
          e.execCommand("mceInsertNewLine"), n.each(function (t) {
            var n = t.container;
            n.data.charAt(t.offset - 1) === gr && (n.deleteData(t.offset - 1, 1), zA(e.dom, n.parentNode, function (t) {
              return t === e.dom.getRoot();
            }));
          });
        }), !0);
      }).getOr(!1);
    },
    rO = function rO(e, t, n) {
      for (var _o116 = 0; _o116 < e.length; _o116++) if (n(e[_o116], t)) return !0;
      return !1;
    },
    sO = function sO(e) {
      var t = Dt.each,
        n = ef.BACKSPACE,
        o = ef.DELETE,
        r = e.dom,
        s = e.selection,
        a = e.parser,
        i = At.browser,
        l = i.isFirefox(),
        d = i.isChromium() || i.isSafari(),
        c = At.deviceType.isiPhone() || At.deviceType.isiPad(),
        u = At.os.isMacOS() || At.os.isiOS(),
        f = function f(t, n) {
          try {
            e.getDoc().execCommand(t, !1, String(n));
          } catch (e) {}
        },
        g = function g(e) {
          return e.isDefaultPrevented();
        },
        p = function p() {
          e.shortcuts.add("meta+a", null, "SelectAll");
        },
        h = function h() {
          e.inline || r.bind(e.getDoc(), "mousedown mouseup", function (t) {
            var n;
            if (t.target === e.getDoc().documentElement) if (n = s.getRng(), e.getBody().focus(), "mousedown" === t.type) {
              if ($r(n.startContainer)) return;
              s.placeCaretAt(t.clientX, t.clientY);
            } else s.setRng(n);
          });
        },
        b = function b() {
          Range.prototype.getClientRects || e.on("mousedown", function (t) {
            if (!g(t) && "HTML" === t.target.nodeName) {
              var _t157 = e.getBody();
              _t157.blur(), mg.setEditorTimeout(e, function () {
                _t157.focus();
              });
            }
          });
        },
        v = function v() {
          var t = Od(e);
          e.on("click", function (n) {
            var o = n.target;
            /^(IMG|HR)$/.test(o.nodeName) && r.isEditable(o.parentNode) && (n.preventDefault(), e.selection.select(o), e.nodeChanged()), "A" === o.nodeName && r.hasClass(o, t) && 0 === o.childNodes.length && r.isEditable(o.parentNode) && (n.preventDefault(), s.select(o));
          });
        },
        y = function y() {
          e.on("keydown", function (e) {
            if (!g(e) && e.keyCode === n && s.isCollapsed() && 0 === s.getRng().startOffset) {
              var _t158 = s.getNode().previousSibling;
              if (_t158 && _t158.nodeName && "table" === _t158.nodeName.toLowerCase()) return e.preventDefault(), !1;
            }
            return !0;
          });
        },
        C = function C() {
          xd(e) || e.on("BeforeExecCommand mousedown", function () {
            f("StyleWithCSS", !1), f("enableInlineTableEditing", !1), ed(e) || f("enableObjectResizing", !1);
          });
        },
        w = function w() {
          e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}");
        },
        x = function x() {
          e.inline || e.on("keydown", function () {
            document.activeElement === document.body && e.getWin().focus();
          });
        },
        k = function k() {
          e.inline || (e.contentStyles.push("body {min-height: 150px}"), e.on("click", function (t) {
            var n;
            "HTML" === t.target.nodeName && (n = e.selection.getRng(), e.getBody().focus(), e.selection.setRng(n), e.selection.normalize(), e.nodeChanged());
          }));
        },
        S = function S() {
          u && e.on("keydown", function (t) {
            !ef.metaKeyPressed(t) || t.shiftKey || 37 !== t.keyCode && 39 !== t.keyCode || (t.preventDefault(), e.selection.getSel().modify("move", 37 === t.keyCode ? "backward" : "forward", "lineboundary"));
          });
        },
        _ = function _() {
          e.on("click", function (e) {
            var t = e.target;
            do {
              if ("A" === t.tagName) return void e.preventDefault();
            } while (t = t.parentNode);
          }), e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}");
        },
        N = function N() {
          e.on("init", function () {
            e.dom.bind(e.getBody(), "submit", function (e) {
              e.preventDefault();
            });
          });
        },
        R = E;
      return PC(e) ? (d && (h(), v(), N(), p(), c && (x(), k(), _())), l && (b(), C(), w(), S())) : (e.on("keydown", function (t) {
        if (g(t) || t.keyCode !== ef.BACKSPACE) return;
        var n = s.getRng();
        var o = n.startContainer,
          a = n.startOffset,
          i = r.getRoot();
        var l = o;
        if (n.collapsed && 0 === a) {
          for (; l.parentNode && l.parentNode.firstChild === l && l.parentNode !== i;) l = l.parentNode;
          "BLOCKQUOTE" === l.nodeName && (e.formatter.toggle("blockquote", void 0, l), n = r.createRng(), n.setStart(o, 0), n.setEnd(o, 0), s.setRng(n));
        }
      }), function () {
        var t = function t(e) {
          var t = r.create("body"),
            n = e.cloneContents();
          return t.appendChild(n), s.serializer.serialize(t, {
            format: "html"
          });
        };
        e.on("keydown", function (s) {
          var a = s.keyCode;
          if (!g(s) && (a === o || a === n) && e.selection.isEditable()) {
            var _n134 = e.selection.isCollapsed(),
              _o117 = e.getBody();
            if (_n134 && (!r.isEmpty(_o117) || function (e) {
              var t = yn(e);
              return $(Fo(t, '[contenteditable="true"]'), function (e) {
                return On(e).exists(function (e) {
                  return !no(e);
                });
              });
            }(_o117))) return;
            if (!_n134 && !function (n) {
              var o = t(n),
                s = r.createRng();
              return s.selectNode(e.getBody()), o === t(s);
            }(e.selection.getRng())) return;
            s.preventDefault(), e.setContent(""), _o117.firstChild && r.isBlock(_o117.firstChild) ? e.selection.setCursorLocation(_o117.firstChild, 0) : e.selection.setCursorLocation(_o117, 0), e.nodeChanged();
          }
        });
      }(), At.windowsPhone || e.on("keyup focusin mouseup", function (t) {
        ef.modifierPressed(t) || function (e) {
          var t = e.getBody(),
            n = e.selection.getRng();
          return n.startContainer === n.endContainer && n.startContainer === t && 0 === n.startOffset && n.endOffset === t.childNodes.length;
        }(e) || s.normalize();
      }, !0), d && (h(), v(), e.on("init", function () {
        f("DefaultParagraphSeparator", Nl(e));
      }), N(), y(), a.addNodeFilter("br", function (e) {
        var t = e.length;
        for (; t--;) "Apple-interchange-newline" === e[t].attr("class") && e[t].remove();
      }), c ? (x(), k(), _()) : p()), l && (e.on("keydown", function (t) {
        if (!g(t) && t.keyCode === n) {
          if (!e.getBody().getElementsByTagName("hr").length) return;
          if (s.isCollapsed() && 0 === s.getRng().startOffset) {
            var _e156 = s.getNode(),
              _n135 = _e156.previousSibling;
            if ("HR" === _e156.nodeName) return r.remove(_e156), void t.preventDefault();
            _n135 && _n135.nodeName && "hr" === _n135.nodeName.toLowerCase() && (r.remove(_n135), t.preventDefault());
          }
        }
      }), b(), function () {
        var n = function n() {
            var n = r.getAttribs(s.getStart().cloneNode(!1));
            return function () {
              var o = s.getStart();
              o !== e.getBody() && (r.setAttrib(o, "style", null), t(n, function (e) {
                o.setAttributeNode(e.cloneNode(!0));
              }));
            };
          },
          o = function o() {
            return !s.isCollapsed() && r.getParent(s.getStart(), r.isBlock) !== r.getParent(s.getEnd(), r.isBlock);
          };
        e.on("keypress", function (t) {
          var r;
          return !(!(g(t) || 8 !== t.keyCode && 46 !== t.keyCode) && o() && (r = n(), e.getDoc().execCommand("delete", !1), r(), t.preventDefault(), 1));
        }), r.bind(e.getDoc(), "cut", function (t) {
          if (!g(t) && o()) {
            var _t159 = n();
            mg.setEditorTimeout(e, function () {
              _t159();
            });
          }
        });
      }(), C(), e.on("SetContent ExecCommand", function (e) {
        "setcontent" !== e.type && "mceInsertLink" !== e.command || t(r.select("a:not([data-mce-block])"), function (e) {
          var t;
          var n = e.parentNode;
          var o = r.getRoot();
          if ((null == n ? void 0 : n.lastChild) === e) {
            for (; n && !r.isBlock(n);) {
              if ((null === (t = n.parentNode) || void 0 === t ? void 0 : t.lastChild) !== n || n === o) return;
              n = n.parentNode;
            }
            r.add(n, "br", {
              "data-mce-bogus": 1
            });
          }
        });
      }), w(), S(), y(), e.on("drop", function (t) {
        var n;
        var o = null === (n = t.dataTransfer) || void 0 === n ? void 0 : n.getData("text/html");
        m(o) && /^<img[^>]*>$/.test(o) && e.dispatch("dragend", new window.DragEvent("dragend", t));
      }))), {
        refreshContentEditable: R,
        isHidden: function isHidden() {
          if (!l || e.removed) return !1;
          var t = e.selection.getSel();
          return !t || !t.rangeCount || 0 === t.rangeCount;
        }
      };
    },
    aO = Oa.DOM,
    iO = function iO(e) {
      return e.inline ? e.getElement().nodeName.toLowerCase() : void 0;
    },
    lO = function lO(e) {
      return ye(e, function (e) {
        return !1 === v(e);
      });
    },
    dO = function dO(e) {
      var t = e.options.get,
        n = e.editorUpload.blobCache;
      return lO({
        allow_conditional_comments: t("allow_conditional_comments"),
        allow_html_data_urls: t("allow_html_data_urls"),
        allow_svg_data_urls: t("allow_svg_data_urls"),
        allow_html_in_named_anchor: t("allow_html_in_named_anchor"),
        allow_script_urls: t("allow_script_urls"),
        allow_unsafe_link_target: t("allow_unsafe_link_target"),
        convert_fonts_to_spans: t("convert_fonts_to_spans"),
        fix_list_elements: t("fix_list_elements"),
        font_size_legacy_values: t("font_size_legacy_values"),
        forced_root_block: t("forced_root_block"),
        forced_root_block_attrs: t("forced_root_block_attrs"),
        preserve_cdata: t("preserve_cdata"),
        inline_styles: t("inline_styles"),
        root_name: iO(e),
        sanitize: t("xss_sanitization"),
        validate: !0,
        blob_cache: n,
        document: e.getDoc()
      });
    },
    cO = function cO(e) {
      var t = e.options.get;
      return lO({
        custom_elements: t("custom_elements"),
        extended_valid_elements: t("extended_valid_elements"),
        invalid_elements: t("invalid_elements"),
        invalid_styles: t("invalid_styles"),
        schema: t("schema"),
        valid_children: t("valid_children"),
        valid_classes: t("valid_classes"),
        valid_elements: t("valid_elements"),
        valid_styles: t("valid_styles"),
        verify_html: t("verify_html"),
        padd_empty_block_inline_children: t("format_empty_lines")
      });
    },
    uO = function uO(e) {
      return e.inline ? e.ui.styleSheetLoader : e.dom.styleSheetLoader;
    },
    mO = function mO(e) {
      var t = uO(e),
        n = Ql(e),
        o = e.contentCSS,
        r = function r() {
          t.unloadAll(o), e.inline || e.ui.styleSheetLoader.unloadAll(n);
        },
        s = function s() {
          e.removed ? r() : e.on("remove", r);
        };
      if (e.contentStyles.length > 0) {
        var _t160 = "";
        Dt.each(e.contentStyles, function (e) {
          _t160 += e + "\r\n";
        }), e.dom.addStyle(_t160);
      }
      var a = Promise.all(function (e, t, n) {
          var o = [uO(e).loadAll(t)];
          return e.inline ? o : o.concat([e.ui.styleSheetLoader.loadAll(n)]);
        }(e, o, n)).then(s)["catch"](s),
        i = Xl(e);
      return i && function (e, t) {
        var n = yn(e.getBody()),
          o = qn(Vn(n)),
          r = bn("style");
        Jt(r, "type", "text/css"), bo(r, vn(t)), bo(o, r), e.on("remove", function () {
          wo(r);
        });
      }(e, i), a;
    },
    fO = function fO(e) {
      !0 !== e.removed && (function (e) {
        PC(e) || e.load({
          initial: !0,
          format: "html"
        }), e.startContent = e.getContent({
          format: "raw"
        });
      }(e), function (e) {
        e.bindPendingEventDelegates(), e.initialized = !0, function (e) {
          e.dispatch("Init");
        }(e), e.focus(!0), function (e) {
          var t = e.dom.getRoot();
          e.inline || tm(e) && e.selection.getStart(!0) !== t || yu(t).each(function (t) {
            var n = t.getNode(),
              o = Yo(n) ? yu(n).getOr(t) : t;
            e.selection.setRng(o.toRange());
          });
        }(e), e.nodeChanged({
          initial: !0
        });
        var t = Dd(e);
        w(t) && t.call(e, e), function (e) {
          var t = Ld(e);
          t && mg.setEditorTimeout(e, function () {
            var n;
            n = !0 === t ? e : e.editorManager.get(t), n && !n.destroyed && (n.focus(), n.selection.scrollIntoView());
          }, 100);
        }(e);
      }(e));
    },
    gO = function gO(e) {
      var t = e.getElement();
      var n = e.getDoc();
      e.inline && (aO.addClass(t, "mce-content-body"), e.contentDocument = n = document, e.contentWindow = window, e.bodyElement = t, e.contentAreaContainer = t);
      var o = e.getBody();
      o.disabled = !0, e.readonly = xd(e), e._editableRoot = kd(e), !e.readonly && e.hasEditableRoot() && (e.inline && "static" === aO.getStyle(o, "position", !0) && (o.style.position = "relative"), o.contentEditable = "true"), o.disabled = !1, e.editorUpload = Ow(e), e.schema = ca(cO(e)), e.dom = Oa(n, {
        keep_values: !0,
        url_converter: e.convertURL,
        url_converter_scope: e,
        update_styles: !0,
        root_element: e.inline ? e.getBody() : null,
        collect: e.inline,
        schema: e.schema,
        contentCssCors: $l(e),
        referrerPolicy: Vl(e),
        onSetAttrib: function onSetAttrib(t) {
          e.dispatch("SetAttrib", t);
        }
      }), e.parser = function (e) {
        var t = tC(dO(e), e.schema);
        return t.addAttributeFilter("src,href,style,tabindex", function (t, n) {
          var o = e.dom,
            r = "data-mce-" + n;
          var s = t.length;
          for (; s--;) {
            var _a31 = t[s];
            var _i26 = _a31.attr(n);
            if (_i26 && !_a31.attr(r)) {
              if (0 === _i26.indexOf("data:") || 0 === _i26.indexOf("blob:")) continue;
              "style" === n ? (_i26 = o.serializeStyle(o.parseStyle(_i26), _a31.name), _i26.length || (_i26 = null), _a31.attr(r, _i26), _a31.attr(n, _i26)) : "tabindex" === n ? (_a31.attr(r, _i26), _a31.attr(n, null)) : _a31.attr(r, e.convertURL(_i26, n, _a31.name));
            }
          }
        }), t.addNodeFilter("script", function (e) {
          var t = e.length;
          for (; t--;) {
            var _n136 = e[t],
              _o118 = _n136.attr("type") || "no/type";
            0 !== _o118.indexOf("mce-") && _n136.attr("type", "mce-" + _o118);
          }
        }), tc(e) && t.addNodeFilter("#cdata", function (t) {
          var n;
          var o = t.length;
          for (; o--;) {
            var _r79 = t[o];
            _r79.type = 8, _r79.name = "#comment", _r79.value = "[CDATA[" + e.dom.encode(null !== (n = _r79.value) && void 0 !== n ? n : "") + "]]";
          }
        }), t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div", function (t) {
          var n = t.length;
          var o = e.schema.getNonEmptyElements();
          for (; n--;) {
            var _e157 = t[n];
            _e157.isEmpty(o) && 0 === _e157.getAll("br").length && _e157.append(new Fg("br", 1));
          }
        }), t;
      }(e), e.serializer = qC(function (e) {
        var t = e.options.get;
        return _objectSpread(_objectSpread(_objectSpread({}, dO(e)), cO(e)), lO({
          remove_trailing_brs: t("remove_trailing_brs"),
          pad_empty_with_br: t("pad_empty_with_br"),
          url_converter: t("url_converter"),
          url_converter_scope: t("url_converter_scope"),
          element_format: t("element_format"),
          entities: t("entities"),
          entity_encoding: t("entity_encoding"),
          indent: t("indent"),
          indent_after: t("indent_after"),
          indent_before: t("indent_before")
        }));
      }(e), e), e.selection = HC(e.dom, e.getWin(), e.serializer, e), e.annotator = qm(e), e.formatter = jw(e), e.undoManager = $w(e), e._nodeChangeDispatcher = new QN(e), e._selectionOverrides = PA(e), function (e) {
        var t = za(),
          n = Da(!1),
          o = Ha(function (t) {
            e.dispatch("longpress", _objectSpread(_objectSpread({}, t), {}, {
              type: "longpress"
            })), n.set(!0);
          }, 400);
        e.on("touchstart", function (e) {
          hE(e).each(function (r) {
            o.cancel();
            var s = {
              x: r.clientX,
              y: r.clientY,
              target: e.target
            };
            o.throttle(e), n.set(!1), t.set(s);
          });
        }, !0), e.on("touchmove", function (r) {
          o.cancel(), hE(r).each(function (o) {
            t.on(function (r) {
              (function (e, t) {
                var n = Math.abs(e.clientX - t.x),
                  o = Math.abs(e.clientY - t.y);
                return n > 5 || o > 5;
              })(o, r) && (t.clear(), n.set(!1), e.dispatch("longpresscancel"));
            });
          });
        }, !0), e.on("touchend touchcancel", function (r) {
          o.cancel(), "touchcancel" !== r.type && t.get().filter(function (e) {
            return e.target.isEqualNode(r.target);
          }).each(function () {
            n.get() ? r.preventDefault() : e.dispatch("tap", _objectSpread(_objectSpread({}, r), {}, {
              type: "tap"
            }));
          });
        }, !0);
      }(e), function (e) {
        (function (e) {
          e.on("click", function (t) {
            e.dom.getParent(t.target, "details") && t.preventDefault();
          });
        })(e), function (e) {
          e.parser.addNodeFilter("details", function (t) {
            var n = ic(e);
            q(t, function (e) {
              "expanded" === n ? e.attr("open", "open") : "collapsed" === n && e.attr("open", null);
            });
          }), e.serializer.addNodeFilter("details", function (t) {
            var n = lc(e);
            q(t, function (e) {
              "expanded" === n ? e.attr("open", "open") : "collapsed" === n && e.attr("open", null);
            });
          });
        }(e);
      }(e), function (e) {
        var t = "contenteditable",
          n = " " + Dt.trim(Zd(e)) + " ",
          o = " " + Dt.trim(Jd(e)) + " ",
          r = kE(n),
          s = kE(o),
          a = ec(e);
        a.length > 0 && e.on("BeforeSetContent", function (t) {
          (function (e, t, n) {
            var o = t.length,
              r = n.content;
            if ("raw" !== n.format) {
              for (; o--;) r = r.replace(t[o], EE(e, r, Jd(e)));
              n.content = r;
            }
          })(e, a, t);
        }), e.parser.addAttributeFilter("class", function (e) {
          var n = e.length;
          for (; n--;) {
            var _o119 = e[n];
            r(_o119) ? _o119.attr(t, "true") : s(_o119) && _o119.attr(t, "false");
          }
        }), e.serializer.addAttributeFilter(t, function (e) {
          var n = e.length;
          for (; n--;) {
            var _o120 = e[n];
            (r(_o120) || s(_o120)) && (a.length > 0 && _o120.attr("data-mce-content") ? (_o120.name = "#text", _o120.type = 3, _o120.raw = !0, _o120.value = _o120.attr("data-mce-content")) : _o120.attr(t, null));
          }
        });
      }(e), PC(e) || (function (e) {
        e.on("mousedown", function (t) {
          t.detail >= 3 && (t.preventDefault(), iA(e));
        });
      }(e), function (e) {
        (function (e) {
          var t = [",", ".", ";", ":", "!", "?"],
            n = [32],
            o = function o() {
              return t = Xd(e), n = Qd(e), {
                inlinePatterns: ul(t),
                blockPatterns: cl(t),
                dynamicPatternsLookup: n
              };
              var t, n;
            },
            r = function r() {
              return function (e) {
                return e.options.isSet("text_patterns_lookup");
              }(e);
            };
          e.on("keydown", function (t) {
            if (13 === t.keyCode && !ef.modifierPressed(t) && e.selection.isCollapsed()) {
              var _n137 = o();
              (_n137.inlinePatterns.length > 0 || _n137.blockPatterns.length > 0 || r()) && oO(e, _n137) && t.preventDefault();
            }
          }, !0);
          var s = function s() {
            if (e.selection.isCollapsed()) {
              var _t161 = o();
              (_t161.inlinePatterns.length > 0 || r()) && function (e, t) {
                var n = e.selection.getRng();
                HA(e, n).map(function (o) {
                  var r = Math.max(0, n.startOffset - 1),
                    s = VA(e.dom, o, n.startContainer, r),
                    a = $A(t, o, s),
                    i = tO(e, o, n.startContainer, r, a, !1);
                  i.length > 0 && e.undoManager.transact(function () {
                    nO(e, i);
                  });
                });
              }(e, _t161);
            }
          };
          e.on("keyup", function (e) {
            rO(n, e, function (e, t) {
              return e === t.keyCode && !ef.modifierPressed(t);
            }) && s();
          }), e.on("keypress", function (n) {
            rO(t, n, function (e, t) {
              return e.charCodeAt(0) === t.charCode;
            }) && mg.setEditorTimeout(e, s);
          });
        })(e);
      }(e));
      var r = XN(e);
      pE(e, r), function (e) {
        e.on("NodeChange", O(wE, e));
      }(e), function (e) {
        var t;
        var n = e.dom,
          o = Nl(e),
          r = null !== (t = nd(e)) && void 0 !== t ? t : "",
          s = function s(t, a) {
            if (function (e) {
              if (Ww(e)) {
                var _t162 = e.keyCode;
                return !Kw(e) && (ef.metaKeyPressed(e) || e.altKey || _t162 >= 112 && _t162 <= 123 || H(Vw, _t162));
              }
              return !1;
            }(t)) return;
            var i = e.getBody(),
              l = !function (e) {
                return Ww(e) && !(Kw(e) || "keyup" === e.type && 229 === e.keyCode);
              }(t) && function (e, t, n) {
                if (bs(yn(t), !1)) {
                  var _o121 = t.firstElementChild;
                  return !_o121 || !e.getStyle(t.firstElementChild, "padding-left") && !e.getStyle(t.firstElementChild, "padding-right") && n === _o121.nodeName.toLowerCase();
                }
                return !1;
              }(n, i, o);
            ("" !== n.getAttrib(i, qw) !== l || a) && (n.setAttrib(i, qw, l ? r : null), n.setAttrib(i, "aria-placeholder", l ? r : null), function (e, t) {
              e.dispatch("PlaceholderToggle", {
                state: t
              });
            }(e, l), e.on(l ? "keydown" : "keyup", s), e.off(l ? "keyup" : "keydown", s));
          };
        Ge(r) && e.on("init", function (t) {
          s(t, !0), e.on("change SetContent ExecCommand", s), e.on("paste", function (t) {
            return mg.setEditorTimeout(e, function () {
              return s(t);
            });
          });
        });
      }(e), eA(e);
      var s = function (e) {
        var t = e;
        return function (e) {
          return xe(e.plugins, "rtc").bind(function (e) {
            return I.from(e.setup);
          });
        }(e).fold(function () {
          return t.rtcInstance = DC(e), I.none();
        }, function (e) {
          return t.rtcInstance = function () {
            var e = N(null),
              t = N("");
            return {
              init: {
                bindEvents: E
              },
              undoManager: {
                beforeChange: E,
                add: e,
                undo: e,
                redo: e,
                clear: E,
                reset: E,
                hasUndo: L,
                hasRedo: L,
                transact: e,
                ignore: E,
                extra: E
              },
              formatter: {
                match: L,
                matchAll: N([]),
                matchNode: N(void 0),
                canApply: L,
                closest: t,
                apply: E,
                remove: E,
                toggle: E,
                formatChanged: N({
                  unbind: E
                })
              },
              editor: {
                getContent: t,
                setContent: N({
                  content: "",
                  html: ""
                }),
                insertContent: N(""),
                addVisual: E
              },
              selection: {
                getContent: t
              },
              autocompleter: {
                addDecoration: E,
                removeDecoration: E
              },
              raw: {
                getModel: N(I.none())
              }
            };
          }(), I.some(function () {
            return e().then(function (e) {
              return t.rtcInstance = function (e) {
                var t = function t(e) {
                    return f(e) ? e : {};
                  },
                  n = e.init,
                  o = e.undoManager,
                  r = e.formatter,
                  s = e.editor,
                  a = e.selection,
                  i = e.autocompleter,
                  l = e.raw;
                return {
                  init: {
                    bindEvents: n.bindEvents
                  },
                  undoManager: {
                    beforeChange: o.beforeChange,
                    add: o.add,
                    undo: o.undo,
                    redo: o.redo,
                    clear: o.clear,
                    reset: o.reset,
                    hasUndo: o.hasUndo,
                    hasRedo: o.hasRedo,
                    transact: function transact(e, t, n) {
                      return o.transact(n);
                    },
                    ignore: function ignore(e, t) {
                      return o.ignore(t);
                    },
                    extra: function extra(e, t, n, r) {
                      return o.extra(n, r);
                    }
                  },
                  formatter: {
                    match: function match(e, n, o, s) {
                      return r.match(e, t(n), s);
                    },
                    matchAll: r.matchAll,
                    matchNode: r.matchNode,
                    canApply: function canApply(e) {
                      return r.canApply(e);
                    },
                    closest: function closest(e) {
                      return r.closest(e);
                    },
                    apply: function apply(e, n, o) {
                      return r.apply(e, t(n));
                    },
                    remove: function remove(e, n, o, s) {
                      return r.remove(e, t(n));
                    },
                    toggle: function toggle(e, n, o) {
                      return r.toggle(e, t(n));
                    },
                    formatChanged: function formatChanged(e, t, n, o, s) {
                      return r.formatChanged(t, n, o, s);
                    }
                  },
                  editor: {
                    getContent: function getContent(e) {
                      return s.getContent(e);
                    },
                    setContent: function setContent(e, t) {
                      return {
                        content: s.setContent(e, t),
                        html: ""
                      };
                    },
                    insertContent: function insertContent(e, t) {
                      return s.insertContent(e), "";
                    },
                    addVisual: s.addVisual
                  },
                  selection: {
                    getContent: function getContent(e, t) {
                      return a.getContent(t);
                    }
                  },
                  autocompleter: {
                    addDecoration: i.addDecoration,
                    removeDecoration: i.removeDecoration
                  },
                  raw: {
                    getModel: function getModel() {
                      return I.some(l.getRawModel());
                    }
                  }
                };
              }(e), e.rtc.isRemote;
            });
          });
        });
      }(e);
      (function (e) {
        var t = e.getDoc(),
          n = e.getBody();
        (function (e) {
          e.dispatch("PreInit");
        })(e), Md(e) || (t.body.spellcheck = !1, aO.setAttrib(n, "spellcheck", "false")), e.quirks = sO(e), function (e) {
          e.dispatch("PostRender");
        }(e);
        var o = Jl(e);
        void 0 !== o && (n.dir = o);
        var r = Id(e);
        r && e.on("BeforeSetContent", function (e) {
          Dt.each(r, function (t) {
            e.content = e.content.replace(t, function (e) {
              return "\x3c!--mce:protected " + escape(e) + "--\x3e";
            });
          });
        }), e.on("SetContent", function () {
          e.addVisual(e.getBody());
        }), e.on("compositionstart compositionend", function (t) {
          e.composing = "compositionstart" === t.type;
        });
      })(e), s.fold(function () {
        var t = function (e) {
          var t = !1;
          var n = setTimeout(function () {
            t || e.setProgressState(!0);
          }, 500);
          return function () {
            clearTimeout(n), t = !0, e.setProgressState(!1);
          };
        }(e);
        mO(e).then(function () {
          fO(e), t();
        });
      }, function (t) {
        e.setProgressState(!0), mO(e).then(function () {
          t().then(function (t) {
            e.setProgressState(!1), fO(e), IC(e);
          }, function (t) {
            e.notificationManager.open({
              type: "error",
              text: String(t)
            }), fO(e), IC(e);
          });
        });
      });
    },
    pO = M,
    hO = Oa.DOM,
    bO = Oa.DOM,
    vO = function vO(e, t) {
      return {
        editorContainer: e,
        iframeContainer: t,
        api: {}
      };
    },
    yO = function yO(e) {
      var t = e.getElement();
      return e.inline ? vO(null) : function (e) {
        var t = bO.create("div");
        return bO.insertAfter(t, e), vO(t, t);
      }(t);
    },
    CO = /*#__PURE__*/function () {
      var _ref23 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {
        var t;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              e.dispatch("ScriptsLoaded"), function (e) {
                var t = Dt.trim(Il(e)),
                  n = e.ui.registry.getAll().icons,
                  o = _objectSpread(_objectSpread({}, aw.get("default").icons), aw.get(t).icons);
                ge(o, function (t, o) {
                  ke(n, o) || e.ui.registry.addIcon(o, t);
                });
              }(e), function (e) {
                var t = sd(e);
                if (m(t)) {
                  var _n138 = hw.get(t);
                  e.theme = _n138(e, hw.urls[t]) || {}, w(e.theme.init) && e.theme.init(e, hw.urls[t] || e.documentBaseUrl.replace(/\/$/, ""));
                } else e.theme = {};
              }(e), function (e) {
                var t = id(e),
                  n = iw.get(t);
                e.model = n(e, iw.urls[t]);
              }(e), function (e) {
                var t = [];
                q(Sd(e), function (n) {
                  (function (e, t, n) {
                    var o = pw.get(n),
                      r = pw.urls[n] || e.documentBaseUrl.replace(/\/$/, "");
                    if (n = Dt.trim(n), o && -1 === Dt.inArray(t, n)) {
                      if (e.plugins[n]) return;
                      try {
                        var _s55 = o(e, r) || {};
                        e.plugins[n] = _s55, w(_s55.init) && (_s55.init(e, r), t.push(n));
                      } catch (t) {
                        (function (e, t, n) {
                          var o = Ia.translate(["Failed to initialize plugin: {0}", t]);
                          Gm(e, "PluginLoadError", {
                            message: o
                          }), xw(o, n), yw(e, o);
                        })(e, n, t);
                      }
                    }
                  })(e, t, function (e) {
                    return e.replace(/^\-/, "");
                  }(n));
                });
              }(e);
              _context.next = 3;
              return function (e) {
                var t = e.getElement();
                return e.orgDisplay = t.style.display, m(sd(e)) ? function (e) {
                  var t = e.theme.renderUI;
                  return t ? t() : yO(e);
                }(e) : w(sd(e)) ? function (e) {
                  var t = e.getElement(),
                    n = sd(e)(e, t);
                  return n.editorContainer.nodeType && (n.editorContainer.id = n.editorContainer.id || e.id + "_parent"), n.iframeContainer && n.iframeContainer.nodeType && (n.iframeContainer.id = n.iframeContainer.id || e.id + "_iframecontainer"), n.height = n.iframeHeight ? n.iframeHeight : t.offsetHeight, n;
                }(e) : yO(e);
              }(e);
            case 3:
              t = _context.sent;
              (function (e, t) {
                var n = {
                  show: I.from(t.show).getOr(E),
                  hide: I.from(t.hide).getOr(E),
                  isEnabled: I.from(t.isEnabled).getOr(M),
                  setEnabled: function setEnabled(n) {
                    e.mode.isReadOnly() || I.from(t.setEnabled).each(function (e) {
                      return e(n);
                    });
                  }
                };
                e.ui = _objectSpread(_objectSpread({}, e.ui), n);
              })(e, I.from(t.api).getOr({})), e.editorContainer = t.editorContainer, function (e) {
                e.contentCSS = e.contentCSS.concat(function (e) {
                  return kw(e, Yl(e));
                }(e), function (e) {
                  return kw(e, Ql(e));
                }(e));
              }(e), e.inline ? gO(e) : function (e, t) {
                (function (e, t) {
                  var n = e.translate("Rich Text Area"),
                    o = tn(yn(e.getElement()), "tabindex").bind(Xe),
                    r = function (e, t, n, o) {
                      var r = bn("iframe");
                      return o.each(function (e) {
                        return Jt(r, "tabindex", e);
                      }), Zt(r, n), Zt(r, {
                        id: e + "_ifr",
                        frameBorder: "0",
                        allowTransparency: "true",
                        title: t
                      }), un(r, "tox-edit-area__iframe"), r;
                    }(e.id, n, Cl(e), o).dom;
                  r.onload = function () {
                    r.onload = null, e.dispatch("load");
                  }, e.contentAreaContainer = t.iframeContainer, e.iframeElement = r, e.iframeHTML = function (e) {
                    var t = wl(e) + "<html><head>";
                    xl(e) !== e.documentBaseUrl && (t += '<base href="' + e.documentBaseURI.getURI() + '" />'), t += '<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';
                    var n = kl(e),
                      o = El(e),
                      r = e.translate(Td(e));
                    return Sl(e) && (t += '<meta http-equiv="Content-Security-Policy" content="' + Sl(e) + '" />'), t += "</head><body id=\"".concat(n, "\" class=\"mce-content-body ").concat(o, "\" data-id=\"").concat(e.id, "\" aria-label=\"").concat(r, "\"><br></body></html>"), t;
                  }(e), hO.add(t.iframeContainer, r);
                })(e, t), t.editorContainer && (t.editorContainer.style.display = e.orgDisplay, e.hidden = hO.isHidden(t.editorContainer)), e.getElement().style.display = "none", hO.setAttrib(e.id, "aria-hidden", "true"), e.getElement().style.visibility = e.orgVisibility, function (e) {
                  var t = e.iframeElement,
                    n = function n() {
                      e.contentDocument = t.contentDocument, gO(e);
                    };
                  if (rc(e) || At.browser.isFirefox()) {
                    var _t163 = e.getDoc();
                    _t163.open(), _t163.write(e.iframeHTML), _t163.close(), n();
                  } else {
                    var _r80 = (o = yn(t), _o(o, "load", pO, function () {
                      _r80.unbind(), n();
                    }));
                    t.srcdoc = e.iframeHTML;
                  }
                  var o;
                }(e);
              }(e, {
                editorContainer: t.editorContainer,
                iframeContainer: t.iframeContainer
              });
            case 5:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      return function CO(_x2) {
        return _ref23.apply(this, arguments);
      };
    }(),
    wO = Oa.DOM,
    xO = function xO(e) {
      return "-" === e.charAt(0);
    },
    kO = function kO(e, t, n) {
      return I.from(t).filter(function (e) {
        return Ge(e) && !aw.has(e);
      }).map(function (t) {
        return {
          url: "".concat(e.editorManager.baseURL, "/icons/").concat(t, "/icons").concat(n, ".js"),
          name: I.some(t)
        };
      });
    },
    EO = function EO(e, t) {
      var n = Ba.ScriptLoader,
        o = function o() {
          !e.removed && function (e) {
            var t = sd(e);
            return !m(t) || C(hw.get(t));
          }(e) && function (e) {
            var t = id(e);
            return C(iw.get(t));
          }(e) && CO(e);
        };
      (function (e, t) {
        var n = sd(e);
        if (m(n) && !xO(n) && !ke(hw.urls, n)) {
          var _o122 = ad(e),
            _r81 = _o122 ? e.documentBaseURI.toAbsolute(_o122) : "themes/".concat(n, "/theme").concat(t, ".js");
          hw.load(n, _r81)["catch"](function () {
            (function (e, t, n) {
              Cw(e, "ThemeLoadError", ww("theme", t, n));
            })(e, _r81, n);
          });
        }
      })(e, t), function (e, t) {
        var n = id(e);
        if ("plugin" !== n && !ke(iw.urls, n)) {
          var _o123 = ld(e),
            _r82 = m(_o123) ? e.documentBaseURI.toAbsolute(_o123) : "models/".concat(n, "/model").concat(t, ".js");
          iw.load(n, _r82)["catch"](function () {
            (function (e, t, n) {
              Cw(e, "ModelLoadError", ww("model", t, n));
            })(e, _r82, n);
          });
        }
      }(e, t), function (e, t) {
        var n = ql(t),
          o = Wl(t);
        if (!Ia.hasCode(n) && "en" !== n) {
          var _r83 = Ge(o) ? o : "".concat(t.editorManager.baseURL, "/langs/").concat(n, ".js");
          e.add(_r83)["catch"](function () {
            (function (e, t, n) {
              Cw(e, "LanguageLoadError", ww("language", t, n));
            })(t, _r83, n);
          });
        }
      }(n, e), function (e, t, n) {
        var o = kO(t, "default", n),
          r = function (e) {
            return I.from(Fl(e)).filter(Ge).map(function (e) {
              return {
                url: e,
                name: I.none()
              };
            });
          }(t).orThunk(function () {
            return kO(t, Il(t), "");
          });
        q(function (e) {
          var t = [],
            n = function n(e) {
              t.push(e);
            };
          for (var _t164 = 0; _t164 < e.length; _t164++) e[_t164].each(n);
          return t;
        }([o, r]), function (n) {
          e.add(n.url)["catch"](function () {
            (function (e, t, n) {
              Cw(e, "IconsLoadError", ww("icons", t, n));
            })(t, n.url, n.name.getOrUndefined());
          });
        });
      }(n, e, t), function (e, t) {
        var n = function n(t, _n139) {
          pw.load(t, _n139)["catch"](function () {
            (function (e, t, n) {
              Cw(e, "PluginLoadError", ww("plugin", t, n));
            })(e, _n139, t);
          });
        };
        ge(_d(e), function (t, o) {
          n(o, t), e.options.set("plugins", Sd(e).concat(o));
        }), q(Sd(e), function (e) {
          !(e = Dt.trim(e)) || pw.urls[e] || xO(e) || n(e, "plugins/".concat(e, "/plugin").concat(t, ".js"));
        });
      }(e, t), n.loadQueue().then(o, o);
    },
    SO = xt().deviceType,
    _O = SO.isPhone(),
    NO = SO.isTablet(),
    RO = function RO(e) {
      if (y(e)) return [];
      {
        var _t165 = p(e) ? e : e.split(/[ ,]/),
          _n140 = V(_t165, qe);
        return G(_n140, Ge);
      }
    },
    AO = function AO(e, t) {
      var n = function (t, n) {
        var o = {},
          r = {};
        return ve(t, function (t, n) {
          return H(e, n);
        }, be(o), be(r)), {
          t: o,
          f: r
        };
      }(t);
      return o = n.t, r = n.f, {
        sections: N(o),
        options: N(r)
      };
      var o, r;
    },
    OO = function OO(e, t) {
      return ke(e.sections(), t);
    },
    TO = function TO(e, t) {
      return _objectSpread({
        table_grid: !1,
        object_resizing: !1,
        resize: !1,
        toolbar_mode: xe(e, "toolbar_mode").getOr("scrolling"),
        toolbar_sticky: !1
      }, t ? {
        menubar: !1
      } : {});
    },
    BO = function BO(e, t) {
      var n;
      var o = null !== (n = t.external_plugins) && void 0 !== n ? n : {};
      return e && e.external_plugins ? Dt.extend({}, e.external_plugins, o) : o;
    },
    DO = function DO(e, t, n, o, r) {
      var s;
      var a = e ? {
          mobile: TO(null !== (s = r.mobile) && void 0 !== s ? s : {}, t)
        } : {},
        i = AO(["mobile"], LS(a, r)),
        l = Dt.extend(n, o, i.options(), function (e, t) {
          return e && OO(t, "mobile");
        }(e, i) ? function (e, t) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          var o = e.sections(),
            r = xe(o, t).getOr({});
          return Dt.extend({}, n, r);
        }(i, "mobile") : {}, {
          external_plugins: BO(o, i.options())
        });
      return function (e, t, n, o) {
        var r = RO(n.forced_plugins),
          s = RO(o.plugins),
          a = function (e, t) {
            return OO(e, t) ? e.sections()[t] : {};
          }(t, "mobile"),
          i = function (e, t, n, o) {
            return e && OO(t, "mobile") ? o : n;
          }(e, t, s, a.plugins ? RO(a.plugins) : s),
          l = function (e, t) {
            return [].concat(_toConsumableArray(RO(e)), _toConsumableArray(RO(t)));
          }(r, i);
        return Dt.extend(o, {
          forced_plugins: r,
          plugins: l
        });
      }(e, i, o, l);
    },
    PO = function PO(e) {
      (function (e) {
        var t = function t(_t166) {
          return function () {
            q("left,center,right,justify".split(","), function (n) {
              _t166 !== n && e.formatter.remove("align" + n);
            }), "none" !== _t166 && function (t, n) {
              e.formatter.toggle(t, void 0), e.nodeChanged();
            }("align" + _t166);
          };
        };
        e.editorCommands.addCommands({
          JustifyLeft: t("left"),
          JustifyCenter: t("center"),
          JustifyRight: t("right"),
          JustifyFull: t("justify"),
          JustifyNone: t("none")
        });
      })(e), function (e) {
        var t = function t(_t167) {
          return function () {
            var n = e.selection,
              o = n.isCollapsed() ? [e.dom.getParent(n.getNode(), e.dom.isBlock)] : n.getSelectedBlocks();
            return $(o, function (n) {
              return C(e.formatter.matchNode(n, _t167));
            });
          };
        };
        e.editorCommands.addCommands({
          JustifyLeft: t("alignleft"),
          JustifyCenter: t("aligncenter"),
          JustifyRight: t("alignright"),
          JustifyFull: t("alignjustify")
        }, "state");
      }(e);
    },
    LO = function LO(e, t) {
      var n = e.selection,
        o = e.dom;
      return /^ | $/.test(t) ? function (e, t, n) {
        var o = yn(e.getRoot());
        return n = Ip(o, Li.fromRangeStart(t)) ? n.replace(/^ /, "&nbsp;") : n.replace(/^&nbsp;/, " "), Fp(o, Li.fromRangeEnd(t)) ? n.replace(/(&nbsp;| )(<br( \/)>)?$/, "&nbsp;") : n.replace(/&nbsp;(<br( \/)?>)?$/, " ");
      }(o, n.getRng(), t) : t;
    },
    MO = function MO(e, t) {
      if (e.selection.isEditable()) {
        var _ref24 = function (e) {
            if ("string" != typeof e) {
              var _t168 = Dt.extend({
                paste: e.paste,
                data: {
                  paste: e.paste
                }
              }, e);
              return {
                content: e.content,
                details: _t168
              };
            }
            return {
              content: e,
              details: {}
            };
          }(t),
          _n141 = _ref24.content,
          _o124 = _ref24.details;
        sC(e, _objectSpread(_objectSpread({}, _o124), {}, {
          content: LO(e, _n141),
          format: "html",
          set: !1,
          selection: !0
        })).each(function (t) {
          var n = function (e, t, n) {
            return LC(e).editor.insertContent(t, n);
          }(e, t.content, _o124);
          aC(e, n, t), e.addVisual();
        });
      }
    },
    IO = {
      "font-size": "size",
      "font-family": "face"
    },
    FO = Xt("font"),
    UO = function UO(e) {
      return function (t, n) {
        return I.from(n).map(yn).filter(Wt).bind(function (n) {
          return function (e, t, n) {
            return hb(yn(n), function (t) {
              return function (t) {
                return uo(t, e).orThunk(function () {
                  return FO(t) ? xe(IO, e).bind(function (e) {
                    return tn(t, e);
                  }) : I.none();
                });
              }(t);
            }, function (e) {
              return En(yn(t), e);
            });
          }(e, t, n.dom).or(function (e, t) {
            return I.from(Oa.DOM.getStyle(t, e, !0));
          }(e, n.dom));
        }).getOr("");
      };
    },
    zO = UO("font-size"),
    jO = S(function (e) {
      return e.replace(/[\'\"\\]/g, "").replace(/,\s+/g, ",");
    }, UO("font-family")),
    HO = function HO(e) {
      return yu(e.getBody()).bind(function (e) {
        var t = e.container();
        return I.from(Jo(t) ? t.parentNode : t);
      });
    },
    $O = function $O(e, t) {
      return function (e, t) {
        return function (e) {
          return I.from(e.selection.getRng()).bind(function (t) {
            var n = e.getBody();
            return t.startContainer === n && 0 === t.startOffset ? I.none() : I.from(e.selection.getStart(!0));
          });
        }(e).orThunk(O(HO, e)).map(yn).filter(Wt).bind(t);
      }(e, _(I.some, t));
    },
    VO = function VO(e, t) {
      if (/^[0-9.]+$/.test(t)) {
        var _n142 = parseInt(t, 10);
        if (_n142 >= 1 && _n142 <= 7) {
          var _o125 = function (e) {
              return Dt.explode(e.options.get("font_size_style_values"));
            }(e),
            _r84 = function (e) {
              return Dt.explode(e.options.get("font_size_classes"));
            }(e);
          return _r84.length > 0 ? _r84[_n142 - 1] || t : _o125[_n142 - 1] || t;
        }
        return t;
      }
      return t;
    },
    qO = function qO(e) {
      var t = e.split(/\s*,\s*/);
      return V(t, function (e) {
        return -1 === e.indexOf(" ") || He(e, '"') || He(e, "'") ? e : "'".concat(e, "'");
      }).join(",");
    },
    WO = function WO(e, t) {
      var n = e.dom,
        o = e.selection.getRng(),
        r = t ? e.selection.getStart() : e.selection.getEnd(),
        s = t ? o.startContainer : o.endContainer,
        a = Z_(n, s);
      if (!a || !a.isContentEditable) return;
      var i = t ? go : po,
        l = Nl(e);
      (function (e, t, n, o) {
        var r = e.dom,
          s = function s(e) {
            return r.isBlock(e) && e.parentElement === n;
          },
          a = s(t) ? t : r.getParent(o, s, n);
        return I.from(a).map(yn);
      })(e, r, a, s).each(function (t) {
        var n = oN(e, s, t.dom, a, !1, l);
        i(t, yn(n)), e.selection.setCursorLocation(n, 0), e.dispatch("NewBlock", {
          newBlock: n
        }), W_(e, "insertParagraph");
      });
    },
    KO = function KO(e) {
      PO(e), function (e) {
        e.editorCommands.addCommands({
          "Cut,Copy,Paste": function CutCopyPaste(t) {
            var n = e.getDoc();
            var o;
            try {
              n.execCommand(t);
            } catch (e) {
              o = !0;
            }
            if ("paste" !== t || n.queryCommandEnabled(t) || (o = !0), o || !n.queryCommandSupported(t)) {
              var _t169 = e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");
              (At.os.isMacOS() || At.os.isiOS()) && (_t169 = _t169.replace(/Ctrl\+/g, "\u2318+")), e.notificationManager.open({
                text: _t169,
                type: "error"
              });
            }
          }
        });
      }(e), function (e) {
        e.editorCommands.addCommands({
          mceAddUndoLevel: function mceAddUndoLevel() {
            e.undoManager.add();
          },
          mceEndUndoLevel: function mceEndUndoLevel() {
            e.undoManager.add();
          },
          Undo: function Undo() {
            e.undoManager.undo();
          },
          Redo: function Redo() {
            e.undoManager.redo();
          }
        });
      }(e), function (e) {
        e.editorCommands.addCommands({
          mceSelectNodeDepth: function mceSelectNodeDepth(t, n, o) {
            var r = 0;
            e.dom.getParent(e.selection.getNode(), function (t) {
              return !$o(t) || r++ !== o || (e.selection.select(t), !1);
            }, e.getBody());
          },
          mceSelectNode: function mceSelectNode(t, n, o) {
            e.selection.select(o);
          },
          selectAll: function selectAll() {
            var t = e.dom.getParent(e.selection.getStart(), ar);
            if (t) {
              var _n143 = e.dom.createRng();
              _n143.selectNodeContents(t), e.selection.setRng(_n143);
            }
          }
        });
      }(e), function (e) {
        e.editorCommands.addCommands({
          mceCleanup: function mceCleanup() {
            var t = e.selection.getBookmark();
            e.setContent(e.getContent()), e.selection.moveToBookmark(t);
          },
          insertImage: function insertImage(t, n, o) {
            MO(e, e.dom.createHTML("img", {
              src: o
            }));
          },
          insertHorizontalRule: function insertHorizontalRule() {
            e.execCommand("mceInsertContent", !1, "<hr>");
          },
          insertText: function insertText(t, n, o) {
            MO(e, e.dom.encode(o));
          },
          insertHTML: function insertHTML(t, n, o) {
            MO(e, o);
          },
          mceInsertContent: function mceInsertContent(t, n, o) {
            MO(e, o);
          },
          mceSetContent: function mceSetContent(t, n, o) {
            e.setContent(o);
          },
          mceReplaceContent: function mceReplaceContent(t, n, o) {
            e.execCommand("mceInsertContent", !1, o.replace(/\{\$selection\}/g, e.selection.getContent({
              format: "text"
            })));
          },
          mceNewDocument: function mceNewDocument() {
            e.setContent(Hd(e));
          }
        });
      }(e), function (e) {
        var t = function t(_t170, n, o) {
          var r = m(o) ? {
              href: o
            } : o,
            s = e.dom.getParent(e.selection.getNode(), "a");
          f(r) && m(r.href) && (r.href = r.href.replace(/ /g, "%20"), s && r.href || e.formatter.remove("link"), r.href && e.formatter.apply("link", r, s));
        };
        e.editorCommands.addCommands({
          unlink: function unlink() {
            if (e.selection.isEditable()) {
              if (e.selection.isCollapsed()) {
                var _t171 = e.dom.getParent(e.selection.getStart(), "a");
                return void (_t171 && e.dom.remove(_t171, !0));
              }
              e.formatter.remove("link");
            }
          },
          mceInsertLink: t,
          createLink: t
        });
      }(e), function (e) {
        e.editorCommands.addCommands({
          Indent: function Indent() {
            (function (e) {
              uE(e, "indent");
            })(e);
          },
          Outdent: function Outdent() {
            mE(e);
          }
        }), e.editorCommands.addCommands({
          Outdent: function Outdent() {
            return lE(e);
          }
        }, "state");
      }(e), function (e) {
        e.editorCommands.addCommands({
          InsertNewBlockBefore: function InsertNewBlockBefore() {
            (function (e) {
              WO(e, !0);
            })(e);
          },
          InsertNewBlockAfter: function InsertNewBlockAfter() {
            (function (e) {
              WO(e, !1);
            })(e);
          }
        });
      }(e), function (e) {
        e.editorCommands.addCommands({
          insertParagraph: function insertParagraph() {
            PN(mN, e);
          },
          mceInsertNewLine: function mceInsertNewLine(t, n, o) {
            LN(e, o);
          },
          InsertLineBreak: function InsertLineBreak(t, n, o) {
            PN(CN, e);
          }
        });
      }(e), function (e) {
        (function (e) {
          e.editorCommands.addCommands({
            "InsertUnorderedList,InsertOrderedList": function InsertUnorderedListInsertOrderedList(t) {
              e.getDoc().execCommand(t);
              var n = e.dom.getParent(e.selection.getNode(), "ol,ul");
              if (n) {
                var _t172 = n.parentNode;
                if (_t172 && /^(H[1-6]|P|ADDRESS|PRE)$/.test(_t172.nodeName)) {
                  var _o126 = e.selection.getBookmark();
                  e.dom.split(_t172, n), e.selection.moveToBookmark(_o126);
                }
              }
            }
          });
        })(e), function (e) {
          e.editorCommands.addCommands({
            "InsertUnorderedList,InsertOrderedList": function InsertUnorderedListInsertOrderedList(t) {
              var n = e.dom.getParent(e.selection.getNode(), "ul,ol");
              return n && ("insertunorderedlist" === t && "UL" === n.tagName || "insertorderedlist" === t && "OL" === n.tagName);
            }
          }, "state");
        }(e);
      }(e), function (e) {
        (function (e) {
          var t = function t(_t173, n) {
            e.formatter.toggle(_t173, n), e.nodeChanged();
          };
          e.editorCommands.addCommands({
            "Bold,Italic,Underline,Strikethrough,Superscript,Subscript": function BoldItalicUnderlineStrikethroughSuperscriptSubscript(e) {
              t(e);
            },
            "ForeColor,HiliteColor": function ForeColorHiliteColor(e, n, o) {
              t(e, {
                value: o
              });
            },
            BackColor: function BackColor(e, n, o) {
              t("hilitecolor", {
                value: o
              });
            },
            FontName: function FontName(t, n, o) {
              (function (e, t) {
                var n = VO(e, t);
                e.formatter.toggle("fontname", {
                  value: qO(n)
                }), e.nodeChanged();
              })(e, o);
            },
            FontSize: function FontSize(t, n, o) {
              (function (e, t) {
                e.formatter.toggle("fontsize", {
                  value: VO(e, t)
                }), e.nodeChanged();
              })(e, o);
            },
            LineHeight: function LineHeight(t, n, o) {
              (function (e, t) {
                e.formatter.toggle("lineheight", {
                  value: String(t)
                }), e.nodeChanged();
              })(e, o);
            },
            Lang: function Lang(e, n, o) {
              var r;
              t(e, {
                value: o.code,
                customValue: null !== (r = o.customCode) && void 0 !== r ? r : null
              });
            },
            RemoveFormat: function RemoveFormat(t) {
              e.formatter.remove(t);
            },
            mceBlockQuote: function mceBlockQuote() {
              t("blockquote");
            },
            FormatBlock: function FormatBlock(e, n, o) {
              t(m(o) ? o : "p");
            },
            mceToggleFormat: function mceToggleFormat(e, n, o) {
              t(o);
            }
          });
        })(e), function (e) {
          var t = function t(_t174) {
            return e.formatter.match(_t174);
          };
          e.editorCommands.addCommands({
            "Bold,Italic,Underline,Strikethrough,Superscript,Subscript": function BoldItalicUnderlineStrikethroughSuperscriptSubscript(e) {
              return t(e);
            },
            mceBlockQuote: function mceBlockQuote() {
              return t("blockquote");
            }
          }, "state"), e.editorCommands.addQueryValueHandler("FontName", function () {
            return function (e) {
              return $O(e, function (t) {
                return jO(e.getBody(), t.dom);
              }).getOr("");
            }(e);
          }), e.editorCommands.addQueryValueHandler("FontSize", function () {
            return function (e) {
              return $O(e, function (t) {
                return zO(e.getBody(), t.dom);
              }).getOr("");
            }(e);
          }), e.editorCommands.addQueryValueHandler("LineHeight", function () {
            return function (e) {
              return $O(e, function (t) {
                var n = yn(e.getBody()),
                  o = hb(t, function (e) {
                    return uo(e, "line-height");
                  }, O(En, n));
                return o.getOrThunk(function () {
                  var e = parseFloat(lo(t, "line-height")),
                    n = parseFloat(lo(t, "font-size"));
                  return String(e / n);
                });
              }).getOr("");
            }(e);
          });
        }(e);
      }(e), function (e) {
        e.editorCommands.addCommands({
          mceRemoveNode: function mceRemoveNode(t, n, o) {
            var r = null != o ? o : e.selection.getNode();
            if (r !== e.getBody()) {
              var _t175 = e.selection.getBookmark();
              e.dom.remove(r, !0), e.selection.moveToBookmark(_t175);
            }
          },
          mcePrint: function mcePrint() {
            e.getWin().print();
          },
          mceFocus: function mceFocus(t, n, o) {
            (function (e, t) {
              e.removed || (t ? kg(e) : function (e) {
                var t = e.selection,
                  n = e.getBody();
                var o = t.getRng();
                e.quirks.refreshContentEditable(), C(e.bookmark) && !xg(e) && cg(e).each(function (t) {
                  e.selection.setRng(t), o = t;
                });
                var r = function (e, t) {
                  return e.dom.getParent(t, function (t) {
                    return "true" === e.dom.getContentEditable(t);
                  });
                }(e, t.getNode());
                if (r && e.dom.isChildOf(r, n)) return wg(r), Cg(e, o), void kg(e);
                e.inline || (At.browser.isOpera() || wg(n), e.getWin().focus()), (At.browser.isFirefox() || e.inline) && (wg(n), Cg(e, o)), kg(e);
              }(e));
            })(e, !0 === o);
          },
          mceToggleVisualAid: function mceToggleVisualAid() {
            e.hasVisual = !e.hasVisual, e.addVisual();
          }
        });
      }(e);
    },
    GO = ["toggleview"],
    YO = function YO(e) {
      return H(GO, e.toLowerCase());
    };
  var XO = /*#__PURE__*/function () {
    function XO(e) {
      _classCallCheck(this, XO);
      this.commands = {
        state: {},
        exec: {},
        value: {}
      }, this.editor = e;
    }
    _createClass(XO, [{
      key: "execCommand",
      value: function execCommand(e) {
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
        var n = arguments.length > 2 ? arguments[2] : undefined;
        var o = arguments.length > 3 ? arguments[3] : undefined;
        var r = this.editor,
          s = e.toLowerCase(),
          a = null == o ? void 0 : o.skip_focus;
        if (r.removed) return !1;
        if ("mcefocus" !== s && (/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(s) || a ? function (e) {
          cg(e).each(function (t) {
            return e.selection.setRng(t);
          });
        }(r) : r.focus()), r.dispatch("BeforeExecCommand", {
          command: e,
          ui: t,
          value: n
        }).isDefaultPrevented()) return !1;
        var i = this.commands.exec[s];
        return !!w(i) && (i(s, t, n), r.dispatch("ExecCommand", {
          command: e,
          ui: t,
          value: n
        }), !0);
      }
    }, {
      key: "queryCommandState",
      value: function queryCommandState(e) {
        if (!YO(e) && this.editor.quirks.isHidden() || this.editor.removed) return !1;
        var t = e.toLowerCase(),
          n = this.commands.state[t];
        return !!w(n) && n(t);
      }
    }, {
      key: "queryCommandValue",
      value: function queryCommandValue(e) {
        if (!YO(e) && this.editor.quirks.isHidden() || this.editor.removed) return "";
        var t = e.toLowerCase(),
          n = this.commands.value[t];
        return w(n) ? n(t) : "";
      }
    }, {
      key: "addCommands",
      value: function addCommands(e) {
        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "exec";
        var n = this.commands;
        ge(e, function (e, o) {
          q(o.toLowerCase().split(","), function (o) {
            n[t][o] = e;
          });
        });
      }
    }, {
      key: "addCommand",
      value: function addCommand(e, t, n) {
        var _this2 = this;
        var o = e.toLowerCase();
        this.commands.exec[o] = function (e, o, r) {
          return t.call(null != n ? n : _this2.editor, o, r);
        };
      }
    }, {
      key: "queryCommandSupported",
      value: function queryCommandSupported(e) {
        var t = e.toLowerCase();
        return !!this.commands.exec[t];
      }
    }, {
      key: "addQueryStateHandler",
      value: function addQueryStateHandler(e, t, n) {
        var _this3 = this;
        this.commands.state[e.toLowerCase()] = function () {
          return t.call(null != n ? n : _this3.editor);
        };
      }
    }, {
      key: "addQueryValueHandler",
      value: function addQueryValueHandler(e, t, n) {
        var _this4 = this;
        this.commands.value[e.toLowerCase()] = function () {
          return t.call(null != n ? n : _this4.editor);
        };
      }
    }]);
    return XO;
  }();
  var QO = "data-mce-contenteditable",
    JO = function JO(e, t, n) {
      try {
        e.getDoc().execCommand(t, !1, String(n));
      } catch (e) {}
    },
    ZO = function ZO(e, t) {
      e.dom.contentEditable = t ? "true" : "false";
    },
    eT = function eT(e, t) {
      var n = yn(e.getBody());
      (function (e, t, n) {
        gn(e, t) && !n ? fn(e, t) : n && un(e, t);
      })(n, "mce-content-readonly", t), t ? (e.selection.controlSelection.hideResizeRect(), e._selectionOverrides.hideFakeCaret(), function (e) {
        I.from(e.selection.getNode()).each(function (e) {
          e.removeAttribute("data-mce-selected");
        });
      }(e), e.readonly = !0, ZO(n, !1), q(Fo(n, '*[contenteditable="true"]'), function (e) {
        Jt(e, QO, "true"), ZO(e, !1);
      })) : (e.readonly = !1, e.hasEditableRoot() && ZO(n, !0), q(Fo(n, "*[".concat(QO, "=\"true\"]")), function (e) {
        on(e, QO), ZO(e, !0);
      }), JO(e, "StyleWithCSS", !1), JO(e, "enableInlineTableEditing", !1), JO(e, "enableObjectResizing", !1), function (e) {
        return xg(e) || function (e) {
          var t = Vn(yn(e.getElement()));
          return ng(t).filter(function (t) {
            return !pg(t.dom) && hg(e, t.dom);
          }).isSome();
        }(e);
      }(e) && e.focus(), function (e) {
        e.selection.setRng(e.selection.getRng());
      }(e), e.nodeChanged());
    },
    tT = function tT(e) {
      return e.readonly;
    },
    nT = function nT(e) {
      e.parser.addAttributeFilter("contenteditable", function (t) {
        tT(e) && q(t, function (e) {
          e.attr(QO, e.attr("contenteditable")), e.attr("contenteditable", "false");
        });
      }), e.serializer.addAttributeFilter(QO, function (t) {
        tT(e) && q(t, function (e) {
          e.attr("contenteditable", e.attr(QO));
        });
      }), e.serializer.addTempAttr(QO);
    },
    oT = ["copy"],
    rT = Dt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel", " ");
  var sT = /*#__PURE__*/function () {
    function sT(e) {
      _classCallCheck(this, sT);
      this.bindings = {}, this.settings = e || {}, this.scope = this.settings.scope || this, this.toggleEvent = this.settings.toggleEvent || L;
    }
    _createClass(sT, [{
      key: "fire",
      value: function fire(e, t) {
        return this.dispatch(e, t);
      }
    }, {
      key: "dispatch",
      value: function dispatch(e, t) {
        var n = e.toLowerCase(),
          o = ga(n, null != t ? t : {}, this.scope);
        this.settings.beforeFire && this.settings.beforeFire(o);
        var r = this.bindings[n];
        if (r) for (var _e158 = 0, _t176 = r.length; _e158 < _t176; _e158++) {
          var _t177 = r[_e158];
          if (!_t177.removed) {
            if (_t177.once && this.off(n, _t177.func), o.isImmediatePropagationStopped()) return o;
            if (!1 === _t177.func.call(this.scope, o)) return o.preventDefault(), o;
          }
        }
        return o;
      }
    }, {
      key: "on",
      value: function on(e, t, n, o) {
        if (!1 === t && (t = L), t) {
          var _r85 = {
            func: t,
            removed: !1
          };
          o && Dt.extend(_r85, o);
          var _s56 = e.toLowerCase().split(" ");
          var _a32 = _s56.length;
          for (; _a32--;) {
            var _e159 = _s56[_a32];
            var _t178 = this.bindings[_e159];
            _t178 || (_t178 = [], this.toggleEvent(_e159, !0)), _t178 = n ? [_r85].concat(_toConsumableArray(_t178)) : [].concat(_toConsumableArray(_t178), [_r85]), this.bindings[_e159] = _t178;
          }
        }
        return this;
      }
    }, {
      key: "off",
      value: function off(e, t) {
        var _this5 = this;
        if (e) {
          var _n144 = e.toLowerCase().split(" ");
          var _o127 = _n144.length;
          for (; _o127--;) {
            var _r86 = _n144[_o127];
            var _s57 = this.bindings[_r86];
            if (!_r86) return ge(this.bindings, function (e, t) {
              _this5.toggleEvent(t, !1), delete _this5.bindings[t];
            }), this;
            if (_s57) {
              if (t) {
                var _e160 = K(_s57, function (e) {
                  return e.func === t;
                });
                _s57 = _e160.fail, this.bindings[_r86] = _s57, q(_e160.pass, function (e) {
                  e.removed = !0;
                });
              } else _s57.length = 0;
              _s57.length || (this.toggleEvent(e, !1), delete this.bindings[_r86]);
            }
          }
        } else ge(this.bindings, function (e, t) {
          _this5.toggleEvent(t, !1);
        }), this.bindings = {};
        return this;
      }
    }, {
      key: "once",
      value: function once(e, t, n) {
        return this.on(e, t, n, {
          once: !0
        });
      }
    }, {
      key: "has",
      value: function has(e) {
        e = e.toLowerCase();
        var t = this.bindings[e];
        return !(!t || 0 === t.length);
      }
    }], [{
      key: "isNative",
      value: function isNative(e) {
        return !!rT[e.toLowerCase()];
      }
    }]);
    return sT;
  }();
  var aT = function aT(e) {
      return e._eventDispatcher || (e._eventDispatcher = new sT({
        scope: e,
        toggleEvent: function toggleEvent(t, n) {
          sT.isNative(t) && e.toggleNativeEvent && e.toggleNativeEvent(t, n);
        }
      })), e._eventDispatcher;
    },
    iT = {
      fire: function fire(e, t, n) {
        return this.dispatch(e, t, n);
      },
      dispatch: function dispatch(e, t, n) {
        var o = this;
        if (o.removed && "remove" !== e && "detach" !== e) return ga(e.toLowerCase(), null != t ? t : {}, o);
        var r = aT(o).dispatch(e, t);
        if (!1 !== n && o.parent) {
          var _t179 = o.parent();
          for (; _t179 && !r.isPropagationStopped();) _t179.dispatch(e, r, !1), _t179 = _t179.parent ? _t179.parent() : void 0;
        }
        return r;
      },
      on: function on(e, t, n) {
        return aT(this).on(e, t, n);
      },
      off: function off(e, t) {
        return aT(this).off(e, t);
      },
      once: function once(e, t) {
        return aT(this).once(e, t);
      },
      hasEventListeners: function hasEventListeners(e) {
        return aT(this).has(e);
      }
    },
    lT = Oa.DOM;
  var dT;
  var cT = function cT(e, t) {
      if ("selectionchange" === t) return e.getDoc();
      if (!e.inline && /^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t)) return e.getDoc().documentElement;
      var n = od(e);
      return n ? (e.eventRoot || (e.eventRoot = lT.select(n)[0]), e.eventRoot) : e.getBody();
    },
    uT = function uT(e, t, n) {
      (function (e) {
        return !e.hidden && !tT(e);
      })(e) ? e.dispatch(t, n) : tT(e) && function (e, t) {
        if (function (e) {
          return "click" === e.type;
        }(t) && !ef.metaKeyPressed(t)) {
          var _n145 = yn(t.target);
          (function (e, t) {
            return to(t, "a", function (t) {
              return En(t, yn(e.getBody()));
            }).bind(function (e) {
              return tn(e, "href");
            });
          })(e, _n145).each(function (n) {
            if (t.preventDefault(), /^#/.test(n)) {
              var _t180 = e.dom.select("".concat(n, ",[name=\"").concat(ze(n, "#"), "\"]"));
              _t180.length && e.selection.scrollIntoView(_t180[0], !0);
            } else window.open(n, "_blank", "rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes");
          });
        } else (function (e) {
          return H(oT, e.type);
        })(t) && e.dispatch(t.type, t);
      }(e, n);
    },
    mT = function mT(e, t) {
      if (e.delegates || (e.delegates = {}), e.delegates[t] || e.removed) return;
      var n = cT(e, t);
      if (od(e)) {
        if (dT || (dT = {}, e.editorManager.on("removeEditor", function () {
          e.editorManager.activeEditor || dT && (ge(dT, function (t, n) {
            e.dom.unbind(cT(e, n));
          }), dT = null);
        })), dT[t]) return;
        var _o128 = function _o128(n) {
          var o = n.target,
            r = e.editorManager.get();
          var s = r.length;
          for (; s--;) {
            var _e161 = r[s].getBody();
            (_e161 === o || lT.isChildOf(o, _e161)) && uT(r[s], t, n);
          }
        };
        dT[t] = _o128, lT.bind(n, t, _o128);
      } else {
        var _o129 = function _o129(n) {
          uT(e, t, n);
        };
        lT.bind(n, t, _o129), e.delegates[t] = _o129;
      }
    },
    fT = _objectSpread(_objectSpread({}, iT), {}, {
      bindPendingEventDelegates: function bindPendingEventDelegates() {
        var e = this;
        Dt.each(e._pendingNativeEvents, function (t) {
          mT(e, t);
        });
      },
      toggleNativeEvent: function toggleNativeEvent(e, t) {
        var n = this;
        "focus" !== e && "blur" !== e && (n.removed || (t ? n.initialized ? mT(n, e) : n._pendingNativeEvents ? n._pendingNativeEvents.push(e) : n._pendingNativeEvents = [e] : n.initialized && n.delegates && (n.dom.unbind(cT(n, e), e, n.delegates[e]), delete n.delegates[e])));
      },
      unbindAllNativeEvents: function unbindAllNativeEvents() {
        var e = this,
          t = e.getBody(),
          n = e.dom;
        e.delegates && (ge(e.delegates, function (t, n) {
          e.dom.unbind(cT(e, n), n, t);
        }), delete e.delegates), !e.inline && t && n && (t.onload = null, n.unbind(e.getWin()), n.unbind(e.getDoc())), n && (n.unbind(t), n.unbind(e.getContainer()));
      }
    }),
    gT = function gT(e) {
      return m(e) ? {
        value: e.split(/[ ,]/),
        valid: !0
      } : k(e, m) ? {
        value: e,
        valid: !0
      } : {
        valid: !1,
        message: "The value must be a string[] or a comma/space separated string."
      };
    },
    pT = function pT(e, t) {
      return e + (Ye(t.message) ? "" : ". ".concat(t.message));
    },
    hT = function hT(e) {
      return e.valid;
    },
    bT = function bT(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
      var o = t(e);
      return b(o) ? o ? {
        value: e,
        valid: !0
      } : {
        valid: !1,
        message: n
      } : o;
    },
    vT = ["design", "readonly"],
    yT = function yT(e, t, n, o) {
      var r = n[t.get()],
        s = n[o];
      try {
        s.activate();
      } catch (e) {
        return void console.error("problem while activating editor mode ".concat(o, ":"), e);
      }
      r.deactivate(), r.editorReadOnly !== s.editorReadOnly && eT(e, s.editorReadOnly), t.set(o), function (e, t) {
        e.dispatch("SwitchMode", {
          mode: t
        });
      }(e, o);
    },
    CT = Dt.each,
    wT = Dt.explode,
    xT = {
      f1: 112,
      f2: 113,
      f3: 114,
      f4: 115,
      f5: 116,
      f6: 117,
      f7: 118,
      f8: 119,
      f9: 120,
      f10: 121,
      f11: 122,
      f12: 123
    },
    kT = Dt.makeMap("alt,ctrl,shift,meta,access"),
    ET = function ET(e) {
      var t = {},
        n = At.os.isMacOS() || At.os.isiOS();
      CT(wT(e.toLowerCase(), "+"), function (e) {
        (function (e) {
          return e in kT;
        })(e) ? t[e] = !0 : /^[0-9]{2,}$/.test(e) ? t.keyCode = parseInt(e, 10) : (t.charCode = e.charCodeAt(0), t.keyCode = xT[e] || e.toUpperCase().charCodeAt(0));
      });
      var o = [t.keyCode];
      var r;
      for (r in kT) t[r] ? o.push(r) : t[r] = !1;
      return t.id = o.join(","), t.access && (t.alt = !0, n ? t.ctrl = !0 : t.shift = !0), t.meta && (n ? t.meta = !0 : (t.ctrl = !0, t.meta = !1)), t;
    };
  var ST = /*#__PURE__*/function () {
    function ST(e) {
      _classCallCheck(this, ST);
      this.shortcuts = {}, this.pendingPatterns = [], this.editor = e;
      var t = this;
      e.on("keyup keypress keydown", function (e) {
        !t.hasModifier(e) && !t.isFunctionKey(e) || e.isDefaultPrevented() || (CT(t.shortcuts, function (n) {
          t.matchShortcut(e, n) && (t.pendingPatterns = n.subpatterns.slice(0), "keydown" === e.type && t.executeShortcutAction(n));
        }), t.matchShortcut(e, t.pendingPatterns[0]) && (1 === t.pendingPatterns.length && "keydown" === e.type && t.executeShortcutAction(t.pendingPatterns[0]), t.pendingPatterns.shift()));
      });
    }
    _createClass(ST, [{
      key: "add",
      value: function add(e, t, n, o) {
        var r = this,
          s = r.normalizeCommandFunc(n);
        return CT(wT(Dt.trim(e)), function (e) {
          var n = r.createShortcut(e, t, s, o);
          r.shortcuts[n.id] = n;
        }), !0;
      }
    }, {
      key: "remove",
      value: function remove(e) {
        var t = this.createShortcut(e);
        return !!this.shortcuts[t.id] && (delete this.shortcuts[t.id], !0);
      }
    }, {
      key: "normalizeCommandFunc",
      value: function normalizeCommandFunc(e) {
        var t = this,
          n = e;
        return "string" == typeof n ? function () {
          t.editor.execCommand(n, !1, null);
        } : Dt.isArray(n) ? function () {
          t.editor.execCommand(n[0], n[1], n[2]);
        } : n;
      }
    }, {
      key: "createShortcut",
      value: function createShortcut(e, t, n, o) {
        var r = Dt.map(wT(e, ">"), ET);
        return r[r.length - 1] = Dt.extend(r[r.length - 1], {
          func: n,
          scope: o || this.editor
        }), Dt.extend(r[0], {
          desc: this.editor.translate(t),
          subpatterns: r.slice(1)
        });
      }
    }, {
      key: "hasModifier",
      value: function hasModifier(e) {
        return e.altKey || e.ctrlKey || e.metaKey;
      }
    }, {
      key: "isFunctionKey",
      value: function isFunctionKey(e) {
        return "keydown" === e.type && e.keyCode >= 112 && e.keyCode <= 123;
      }
    }, {
      key: "matchShortcut",
      value: function matchShortcut(e, t) {
        return !!t && t.ctrl === e.ctrlKey && t.meta === e.metaKey && t.alt === e.altKey && t.shift === e.shiftKey && !!(e.keyCode === t.keyCode || e.charCode && e.charCode === t.charCode) && (e.preventDefault(), !0);
      }
    }, {
      key: "executeShortcutAction",
      value: function executeShortcutAction(e) {
        return e.func ? e.func.call(e.scope) : null;
      }
    }]);
    return ST;
  }();
  var _T = function _T() {
      var e = function () {
        var e = {},
          t = {},
          n = {},
          o = {},
          r = {},
          s = {},
          a = {},
          i = {},
          l = function l(e, t) {
            return function (n, o) {
              e[n.toLowerCase()] = _objectSpread(_objectSpread({}, o), {}, {
                type: t
              });
            };
          };
        return {
          addButton: l(e, "button"),
          addGroupToolbarButton: l(e, "grouptoolbarbutton"),
          addToggleButton: l(e, "togglebutton"),
          addMenuButton: l(e, "menubutton"),
          addSplitButton: l(e, "splitbutton"),
          addMenuItem: l(t, "menuitem"),
          addNestedMenuItem: l(t, "nestedmenuitem"),
          addToggleMenuItem: l(t, "togglemenuitem"),
          addAutocompleter: l(n, "autocompleter"),
          addContextMenu: l(r, "contextmenu"),
          addContextToolbar: l(s, "contexttoolbar"),
          addContextForm: l(s, "contextform"),
          addSidebar: l(a, "sidebar"),
          addView: l(i, "views"),
          addIcon: function addIcon(e, t) {
            return o[e.toLowerCase()] = t;
          },
          getAll: function getAll() {
            return {
              buttons: e,
              menuItems: t,
              icons: o,
              popups: n,
              contextMenus: r,
              contextToolbars: s,
              sidebars: a,
              views: i
            };
          }
        };
      }();
      return {
        addAutocompleter: e.addAutocompleter,
        addButton: e.addButton,
        addContextForm: e.addContextForm,
        addContextMenu: e.addContextMenu,
        addContextToolbar: e.addContextToolbar,
        addIcon: e.addIcon,
        addMenuButton: e.addMenuButton,
        addMenuItem: e.addMenuItem,
        addNestedMenuItem: e.addNestedMenuItem,
        addSidebar: e.addSidebar,
        addSplitButton: e.addSplitButton,
        addToggleButton: e.addToggleButton,
        addGroupToolbarButton: e.addGroupToolbarButton,
        addToggleMenuItem: e.addToggleMenuItem,
        addView: e.addView,
        getAll: e.getAll
      };
    },
    NT = Oa.DOM,
    RT = Dt.extend,
    AT = Dt.each;
  var OT = /*#__PURE__*/function () {
    function OT(e, t, n) {
      _classCallCheck(this, OT);
      this.plugins = {}, this.contentCSS = [], this.contentStyles = [], this.loadedCSS = {}, this.isNotDirty = !1, this.composing = !1, this.destroyed = !1, this.hasHiddenInput = !1, this.iframeElement = null, this.initialized = !1, this.readonly = !1, this.removed = !1, this.startContent = "", this._pendingNativeEvents = [], this._skinLoaded = !1, this._editableRoot = !0, this.editorManager = n, this.documentBaseUrl = n.documentBaseURL, RT(this, fT);
      var o = this;
      this.id = e, this.hidden = !1;
      var r = function (e, t) {
        return DO(_O || NO, _O, t, e, t);
      }(n.defaultOptions, t);
      this.options = function (e, t) {
        var n = {},
          o = {},
          r = function r(e, t, n) {
            var r = bT(t, n);
            return hT(r) ? (o[e] = r.value, !0) : (console.warn(pT("Invalid value passed for the ".concat(e, " option"), r)), !1);
          },
          s = function s(e) {
            return ke(n, e);
          };
        return {
          register: function register(e, s) {
            var a = function (e) {
                return m(e.processor);
              }(s) ? function (e) {
                var t = function () {
                  switch (e) {
                    case "array":
                      return p;
                    case "boolean":
                      return b;
                    case "function":
                      return w;
                    case "number":
                      return x;
                    case "object":
                      return f;
                    case "string":
                      return m;
                    case "string[]":
                      return gT;
                    case "object[]":
                      return function (e) {
                        return k(e, f);
                      };
                    case "regexp":
                      return function (e) {
                        return u(e, RegExp);
                      };
                    default:
                      return M;
                  }
                }();
                return function (n) {
                  return bT(n, t, "The value must be a ".concat(e, "."));
                };
              }(s.processor) : s.processor,
              i = function (e, t, n) {
                if (!v(t)) {
                  var _o130 = bT(t, n);
                  if (hT(_o130)) return _o130.value;
                  console.error(pT("Invalid default value passed for the \"".concat(e, "\" option"), _o130));
                }
              }(e, s["default"], a);
            n[e] = _objectSpread(_objectSpread({}, s), {}, {
              "default": i,
              processor: a
            }), xe(o, e).orThunk(function () {
              return xe(t, e);
            }).each(function (t) {
              return r(e, t, a);
            });
          },
          isRegistered: s,
          get: function get(e) {
            return xe(o, e).orThunk(function () {
              return xe(n, e).map(function (e) {
                return e["default"];
              });
            }).getOrUndefined();
          },
          set: function set(e, t) {
            if (s(e)) {
              var _o131 = n[e];
              return _o131.immutable ? (console.error("\"".concat(e, "\" is an immutable option and cannot be updated")), !1) : r(e, t, _o131.processor);
            }
            return console.warn("\"".concat(e, "\" is not a registered option. Ensure the option has been registered before setting a value.")), !1;
          },
          unset: function unset(e) {
            var t = s(e);
            return t && delete o[e], t;
          },
          isSet: function isSet(e) {
            return ke(o, e);
          }
        };
      }(0, r), function (e) {
        var t = e.options.register;
        t("id", {
          processor: "string",
          "default": e.id
        }), t("selector", {
          processor: "string"
        }), t("target", {
          processor: "object"
        }), t("suffix", {
          processor: "string"
        }), t("cache_suffix", {
          processor: "string"
        }), t("base_url", {
          processor: "string"
        }), t("referrer_policy", {
          processor: "string",
          "default": ""
        }), t("language_load", {
          processor: "boolean",
          "default": !0
        }), t("inline", {
          processor: "boolean",
          "default": !1
        }), t("iframe_attrs", {
          processor: "object",
          "default": {}
        }), t("doctype", {
          processor: "string",
          "default": "<!DOCTYPE html>"
        }), t("document_base_url", {
          processor: "string",
          "default": e.documentBaseUrl
        }), t("body_id", {
          processor: yl(e, "tinymce"),
          "default": "tinymce"
        }), t("body_class", {
          processor: yl(e),
          "default": ""
        }), t("content_security_policy", {
          processor: "string",
          "default": ""
        }), t("br_in_pre", {
          processor: "boolean",
          "default": !0
        }), t("forced_root_block", {
          processor: function processor(e) {
            var t = m(e) && Ge(e);
            return t ? {
              value: e,
              valid: t
            } : {
              valid: !1,
              message: "Must be a non-empty string."
            };
          },
          "default": "p"
        }), t("forced_root_block_attrs", {
          processor: "object",
          "default": {}
        }), t("newline_behavior", {
          processor: function processor(e) {
            var t = H(["block", "linebreak", "invert", "default"], e);
            return t ? {
              value: e,
              valid: t
            } : {
              valid: !1,
              message: "Must be one of: block, linebreak, invert or default."
            };
          },
          "default": "default"
        }), t("br_newline_selector", {
          processor: "string",
          "default": ".mce-toc h2,figcaption,caption"
        }), t("no_newline_selector", {
          processor: "string",
          "default": ""
        }), t("keep_styles", {
          processor: "boolean",
          "default": !0
        }), t("end_container_on_empty_block", {
          processor: function processor(e) {
            return b(e) || m(e) ? {
              valid: !0,
              value: e
            } : {
              valid: !1,
              message: "Must be boolean or a string"
            };
          },
          "default": "blockquote"
        }), t("font_size_style_values", {
          processor: "string",
          "default": "xx-small,x-small,small,medium,large,x-large,xx-large"
        }), t("font_size_legacy_values", {
          processor: "string",
          "default": "xx-small,small,medium,large,x-large,xx-large,300%"
        }), t("font_size_classes", {
          processor: "string",
          "default": ""
        }), t("automatic_uploads", {
          processor: "boolean",
          "default": !0
        }), t("images_reuse_filename", {
          processor: "boolean",
          "default": !1
        }), t("images_replace_blob_uris", {
          processor: "boolean",
          "default": !0
        }), t("icons", {
          processor: "string",
          "default": ""
        }), t("icons_url", {
          processor: "string",
          "default": ""
        }), t("images_upload_url", {
          processor: "string",
          "default": ""
        }), t("images_upload_base_path", {
          processor: "string",
          "default": ""
        }), t("images_upload_credentials", {
          processor: "boolean",
          "default": !1
        }), t("images_upload_handler", {
          processor: "function"
        }), t("language", {
          processor: "string",
          "default": "en"
        }), t("language_url", {
          processor: "string",
          "default": ""
        }), t("entity_encoding", {
          processor: "string",
          "default": "named"
        }), t("indent", {
          processor: "boolean",
          "default": !0
        }), t("indent_before", {
          processor: "string",
          "default": "p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"
        }), t("indent_after", {
          processor: "string",
          "default": "p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"
        }), t("indent_use_margin", {
          processor: "boolean",
          "default": !1
        }), t("indentation", {
          processor: "string",
          "default": "40px"
        }), t("content_css", {
          processor: function processor(e) {
            var t = !1 === e || m(e) || k(e, m);
            return t ? m(e) ? {
              value: V(e.split(","), qe),
              valid: t
            } : p(e) ? {
              value: e,
              valid: t
            } : !1 === e ? {
              value: [],
              valid: t
            } : {
              value: e,
              valid: t
            } : {
              valid: !1,
              message: "Must be false, a string or an array of strings."
            };
          },
          "default": pd(e) ? [] : ["default"]
        }), t("content_style", {
          processor: "string"
        }), t("content_css_cors", {
          processor: "boolean",
          "default": !1
        }), t("font_css", {
          processor: function processor(e) {
            var t = m(e) || k(e, m);
            return t ? {
              value: p(e) ? e : V(e.split(","), qe),
              valid: t
            } : {
              valid: !1,
              message: "Must be a string or an array of strings."
            };
          },
          "default": []
        }), t("inline_boundaries", {
          processor: "boolean",
          "default": !0
        }), t("inline_boundaries_selector", {
          processor: "string",
          "default": "a[href],code,span.mce-annotation"
        }), t("object_resizing", {
          processor: function processor(e) {
            var t = b(e) || m(e);
            return t ? !1 === e || fl.isiPhone() || fl.isiPad() ? {
              value: "",
              valid: t
            } : {
              value: !0 === e ? "table,img,figure.image,div,video,iframe" : e,
              valid: t
            } : {
              valid: !1,
              message: "Must be boolean or a string"
            };
          },
          "default": !gl
        }), t("resize_img_proportional", {
          processor: "boolean",
          "default": !0
        }), t("event_root", {
          processor: "object"
        }), t("service_message", {
          processor: "string"
        }), t("theme", {
          processor: function processor(e) {
            return !1 === e || m(e) || w(e);
          },
          "default": "silver"
        }), t("theme_url", {
          processor: "string"
        }), t("formats", {
          processor: "object"
        }), t("format_empty_lines", {
          processor: "boolean",
          "default": !1
        }), t("format_noneditable_selector", {
          processor: "string",
          "default": ""
        }), t("preview_styles", {
          processor: function processor(e) {
            var t = !1 === e || m(e);
            return t ? {
              value: !1 === e ? "" : e,
              valid: t
            } : {
              valid: !1,
              message: "Must be false or a string"
            };
          },
          "default": "font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"
        }), t("custom_ui_selector", {
          processor: "string",
          "default": ""
        }), t("hidden_input", {
          processor: "boolean",
          "default": !0
        }), t("submit_patch", {
          processor: "boolean",
          "default": !0
        }), t("encoding", {
          processor: "string"
        }), t("add_form_submit_trigger", {
          processor: "boolean",
          "default": !0
        }), t("add_unload_trigger", {
          processor: "boolean",
          "default": !0
        }), t("custom_undo_redo_levels", {
          processor: "number",
          "default": 0
        }), t("disable_nodechange", {
          processor: "boolean",
          "default": !1
        }), t("readonly", {
          processor: "boolean",
          "default": !1
        }), t("editable_root", {
          processor: "boolean",
          "default": !0
        }), t("plugins", {
          processor: "string[]",
          "default": []
        }), t("external_plugins", {
          processor: "object"
        }), t("forced_plugins", {
          processor: "string[]"
        }), t("model", {
          processor: "string",
          "default": e.hasPlugin("rtc") ? "plugin" : "dom"
        }), t("model_url", {
          processor: "string"
        }), t("block_unsupported_drop", {
          processor: "boolean",
          "default": !0
        }), t("visual", {
          processor: "boolean",
          "default": !0
        }), t("visual_table_class", {
          processor: "string",
          "default": "mce-item-table"
        }), t("visual_anchor_class", {
          processor: "string",
          "default": "mce-item-anchor"
        }), t("iframe_aria_text", {
          processor: "string",
          "default": "Rich Text Area. Press ALT-0 for help."
        }), t("setup", {
          processor: "function"
        }), t("init_instance_callback", {
          processor: "function"
        }), t("url_converter", {
          processor: "function",
          "default": e.convertURL
        }), t("url_converter_scope", {
          processor: "object",
          "default": e
        }), t("urlconverter_callback", {
          processor: "function"
        }), t("allow_conditional_comments", {
          processor: "boolean",
          "default": !1
        }), t("allow_html_data_urls", {
          processor: "boolean",
          "default": !1
        }), t("allow_svg_data_urls", {
          processor: "boolean"
        }), t("allow_html_in_named_anchor", {
          processor: "boolean",
          "default": !1
        }), t("allow_script_urls", {
          processor: "boolean",
          "default": !1
        }), t("allow_unsafe_link_target", {
          processor: "boolean",
          "default": !1
        }), t("convert_fonts_to_spans", {
          processor: "boolean",
          "default": !0,
          deprecated: !0
        }), t("fix_list_elements", {
          processor: "boolean",
          "default": !1
        }), t("preserve_cdata", {
          processor: "boolean",
          "default": !1
        }), t("remove_trailing_brs", {
          processor: "boolean",
          "default": !0
        }), t("pad_empty_with_br", {
          processor: "boolean",
          "default": !1
        }), t("inline_styles", {
          processor: "boolean",
          "default": !0,
          deprecated: !0
        }), t("element_format", {
          processor: "string",
          "default": "html"
        }), t("entities", {
          processor: "string"
        }), t("schema", {
          processor: "string",
          "default": "html5"
        }), t("convert_urls", {
          processor: "boolean",
          "default": !0
        }), t("relative_urls", {
          processor: "boolean",
          "default": !0
        }), t("remove_script_host", {
          processor: "boolean",
          "default": !0
        }), t("custom_elements", {
          processor: "string"
        }), t("extended_valid_elements", {
          processor: "string"
        }), t("invalid_elements", {
          processor: "string"
        }), t("invalid_styles", {
          processor: vl
        }), t("valid_children", {
          processor: "string"
        }), t("valid_classes", {
          processor: vl
        }), t("valid_elements", {
          processor: "string"
        }), t("valid_styles", {
          processor: vl
        }), t("verify_html", {
          processor: "boolean",
          "default": !0
        }), t("auto_focus", {
          processor: function processor(e) {
            return m(e) || !0 === e;
          }
        }), t("browser_spellcheck", {
          processor: "boolean",
          "default": !1
        }), t("protect", {
          processor: "array"
        }), t("images_file_types", {
          processor: "string",
          "default": "jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"
        }), t("deprecation_warnings", {
          processor: "boolean",
          "default": !0
        }), t("a11y_advanced_options", {
          processor: "boolean",
          "default": !1
        }), t("api_key", {
          processor: "string"
        }), t("paste_block_drop", {
          processor: "boolean",
          "default": !1
        }), t("paste_data_images", {
          processor: "boolean",
          "default": !0
        }), t("paste_preprocess", {
          processor: "function"
        }), t("paste_postprocess", {
          processor: "function"
        }), t("paste_webkit_styles", {
          processor: "string",
          "default": "none"
        }), t("paste_remove_styles_if_webkit", {
          processor: "boolean",
          "default": !0
        }), t("paste_merge_formats", {
          processor: "boolean",
          "default": !0
        }), t("smart_paste", {
          processor: "boolean",
          "default": !0
        }), t("paste_as_text", {
          processor: "boolean",
          "default": !1
        }), t("paste_tab_spaces", {
          processor: "number",
          "default": 4
        }), t("text_patterns", {
          processor: function processor(e) {
            return k(e, f) || !1 === e ? {
              value: ml(!1 === e ? [] : e),
              valid: !0
            } : {
              valid: !1,
              message: "Must be an array of objects or false."
            };
          },
          "default": [{
            start: "*",
            end: "*",
            format: "italic"
          }, {
            start: "**",
            end: "**",
            format: "bold"
          }, {
            start: "#",
            format: "h1"
          }, {
            start: "##",
            format: "h2"
          }, {
            start: "###",
            format: "h3"
          }, {
            start: "####",
            format: "h4"
          }, {
            start: "#####",
            format: "h5"
          }, {
            start: "######",
            format: "h6"
          }, {
            start: "1. ",
            cmd: "InsertOrderedList"
          }, {
            start: "* ",
            cmd: "InsertUnorderedList"
          }, {
            start: "- ",
            cmd: "InsertUnorderedList"
          }]
        }), t("text_patterns_lookup", {
          processor: function processor(e) {
            return w(e) ? {
              value: (t = e, function (e) {
                var n = t(e);
                return ml(n);
              }),
              valid: !0
            } : {
              valid: !1,
              message: "Must be a single function"
            };
            var t;
          },
          "default": function _default(e) {
            return [];
          }
        }), t("noneditable_class", {
          processor: "string",
          "default": "mceNonEditable"
        }), t("editable_class", {
          processor: "string",
          "default": "mceEditable"
        }), t("noneditable_regexp", {
          processor: function processor(e) {
            return k(e, hl) ? {
              value: e,
              valid: !0
            } : hl(e) ? {
              value: [e],
              valid: !0
            } : {
              valid: !1,
              message: "Must be a RegExp or an array of RegExp."
            };
          },
          "default": []
        }), t("table_tab_navigation", {
          processor: "boolean",
          "default": !0
        }), t("highlight_on_focus", {
          processor: "boolean",
          "default": !1
        }), t("xss_sanitization", {
          processor: "boolean",
          "default": !0
        }), t("details_initial_state", {
          processor: function processor(e) {
            var t = H(["inherited", "collapsed", "expanded"], e);
            return t ? {
              value: e,
              valid: t
            } : {
              valid: !1,
              message: "Must be one of: inherited, collapsed, or expanded."
            };
          },
          "default": "inherited"
        }), t("details_serialized_state", {
          processor: function processor(e) {
            var t = H(["inherited", "collapsed", "expanded"], e);
            return t ? {
              value: e,
              valid: t
            } : {
              valid: !1,
              message: "Must be one of: inherited, collapsed, or expanded."
            };
          },
          "default": "inherited"
        }), t("init_content_sync", {
          processor: "boolean",
          "default": !1
        }), t("newdocument_content", {
          processor: "string",
          "default": ""
        }), e.on("ScriptsLoaded", function () {
          t("directionality", {
            processor: "string",
            "default": Ia.isRtl() ? "rtl" : void 0
          }), t("placeholder", {
            processor: "string",
            "default": pl.getAttrib(e.getElement(), "placeholder")
          });
        });
      }(o);
      var s = this.options.get;
      s("deprecation_warnings") && function (e, t) {
        (function (e, t) {
          var n = JC(e),
            o = tw(t),
            r = o.length > 0,
            s = n.length > 0,
            a = "mobile" === t.theme;
          if (r || s || a) {
            var _e162 = "\n- ",
              _t181 = a ? "\n\nThemes:".concat(_e162, "mobile") : "",
              _i27 = r ? "\n\nPlugins:".concat(_e162).concat(o.join(_e162)) : "",
              _l16 = s ? "\n\nOptions:".concat(_e162).concat(n.join(_e162)) : "";
            console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information." + _t181 + _i27 + _l16);
          }
        })(e, t), function (e, t) {
          var n = ZC(e),
            o = nw(t),
            r = o.length > 0,
            s = n.length > 0;
          if (r || s) {
            var _e163 = "\n- ",
              _t182 = r ? "\n\nPlugins:".concat(_e163).concat(o.map(ow).join(_e163)) : "",
              _a33 = s ? "\n\nOptions:".concat(_e163).concat(n.join(_e163)) : "";
            console.warn("The following deprecated features are currently enabled but will be removed soon." + _t182 + _a33);
          }
        }(e, t);
      }(t, r);
      var a = s("suffix");
      a && (n.suffix = a), this.suffix = n.suffix;
      var i = s("base_url");
      i && n._setBaseUrl(i), this.baseUri = n.baseURI;
      var l = Vl(o);
      l && (Ba.ScriptLoader._setReferrerPolicy(l), Oa.DOM.styleSheetLoader._setReferrerPolicy(l));
      var d = Ed(o);
      C(d) && Oa.DOM.styleSheetLoader._setContentCssCors(d), Fa.languageLoad = s("language_load"), Fa.baseURL = n.baseURL, this.setDirty(!1), this.documentBaseURI = new Hy(xl(o), {
        base_uri: this.baseUri
      }), this.baseURI = this.baseUri, this.inline = pd(o), this.hasVisual = Rd(o), this.shortcuts = new ST(this), this.editorCommands = new XO(this), KO(this);
      var c = s("cache_suffix");
      c && (At.cacheSuffix = c.replace(/^[\?\&]+/, "")), this.ui = {
        registry: _T(),
        styleSheetLoader: void 0,
        show: E,
        hide: E,
        setEnabled: E,
        isEnabled: M
      }, this.mode = function (e) {
        var t = Da("design"),
          n = Da({
            design: {
              activate: E,
              deactivate: E,
              editorReadOnly: !1
            },
            readonly: {
              activate: E,
              deactivate: E,
              editorReadOnly: !0
            }
          });
        return function (e) {
          e.serializer ? nT(e) : e.on("PreInit", function () {
            nT(e);
          });
        }(e), function (e) {
          e.on("ShowCaret", function (t) {
            tT(e) && t.preventDefault();
          }), e.on("ObjectSelected", function (t) {
            tT(e) && t.preventDefault();
          });
        }(e), {
          isReadOnly: function isReadOnly() {
            return tT(e);
          },
          set: function set(o) {
            return function (e, t, n, o) {
              if (o !== n.get()) {
                if (!ke(t, o)) throw new Error("Editor mode '".concat(o, "' is invalid"));
                e.initialized ? yT(e, n, t, o) : e.on("init", function () {
                  return yT(e, n, t, o);
                });
              }
            }(e, n.get(), t, o);
          },
          get: function get() {
            return t.get();
          },
          register: function register(e, t) {
            n.set(function (e, t, n) {
              if (H(vT, t)) throw new Error("Cannot override default mode ".concat(t));
              return _objectSpread(_objectSpread({}, e), {}, _defineProperty({}, t, _objectSpread(_objectSpread({}, n), {}, {
                deactivate: function deactivate() {
                  try {
                    n.deactivate();
                  } catch (e) {
                    console.error("problem while deactivating editor mode ".concat(t, ":"), e);
                  }
                }
              })));
            }(n.get(), e, t));
          }
        };
      }(o), n.dispatch("SetupEditor", {
        editor: this
      });
      var g = Bd(o);
      w(g) && g.call(o, o);
    }
    _createClass(OT, [{
      key: "render",
      value: function render() {
        (function (e) {
          var t = e.id;
          Ia.setCode(ql(e));
          var n = function n() {
            wO.unbind(window, "ready", n), e.render();
          };
          if (!Ca.Event.domLoaded) return void wO.bind(window, "ready", n);
          if (!e.getElement()) return;
          var o = yn(e.getElement()),
            r = rn(o);
          e.on("remove", function () {
            W(o.dom.attributes, function (e) {
              return on(o, e.name);
            }), Zt(o, r);
          }), e.ui.styleSheetLoader = function (e, t) {
            return Ms.forElement(e, {
              contentCssCors: Ed(t),
              referrerPolicy: Vl(t)
            });
          }(o, e), pd(e) ? e.inline = !0 : (e.orgVisibility = e.getElement().style.visibility, e.getElement().style.visibility = "hidden");
          var s = e.getElement().form || wO.getParent(t, "form");
          s && (e.formElement = s, hd(e) && !Qo(e.getElement()) && (wO.insertAfter(wO.create("input", {
            type: "hidden",
            name: t
          }), t), e.hasHiddenInput = !0), e.formEventDelegate = function (t) {
            e.dispatch(t.type, t);
          }, wO.bind(s, "submit reset", e.formEventDelegate), e.on("reset", function () {
            e.resetContent();
          }), !bd(e) || s.submit.nodeType || s.submit.length || s._mceOldSubmit || (s._mceOldSubmit = s.submit, s.submit = function () {
            return e.editorManager.triggerSave(), e.setDirty(!1), s._mceOldSubmit(s);
          })), e.windowManager = bw(e), e.notificationManager = gw(e), function (e) {
            return "xml" === e.options.get("encoding");
          }(e) && e.on("GetContent", function (e) {
            e.save && (e.content = wO.encode(e.content));
          }), vd(e) && e.on("submit", function () {
            e.initialized && e.save();
          }), yd(e) && (e._beforeUnload = function () {
            !e.initialized || e.destroyed || e.isHidden() || e.save({
              format: "raw",
              no_events: !0,
              set_dirty: !1
            });
          }, e.editorManager.on("BeforeUnload", e._beforeUnload)), e.editorManager.add(e), EO(e, e.suffix);
        })(this);
      }
    }, {
      key: "focus",
      value: function focus(e) {
        this.execCommand("mceFocus", !1, e);
      }
    }, {
      key: "hasFocus",
      value: function hasFocus() {
        return xg(this);
      }
    }, {
      key: "translate",
      value: function translate(e) {
        return Ia.translate(e);
      }
    }, {
      key: "getParam",
      value: function getParam(e, t, n) {
        var o = this.options;
        return o.isRegistered(e) || (C(n) ? o.register(e, {
          processor: n,
          "default": t
        }) : o.register(e, {
          processor: M,
          "default": t
        })), o.isSet(e) || v(t) ? o.get(e) : t;
      }
    }, {
      key: "hasPlugin",
      value: function hasPlugin(e, t) {
        return !(!H(Sd(this), e) || t && void 0 === pw.get(e));
      }
    }, {
      key: "nodeChanged",
      value: function nodeChanged(e) {
        this._nodeChangeDispatcher.nodeChanged(e);
      }
    }, {
      key: "addCommand",
      value: function addCommand(e, t, n) {
        this.editorCommands.addCommand(e, t, n);
      }
    }, {
      key: "addQueryStateHandler",
      value: function addQueryStateHandler(e, t, n) {
        this.editorCommands.addQueryStateHandler(e, t, n);
      }
    }, {
      key: "addQueryValueHandler",
      value: function addQueryValueHandler(e, t, n) {
        this.editorCommands.addQueryValueHandler(e, t, n);
      }
    }, {
      key: "addShortcut",
      value: function addShortcut(e, t, n, o) {
        this.shortcuts.add(e, t, n, o);
      }
    }, {
      key: "execCommand",
      value: function execCommand(e, t, n, o) {
        return this.editorCommands.execCommand(e, t, n, o);
      }
    }, {
      key: "queryCommandState",
      value: function queryCommandState(e) {
        return this.editorCommands.queryCommandState(e);
      }
    }, {
      key: "queryCommandValue",
      value: function queryCommandValue(e) {
        return this.editorCommands.queryCommandValue(e);
      }
    }, {
      key: "queryCommandSupported",
      value: function queryCommandSupported(e) {
        return this.editorCommands.queryCommandSupported(e);
      }
    }, {
      key: "show",
      value: function show() {
        var e = this;
        e.hidden && (e.hidden = !1, e.inline ? e.getBody().contentEditable = "true" : (NT.show(e.getContainer()), NT.hide(e.id)), e.load(), e.dispatch("show"));
      }
    }, {
      key: "hide",
      value: function hide() {
        var e = this;
        e.hidden || (e.save(), e.inline ? (e.getBody().contentEditable = "false", e === e.editorManager.focusedEditor && (e.editorManager.focusedEditor = null)) : (NT.hide(e.getContainer()), NT.setStyle(e.id, "display", e.orgDisplay)), e.hidden = !0, e.dispatch("hide"));
      }
    }, {
      key: "isHidden",
      value: function isHidden() {
        return this.hidden;
      }
    }, {
      key: "setProgressState",
      value: function setProgressState(e, t) {
        this.dispatch("ProgressState", {
          state: e,
          time: t
        });
      }
    }, {
      key: "load",
      value: function load() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var t = this,
          n = t.getElement();
        if (t.removed) return "";
        if (n) {
          var _o132 = _objectSpread(_objectSpread({}, e), {}, {
              load: !0
            }),
            _r87 = Qo(n) ? n.value : n.innerHTML,
            _s58 = t.setContent(_r87, _o132);
          return _o132.no_events || t.dispatch("LoadContent", _objectSpread(_objectSpread({}, _o132), {}, {
            element: n
          })), _s58;
        }
        return "";
      }
    }, {
      key: "save",
      value: function save() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var t = this;
        var n = t.getElement();
        if (!n || !t.initialized || t.removed) return "";
        var o = _objectSpread(_objectSpread({}, e), {}, {
          save: !0,
          element: n
        });
        var r = t.getContent(o);
        var s = _objectSpread(_objectSpread({}, o), {}, {
          content: r
        });
        if (s.no_events || t.dispatch("SaveContent", s), "raw" === s.format && t.dispatch("RawSaveContent", s), r = s.content, Qo(n)) n.value = r;else {
          !e.is_removing && t.inline || (n.innerHTML = r);
          var _o133 = NT.getParent(t.id, "form");
          _o133 && AT(_o133.elements, function (e) {
            return e.name !== t.id || (e.value = r, !1);
          });
        }
        return s.element = o.element = n = null, !1 !== s.set_dirty && t.setDirty(!1), r;
      }
    }, {
      key: "setContent",
      value: function setContent(e, t) {
        return WC(this, e, t);
      }
    }, {
      key: "getContent",
      value: function getContent(e) {
        return function (e) {
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
          var n = function (e, t) {
            return _objectSpread(_objectSpread({}, e), {}, {
              format: t,
              get: !0,
              getInner: !0
            });
          }(t, t.format ? t.format : "html");
          return oC(e, n).fold(R, function (t) {
            var n = function (e, t) {
              return LC(e).editor.getContent(t);
            }(e, t);
            return rC(e, n, t);
          });
        }(this, e);
      }
    }, {
      key: "insertContent",
      value: function insertContent(e, t) {
        t && (e = RT({
          content: e
        }, t)), this.execCommand("mceInsertContent", !1, e);
      }
    }, {
      key: "resetContent",
      value: function resetContent(e) {
        void 0 === e ? WC(this, this.startContent, {
          format: "raw"
        }) : WC(this, e), this.undoManager.reset(), this.setDirty(!1), this.nodeChanged();
      }
    }, {
      key: "isDirty",
      value: function isDirty() {
        return !this.isNotDirty;
      }
    }, {
      key: "setDirty",
      value: function setDirty(e) {
        var t = !this.isNotDirty;
        this.isNotDirty = !e, e && e !== t && this.dispatch("dirty");
      }
    }, {
      key: "getContainer",
      value: function getContainer() {
        var e = this;
        return e.container || (e.container = e.editorContainer || NT.get(e.id + "_parent")), e.container;
      }
    }, {
      key: "getContentAreaContainer",
      value: function getContentAreaContainer() {
        return this.contentAreaContainer;
      }
    }, {
      key: "getElement",
      value: function getElement() {
        return this.targetElm || (this.targetElm = NT.get(this.id)), this.targetElm;
      }
    }, {
      key: "getWin",
      value: function getWin() {
        var e = this;
        if (!e.contentWindow) {
          var _t183 = e.iframeElement;
          _t183 && (e.contentWindow = _t183.contentWindow);
        }
        return e.contentWindow;
      }
    }, {
      key: "getDoc",
      value: function getDoc() {
        var e = this;
        if (!e.contentDocument) {
          var _t184 = e.getWin();
          _t184 && (e.contentDocument = _t184.document);
        }
        return e.contentDocument;
      }
    }, {
      key: "getBody",
      value: function getBody() {
        var e, t;
        var n = this.getDoc();
        return null !== (t = null !== (e = this.bodyElement) && void 0 !== e ? e : null == n ? void 0 : n.body) && void 0 !== t ? t : null;
      }
    }, {
      key: "convertURL",
      value: function convertURL(e, t, n) {
        var o = this,
          r = o.options.get,
          s = Pd(o);
        return w(s) ? s.call(o, e, n, !0, t) : !r("convert_urls") || "link" === n || f(n) && "LINK" === n.nodeName || 0 === e.indexOf("file:") || 0 === e.length ? e : r("relative_urls") ? o.documentBaseURI.toRelative(e) : e = o.documentBaseURI.toAbsolute(e, r("remove_script_host"));
      }
    }, {
      key: "addVisual",
      value: function addVisual(e) {
        (function (e, t) {
          (function (e, t) {
            MC(e).editor.addVisual(t);
          })(e, t);
        })(this, e);
      }
    }, {
      key: "setEditableRoot",
      value: function setEditableRoot(e) {
        (function (e, t) {
          e._editableRoot !== t && (e._editableRoot = t, e.readonly || (e.getBody().contentEditable = String(e.hasEditableRoot()), e.nodeChanged()), function (e, t) {
            e.dispatch("EditableRootStateChange", {
              state: t
            });
          }(e, t));
        })(this, e);
      }
    }, {
      key: "hasEditableRoot",
      value: function hasEditableRoot() {
        return this._editableRoot;
      }
    }, {
      key: "remove",
      value: function remove() {
        (function (e) {
          if (!e.removed) {
            var _t185 = e._selectionOverrides,
              _n146 = e.editorUpload,
              _o134 = e.getBody(),
              _r88 = e.getElement();
            _o134 && e.save({
              is_removing: !0
            }), e.removed = !0, e.unbindAllNativeEvents(), e.hasHiddenInput && C(null == _r88 ? void 0 : _r88.nextSibling) && rw.remove(_r88.nextSibling), function (e) {
              e.dispatch("remove");
            }(e), e.editorManager.remove(e), !e.inline && _o134 && function (e) {
              rw.setStyle(e.id, "display", e.orgDisplay);
            }(e), function (e) {
              e.dispatch("detach");
            }(e), rw.remove(e.getContainer()), sw(_t185), sw(_n146), e.destroy();
          }
        })(this);
      }
    }, {
      key: "destroy",
      value: function destroy(e) {
        (function (e, t) {
          var n = e.selection,
            o = e.dom;
          e.destroyed || (t || e.removed ? (t || (e.editorManager.off("beforeunload", e._beforeUnload), e.theme && e.theme.destroy && e.theme.destroy(), sw(n), sw(o)), function (e) {
            var t = e.formElement;
            t && (t._mceOldSubmit && (t.submit = t._mceOldSubmit, delete t._mceOldSubmit), rw.unbind(t, "submit reset", e.formEventDelegate));
          }(e), function (e) {
            var t = e;
            t.contentAreaContainer = t.formElement = t.container = t.editorContainer = null, t.bodyElement = t.contentDocument = t.contentWindow = null, t.iframeElement = t.targetElm = null;
            var n = e.selection;
            if (n) {
              var _e164 = n.dom;
              t.selection = n.win = n.dom = _e164.doc = null;
            }
          }(e), e.destroyed = !0) : e.remove());
        })(this, e);
      }
    }, {
      key: "uploadImages",
      value: function uploadImages() {
        return this.editorUpload.uploadImages();
      }
    }, {
      key: "_scanForImages",
      value: function _scanForImages() {
        return this.editorUpload.scanForImages();
      }
    }]);
    return OT;
  }();
  var TT = Oa.DOM,
    BT = Dt.each;
  var DT,
    PT = !1,
    LT = [];
  var MT = function MT(e) {
      var t = e.type;
      BT(zT.get(), function (n) {
        switch (t) {
          case "scroll":
            n.dispatch("ScrollWindow", e);
            break;
          case "resize":
            n.dispatch("ResizeWindow", e);
        }
      });
    },
    IT = function IT(e) {
      if (e !== PT) {
        var _t186 = Oa.DOM;
        e ? (_t186.bind(window, "resize", MT), _t186.bind(window, "scroll", MT)) : (_t186.unbind(window, "resize", MT), _t186.unbind(window, "scroll", MT)), PT = e;
      }
    },
    FT = function FT(e) {
      var t = LT;
      return LT = G(LT, function (t) {
        return e !== t;
      }), zT.activeEditor === e && (zT.activeEditor = LT.length > 0 ? LT[0] : null), zT.focusedEditor === e && (zT.focusedEditor = null), t.length !== LT.length;
    },
    UT = "CSS1Compat" !== document.compatMode,
    zT = _objectSpread(_objectSpread({}, iT), {}, {
      baseURI: null,
      baseURL: null,
      defaultOptions: {},
      documentBaseURL: null,
      suffix: null,
      majorVersion: "6",
      minorVersion: "7.0",
      releaseDate: "2023-08-30",
      i18n: Ia,
      activeEditor: null,
      focusedEditor: null,
      setup: function setup() {
        var e = this;
        var t = "",
          n = "",
          o = Hy.getDocumentBaseUrl(document.location);
        /^[^:]+:\/\/\/?[^\/]+\//.test(o) && (o = o.replace(/[\?#].*$/, "").replace(/[\/\\][^\/]+$/, ""), /[\/\\]$/.test(o) || (o += "/"));
        var r = window.tinymce || window.tinyMCEPreInit;
        if (r) t = r.base || r.baseURL, n = r.suffix;else {
          var _e165 = document.getElementsByTagName("script");
          for (var _o135 = 0; _o135 < _e165.length; _o135++) {
            var _r89 = _e165[_o135].src || "";
            if ("" === _r89) continue;
            var _s59 = _r89.substring(_r89.lastIndexOf("/"));
            if (/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(_r89)) {
              -1 !== _s59.indexOf(".min") && (n = ".min"), t = _r89.substring(0, _r89.lastIndexOf("/"));
              break;
            }
          }
          if (!t && document.currentScript) {
            var _e166 = document.currentScript.src;
            -1 !== _e166.indexOf(".min") && (n = ".min"), t = _e166.substring(0, _e166.lastIndexOf("/"));
          }
        }
        var s;
        e.baseURL = new Hy(o).toAbsolute(t), e.documentBaseURL = o, e.baseURI = new Hy(e.baseURL), e.suffix = n, (s = e).on("AddEditor", O(vg, s)), s.on("RemoveEditor", O(yg, s));
      },
      overrideDefaults: function overrideDefaults(e) {
        var t = e.base_url;
        t && this._setBaseUrl(t);
        var n = e.suffix;
        n && (this.suffix = n), this.defaultOptions = e;
        var o = e.plugin_base_urls;
        void 0 !== o && ge(o, function (e, t) {
          Fa.PluginManager.urls[t] = e;
        });
      },
      init: function init(e) {
        var t = this;
        var n;
        var o = Dt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu", " ");
        var r = function r(e) {
          n = e;
        };
        var s = function s() {
          var n = 0;
          var a = [];
          var i;
          TT.unbind(window, "ready", s), function (n) {
            var o = e.onpageload;
            o && o.apply(t, []);
          }(), i = function (e, t) {
            var n = [],
              o = w(t) ? function (e) {
                return $(n, function (n) {
                  return t(n, e);
                });
              } : function (e) {
                return H(n, e);
              };
            for (var _t187 = 0, _r90 = e.length; _t187 < _r90; _t187++) {
              var _r91 = e[_t187];
              o(_r91) || n.push(_r91);
            }
            return n;
          }(function (e) {
            return At.browser.isIE() || At.browser.isEdge() ? (xw("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"), []) : UT ? (xw("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."), []) : m(e.selector) ? TT.select(e.selector) : C(e.target) ? [e.target] : [];
          }(e)), Dt.each(i, function (e) {
            var n;
            (n = t.get(e.id)) && n.initialized && !(n.getContainer() || n.getBody()).parentNode && (FT(n), n.unbindAllNativeEvents(), n.destroy(!0), n.removed = !0);
          }), i = Dt.grep(i, function (e) {
            return !t.get(e.id);
          }), 0 === i.length ? r([]) : BT(i, function (s) {
            (function (e, t) {
              return e.inline && t.tagName.toLowerCase() in o;
            })(e, s) ? xw("Could not initialize inline editor on invalid inline target element", s) : function (e, o, s) {
              var l = new OT(e, o, t);
              a.push(l), l.on("init", function () {
                ++n === i.length && r(a);
              }), l.targetElm = l.targetElm || s, l.render();
            }(function (e) {
              var t = e.id;
              return t || (t = xe(e, "name").filter(function (e) {
                return !TT.get(e);
              }).getOrThunk(TT.uniqueId), e.setAttribute("id", t)), t;
            }(s), e, s);
          });
        };
        return TT.bind(window, "ready", s), new Promise(function (e) {
          n ? e(n) : r = function r(t) {
            e(t);
          };
        });
      },
      get: function get(e) {
        return 0 === arguments.length ? LT.slice(0) : m(e) ? J(LT, function (t) {
          return t.id === e;
        }).getOr(null) : x(e) && LT[e] ? LT[e] : null;
      },
      add: function add(e) {
        var t = this,
          n = t.get(e.id);
        return n === e || (null === n && LT.push(e), IT(!0), t.activeEditor = e, t.dispatch("AddEditor", {
          editor: e
        }), DT || (DT = function DT(e) {
          var n = t.dispatch("BeforeUnload");
          if (n.returnValue) return e.preventDefault(), e.returnValue = n.returnValue, n.returnValue;
        }, window.addEventListener("beforeunload", DT))), e;
      },
      createEditor: function createEditor(e, t) {
        return this.add(new OT(e, t, this));
      },
      remove: function remove(e) {
        var t = this;
        var n;
        if (e) {
          if (!m(e)) return n = e, h(t.get(n.id)) ? null : (FT(n) && t.dispatch("RemoveEditor", {
            editor: n
          }), 0 === LT.length && window.removeEventListener("beforeunload", DT), n.remove(), IT(LT.length > 0), n);
          BT(TT.select(e), function (e) {
            n = t.get(e.id), n && t.remove(n);
          });
        } else for (var _e167 = LT.length - 1; _e167 >= 0; _e167--) t.remove(LT[_e167]);
      },
      execCommand: function execCommand(e, t, n) {
        var o;
        var r = this,
          s = f(n) ? null !== (o = n.id) && void 0 !== o ? o : n.index : n;
        switch (e) {
          case "mceAddEditor":
            if (!r.get(s)) {
              var _e168 = n.options;
              new OT(s, _e168, r).render();
            }
            return !0;
          case "mceRemoveEditor":
            {
              var _e169 = r.get(s);
              return _e169 && _e169.remove(), !0;
            }
          case "mceToggleEditor":
            {
              var _e170 = r.get(s);
              return _e170 ? (_e170.isHidden() ? _e170.show() : _e170.hide(), !0) : (r.execCommand("mceAddEditor", !1, n), !0);
            }
        }
        return !!r.activeEditor && r.activeEditor.execCommand(e, t, n);
      },
      triggerSave: function triggerSave() {
        BT(LT, function (e) {
          e.save();
        });
      },
      addI18n: function addI18n(e, t) {
        Ia.add(e, t);
      },
      translate: function translate(e) {
        return Ia.translate(e);
      },
      setActive: function setActive(e) {
        var t = this.activeEditor;
        this.activeEditor !== e && (t && t.dispatch("deactivate", {
          relatedTarget: e
        }), e.dispatch("activate", {
          relatedTarget: t
        })), this.activeEditor = e;
      },
      _setBaseUrl: function _setBaseUrl(e) {
        this.baseURL = new Hy(this.documentBaseURL).toAbsolute(e.replace(/\/+$/, "")), this.baseURI = new Hy(this.baseURL);
      }
    });
  zT.setup();
  var jT = function () {
      var e = za();
      return {
        FakeClipboardItem: function FakeClipboardItem(e) {
          return {
            items: e,
            types: me(e),
            getType: function getType(t) {
              return xe(e, t).getOrUndefined();
            }
          };
        },
        write: function write(t) {
          e.set(t);
        },
        read: function read() {
          return e.get().getOrUndefined();
        },
        clear: e.clear
      };
    }(),
    HT = Math.min,
    $T = Math.max,
    VT = Math.round,
    qT = function qT(e, t, n) {
      var o = t.x,
        r = t.y;
      var s = e.w,
        a = e.h,
        i = t.w,
        l = t.h,
        d = (n || "").split("");
      return "b" === d[0] && (r += l), "r" === d[1] && (o += i), "c" === d[0] && (r += VT(l / 2)), "c" === d[1] && (o += VT(i / 2)), "b" === d[3] && (r -= a), "r" === d[4] && (o -= s), "c" === d[3] && (r -= VT(a / 2)), "c" === d[4] && (o -= VT(s / 2)), WT(o, r, s, a);
    },
    WT = function WT(e, t, n, o) {
      return {
        x: e,
        y: t,
        w: n,
        h: o
      };
    },
    KT = {
      inflate: function inflate(e, t, n) {
        return WT(e.x - t, e.y - n, e.w + 2 * t, e.h + 2 * n);
      },
      relativePosition: qT,
      findBestRelativePosition: function findBestRelativePosition(e, t, n, o) {
        for (var _r92 = 0; _r92 < o.length; _r92++) {
          var _s60 = qT(e, t, o[_r92]);
          if (_s60.x >= n.x && _s60.x + _s60.w <= n.w + n.x && _s60.y >= n.y && _s60.y + _s60.h <= n.h + n.y) return o[_r92];
        }
        return null;
      },
      intersect: function intersect(e, t) {
        var n = $T(e.x, t.x),
          o = $T(e.y, t.y),
          r = HT(e.x + e.w, t.x + t.w),
          s = HT(e.y + e.h, t.y + t.h);
        return r - n < 0 || s - o < 0 ? null : WT(n, o, r - n, s - o);
      },
      clamp: function clamp(e, t, n) {
        var o = e.x,
          r = e.y,
          s = e.x + e.w,
          a = e.y + e.h;
        var i = t.x + t.w,
          l = t.y + t.h,
          d = $T(0, t.x - o),
          c = $T(0, t.y - r),
          u = $T(0, s - i),
          m = $T(0, a - l);
        return o += d, r += c, n && (s += d, a += c, o -= u, r -= m), s -= u, a -= m, WT(o, r, s - o, a - r);
      },
      create: WT,
      fromClientRect: function fromClientRect(e) {
        return WT(e.left, e.top, e.width, e.height);
      }
    },
    GT = function () {
      var e = {},
        t = {};
      return {
        load: function load(n, o) {
          var r = "Script at URL \"".concat(o, "\" failed to load"),
            s = "Script at URL \"".concat(o, "\" did not call `tinymce.Resource.add('").concat(n, "', data)` within 1 second");
          if (void 0 !== e[n]) return e[n];
          {
            var _a34 = new Promise(function (e, a) {
              var i = function (e, t) {
                var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1e3;
                var o = !1,
                  r = null;
                var s = function s(e) {
                    return function () {
                      for (var _len14 = arguments.length, t = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {
                        t[_key14] = arguments[_key14];
                      }
                      o || (o = !0, null !== r && (clearTimeout(r), r = null), e.apply(null, t));
                    };
                  },
                  a = s(e),
                  i = s(t);
                return {
                  start: function start() {
                    for (var _len15 = arguments.length, e = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {
                      e[_key15] = arguments[_key15];
                    }
                    o || null !== r || (r = setTimeout(function () {
                      return i.apply(null, e);
                    }, n));
                  },
                  resolve: a,
                  reject: i
                };
              }(e, a);
              t[n] = i.resolve, Ba.ScriptLoader.loadScript(o).then(function () {
                return i.start(s);
              }, function () {
                return i.reject(r);
              });
            });
            return e[n] = _a34, _a34;
          }
        },
        add: function add(n, o) {
          void 0 !== t[n] && (t[n](o), delete t[n]), e[n] = Promise.resolve(o);
        },
        unload: function unload(t) {
          delete e[t];
        }
      };
    }();
  var YT;
  try {
    var _e171 = "__storage_test__";
    YT = window.localStorage, YT.setItem(_e171, _e171), YT.removeItem(_e171);
  } catch (e) {
    YT = function () {
      var e = {},
        t = [];
      var n = {
        getItem: function getItem(t) {
          return e[t] || null;
        },
        setItem: function setItem(n, o) {
          t.push(n), e[n] = String(o);
        },
        key: function key(e) {
          return t[e];
        },
        removeItem: function removeItem(n) {
          t = t.filter(function (e) {
            return e === n;
          }), delete e[n];
        },
        clear: function clear() {
          t = [], e = {};
        },
        length: 0
      };
      return Object.defineProperty(n, "length", {
        get: function get() {
          return t.length;
        },
        configurable: !1,
        enumerable: !1
      }), n;
    }();
  }
  var XT = {
      geom: {
        Rect: KT
      },
      util: {
        Delay: mg,
        Tools: Dt,
        VK: ef,
        URI: Hy,
        EventDispatcher: sT,
        Observable: iT,
        I18n: Ia,
        LocalStorage: YT,
        ImageUploader: function ImageUploader(e) {
          var t = Sw(),
            n = Aw(e, t);
          return {
            upload: function upload(t) {
              var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
              return n.upload(t, o ? Rw(e) : void 0);
            }
          };
        }
      },
      dom: {
        EventUtils: Ca,
        TreeWalker: zo,
        TextSeeker: ai,
        DOMUtils: Oa,
        ScriptLoader: Ba,
        RangeUtils: Df,
        Serializer: qC,
        StyleSheetLoader: Ls,
        ControlSelection: sf,
        BookmarkManager: Wm,
        Selection: HC,
        Event: Ca.Event
      },
      html: {
        Styles: ua,
        Entities: Zs,
        Node: Fg,
        Schema: ca,
        DomParser: tC,
        Writer: Kg,
        Serializer: Gg
      },
      Env: At,
      AddOnManager: Fa,
      Annotator: qm,
      Formatter: jw,
      UndoManager: $w,
      EditorCommands: XO,
      WindowManager: bw,
      NotificationManager: gw,
      EditorObservable: fT,
      Shortcuts: ST,
      Editor: OT,
      FocusManager: ug,
      EditorManager: zT,
      DOM: Oa.DOM,
      ScriptLoader: Ba.ScriptLoader,
      PluginManager: pw,
      ThemeManager: hw,
      ModelManager: iw,
      IconManager: aw,
      Resource: GT,
      FakeClipboard: jT,
      trim: Dt.trim,
      isArray: Dt.isArray,
      is: Dt.is,
      toArray: Dt.toArray,
      makeMap: Dt.makeMap,
      each: Dt.each,
      map: Dt.map,
      grep: Dt.grep,
      inArray: Dt.inArray,
      extend: Dt.extend,
      walk: Dt.walk,
      resolve: Dt.resolve,
      explode: Dt.explode,
      _addCacheSuffix: Dt._addCacheSuffix
    },
    QT = Dt.extend(zT, XT);
  (function (e) {
    window.tinymce = e, window.tinyMCE = e;
  })(QT), function (e) {
    if ("object" == ( false ? 0 : _typeof(module))) try {
      module.exports = e;
    } catch (e) {}
  }(QT);
}();

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!************************************!*\
  !*** ./bundle/Resources/js/app.js ***!
  \************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _public_tinymce_js_tinymce_tinymce_min__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../public/tinymce/js/tinymce/tinymce.min */ "./bundle/Resources/public/tinymce/js/tinymce/tinymce.min.js");
/* harmony import */ var _public_tinymce_js_tinymce_tinymce_min__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_public_tinymce_js_tinymce_tinymce_min__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _public_tinymce_js_tinymce_themes_silver_theme_min__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../public/tinymce/js/tinymce/themes/silver/theme.min */ "./bundle/Resources/public/tinymce/js/tinymce/themes/silver/theme.min.js");
/* harmony import */ var _public_tinymce_js_tinymce_themes_silver_theme_min__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_public_tinymce_js_tinymce_themes_silver_theme_min__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _public_tinymce_js_tinymce_plugins_link_plugin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../public/tinymce/js/tinymce/plugins/link/plugin */ "./bundle/Resources/public/tinymce/js/tinymce/plugins/link/plugin.js");
/* harmony import */ var _public_tinymce_js_tinymce_plugins_link_plugin__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_public_tinymce_js_tinymce_plugins_link_plugin__WEBPACK_IMPORTED_MODULE_2__);



var ready = function ready(callback) {
  if (document.readyState !== "loading") callback();else document.addEventListener("DOMContentLoaded", callback);
};
ready(function () {
  _public_tinymce_js_tinymce_tinymce_min__WEBPACK_IMPORTED_MODULE_0___default().init({
    selector: '.nghtmltext > textarea',
    base_url: '/bundles/netgenibexafieldtypehtmltext/tinymce/js/tinymce',
    statusbar: false,
    menubar: false,
    toolbar: 'undo redo | blocks | ' + 'bold italic underline strikethrough | alignleft aligncenter ' + 'alignright alignjustify | bullist numlist | outdent indent | ' + 'link unlink | ' + 'removeformat',
    plugins: 'link'
  });
});
})();

/******/ })()
;